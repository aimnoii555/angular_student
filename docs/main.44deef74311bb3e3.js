"use strict";(self.webpackChunkstudent=self.webpackChunkstudent||[]).push([[179],{2011:(ft,be,F)=>{F.d(be,{Dh:()=>le,GT:()=>ie,cc:()=>Te,hO:()=>Be,on:()=>H,pX:()=>ne,xv:()=>ue});var p=F(4650),Q=F(9260),O=F(2122);ft=F.hmd(ft);const re=["ngOnDestroy"],ne=(Ae,Se,Le,De={})=>new Proxy(Ae,{get:(Ie,xe)=>Le.runOutsideAngular(()=>{var Fe;if(Ae[xe])return!(null===(Fe=De?.spy)||void 0===Fe)&&Fe.get&&De.spy.get(xe,Ae[xe]),Ae[xe];if(re.indexOf(xe)>-1)return()=>{};const Pe=Se.toPromise().then(j=>{const Ee=j&&j[xe];return"function"==typeof Ee?Ee.bind(j):Ee&&Ee.then?Ee.then(Ue=>Le.run(()=>Ue)):Le.run(()=>Ee)});return new Proxy(()=>{},{get:(j,Ee)=>Pe[Ee],apply:(j,Ee,Ue)=>Pe.then(Ke=>{var gt;const Je=Ke&&Ke(...Ue);return!(null===(gt=De?.spy)||void 0===gt)&&gt.apply&&De.spy.apply(xe,Ue,Je),Je})})})}),ie=(Ae,Se)=>{Se.forEach(Le=>{Object.getOwnPropertyNames(Le.prototype||Le).forEach(De=>{Object.defineProperty(Ae.prototype,De,Object.getOwnPropertyDescriptor(Le.prototype||Le,De))})})};class fe{constructor(Se){return Se}}const le=new p.OlP("angularfire2.app.options"),ue=new p.OlP("angularfire2.app.name");function H(Ae,Se,Le){const Ie="object"==typeof Le&&Le||{};Ie.name=Ie.name||"string"==typeof Le&&Le||"[DEFAULT]";const Fe=Q.Z.apps.filter(Pe=>Pe&&Pe.name===Ie.name)[0]||Se.runOutsideAngular(()=>Q.Z.initializeApp(Ae,Ie));try{JSON.stringify(Ae)!==JSON.stringify(Fe.options)&&G("error",`${Fe.name} Firebase App already initialized with different options${ft.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new fe(Fe)}const G=(Ae,...Se)=>{(0,p.X6Q)()&&typeof console<"u"&&console[Ae](...Se)},Z={provide:fe,useFactory:H,deps:[le,p.R0b,[new p.FiY,ue]]};let Be=(()=>{class Ae{constructor(Le){Q.Z.registerVersion("angularfire",O.q4.full,"core"),Q.Z.registerVersion("angularfire",O.q4.full,"app-compat"),Q.Z.registerVersion("angular",p.q4F.full,Le.toString())}static initializeApp(Le,De){return{ngModule:Ae,providers:[{provide:le,useValue:Le},{provide:ue,useValue:De}]}}}return Ae.\u0275fac=function(Le){return new(Le||Ae)(p.LFG(p.Lbi))},Ae.\u0275mod=p.oAB({type:Ae}),Ae.\u0275inj=p.cJS({providers:[Z]}),Ae})();function Te(Ae,Se,Le,De,Ie){const[,xe,Fe]=globalThis.\u0275AngularfireInstanceCache.find(Pe=>Pe[0]===Ae)||[];if(xe)return function We(Ae,Se){try{return Ae.toString()===Se.toString()}catch{return Ae===Se}}(Ie,Fe)||(he("error",`${Se} was already initialized on the ${Le} Firebase App with different settings.${ut?" You may need to reload as Firebase is not HMR aware.":""}`),he("warn",{is:Ie,was:Fe})),xe;{const Pe=De();return globalThis.\u0275AngularfireInstanceCache.push([Ae,Pe,Ie]),Pe}}const ut=!!ft.hot,he=(Ae,...Se)=>{(0,p.X6Q)()&&typeof console<"u"&&console[Ae](...Se)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(ft,be,F)=>{F.d(be,{q4:()=>Xu,iC:()=>qa,fc:()=>gp,HU:()=>Hi,vb:()=>nn,JM:()=>Kr});var p=F(4650),Q=F(259),O=F(5861),re=F(9681),ne=F(2090),ie=F(4859),fe=F(1877),le=F(8766);const ue="@firebase/installations",H="0.6.1",Z=`w:${H}`,Be="FIS_v2",Se=new ne.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Le(D){return D instanceof ne.ZR&&D.code.includes("request-failed")}function De({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function Ie(D){return{token:D.token,requestStatus:2,expiresIn:Ke(D.expiresIn),creationTime:Date.now()}}function xe(D,T){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,O.Z)(function*(D,T){const V=(yield T.json()).error;return Se.create("request-failed",{requestName:D,serverCode:V.code,serverMessage:V.message,serverStatus:V.status})})).apply(this,arguments)}function Pe({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function j(D,{refreshToken:T}){const R=Pe(D);return R.append("Authorization",function gt(D){return`${Be} ${D}`}(T)),R}function Ee(D){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,O.Z)(function*(D){const T=yield D();return T.status>=500&&T.status<600?D():T})).apply(this,arguments)}function Ke(D){return Number(D.replace("s","000"))}function Je(D,T){return se.apply(this,arguments)}function se(){return(se=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:T},{fid:R}){const V=De(D),Y=Pe(D),ee=T.getImmediate({optional:!0});if(ee){const lt=yield ee.getHeartbeatsHeader();lt&&Y.append("x-firebase-client",lt)}const it={method:"POST",headers:Y,body:JSON.stringify({fid:R,authVersion:Be,appId:D.appId,sdkVersion:Z})},ct=yield Ee(()=>fetch(V,it));if(ct.ok){const lt=yield ct.json();return{fid:lt.fid||R,registrationStatus:2,refreshToken:lt.refreshToken,authToken:Ie(lt.authToken)}}throw yield xe("Create Installation",ct)})).apply(this,arguments)}function de(D){return new Promise(T=>{setTimeout(T,D)})}const Re=/^[cdef][\w-]{21}$/;function je(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const R=function Ye(D){return function we(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Re.test(R)?R:""}catch{return""}}function ze(D){return`${D.appName}!${D.appId}`}const pn=new Map;function Ct(D,T){const R=ze(D);Ot(R,T),function Dn(D,T){const R=function Tn(){return!xn&&"BroadcastChannel"in self&&(xn=new BroadcastChannel("[Firebase] FID Change"),xn.onmessage=D=>{Ot(D.data.key,D.data.fid)}),xn}();R&&R.postMessage({key:D,fid:T}),function Sn(){0===pn.size&&xn&&(xn.close(),xn=null)}()}(R,T)}function Ot(D,T){const R=pn.get(D);if(R)for(const V of R)V(T)}let xn=null;const yi="firebase-installations-store";let $r=null;function Fs(){return $r||($r=(0,le.X3)("firebase-installations-database",1,{upgrade:(D,T)=>{0===T&&D.createObjectStore(yi)}})),$r}function vn(D,T){return ni.apply(this,arguments)}function ni(){return(ni=(0,O.Z)(function*(D,T){const R=ze(D),Y=(yield Fs()).transaction(yi,"readwrite"),ee=Y.objectStore(yi),_e=yield ee.get(R);return yield ee.put(T,R),yield Y.done,(!_e||_e.fid!==T.fid)&&Ct(D,T.fid),T})).apply(this,arguments)}function yt(D){return us.apply(this,arguments)}function us(){return(us=(0,O.Z)(function*(D){const T=ze(D),V=(yield Fs()).transaction(yi,"readwrite");yield V.objectStore(yi).delete(T),yield V.done})).apply(this,arguments)}function ki(D,T){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,O.Z)(function*(D,T){const R=ze(D),Y=(yield Fs()).transaction(yi,"readwrite"),ee=Y.objectStore(yi),_e=yield ee.get(R),it=T(_e);return void 0===it?yield ee.delete(R):yield ee.put(it,R),yield Y.done,it&&(!_e||_e.fid!==it.fid)&&Ct(D,it.fid),it})).apply(this,arguments)}function Nr(D){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,O.Z)(function*(D){let T;const R=yield ki(D.appConfig,V=>{const Y=Pt(V),ee=wt(D,Y);return T=ee.registrationPromise,ee.installationEntry});return""===R.fid?{installationEntry:yield T}:{installationEntry:R,registrationPromise:T}})).apply(this,arguments)}function Pt(D){return Sr(D||{fid:je(),registrationStatus:0})}function wt(D,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(Se.create("app-offline"))};const R={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},V=function Tt(D,T){return ls.apply(this,arguments)}(D,R);return{installationEntry:R,registrationPromise:V}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:Mn(D)}:{installationEntry:T}}function ls(){return(ls=(0,O.Z)(function*(D,T){try{const R=yield Je(D,T);return vn(D.appConfig,R)}catch(R){throw Le(R)&&409===R.customData.serverCode?yield yt(D.appConfig):yield vn(D.appConfig,{fid:T.fid,registrationStatus:0}),R}})).apply(this,arguments)}function Mn(D){return An.apply(this,arguments)}function An(){return(An=(0,O.Z)(function*(D){let T=yield Pi(D.appConfig);for(;1===T.registrationStatus;)yield de(100),T=yield Pi(D.appConfig);if(0===T.registrationStatus){const{installationEntry:R,registrationPromise:V}=yield Nr(D);return V||R}return T})).apply(this,arguments)}function Pi(D){return ki(D,T=>{if(!T)throw Se.create("installation-not-found");return Sr(T)})}function Sr(D){return function ko(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function fn(D,T){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:T},R){const V=Jt(D,R),Y=j(D,R),ee=T.getImmediate({optional:!0});if(ee){const lt=yield ee.getHeartbeatsHeader();lt&&Y.append("x-firebase-client",lt)}const it={method:"POST",headers:Y,body:JSON.stringify({installation:{sdkVersion:Z,appId:D.appId}})},ct=yield Ee(()=>fetch(V,it));if(ct.ok)return Ie(yield ct.json());throw yield xe("Generate Auth Token",ct)})).apply(this,arguments)}function Jt(D,{fid:T}){return`${De(D)}/${T}/authTokens:generate`}function kr(D){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,O.Z)(function*(D,T=!1){let R;const V=yield ki(D.appConfig,ee=>{if(!Ut(ee))throw Se.create("not-registered");const _e=ee.authToken;if(!T&&$(_e))return ee;if(1===_e.requestStatus)return R=$e(D,T),ee;{if(!navigator.onLine)throw Se.create("app-offline");const it=K(ee);return R=xt(D,it),it}});return R?yield R:V.authToken})).apply(this,arguments)}function $e(D,T){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,O.Z)(function*(D,T){let R=yield tt(D.appConfig);for(;1===R.authToken.requestStatus;)yield de(100),R=yield tt(D.appConfig);const V=R.authToken;return 0===V.requestStatus?kr(D,T):V})).apply(this,arguments)}function tt(D){return ki(D,T=>{if(!Ut(T))throw Se.create("not-registered");return function ge(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function xt(D,T){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,O.Z)(function*(D,T){try{const R=yield fn(D,T),V=Object.assign(Object.assign({},T),{authToken:R});return yield vn(D.appConfig,V),R}catch(R){if(!Le(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const V=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield vn(D.appConfig,V)}else yield yt(D.appConfig);throw R}})).apply(this,arguments)}function Ut(D){return void 0!==D&&2===D.registrationStatus}function $(D){return 2===D.requestStatus&&!function B(D){const T=Date.now();return T<D.creationTime||D.creationTime+D.expiresIn<T+36e5}(D)}function K(D){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:T})}function ot(){return(ot=(0,O.Z)(function*(D){const T=D,{installationEntry:R,registrationPromise:V}=yield Nr(T);return V?V.catch(console.error):kr(T).catch(console.error),R.fid})).apply(this,arguments)}function Qt(){return(Qt=(0,O.Z)(function*(D,T=!1){const R=D;return yield Nn(R),(yield kr(R,T)).token})).apply(this,arguments)}function Nn(D){return Et.apply(this,arguments)}function Et(){return(Et=(0,O.Z)(function*(D){const{registrationPromise:T}=yield Nr(D);T&&(yield T)})).apply(this,arguments)}function bu(D){return Se.create("missing-app-config-values",{valueName:D})}const sc="installations",kn=D=>{const T=D.getProvider("app").getImmediate(),R=function Ta(D){if(!D||!D.options)throw bu("App Configuration");if(!D.name)throw bu("App Name");const T=["projectId","apiKey","appId"];for(const R of T)if(!D.options[R])throw bu(R);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(T);return{app:T,appConfig:R,heartbeatServiceProvider:(0,re._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},Wd=D=>{const T=D.getProvider("app").getImmediate(),R=(0,re._getProvider)(T,sc).getImmediate();return{getId:()=>function J(D){return ot.apply(this,arguments)}(R),getToken:Y=>function Bt(D){return Qt.apply(this,arguments)}(R,Y)}};(function oc(){(0,re._registerComponent)(new ie.wA(sc,kn,"PUBLIC")),(0,re._registerComponent)(new ie.wA("installations-internal",Wd,"PRIVATE"))})(),(0,re.registerVersion)(ue,H),(0,re.registerVersion)(ue,H,"esm2017");const Sa="@firebase/remote-config",Yn=new ne.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class to{constructor(T,R,V,Y){this.client=T,this.storage=R,this.storageCache=V,this.logger=Y}isCachedDataFresh(T,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const V=Date.now()-R,Y=V<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${V}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${Y}.`),Y}fetch(T){var R=this;return(0,O.Z)(function*(){const[V,Y]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(Y&&R.isCachedDataFresh(T.cacheMaxAgeMillis,V))return Y;T.eTag=Y&&Y.eTag;const ee=yield R.client.fetch(T),_e=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ee.status&&_e.push(R.storage.setLastSuccessfulFetchResponse(ee)),yield Promise.all(_e),ee})()}}function Li(D=navigator){return D.languages&&D.languages[0]||D.language}class Us{constructor(T,R,V,Y,ee,_e){this.firebaseInstallations=T,this.sdkVersion=R,this.namespace=V,this.projectId=Y,this.apiKey=ee,this.appId=_e}fetch(T){var R=this;return(0,O.Z)(function*(){const[V,Y]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),_e=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,it={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},ct={sdk_version:R.sdkVersion,app_instance_id:V,app_instance_id_token:Y,app_id:R.appId,language_code:Li()},lt={method:"POST",headers:it,body:JSON.stringify(ct)},Ft=fetch(_e,lt),Dt=new Promise((ci,di)=>{T.signal.addEventListener(()=>{const Zr=new Error("The operation was aborted.");Zr.name="AbortError",di(Zr)})});let li;try{yield Promise.race([Ft,Dt]),li=yield Ft}catch(ci){let di="fetch-client-network";throw"AbortError"===ci?.name&&(di="fetch-timeout"),Yn.create(di,{originalErrorMessage:ci?.message})}let $n=li.status;const vs=li.headers.get("ETag")||void 0;let rl,ia;if(200===li.status){let ci;try{ci=yield li.json()}catch(di){throw Yn.create("fetch-client-parse",{originalErrorMessage:di?.message})}rl=ci.entries,ia=ci.state}if("INSTANCE_STATE_UNSPECIFIED"===ia?$n=500:"NO_CHANGE"===ia?$n=304:("NO_TEMPLATE"===ia||"EMPTY_CONFIG"===ia)&&(rl={}),304!==$n&&200!==$n)throw Yn.create("fetch-status",{httpStatus:$n});return{status:$n,eTag:vs,config:rl}})()}}class Xi{constructor(T,R){this.client=T,this.storage=R}fetch(T){var R=this;return(0,O.Z)(function*(){const V=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(T,V)})()}attemptFetch(T,{throttleEndTimeMillis:R,backoffCount:V}){var Y=this;return(0,O.Z)(function*(){yield function ds(D,T){return new Promise((R,V)=>{const Y=Math.max(T-Date.now(),0),ee=setTimeout(R,Y);D.addEventListener(()=>{clearTimeout(ee),V(Yn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,R);try{const ee=yield Y.client.fetch(T);return yield Y.storage.deleteThrottleMetadata(),ee}catch(ee){if(!function gn(D){if(!(D instanceof ne.ZR&&D.customData))return!1;const T=Number(D.customData.httpStatus);return 429===T||500===T||503===T||504===T}(ee))throw ee;const _e={throttleEndTimeMillis:Date.now()+(0,ne.$s)(V),backoffCount:V+1};return yield Y.storage.setThrottleMetadata(_e),Y.attemptFetch(T,_e)}})()}}class Vo{constructor(T,R,V,Y,ee){this.app=T,this._client=R,this._storageCache=V,this._storage=Y,this._logger=ee,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function no(D,T){const R=D.target.error||void 0;return Yn.create(T,{originalErrorMessage:R&&R?.message})}const Gr="app_namespace_store";class Vi{constructor(T,R,V,Y=function ri(){return new Promise((D,T)=>{try{const R=indexedDB.open("firebase_remote_config",1);R.onerror=V=>{T(no(V,"storage-open"))},R.onsuccess=V=>{D(V.target.result)},R.onupgradeneeded=V=>{0===V.oldVersion&&V.target.result.createObjectStore(Gr,{keyPath:"compositeKey"})}}catch(R){T(Yn.create("storage-open",{originalErrorMessage:R?.message}))}})}()){this.appId=T,this.appName=R,this.namespace=V,this.openDbPromise=Y}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var R=this;return(0,O.Z)(function*(){const V=yield R.openDbPromise;return new Promise((Y,ee)=>{const it=V.transaction([Gr],"readonly").objectStore(Gr),ct=R.createCompositeKey(T);try{const lt=it.get(ct);lt.onerror=Ft=>{ee(no(Ft,"storage-get"))},lt.onsuccess=Ft=>{const Dt=Ft.target.result;Y(Dt?Dt.value:void 0)}}catch(lt){ee(Yn.create("storage-get",{originalErrorMessage:lt?.message}))}})})()}set(T,R){var V=this;return(0,O.Z)(function*(){const Y=yield V.openDbPromise;return new Promise((ee,_e)=>{const ct=Y.transaction([Gr],"readwrite").objectStore(Gr),lt=V.createCompositeKey(T);try{const Ft=ct.put({compositeKey:lt,value:R});Ft.onerror=Dt=>{_e(no(Dt,"storage-set"))},Ft.onsuccess=()=>{ee()}}catch(Ft){_e(Yn.create("storage-set",{originalErrorMessage:Ft?.message}))}})})()}delete(T){var R=this;return(0,O.Z)(function*(){const V=yield R.openDbPromise;return new Promise((Y,ee)=>{const it=V.transaction([Gr],"readwrite").objectStore(Gr),ct=R.createCompositeKey(T);try{const lt=it.delete(ct);lt.onerror=Ft=>{ee(no(Ft,"storage-delete"))},lt.onsuccess=()=>{Y()}}catch(lt){ee(Yn.create("storage-delete",{originalErrorMessage:lt?.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class xa{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,O.Z)(function*(){const R=T.storage.getLastFetchStatus(),V=T.storage.getLastSuccessfulFetchTimestampMillis(),Y=T.storage.getActiveConfig(),ee=yield R;ee&&(T.lastFetchStatus=ee);const _e=yield V;_e&&(T.lastSuccessfulFetchTimestampMillis=_e);const it=yield Y;it&&(T.activeConfig=it)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function Ra(){return Jf.apply(this,arguments)}function Jf(){return(Jf=(0,O.Z)(function*(){if(!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch{return!1}})).apply(this,arguments)}!function Ui(){(0,re._registerComponent)(new ie.wA("remote-config",function D(T,{instanceIdentifier:R}){const V=T.getProvider("app").getImmediate(),Y=T.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Yn.create("registration-window");if(!(0,ne.hl)())throw Yn.create("indexed-db-unavailable");const{projectId:ee,apiKey:_e,appId:it}=V.options;if(!ee)throw Yn.create("registration-project-id");if(!_e)throw Yn.create("registration-api-key");if(!it)throw Yn.create("registration-app-id");const ct=new Vi(it,V.name,R=R||"firebase"),lt=new xa(ct),Ft=new fe.Yd(Sa);Ft.logLevel=fe.in.ERROR;const Dt=new Us(Y,re.SDK_VERSION,R,ee,_e,it),li=new Xi(Dt,ct),$n=new to(li,ct,lt,Ft),vs=new Vo(V,$n,lt,ct,Ft);return function Pn(D){const T=(0,ne.m9)(D);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(vs),vs},"PUBLIC").setMultipleInstances(!0)),(0,re.registerVersion)(Sa,"0.4.1"),(0,re.registerVersion)(Sa,"0.4.1","esm2017")}();const cc="/firebase-messaging-sw.js",hs="/firebase-cloud-messaging-push-scope",Uo="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",dc="google.c.a.c_id",ep="google.c.a.c_l",tp="google.c.a.ts",pm="google.c.a.e";var ro=(()=>{return(D=ro||(ro={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",ro;var D})();function Ji(D){const T=new Uint8Array(D);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function gm(D){const R=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),V=atob(R),Y=new Uint8Array(V.length);for(let ee=0;ee<V.length;++ee)Y[ee]=V.charCodeAt(ee);return Y}const hc="fcm_token_details_db",Wr="fcm_token_object_Store";function pc(D){return Kd.apply(this,arguments)}function Kd(){return Kd=(0,O.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ee=>ee.name).includes(hc))return null;let T=null;return(yield(0,le.X3)(hc,5,{upgrade:(V=(0,O.Z)(function*(Y,ee,_e,it){var ct;if(ee<2||!Y.objectStoreNames.contains(Wr))return;const lt=it.objectStore(Wr),Ft=yield lt.index("fcmSenderId").get(D);if(yield lt.clear(),Ft)if(2===ee){const Dt=Ft;if(!Dt.auth||!Dt.p256dh||!Dt.endpoint)return;T={token:Dt.fcmToken,createTime:null!==(ct=Dt.createTime)&&void 0!==ct?ct:Date.now(),subscriptionOptions:{auth:Dt.auth,p256dh:Dt.p256dh,endpoint:Dt.endpoint,swScope:Dt.swScope,vapidKey:"string"==typeof Dt.vapidKey?Dt.vapidKey:Ji(Dt.vapidKey)}}}else if(3===ee){const Dt=Ft;T={token:Dt.fcmToken,createTime:Dt.createTime,subscriptionOptions:{auth:Ji(Dt.auth),p256dh:Ji(Dt.p256dh),endpoint:Dt.endpoint,swScope:Dt.swScope,vapidKey:Ji(Dt.vapidKey)}}}else if(4===ee){const Dt=Ft;T={token:Dt.fcmToken,createTime:Dt.createTime,subscriptionOptions:{auth:Ji(Dt.auth),p256dh:Ji(Dt.p256dh),endpoint:Dt.endpoint,swScope:Dt.swScope,vapidKey:Ji(Dt.vapidKey)}}}}),function(ee,_e,it,ct){return V.apply(this,arguments)})})).close(),yield(0,le.Lj)(hc),yield(0,le.Lj)("fcm_vapid_details_db"),yield(0,le.Lj)("undefined"),np(T)?T:null;var V}),Kd.apply(this,arguments)}function np(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:T}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const so="firebase-messaging-store";let Tu=null;function jo(){return Tu||(Tu=(0,le.X3)("firebase-messaging-database",1,{upgrade:(D,T)=>{0===T&&D.createObjectStore(so)}})),Tu}function Su(D){return $o.apply(this,arguments)}function $o(){return($o=(0,O.Z)(function*(D){const T=Go(D),V=yield(yield jo()).transaction(so).objectStore(so).get(T);if(V)return V;{const Y=yield pc(D.appConfig.senderId);if(Y)return yield oo(D,Y),Y}})).apply(this,arguments)}function oo(D,T){return Na.apply(this,arguments)}function Na(){return(Na=(0,O.Z)(function*(D,T){const R=Go(D),Y=(yield jo()).transaction(so,"readwrite");return yield Y.objectStore(so).put(T,R),yield Y.done,T})).apply(this,arguments)}function Zd(D){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,O.Z)(function*(D){const T=Go(D),V=(yield jo()).transaction(so,"readwrite");yield V.objectStore(so).delete(T),yield V.done})).apply(this,arguments)}function Go({appConfig:D}){return D.appId}const Ln=new ne.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Au(D,T){return jn.apply(this,arguments)}function jn(){return(jn=(0,O.Z)(function*(D,T){const R=yield uo(D),V=ka(T),Y={method:"POST",headers:R,body:JSON.stringify(V)};let ee;try{ee=yield(yield fetch(Wo(D.appConfig),Y)).json()}catch(_e){throw Ln.create("token-subscribe-failed",{errorInfo:_e?.toString()})}if(ee.error)throw Ln.create("token-subscribe-failed",{errorInfo:ee.error.message});if(!ee.token)throw Ln.create("token-subscribe-no-token");return ee.token})).apply(this,arguments)}function xu(D,T){return ao.apply(this,arguments)}function ao(){return(ao=(0,O.Z)(function*(D,T){const R=yield uo(D),V=ka(T.subscriptionOptions),Y={method:"PATCH",headers:R,body:JSON.stringify(V)};let ee;try{ee=yield(yield fetch(`${Wo(D.appConfig)}/${T.token}`,Y)).json()}catch(_e){throw Ln.create("token-update-failed",{errorInfo:_e?.toString()})}if(ee.error)throw Ln.create("token-update-failed",{errorInfo:ee.error.message});if(!ee.token)throw Ln.create("token-update-no-token");return ee.token})).apply(this,arguments)}function Xn(D,T){return gc.apply(this,arguments)}function gc(){return(gc=(0,O.Z)(function*(D,T){const V={method:"DELETE",headers:yield uo(D)};try{const ee=yield(yield fetch(`${Wo(D.appConfig)}/${T}`,V)).json();if(ee.error)throw Ln.create("token-unsubscribe-failed",{errorInfo:ee.error.message})}catch(Y){throw Ln.create("token-unsubscribe-failed",{errorInfo:Y?.toString()})}})).apply(this,arguments)}function Wo({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function uo(D){return yr.apply(this,arguments)}function yr(){return(yr=(0,O.Z)(function*({appConfig:D,installations:T}){const R=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function ka({p256dh:D,auth:T,endpoint:R,vapidKey:V}){const Y={web:{endpoint:R,auth:T,p256dh:D}};return V!==Uo&&(Y.web.applicationPubKey=V),Y}const zo=6048e5;function Ru(D){return fs.apply(this,arguments)}function fs(){return(fs=(0,O.Z)(function*(D){const T=yield mc(D.swRegistration,D.vapidKey),R={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:T.endpoint,auth:Ji(T.getKey("auth")),p256dh:Ji(T.getKey("p256dh"))},V=yield Su(D.firebaseDependencies);if(V){if(ku(V.subscriptionOptions,R))return Date.now()>=V.createTime+zo?kt(D,{token:V.token,createTime:Date.now(),subscriptionOptions:R}):V.token;try{yield Xn(D.firebaseDependencies,V.token)}catch(Y){console.warn(Y)}return Yd(D.firebaseDependencies,R)}return Yd(D.firebaseDependencies,R)})).apply(this,arguments)}function Pa(D){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,O.Z)(function*(D){const T=yield Su(D.firebaseDependencies);T&&(yield Xn(D.firebaseDependencies,T.token),yield Zd(D.firebaseDependencies));const R=yield D.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function kt(D,T){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,O.Z)(function*(D,T){try{const R=yield xu(D.firebaseDependencies,T),V=Object.assign(Object.assign({},T),{token:R,createTime:Date.now()});return yield oo(D.firebaseDependencies,V),R}catch(R){throw yield Pa(D),R}})).apply(this,arguments)}function Yd(D,T){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,O.Z)(function*(D,T){const V={token:yield Au(D,T),createTime:Date.now(),subscriptionOptions:T};return yield oo(D,V),V.token})).apply(this,arguments)}function mc(D,T){return _c.apply(this,arguments)}function _c(){return(_c=(0,O.Z)(function*(D,T){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:gm(T)})})).apply(this,arguments)}function ku(D,T){return T.vapidKey===D.vapidKey&&T.endpoint===D.endpoint&&T.auth===D.auth&&T.p256dh===D.p256dh}function rp(D){const T={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function yc(D,T){if(!T.notification)return;D.notification={};const R=T.notification.title;R&&(D.notification.title=R);const V=T.notification.body;V&&(D.notification.body=V);const Y=T.notification.image;Y&&(D.notification.image=Y);const ee=T.notification.icon;ee&&(D.notification.icon=ee)}(T,D),function me(D,T){T.data&&(D.data=T.data)}(T,D),function tn(D,T){var R,V,Y,ee,_e;if(!(T.fcmOptions||null!==(R=T.notification)&&void 0!==R&&R.click_action))return;D.fcmOptions={};const it=null!==(Y=null===(V=T.fcmOptions)||void 0===V?void 0:V.link)&&void 0!==Y?Y:null===(ee=T.notification)||void 0===ee?void 0:ee.click_action;it&&(D.fcmOptions.link=it);const ct=null===(_e=T.fcmOptions)||void 0===_e?void 0:_e.analytics_label;ct&&(D.fcmOptions.analyticsLabel=ct)}(T,D),T}function vc(D){return"object"==typeof D&&!!D&&dc in D}function Qd(D,T){const R=[];for(let V=0;V<D.length;V++)R.push(D.charAt(V)),V<T.length&&R.push(T.charAt(V));return R.join("")}function Fa(D){return Ln.create("missing-app-config-values",{valueName:D})}Qd("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Qd("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Pu{constructor(T,R,V){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Y=function Ar(D){if(!D||!D.options)throw Fa("App Configuration Object");if(!D.name)throw Fa("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:R}=D;for(const V of T)if(!R[V])throw Fa(V);return{appName:D.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:Y,installations:R,analyticsProvider:V}}_delete(){return Promise.resolve()}}function oi(D){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,O.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(cc,{scope:hs}),D.swRegistration.update().catch(()=>{})}catch(T){throw Ln.create("failed-service-worker-registration",{browserErrorMessage:T?.message})}})).apply(this,arguments)}function Fu(D,T){return Xd.apply(this,arguments)}function Xd(){return(Xd=(0,O.Z)(function*(D,T){if(!T&&!D.swRegistration&&(yield oi(D)),T||!D.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw Ln.create("invalid-sw-registration");D.swRegistration=T}})).apply(this,arguments)}function wc(D,T){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,O.Z)(function*(D,T){T?D.vapidKey=T:D.vapidKey||(D.vapidKey=Uo)})).apply(this,arguments)}function ai(){return(ai=(0,O.Z)(function*(D,T){if(!navigator)throw Ln.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Ln.create("permission-blocked");return yield wc(D,T?.vapidKey),yield Fu(D,T?.serviceWorkerRegistration),Ru(D)})).apply(this,arguments)}function Bs(D,T,R){return lo.apply(this,arguments)}function lo(){return(lo=(0,O.Z)(function*(D,T,R){const V=es(T);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(V,{message_id:R[dc],message_name:R[ep],message_time:R[tp],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function es(D){switch(D){case ro.NOTIFICATION_CLICKED:return"notification_open";case ro.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function La(){return(La=(0,O.Z)(function*(D,T){const R=T.data;if(!R.isFirebaseMessaging)return;D.onMessageHandler&&R.messageType===ro.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(rp(R)):D.onMessageHandler.next(rp(R)));const V=R.data;vc(V)&&"1"===V[pm]&&(yield Bs(D,R.messageType,V))})).apply(this,arguments)}const eh="@firebase/messaging",Ic=D=>{const T=new Pu(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function Jd(D,T){return La.apply(this,arguments)}(T,R)),T},ps=D=>{const T=D.getProvider("messaging").getImmediate();return{getToken:V=>function ur(D,T){return ai.apply(this,arguments)}(T,V)}};function Cc(){return nh.apply(this,arguments)}function nh(){return(nh=(0,O.Z)(function*(){try{yield(0,ne.eu)()}catch{return!1}return typeof window<"u"&&(0,ne.hl)()&&(0,ne.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function th(){(0,re._registerComponent)(new ie.wA("messaging",Ic,"PUBLIC")),(0,re._registerComponent)(new ie.wA("messaging-internal",ps,"PRIVATE")),(0,re.registerVersion)(eh,"0.12.1"),(0,re.registerVersion)(eh,"0.12.1","esm2017")}();const rh="analytics",zr="firebase_id",Ko="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Dc="https://www.googletagmanager.com/gtag/js",xr=new fe.Yd("@firebase/analytics");function op(D){return Promise.all(D.map(T=>T.catch(R=>R)))}function ym(D,T){const R=document.createElement("script");R.src=`${Dc}?l=${D}&id=${T}`,R.async=!0,document.head.appendChild(R)}function Va(D,T,R,V,Y,ee){return js.apply(this,arguments)}function js(){return(js=(0,O.Z)(function*(D,T,R,V,Y,ee){const _e=V[Y];try{if(_e)yield T[_e];else{const ct=(yield op(R)).find(lt=>lt.measurementId===Y);ct&&(yield T[ct.appId])}}catch(it){xr.error(it)}D("config",Y,ee)})).apply(this,arguments)}function Zo(D,T,R,V,Y){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,O.Z)(function*(D,T,R,V,Y){try{let ee=[];if(Y&&Y.send_to){let _e=Y.send_to;Array.isArray(_e)||(_e=[_e]);const it=yield op(R);for(const ct of _e){const lt=it.find(Dt=>Dt.measurementId===ct),Ft=lt&&T[lt.appId];if(!Ft){ee=[];break}ee.push(Ft)}}0===ee.length&&(ee=Object.values(T)),yield Promise.all(ee),D("event",V,Y||{})}catch(ee){xr.error(ee)}})).apply(this,arguments)}function Yo(D){const T=window.document.getElementsByTagName("script");for(const R of Object.values(T))if(R.src&&R.src.includes(Dc)&&R.src.includes(D))return R;return null}const Ii=new ne.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ua=new class co{constructor(T={},R=1e3){this.throttleMetadata=T,this.intervalMillis=R}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,R){this.throttleMetadata[T]=R}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function Bu(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function Ba(D){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,O.Z)(function*(D){var T;const{appId:R,apiKey:V}=D,Y={method:"GET",headers:Bu(V)},ee=Ko.replace("{app-id}",R),_e=yield fetch(ee,Y);if(200!==_e.status&&304!==_e.status){let it="";try{const ct=yield _e.json();null!==(T=ct.error)&&void 0!==T&&T.message&&(it=ct.error.message)}catch{}throw Ii.create("config-fetch-failed",{httpStatus:_e.status,responseMessage:it})}return _e.json()})).apply(this,arguments)}function wn(D){return ja.apply(this,arguments)}function ja(){return(ja=(0,O.Z)(function*(D,T=Ua,R){const{appId:V,apiKey:Y,measurementId:ee}=D.options;if(!V)throw Ii.create("no-app-id");if(!Y){if(ee)return{measurementId:ee,appId:V};throw Ii.create("no-api-key")}const _e=T.getThrottleMetadata(V)||{backoffCount:0,throttleEndTimeMillis:Date.now()},it=new ju;return setTimeout((0,O.Z)(function*(){it.abort()}),void 0!==R?R:6e4),ho({appId:V,apiKey:Y,measurementId:ee},_e,it,T)})).apply(this,arguments)}function ho(D,T,R){return gs.apply(this,arguments)}function gs(){return(gs=(0,O.Z)(function*(D,{throttleEndTimeMillis:T,backoffCount:R},V,Y=Ua){var ee;const{appId:_e,measurementId:it}=D;try{yield $a(V,T)}catch(ct){if(it)return xr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${it} provided in the "measurementId" field in the local Firebase config. [${ct?.message}]`),{appId:_e,measurementId:it};throw ct}try{const ct=yield Ba(D);return Y.deleteThrottleMetadata(_e),ct}catch(ct){const lt=ct;if(!xc(lt)){if(Y.deleteThrottleMetadata(_e),it)return xr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${it} provided in the "measurementId" field in the local Firebase config. [${lt?.message}]`),{appId:_e,measurementId:it};throw ct}const Ft=503===Number(null===(ee=lt?.customData)||void 0===ee?void 0:ee.httpStatus)?(0,ne.$s)(R,Y.intervalMillis,30):(0,ne.$s)(R,Y.intervalMillis),Dt={throttleEndTimeMillis:Date.now()+Ft,backoffCount:R+1};return Y.setThrottleMetadata(_e,Dt),xr.debug(`Calling attemptFetch again in ${Ft} millis`),ho(D,Dt,V,Y)}})).apply(this,arguments)}function $a(D,T){return new Promise((R,V)=>{const Y=Math.max(T-Date.now(),0),ee=setTimeout(R,Y);D.addEventListener(()=>{clearTimeout(ee),V(Ii.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function xc(D){if(!(D instanceof ne.ZR&&D.customData))return!1;const T=Number(D.customData.httpStatus);return 429===T||500===T||503===T||504===T}class ju{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let $u,mo;function $s(){return($s=(0,O.Z)(function*(D,T,R,V,Y){if(Y&&Y.global)D("event",R,V);else{const ee=yield T;D("event",R,Object.assign(Object.assign({},V),{send_to:ee}))}})).apply(this,arguments)}function Wu(D){mo=D}function Ha(D){$u=D}function Mc(){return sh.apply(this,arguments)}function sh(){return(sh=(0,O.Z)(function*(){if(!(0,ne.hl)())return xr.warn(Ii.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ne.eu)()}catch(D){return xr.warn(Ii.create("indexeddb-unavailable",{errorInfo:D?.toString()}).message),!1}return!0})).apply(this,arguments)}function ea(){return(ea=(0,O.Z)(function*(D,T,R,V,Y,ee,_e){var it;const ct=wn(D);ct.then($n=>{R[$n.measurementId]=$n.appId,D.options.measurementId&&$n.measurementId!==D.options.measurementId&&xr.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${$n.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch($n=>xr.error($n)),T.push(ct);const lt=Mc().then($n=>{if($n)return V.getId()}),[Ft,Dt]=yield Promise.all([ct,lt]);Yo(ee)||ym(ee,Ft.measurementId),mo&&(Y("consent","default",mo),Wu(void 0)),Y("js",new Date);const li=null!==(it=_e?.config)&&void 0!==it?it:{};return li.origin="firebase",li.update=!0,null!=Dt&&(li[zr]=Dt),Y("config",Ft.measurementId,li),$u&&(Y("set",$u),Ha(void 0)),Ft.measurementId})).apply(this,arguments)}class ap{constructor(T){this.app=T}_delete(){return delete ms[this.app.options.appId],Promise.resolve()}}let ms={},Ga=[];const zu={};let kc,ji,Bi="dataLayer",$i=!1;function qu(D,T,R){!function Pc(){const D=[];if((0,ne.ru)()&&D.push("This is a browser extension environment."),(0,ne.zI)()||D.push("Cookies are not available."),D.length>0){const T=D.map((V,Y)=>`(${Y+1}) ${V}`).join(" "),R=Ii.create("invalid-analytics-context",{errorInfo:T});xr.warn(R.message)}}();const V=D.options.appId;if(!V)throw Ii.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw Ii.create("no-api-key");xr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ms[V])throw Ii.create("already-exists",{id:V});if(!$i){!function vm(D){let T=[];Array.isArray(window[D])?T=window[D]:window[D]=T}(Bi);const{wrappedGtag:ee,gtagCore:_e}=function Uu(D,T,R,V,Y){let ee=function(..._e){window[V].push(arguments)};return window[Y]&&"function"==typeof window[Y]&&(ee=window[Y]),window[Y]=function Tc(D,T,R,V){function ee(){return(ee=(0,O.Z)(function*(_e,it,ct){try{"event"===_e?yield Zo(D,T,R,it,ct):"config"===_e?yield Va(D,T,R,V,it,ct):"consent"===_e?D("consent","update",ct):D("set",it)}catch(lt){xr.error(lt)}})).apply(this,arguments)}return function Y(_e,it,ct){return ee.apply(this,arguments)}}(ee,D,T,R),{gtagCore:ee,wrappedGtag:window[Y]}}(ms,Ga,zu,Bi,"gtag");ji=ee,kc=_e,$i=!0}return ms[V]=function _o(D,T,R,V,Y,ee,_e){return ea.apply(this,arguments)}(D,Ga,zu,T,kc,Bi,R),new ap(D)}function Oc(){return yo.apply(this,arguments)}function yo(){return(yo=(0,O.Z)(function*(){if((0,ne.ru)()||!(0,ne.zI)()||!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch{return!1}})).apply(this,arguments)}const Xt="@firebase/analytics";!function wm(){(0,re._registerComponent)(new ie.wA(rh,(T,{options:R})=>qu(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,re._registerComponent)(new ie.wA("analytics-internal",function D(T){try{const R=T.getProvider(rh).getImmediate();return{logEvent:(V,Y,ee)=>function Ky(D,T,R,V){D=(0,ne.m9)(D),function Hu(D,T,R,V,Y){return $s.apply(this,arguments)}(ji,ms[D.app.options.appId],T,R,V).catch(Y=>xr.error(Y))}(R,V,Y,ee)}}catch(R){throw Ii.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,re.registerVersion)(Xt,"0.9.1"),(0,re.registerVersion)(Xt,"0.9.1","esm2017")}();var Zu=F(4408),dp=F(7565);const hp=new class lh extends dp.v{}(class cp extends Zu.o{constructor(T,R){super(T,R),this.scheduler=T,this.work=R}schedule(T,R=0){return R>0?super.schedule(T,R):(this.delay=R,this.state=T,this.scheduler.flush(this),this)}execute(T,R){return R>0||this.closed?super.execute(T,R):this._execute(T,R)}requestAsyncId(T,R,V=0){return null!=V&&V>0||null==V&&this.delay>0?super.requestAsyncId(T,R,V):(T.flush(this),0)}});var fp=F(4986),Vc=F(8505),En=F(5363),Qu=F(9468);const Xu=new p.GfV("7.5.0"),Uc="__angularfire_symbol__analyticsIsSupportedValue",ui="__angularfire_symbol__analyticsIsSupported",ts="__angularfire_symbol__remoteConfigIsSupportedValue",Ju="__angularfire_symbol__remoteConfigIsSupported",za="__angularfire_symbol__messagingIsSupportedValue",na="__angularfire_symbol__messagingIsSupported";function Kr(D,T,R){if(T){if(1===T.length)return T[0];const ee=T.filter(_e=>_e.app===R);if(1===ee.length)return ee[0]}return R.container.getProvider(D).getImmediate({optional:!0})}globalThis[ui]||(globalThis[ui]=Oc().then(D=>globalThis[Uc]=D).catch(()=>globalThis[Uc]=!1)),globalThis[na]||(globalThis[na]=Cc().then(D=>globalThis[za]=D).catch(()=>globalThis[za]=!1)),globalThis[Ju]||(globalThis[Ju]=Ra().then(D=>globalThis[ts]=D).catch(()=>globalThis[ts]=!1));const nn=(D,T)=>{const R=T?[T]:(0,Q.C6)(),V=[];return R.forEach(Y=>{Y.container.getProvider(D).instances.forEach(_e=>{V.includes(_e)||V.push(_e)})}),V};function vr(){}class rt{constructor(T,R=hp){this.zone=T,this.delegate=R}now(){return this.delegate.now()}schedule(T,R,V){const Y=this.zone;return this.delegate.schedule(function(_e){Y.runGuarded(()=>{T.apply(this,[_e])})},R,V)}}class _s{constructor(T){this.zone=T,this.task=null}call(T,R){const V=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",vr,{},vr,vr)),R.pipe((0,Vc.b)({next:V,complete:V,error:V})).subscribe(T).add(V)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Hi=(()=>{class D{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new rt(Zone.current)),this.insideAngular=R.run(()=>new rt(Zone.current,fp.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(R){return new(R||D)(p.LFG(p.R0b))},D.\u0275prov=p.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function ys(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function gp(D){return D.pipe((0,En.Q)(ys().outsideAngular))}function qa(D){return ys(),function Ka(D){return function(R){return(R=R.lift(new _s(D.ngZone))).pipe((0,Qu.R)(D.outsideAngular),(0,En.Q)(D.insideAngular))}}(ys())(D)}},2090:(ft,be,F)=>{F.d(be,{$s:()=>tt,BH:()=>Ie,DV:()=>yi,Dv:()=>Mn,G6:()=>we,GJ:()=>ti,L:()=>le,LL:()=>pn,Pz:()=>De,Sg:()=>xe,UG:()=>j,UI:()=>Fs,US:()=>ie,Wj:()=>Sr,Wl:()=>Ot,Yr:()=>de,ZB:()=>G,ZR:()=>ze,aH:()=>Le,b$:()=>Ke,cI:()=>et,dS:()=>fn,eu:()=>Ve,g5:()=>O,gK:()=>An,gQ:()=>Nr,h$:()=>fe,hl:()=>Re,hu:()=>Q,jU:()=>Ee,lb:()=>ko,m9:()=>Ut,ne:()=>Ls,p$:()=>H,pd:()=>Rn,r3:()=>Os,ru:()=>Ue,tV:()=>ue,uI:()=>Pe,ug:()=>Yi,vZ:()=>vn,w1:()=>Je,w9:()=>Sn,xO:()=>us,xb:()=>$r,z$:()=>Fe,zI:()=>je,zd:()=>ki});const Q=function($,B){if(!$)throw O(B)},O=function($){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+$)},re=function($){const B=[];let K=0;for(let ge=0;ge<$.length;ge++){let J=$.charCodeAt(ge);J<128?B[K++]=J:J<2048?(B[K++]=J>>6|192,B[K++]=63&J|128):55296==(64512&J)&&ge+1<$.length&&56320==(64512&$.charCodeAt(ge+1))?(J=65536+((1023&J)<<10)+(1023&$.charCodeAt(++ge)),B[K++]=J>>18|240,B[K++]=J>>12&63|128,B[K++]=J>>6&63|128,B[K++]=63&J|128):(B[K++]=J>>12|224,B[K++]=J>>6&63|128,B[K++]=63&J|128)}return B},ie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray($,B){if(!Array.isArray($))throw Error("encodeByteArray takes an array as a parameter");this.init_();const K=B?this.byteToCharMapWebSafe_:this.byteToCharMap_,ge=[];for(let J=0;J<$.length;J+=3){const ot=$[J],Bt=J+1<$.length,Qt=Bt?$[J+1]:0,Nn=J+2<$.length,Et=Nn?$[J+2]:0;let or=(15&Qt)<<2|Et>>6,Po=63&Et;Nn||(Po=64,Bt||(or=64)),ge.push(K[ot>>2],K[(3&ot)<<4|Qt>>4],K[or],K[Po])}return ge.join("")},encodeString($,B){return this.HAS_NATIVE_SUPPORT&&!B?btoa($):this.encodeByteArray(re($),B)},decodeString($,B){return this.HAS_NATIVE_SUPPORT&&!B?atob($):function($){const B=[];let K=0,ge=0;for(;K<$.length;){const J=$[K++];if(J<128)B[ge++]=String.fromCharCode(J);else if(J>191&&J<224){const ot=$[K++];B[ge++]=String.fromCharCode((31&J)<<6|63&ot)}else if(J>239&&J<365){const Nn=((7&J)<<18|(63&$[K++])<<12|(63&$[K++])<<6|63&$[K++])-65536;B[ge++]=String.fromCharCode(55296+(Nn>>10)),B[ge++]=String.fromCharCode(56320+(1023&Nn))}else{const ot=$[K++],Bt=$[K++];B[ge++]=String.fromCharCode((15&J)<<12|(63&ot)<<6|63&Bt)}}return B.join("")}(this.decodeStringToByteArray($,B))},decodeStringToByteArray($,B){this.init_();const K=B?this.charToByteMapWebSafe_:this.charToByteMap_,ge=[];for(let J=0;J<$.length;){const ot=K[$.charAt(J++)],Qt=J<$.length?K[$.charAt(J)]:0;++J;const Et=J<$.length?K[$.charAt(J)]:64;++J;const qt=J<$.length?K[$.charAt(J)]:64;if(++J,null==ot||null==Qt||null==Et||null==qt)throw Error();ge.push(ot<<2|Qt>>4),64!==Et&&(ge.push(Qt<<4&240|Et>>2),64!==qt&&ge.push(Et<<6&192|qt))}return ge},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let $=0;$<this.ENCODED_VALS.length;$++)this.byteToCharMap_[$]=this.ENCODED_VALS.charAt($),this.charToByteMap_[this.byteToCharMap_[$]]=$,this.byteToCharMapWebSafe_[$]=this.ENCODED_VALS_WEBSAFE.charAt($),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[$]]=$,$>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt($)]=$,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt($)]=$)}}},fe=function($){const B=re($);return ie.encodeByteArray(B,!0)},le=function($){return fe($).replace(/\./g,"")},ue=function($){try{return ie.decodeString($,!0)}catch(B){console.error("base64Decode failed: ",B)}return null};function H($){return G(void 0,$)}function G($,B){if(!(B instanceof Object))return B;switch(B.constructor){case Date:return new Date(B.getTime());case Object:void 0===$&&($={});break;case Array:$=[];break;default:return B}for(const K in B)!B.hasOwnProperty(K)||!Z(K)||($[K]=G($[K],B[K]));return $}function Z($){return"__proto__"!==$}const he=()=>{try{return function Be(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const $=process.env.__FIREBASE_DEFAULTS__;return $?JSON.parse($):void 0})()||(()=>{if(typeof document>"u")return;let $;try{$=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const B=$&&ue($[1]);return B&&JSON.parse(B)})()}catch($){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${$}`)}},Le=()=>{var $;return null===($=he())||void 0===$?void 0:$.config},De=$=>{var B;return null===(B=he())||void 0===B?void 0:B[`_${$}`]};class Ie{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((B,K)=>{this.resolve=B,this.reject=K})}wrapCallback(B){return(K,ge)=>{K?this.reject(K):this.resolve(ge),"function"==typeof B&&(this.promise.catch(()=>{}),1===B.length?B(K):B(K,ge))}}}function xe($,B){if($.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ge=B||"demo-project",J=$.iat||0,ot=$.sub||$.user_id;if(!ot)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Bt=Object.assign({iss:`https://securetoken.google.com/${ge}`,aud:ge,iat:J,exp:J+3600,auth_time:J,sub:ot,user_id:ot,firebase:{sign_in_provider:"custom",identities:{}}},$);return[le(JSON.stringify({alg:"none",type:"JWT"})),le(JSON.stringify(Bt)),""].join(".")}function Fe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Pe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fe())}function j(){var $;const B=null===($=he())||void 0===$?void 0:$.forceEnvironment;if("node"===B)return!0;if("browser"===B)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ee(){return"object"==typeof self&&self.self===self}function Ue(){const $="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof $&&void 0!==$.id}function Ke(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Je(){const $=Fe();return $.indexOf("MSIE ")>=0||$.indexOf("Trident/")>=0}function de(){return!1}function we(){return!j()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Re(){try{return"object"==typeof indexedDB}catch{return!1}}function Ve(){return new Promise(($,B)=>{try{let K=!0;const ge="validate-browser-context-for-indexeddb-analytics-module",J=self.indexedDB.open(ge);J.onsuccess=()=>{J.result.close(),K||self.indexedDB.deleteDatabase(ge),$(!0)},J.onupgradeneeded=()=>{K=!1},J.onerror=()=>{var ot;B((null===(ot=J.error)||void 0===ot?void 0:ot.message)||"")}}catch(K){B(K)}})}function je(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ze extends Error{constructor(B,K,ge){super(K),this.code=B,this.customData=ge,this.name="FirebaseError",Object.setPrototypeOf(this,ze.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pn.prototype.create)}}class pn{constructor(B,K,ge){this.service=B,this.serviceName=K,this.errors=ge}create(B,...K){const ge=K[0]||{},J=`${this.service}/${B}`,ot=this.errors[B],Bt=ot?function Ct($,B){return $.replace(an,(K,ge)=>{const J=B[ge];return null!=J?String(J):`<${ge}?>`})}(ot,ge):"Error";return new ze(J,`${this.serviceName}: ${Bt} (${J}).`,ge)}}const an=/\{\$([^}]+)}/g;function et($){return JSON.parse($)}function Ot($){return JSON.stringify($)}const Dn=function($){let B={},K={},ge={},J="";try{const ot=$.split(".");B=et(ue(ot[0])||""),K=et(ue(ot[1])||""),J=ot[2],ge=K.d||{},delete K.d}catch{}return{header:B,claims:K,data:ge,signature:J}},Sn=function($){const K=Dn($).claims;return!!K&&"object"==typeof K&&K.hasOwnProperty("iat")},ti=function($){const B=Dn($).claims;return"object"==typeof B&&!0===B.admin};function Os($,B){return Object.prototype.hasOwnProperty.call($,B)}function yi($,B){if(Object.prototype.hasOwnProperty.call($,B))return $[B]}function $r($){for(const B in $)if(Object.prototype.hasOwnProperty.call($,B))return!1;return!0}function Fs($,B,K){const ge={};for(const J in $)Object.prototype.hasOwnProperty.call($,J)&&(ge[J]=B.call(K,$[J],J,$));return ge}function vn($,B){if($===B)return!0;const K=Object.keys($),ge=Object.keys(B);for(const J of K){if(!ge.includes(J))return!1;const ot=$[J],Bt=B[J];if(ni(ot)&&ni(Bt)){if(!vn(ot,Bt))return!1}else if(ot!==Bt)return!1}for(const J of ge)if(!K.includes(J))return!1;return!0}function ni($){return null!==$&&"object"==typeof $}function us($){const B=[];for(const[K,ge]of Object.entries($))Array.isArray(ge)?ge.forEach(J=>{B.push(encodeURIComponent(K)+"="+encodeURIComponent(J))}):B.push(encodeURIComponent(K)+"="+encodeURIComponent(ge));return B.length?"&"+B.join("&"):""}function ki($){const B={};return $.replace(/^\?/,"").split("&").forEach(ge=>{if(ge){const[J,ot]=ge.split("=");B[decodeURIComponent(J)]=decodeURIComponent(ot)}}),B}function Rn($){const B=$.indexOf("?");if(!B)return"";const K=$.indexOf("#",B);return $.substring(B,K>0?K:void 0)}class Nr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let B=1;B<this.blockSize;++B)this.pad_[B]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(B,K){K||(K=0);const ge=this.W_;if("string"==typeof B)for(let qt=0;qt<16;qt++)ge[qt]=B.charCodeAt(K)<<24|B.charCodeAt(K+1)<<16|B.charCodeAt(K+2)<<8|B.charCodeAt(K+3),K+=4;else for(let qt=0;qt<16;qt++)ge[qt]=B[K]<<24|B[K+1]<<16|B[K+2]<<8|B[K+3],K+=4;for(let qt=16;qt<80;qt++){const or=ge[qt-3]^ge[qt-8]^ge[qt-14]^ge[qt-16];ge[qt]=4294967295&(or<<1|or>>>31)}let Et,_r,J=this.chain_[0],ot=this.chain_[1],Bt=this.chain_[2],Qt=this.chain_[3],Nn=this.chain_[4];for(let qt=0;qt<80;qt++){qt<40?qt<20?(Et=Qt^ot&(Bt^Qt),_r=1518500249):(Et=ot^Bt^Qt,_r=1859775393):qt<60?(Et=ot&Bt|Qt&(ot|Bt),_r=2400959708):(Et=ot^Bt^Qt,_r=3395469782);const or=(J<<5|J>>>27)+Et+Nn+_r+ge[qt]&4294967295;Nn=Qt,Qt=Bt,Bt=4294967295&(ot<<30|ot>>>2),ot=J,J=or}this.chain_[0]=this.chain_[0]+J&4294967295,this.chain_[1]=this.chain_[1]+ot&4294967295,this.chain_[2]=this.chain_[2]+Bt&4294967295,this.chain_[3]=this.chain_[3]+Qt&4294967295,this.chain_[4]=this.chain_[4]+Nn&4294967295}update(B,K){if(null==B)return;void 0===K&&(K=B.length);const ge=K-this.blockSize;let J=0;const ot=this.buf_;let Bt=this.inbuf_;for(;J<K;){if(0===Bt)for(;J<=ge;)this.compress_(B,J),J+=this.blockSize;if("string"==typeof B){for(;J<K;)if(ot[Bt]=B.charCodeAt(J),++Bt,++J,Bt===this.blockSize){this.compress_(ot),Bt=0;break}}else for(;J<K;)if(ot[Bt]=B[J],++Bt,++J,Bt===this.blockSize){this.compress_(ot),Bt=0;break}}this.inbuf_=Bt,this.total_+=K}digest(){const B=[];let K=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let J=this.blockSize-1;J>=56;J--)this.buf_[J]=255&K,K/=256;this.compress_(this.buf_);let ge=0;for(let J=0;J<5;J++)for(let ot=24;ot>=0;ot-=8)B[ge]=this.chain_[J]>>ot&255,++ge;return B}}function Ls($,B){const K=new Pt($,B);return K.subscribe.bind(K)}class Pt{constructor(B,K){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=K,this.task.then(()=>{B(this)}).catch(ge=>{this.error(ge)})}next(B){this.forEachObserver(K=>{K.next(B)})}error(B){this.forEachObserver(K=>{K.error(B)}),this.close(B)}complete(){this.forEachObserver(B=>{B.complete()}),this.close()}subscribe(B,K,ge){let J;if(void 0===B&&void 0===K&&void 0===ge)throw new Error("Missing Observer.");J=function Tt($,B){if("object"!=typeof $||null===$)return!1;for(const K of B)if(K in $&&"function"==typeof $[K])return!0;return!1}(B,["next","error","complete"])?B:{next:B,error:K,complete:ge},void 0===J.next&&(J.next=ls),void 0===J.error&&(J.error=ls),void 0===J.complete&&(J.complete=ls);const ot=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?J.error(this.finalError):J.complete()}catch{}}),this.observers.push(J),ot}unsubscribeOne(B){void 0===this.observers||void 0===this.observers[B]||(delete this.observers[B],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(B){if(!this.finalized)for(let K=0;K<this.observers.length;K++)this.sendOne(K,B)}sendOne(B,K){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[B])try{K(this.observers[B])}catch(ge){typeof console<"u"&&console.error&&console.error(ge)}})}close(B){this.finalized||(this.finalized=!0,void 0!==B&&(this.finalError=B),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ls(){}const Mn=function($,B,K,ge){let J;if(ge<B?J="at least "+B:ge>K&&(J=0===K?"none":"no more than "+K),J)throw new Error($+" failed: Was called with "+ge+(1===ge?" argument.":" arguments.")+" Expects "+J+".")};function An($,B){return`${$} failed: ${B} argument `}function Sr($,B,K,ge){if((!ge||K)&&"function"!=typeof K)throw new Error(An($,B)+"must be a valid function.")}function ko($,B,K,ge){if((!ge||K)&&("object"!=typeof K||null===K))throw new Error(An($,B)+"must be a valid context object.")}const fn=function($){const B=[];let K=0;for(let ge=0;ge<$.length;ge++){let J=$.charCodeAt(ge);if(J>=55296&&J<=56319){const ot=J-55296;ge++,Q(ge<$.length,"Surrogate pair missing trail surrogate."),J=65536+(ot<<10)+($.charCodeAt(ge)-56320)}J<128?B[K++]=J:J<2048?(B[K++]=J>>6|192,B[K++]=63&J|128):J<65536?(B[K++]=J>>12|224,B[K++]=J>>6&63|128,B[K++]=63&J|128):(B[K++]=J>>18|240,B[K++]=J>>12&63|128,B[K++]=J>>6&63|128,B[K++]=63&J|128)}return B},Yi=function($){let B=0;for(let K=0;K<$.length;K++){const ge=$.charCodeAt(K);ge<128?B++:ge<2048?B+=2:ge>=55296&&ge<=56319?(B+=4,K++):B+=3}return B};function tt($,B=1e3,K=2){const ge=B*Math.pow(K,$),J=Math.round(.5*ge*(Math.random()-.5)*2);return Math.min(144e5,ge+J)}function Ut($){return $&&$._delegate?$._delegate:$}},455:(ft,be,F)=>{var p=F(4650);let Q=null;function O(){return Q}class ne{}const ie=new p.OlP("DocumentToken");let fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return function le(){return(0,p.LFG)(H)}()},providedIn:"platform"}),n})();const ue=new p.OlP("Location Initialized");let H=(()=>{class n extends fe{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){G()?this._history.pushState(t,r,i):this._location.hash=i}replaceState(t,r,i){G()?this._history.replaceState(t,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ie))},n.\u0275prov=p.Yz7({token:n,factory:function(){return function Z(){return new H((0,p.LFG)(ie))}()},providedIn:"platform"}),n})();function G(){return!!window.history.pushState}function Be(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Te(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function We(n){return n&&"?"!==n[0]?"?"+n:n}let ut=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(Ae)},providedIn:"root"}),n})();const he=new p.OlP("appBaseHref");let Ae=(()=>{class n extends ut{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,p.f3M)(ie).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Be(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+We(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+We(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+We(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(fe),p.LFG(he,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Se=(()=>{class n extends ut{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Be(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+We(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+We(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(fe),p.LFG(he,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Le=(()=>{class n{constructor(t){this._subject=new p.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function Fe(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(Te(xe(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+We(r))}normalize(t){return n.stripTrailingSlash(function Ie(n,e){return n&&new RegExp(`^${n}([/;?#]|$)`).test(e)?e.substring(n.length):e}(this._basePath,xe(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+We(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+We(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=We,n.joinWithSlash=Be,n.stripTrailingSlash=Te,n.\u0275fac=function(t){return new(t||n)(p.LFG(ut))},n.\u0275prov=p.Yz7({token:n,factory:function(){return function De(){return new Le((0,p.LFG)(ut))}()},providedIn:"root"}),n})();function xe(n){return n.replace(/\/index.html$/,"")}class Qn{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Oi=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Qn(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===a?void 0:a);else if(null!==a){const h=r.get(a);r.move(h,l),Pn(h,i)}});for(let i=0,a=r.length;i<a;i++){const h=r.get(i).context;h.index=i,h.count=a,h.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Pn(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(p.ZZ4))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Pn(n,e){n.context.$implicit=e.item}let hc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();function Du(n){return"server"===n}let jo=(()=>{class n{}return n.\u0275prov=(0,p.Yz7)({token:n,providedIn:"root",factory:()=>new Su((0,p.LFG)(ie),window)}),n})();class Su{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function oo(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=$o(this.window.history)||$o(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function $o(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class js extends ne{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Zo extends js{static makeCurrent(){!function re(n){Q||(Q=n)}(new Zo)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Tc(){return Ei=Ei||document.querySelector("base"),Ei?Ei.getAttribute("href"):null}();return null==t?null:function Yo(n){Uu=Uu||document.createElement("a"),Uu.setAttribute("href",n);const e=Uu.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Ei=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Or(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let Uu,Ei=null;const Qo=new p.OlP("TRANSITION_ID"),Sc=[{provide:p.ip1,useFactory:function Ii(n,e,t){return()=>{t.get(p.CZH).donePromise.then(()=>{const r=O(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[Qo,ie,p.zs3],multi:!0}];let co=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Ua=new p.OlP("EventManagerPlugins");let Bu=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const l=i[a];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Ua),p.LFG(p.R0b))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class Ba{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=O().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Ac=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),wn=(()=>{class n extends Ac{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const l=this._doc.createElement("style");l.textContent=a,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(ja),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(ja))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ie))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function ja(n){O().remove(n)}const ho={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},gs=/%COMP%/g;function fo(n,e){return e.flat(100).map(t=>t.replace(gs,n))}function po(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let go=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Xo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case p.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Jo(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case p.ifc.ShadowDom:return new mo(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=fo(r.id,r.styles);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Bu),p.LFG(wn),p.LFG(p.AFp))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class Xo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ho[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Gu(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Gu(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=ho[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=ho[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(p.JOm.DashCase|p.JOm.Important)?e.style.setProperty(t,r,i&p.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&p.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,po(r)):this.eventManager.addEventListener(e,t,po(r))}}function Gu(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Jo extends Xo{constructor(e,t,r,i){super(e),this.component=r;const a=fo(i+"-"+r.id,r.styles);t.addStyles(a),this.contentAttr=function Hu(n){return"_ngcontent-%COMP%".replace(gs,n)}(i+"-"+r.id),this.hostAttr=function $s(n){return"_nghost-%COMP%".replace(gs,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class mo extends Xo{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=fo(i.id,i.styles);for(let l=0;l<a.length;l++){const h=document.createElement("style");h.textContent=a[l],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Wu=(()=>{class n extends Ba{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ie))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Ha=["alt","control","meta","shift"],Mc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},sh={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let _o=(()=>{class n extends Ba{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="",h=r.indexOf("code");if(h>-1&&(r.splice(h,1),l="code."),Ha.forEach(w=>{const b=r.indexOf(w);b>-1&&(r.splice(b,1),l+=w+".")}),l+=a,0!=r.length||0===a.length)return null;const _={};return _.domEventName=i,_.fullKey=l,_}static matchEventFullKeyCode(t,r){let i=Mc[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Ha.forEach(l=>{l!==i&&(0,sh[l])(t)&&(a+=l+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ie))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const $i=(0,p.eFA)(p._c5,"browser",[{provide:p.Lbi,useValue:"browser"},{provide:p.g9A,useValue:function Bi(){Zo.makeCurrent()},multi:!0},{provide:ie,useFactory:function kc(){return(0,p.RDi)(document),document},deps:[]}]),up=new p.OlP(""),Pc=[{provide:p.rWj,useClass:class ih{addToWindow(e){p.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},p.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),p.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),p.dqk.frameworkStabilizers||(p.dqk.frameworkStabilizers=[]),p.dqk.frameworkStabilizers.push(r=>{const i=p.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const h=function(_){l=l||_,a--,0==a&&r(l)};i.forEach(function(_){_.whenStable(h)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:p.lri,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]},{provide:p.dDg,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]}],qu=[{provide:p.zSh,useValue:"root"},{provide:p.qLn,useFactory:function Nc(){return new p.qLn},deps:[]},{provide:Ua,useClass:Wu,multi:!0,deps:[ie,p.R0b,p.Lbi]},{provide:Ua,useClass:_o,multi:!0,deps:[ie]},{provide:go,useClass:go,deps:[Bu,wn,p.AFp]},{provide:p.FYo,useExisting:go},{provide:Ac,useExisting:wn},{provide:wn,useClass:wn,deps:[ie]},{provide:Bu,useClass:Bu,deps:[Ua,p.R0b]},{provide:class Zd{},useClass:co,deps:[]},[]];let oh=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:p.AFp,useValue:t.appId},{provide:Qo,useExisting:p.AFp},Sc]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(up,12))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[...qu,...Pc],imports:[hc,p.hGG]}),n})(),ta=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ie))},n.\u0275prov=p.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Wa(){return new ta((0,p.LFG)(ie))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var nn=F(8996),vr=F(7669);function rt(...n){const e=(0,vr.yG)(n);return(0,nn.D)(n,e)}var _s=F(7579);class Hi extends _s.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const ra=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Jn=F(9751);const{isArray:gp}=Array,{getPrototypeOf:ch,prototype:qa,keys:Ka}=Object;function tl(n){if(1===n.length){const e=n[0];if(gp(e))return{args:e,keys:null};if(function nl(n){return n&&"object"==typeof n&&ch(n)===qa}(e)){const t=Ka(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var D=F(4671),T=F(4004);const{isArray:R}=Array;function Y(n){return(0,T.U)(e=>function V(n,e){return R(e)?n(...e):n(e)}(n,e))}function ee(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var _e=F(5403),it=F(9672);function ct(...n){const e=(0,vr.yG)(n),t=(0,vr.jO)(n),{args:r,keys:i}=tl(n);if(0===r.length)return(0,nn.D)([],e);const a=new Jn.y(function lt(n,e,t=D.y){return r=>{Ft(e,()=>{const{length:i}=n,a=new Array(i);let l=i,h=i;for(let _=0;_<i;_++)Ft(e,()=>{const w=(0,nn.D)(n[_],e);let b=!1;w.subscribe((0,_e.x)(r,x=>{a[_]=x,b||(b=!0,h--),h||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>ee(i,l):D.y));return t?a.pipe(Y(t)):a}function Ft(n,e,t){n?(0,it.f)(t,n,e):e()}var Dt=F(8189);function $n(...n){return function li(){return(0,Dt.J)(1)}()((0,nn.D)(n,(0,vr.yG)(n)))}var vs=F(8421);function rl(n){return new Jn.y(e=>{(0,vs.Xf)(n()).subscribe(e)})}var ia=F(9635),ci=F(576);function di(n,e){const t=(0,ci.m)(n)?n:()=>n,r=i=>i.error(t());return new Jn.y(e?i=>e.schedule(r,0,i):r)}var Zr=F(515),mp=F(727),Rr=F(4482);function dh(){return(0,Rr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,_e.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class _p extends Jn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Rr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new mp.w0;const t=this.getSubject();e.add(this.source.subscribe((0,_e.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=mp.w0.EMPTY)}return e}refCount(){return dh()(this)}}function Hn(n,e){return(0,Rr.e)((t,r)=>{let i=null,a=0,l=!1;const h=()=>l&&!i&&r.complete();t.subscribe((0,_e.x)(r,_=>{i?.unsubscribe();let w=0;const b=a++;(0,vs.Xf)(n(_,b)).subscribe(i=(0,_e.x)(r,x=>r.next(e?e(_,x,b,w++):x),()=>{i=null,h()}))},()=>{l=!0,h()}))})}function hh(n){return n<=0?()=>Zr.E:(0,Rr.e)((e,t)=>{let r=0;e.subscribe((0,_e.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Bc(...n){const e=(0,vr.yG)(n);return(0,Rr.e)((t,r)=>{(e?$n(n,t,e):$n(n,t)).subscribe(r)})}function ws(n,e){return(0,Rr.e)((t,r)=>{let i=0;t.subscribe((0,_e.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var lr=F(5577);function yp(n){return(0,Rr.e)((e,t)=>{let r=!1;e.subscribe((0,_e.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Yy(n=vp){return(0,Rr.e)((e,t)=>{let r=!1;e.subscribe((0,_e.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function vp(){return new ra}function sa(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ws((i,a)=>n(i,a,r)):D.y,hh(1),t?yp(e):Yy(()=>new ra))}function il(n,e){return(0,ci.m)(e)?(0,lr.z)(n,e,1):(0,lr.z)(n,1)}var hi=F(8505);function Za(n){return(0,Rr.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,_e.x)(t,void 0,void 0,l=>{a=(0,vs.Xf)(n(l,Za(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function PE(n,e,t,r,i){return(a,l)=>{let h=t,_=e,w=0;a.subscribe((0,_e.x)(l,b=>{const x=w++;_=h?n(_,b,x):(h=!0,b),r&&l.next(_)},i&&(()=>{h&&l.next(_),l.complete()})))}}function vo(n,e){return(0,Rr.e)(PE(n,e,arguments.length>=2,!0))}function fh(n){return n<=0?()=>Zr.E:(0,Rr.e)((e,t)=>{let r=[];e.subscribe((0,_e.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function ph(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ws((i,a)=>n(i,a,r)):D.y,fh(1),t?yp(e):Yy(()=>new ra))}function gh(n){return(0,Rr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const bt="primary",jc=Symbol("RouteTitle");class Qy{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function sl(n){return new Qy(n)}function Cm(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],h=n[a];if(l.startsWith(":"))i[l.substring(1)]=h;else if(l!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Hs(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!mh(n[i],e[i]))return!1;return!0}function mh(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function bm(n){return Array.prototype.concat.apply([],n)}function _h(n){return n.length>0?n[n.length-1]:null}function wr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function er(n){return(0,p.CqO)(n)?n:(0,p.QGY)(n)?(0,nn.D)(Promise.resolve(n)):rt(n)}const Ya=!1,wp={exact:function Ep(n,e,t){if(!Qa(n.segments,e.segments)||!bp(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Ep(n.children[r],e.children[r],t))return!1;return!0},subset:Ip},yh={exact:function Hc(n,e){return Hs(n,e)},subset:function Dm(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>mh(n[t],e[t]))},ignored:()=>!0};function Vr(n,e,t){return wp[t.paths](n.root,e.root,t.matrixParams)&&yh[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Ip(n,e,t){return Cp(n,e,e.segments,t)}function Cp(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Qa(i,t)||e.hasChildren()||!bp(i,t,r))}if(n.segments.length===t.length){if(!Qa(n.segments,t)||!bp(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Ip(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(Qa(n.segments,i)&&bp(n.segments,i,r)&&n.children[bt])&&Cp(n.children[bt],e,a,r)}}function bp(n,e,t){return e.every((r,i)=>yh[t](n[i].parameters,r.parameters))}class Ci{constructor(e=new Yt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=sl(this.queryParams)),this._queryParamMap}toString(){return Ja.serialize(this)}}class Yt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,wr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return vh(this)}}class ol{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=sl(this.parameters)),this._parameterMap}toString(){return Ap(this)}}function Qa(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Xa=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return new Tp},providedIn:"root"}),n})();class Tp{parse(e){const t=new Rp(e);return new Ci(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Wc(e.root,!0)}`,r=function Xy(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${ul(t)}=${ul(i)}`).join("&"):`${ul(t)}=${ul(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Tm(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Ja=new Tp;function vh(n){return n.segments.map(e=>Ap(e)).join("/")}function Wc(n,e){if(!n.hasChildren())return vh(n);if(e){const t=n.children[bt]?Wc(n.children[bt],!1):"",r=[];return wr(n.children,(i,a)=>{a!==bt&&r.push(`${a}:${Wc(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Gc(n,e){let t=[];return wr(n.children,(r,i)=>{i===bt&&(t=t.concat(e(r,i)))}),wr(n.children,(r,i)=>{i!==bt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===bt?[Wc(n.children[bt],!1)]:[`${i}:${Wc(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[bt]?`${vh(n)}/${t[0]}`:`${vh(n)}/(${t.join("//")})`}}function al(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ul(n){return al(n).replace(/%3B/gi,";")}function oa(n){return al(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ll(n){return decodeURIComponent(n)}function Sp(n){return ll(n.replace(/\+/g,"%20"))}function Ap(n){return`${oa(n.path)}${function zc(n){return Object.keys(n).map(e=>`;${oa(e)}=${oa(n[e])}`).join("")}(n.parameters)}`}const Jy=/^[^\/()?;=#]+/;function cl(n){const e=n.match(Jy);return e?e[0]:""}const xp=/^[^=?&#]+/,tv=/^[^&#]+/;class Rp{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Yt([],{}):new Yt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[bt]=new Yt(e,t)),r}parseSegment(){const e=cl(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new p.vHH(4009,Ya);return this.capture(e),new ol(ll(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=cl(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=cl(this.remaining);i&&(r=i,this.capture(r))}e[ll(t)]=ll(r)}parseQueryParam(e){const t=function ev(n){const e=n.match(xp);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function qc(n){const e=n.match(tv);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=Sp(t),a=Sp(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=cl(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new p.vHH(4010,Ya);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=bt);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[bt]:new Yt([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new p.vHH(4011,Ya)}}function wh(n){return n.segments.length>0?new Yt([],{[bt]:n}):n}function dl(n){const e={};for(const r of Object.keys(n.children)){const a=dl(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function Sm(n){if(1===n.numberOfChildren&&n.children[bt]){const e=n.children[bt];return new Yt(n.segments.concat(e.segments),e.children)}return n}(new Yt(n.segments,e))}function eu(n){return n instanceof Ci}function Am(n,e,t,r,i){if(0===t.length)return wo(e.root,e.root,e.root,r,i);const a=function Ch(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Mp(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const h={};return wr(a.outlets,(_,w)=>{h[w]="string"==typeof _?_.split("/"):_}),[...i,{outlets:h}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((h,_)=>{0==_&&"."===h||(0==_&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,a]},[]);return new Mp(t,e,r)}(t);return a.toRoot()?wo(e.root,e.root,new Yt([],{}),r,i):function l(_){const w=function Np(n,e,t,r){if(n.isAbsolute)return new Eo(e.root,!0,0);if(-1===r)return new Eo(t,t===e.root,0);return function Zc(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new p.vHH(4005,!1);i=r.segments.length}return new Eo(r,!1,i-a)}(t,r+(fl(n.commands[0])?0:1),n.numberOfDoubleDots)}(a,e,n.snapshot?._urlSegment,_),b=w.processChildren?cr(w.segmentGroup,w.index,a.commands):bh(w.segmentGroup,w.index,a.commands);return wo(e.root,w.segmentGroup,b,r,i)}(n.snapshot?._lastPathIndex)}function fl(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Ih(n){return"object"==typeof n&&null!=n&&n.outlets}function wo(n,e,t,r,i){let l,a={};r&&wr(r,(_,w)=>{a[w]=Array.isArray(_)?_.map(b=>`${b}`):`${_}`}),l=n===e?t:xm(n,e,t);const h=wh(dl(l));return new Ci(h,a,i)}function xm(n,e,t){const r={};return wr(n.children,(i,a)=>{r[a]=i===e?t:xm(i,e,t)}),new Yt(n.segments,r)}class Mp{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&fl(r[0]))throw new p.vHH(4003,!1);const i=r.find(Ih);if(i&&i!==_h(r))throw new p.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Eo{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function bh(n,e,t){if(n||(n=new Yt([],{})),0===n.segments.length&&n.hasChildren())return cr(n,e,t);const r=function nu(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],h=t[r];if(Ih(h))break;const _=`${h}`,w=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&w&&"object"==typeof w&&void 0===w.outlets){if(!Qc(_,w,l))return a;r+=2}else{if(!Qc(_,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new Yt(n.segments.slice(0,r.pathIndex),{});return a.children[bt]=new Yt(n.segments.slice(r.pathIndex),n.children),cr(a,0,i)}return r.match&&0===i.length?new Yt(n.segments,{}):r.match&&!n.hasChildren()?gl(n,e,t):r.match?cr(n,0,i):gl(n,e,t)}function cr(n,e,t){if(0===t.length)return new Yt(n.segments,{});{const r=function pl(n){return Ih(n[0])?n[0].outlets:{[bt]:n}}(t),i={};return!r[bt]&&n.children[bt]&&1===n.numberOfChildren&&0===n.children[bt].segments.length?cr(n.children[bt],e,t):(wr(r,(a,l)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[l]=bh(n.children[l],e,a))}),wr(n.children,(a,l)=>{void 0===r[l]&&(i[l]=a)}),new Yt(n.segments,i))}}function gl(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(Ih(a)){const _=Yc(a.outlets);return new Yt(r,_)}if(0===i&&fl(t[0])){r.push(new ol(n.segments[e].path,Dh(t[0]))),i++;continue}const l=Ih(a)?a.outlets[bt]:`${a}`,h=i<t.length-1?t[i+1]:null;l&&h&&fl(h)?(r.push(new ol(l,Dh(h))),i+=2):(r.push(new ol(l,{})),i++)}return new Yt(r,{})}function Yc(n){const e={};return wr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=gl(new Yt([],{}),0,t))}),e}function Dh(n){const e={};return wr(n,(t,r)=>e[r]=`${t}`),e}function Qc(n,e,t){return n==t.path&&Hs(e,t.parameters)}const Xc="imperative";class Es{constructor(e,t){this.id=e,this.url=t}}class kp extends Es{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class fi extends Es{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ml extends Es{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Jc extends Es{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class Th extends Es{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ru extends Es{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Rm extends Es{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bi extends Es{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Mm extends Es{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Pp extends Es{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Op{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Io{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class _l{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ed{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Sh{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Nm{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class td{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let iv=(()=>{class n{createUrlTree(t,r,i,a,l,h){return Am(t||r.root,i,a,l,h)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),y=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(e){return iv.\u0275fac(e)},providedIn:"root"}),n})();class f{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=m(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=m(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=E(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return E(e,this._root).map(t=>t.value)}}function m(n,e){if(n===e.value)return e;for(const t of e.children){const r=m(n,t);if(r)return r}return null}function E(n,e){if(n===e.value)return[e];for(const t of e.children){const r=E(n,t);if(r.length)return r.unshift(e),r}return[]}class A{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function N(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class q extends f{constructor(e,t){super(e),this.snapshot=t,yl(this,e)}toString(){return this.snapshot.toString()}}function ce(n,e){const t=function He(n,e){const l=new Gn([],{},{},"",{},bt,e,null,n.root,-1,{});return new ns("",new A(l,[]))}(n,e),r=new Hi([new ol("",{})]),i=new Hi({}),a=new Hi({}),l=new Hi({}),h=new Hi(""),_=new Xe(r,i,l,h,a,bt,e,t.root);return _.snapshot=t.root,new q(new A(_,[]),t)}class Xe{constructor(e,t,r,i,a,l,h,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=h,this.title=this.data?.pipe((0,T.U)(w=>w[jc]))??rt(void 0),this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,T.U)(e=>sl(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,T.U)(e=>sl(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function St(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function vt(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Gn{get title(){return this.data?.[jc]}constructor(e,t,r,i,a,l,h,_,w,b,x){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=h,this.routeConfig=_,this._urlSegment=w,this._lastPathIndex=b,this._resolve=x}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=sl(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=sl(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ns extends f{constructor(e,t){super(t),this.url=e,yl(this,t)}toString(){return Fp(this._root)}}function yl(n,e){e.value._routerState=n,e.children.forEach(t=>yl(n,t))}function Fp(n){const e=n.children.length>0?` { ${n.children.map(Fp).join(", ")} } `:"";return`${n.value}${e}`}function iu(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Hs(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Hs(e.params,t.params)||n.params.next(t.params),function $c(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Hs(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Hs(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function rs(n,e){const t=Hs(n.params,e.params)&&function Dp(n,e){return Qa(n,e)&&n.every((t,r)=>Hs(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||rs(n.parent,e.parent))}function aa(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Lp(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return aa(n,r,i);return aa(n,r)})}(n,e,t);return new A(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(h=>aa(n,h)),l}}const r=function Vp(n){return new Xe(new Hi(n.url),new Hi(n.params),new Hi(n.queryParams),new Hi(n.fragment),new Hi(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>aa(n,a));return new A(r,i)}}const Ah="ngNavigationCancelingError";function Pm(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=eu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=sv(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function sv(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Ah]=!0,r.cancellationCode=e,t&&(r.url=t),r}function wl(n){return xh(n)&&eu(n.url)}function xh(n){return n&&n[Ah]}class nN{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Om,this.attachRef=null}}let Om=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new nN,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Up=!1;let ov=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=bt,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.attachEvents=new p.vpe,this.detachEvents=new p.vpe,this.parentContexts=(0,p.f3M)(Om),this.location=(0,p.f3M)(p.s_b),this.changeDetector=(0,p.f3M)(p.sBO),this.environmentInjector=(0,p.f3M)(p.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new p.vHH(4012,Up);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new p.vHH(4012,Up);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new p.vHH(4012,Up);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new p.vHH(4013,Up);this._activatedRoute=t;const i=this.location,l=t.snapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,_=new IT(t,h,i.injector);if(r&&function CT(n){return!!n.resolveComponentFactory}(r)){const w=r.resolveComponentFactory(l);this.activated=i.createComponent(w,i.length,_)}else this.activated=i.createComponent(l,{index:i.length,injector:_,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=p.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[p.TTD]}),n})();class IT{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Xe?this.route:e===Om?this.childContexts:this.parent.get(e,t)}}let av=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[p.jDz],decls:1,vars:0,template:function(t,r){1&t&&p._UZ(0,"router-outlet")},dependencies:[ov],encapsulation:2}),n})();function uv(n,e){return n.providers&&!n._injector&&(n._injector=(0,p.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Fm(n){const e=n.children&&n.children.map(Fm),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==bt&&(t.component=av),t}function Gs(n){return n.outlet||bt}function UE(n,e){const t=n.filter(r=>Gs(r)===e);return t.push(...n.filter(r=>Gs(r)!==e)),t}function Bp(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class BE{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),iu(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=N(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),wr(i,(a,l)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=N(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=N(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=N(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new Nm(a.value.snapshot))}),e.children.length&&this.forwardEvent(new ed(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(iu(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(h.contexts),l.attachRef=h.componentRef,l.route=h.route.value,l.outlet&&l.outlet.attach(h.componentRef,h.route.value),iu(h.route.value),this.activateChildRoutes(e,null,l.children)}else{const h=Bp(i.snapshot),_=h?.get(p._Vd)??null;l.attachRef=null,l.route=i,l.resolver=_,l.injector=h,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class ST{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class cv{constructor(e,t){this.component=e,this.route=t}}function jp(n,e,t){const r=n._root;return Rh(r,e?e._root:null,t,[r.value])}function nd(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,p.Z0I)(n)?e.get(n):n:r}function Rh(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=N(e);return n.children.forEach(l=>{(function jE(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const _=function sN(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Qa(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Qa(n.url,e.url)||!Hs(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!rs(n,e)||!Hs(n.queryParams,e.queryParams);default:return!rs(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new ST(r)):(a.data=l.data,a._resolvedData=l._resolvedData),Rh(n,e,a.component?h?h.children:null:t,r,i),_&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new cv(h.outlet.component,l))}else l&&$p(e,h,i),i.canActivateChecks.push(new ST(r)),Rh(n,null,a.component?h?h.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),wr(a,(l,h)=>$p(l,t.getContext(h),i)),i}function $p(n,e,t){const r=N(n),i=n.value;wr(r,(a,l)=>{$p(a,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new cv(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Mh(n){return"function"==typeof n}function su(n){return n instanceof ra||"EmptyError"===n?.name}const Lm=Symbol("INITIAL_VALUE");function El(){return Hn(n=>ct(n.map(e=>e.pipe(hh(1),Bc(Lm)))).pipe((0,T.U)(e=>{for(const t of e)if(!0!==t){if(t===Lm)return Lm;if(!1===t||t instanceof Ci)return t}return!0}),ws(e=>e!==Lm),hh(1)))}function _v(n){return(0,ia.z)((0,hi.b)(e=>{if(eu(e))throw Pm(0,e)}),(0,T.U)(e=>!0===e))}const yv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function WE(n,e,t,r,i){const a=vv(n,e,t);return a.matched?function Nh(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?rt(i.map(l=>{const h=nd(l,n);return er(function pv(n){return n&&Mh(n.canMatch)}(h)?h.canMatch(e,t):n.runInContext(()=>h(e,t)))})).pipe(El(),_v()):rt(!0)}(r=uv(e,r),e,t).pipe((0,T.U)(l=>!0===l?a:{...yv})):rt(a)}function vv(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...yv}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Cm)(t,n,e);if(!i)return{...yv};const a={};wr(i.posParams,(h,_)=>{a[_]=h.path});const l=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function kh(n,e,t,r){if(t.length>0&&function PT(n,e,t){return t.some(r=>wv(n,e,r)&&Gs(r)!==bt)}(n,t,r)){const a=new Yt(e,function zE(n,e,t,r){const i={};i[bt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&Gs(a)!==bt){const l=new Yt([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[Gs(a)]=l}return i}(n,e,r,new Yt(t,n.children)));return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:[]}}if(0===t.length&&function qE(n,e,t){return t.some(r=>wv(n,e,r))}(n,t,r)){const a=new Yt(n.segments,function kT(n,e,t,r,i){const a={};for(const l of r)if(wv(n,t,l)&&!i[Gs(l)]){const h=new Yt([],{});h._sourceSegment=n,h._segmentIndexShift=e.length,a[Gs(l)]=h}return{...i,...a}}(n,e,t,r,n.children));return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}const i=new Yt(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}function wv(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function KE(n,e,t,r){return!!(Gs(n)===r||r!==bt&&wv(e,t,n))&&("**"===n.path||vv(e,n,t).matched)}function Ph(n,e,t){return 0===e.length&&!n.children[t]}const Bm=!1;class ou{constructor(e){this.segmentGroup=e||null}}class Oh{constructor(e){this.urlTree=e}}function Hp(n){return di(new ou(n))}function Ev(n){return di(new Oh(n))}class ZE{constructor(e,t,r,i,a){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0}apply(){const e=kh(this.urlTree.root,[],[],this.config).segmentGroup,t=new Yt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,bt).pipe((0,T.U)(a=>this.createUrlTree(dl(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Za(a=>{if(a instanceof Oh)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof ou?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,bt).pipe((0,T.U)(i=>this.createUrlTree(dl(i),e.queryParams,e.fragment))).pipe(Za(i=>{throw i instanceof ou?this.noMatchError(i):i}))}noMatchError(e){return new p.vHH(4002,Bm)}createUrlTree(e,t,r){const i=wh(e);return new Ci(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,T.U)(a=>new Yt([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,nn.D)(i).pipe(il(a=>{const l=r.children[a],h=UE(t,a);return this.expandSegmentGroup(e,h,l,a).pipe((0,T.U)(_=>({segment:_,outlet:a})))}),vo((a,l)=>(a[l.outlet]=l.segment,a),{}),ph())}expandSegment(e,t,r,i,a,l){return(0,nn.D)(r).pipe(il(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,a,l).pipe(Za(w=>{if(w instanceof ou)return rt(null);throw w}))),sa(h=>!!h),Za((h,_)=>{if(su(h))return Ph(t,i,a)?rt(new Yt([],{})):Hp(t);throw h}))}expandSegmentAgainstRoute(e,t,r,i,a,l,h){return KE(i,t,a,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,l):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l):Hp(t):Hp(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Ev(a):this.lineralizeSegments(r,a).pipe((0,lr.z)(l=>{const h=new Yt(l,{});return this.expandSegment(e,h,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:h,consumedSegments:_,remainingSegments:w,positionalParamSegments:b}=vv(t,i,a);if(!h)return Hp(t);const x=this.applyRedirectCommands(_,i.redirectTo,b);return i.redirectTo.startsWith("/")?Ev(x):this.lineralizeSegments(i,x).pipe((0,lr.z)(k=>this.expandSegment(e,t,r,k.concat(w),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){return"**"===r.path?(e=uv(r,e),r.loadChildren?(r._loadedRoutes?rt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,T.U)(h=>(r._loadedRoutes=h.routes,r._loadedInjector=h.injector,new Yt(i,{})))):rt(new Yt(i,{}))):WE(t,r,i,e).pipe(Hn(({matched:l,consumedSegments:h,remainingSegments:_})=>l?this.getChildConfig(e=r._injector??e,r,i).pipe((0,lr.z)(b=>{const x=b.injector??e,k=b.routes,{segmentGroup:U,slicedSegments:W}=kh(t,h,_,k),ae=new Yt(U.segments,U.children);if(0===W.length&&ae.hasChildren())return this.expandChildren(x,k,ae).pipe((0,T.U)(st=>new Yt(h,st)));if(0===k.length&&0===W.length)return rt(new Yt(h,{}));const ve=Gs(r)===a;return this.expandSegment(x,ae,k,W,ve?bt:a,!0).pipe((0,T.U)(_t=>new Yt(h.concat(_t.segments),_t.children)))})):Hp(t)))}getChildConfig(e,t,r){return t.children?rt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?rt({routes:t._loadedRoutes,injector:t._loadedInjector}):function NT(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?rt(!0):rt(i.map(l=>{const h=nd(l,n);return er(function hv(n){return n&&Mh(n.canLoad)}(h)?h.canLoad(e,t):n.runInContext(()=>h(e,t)))})).pipe(El(),_v())}(e,t,r).pipe((0,lr.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,hi.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function FT(n){return di(sv(Bm,3))}())):rt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return rt(r);if(i.numberOfChildren>1||!i.children[bt])return di(new p.vHH(4e3,Bm));i=i.children[bt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new Ci(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return wr(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[a]=t[h]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return wr(t.children,(h,_)=>{l[_]=this.createSegmentGroup(e,h,r,i)}),new Yt(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new p.vHH(4001,Bm);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class Iv{}class Gp{constructor(e,t,r,i,a,l,h){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=a,this.paramsInheritanceStrategy=l,this.urlSerializer=h}recognize(){const e=kh(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,bt).pipe((0,T.U)(t=>{if(null===t)return null;const r=new Gn([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},bt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new A(r,t),a=new ns(this.url,i);return this.inheritParamsAndData(a._root),a}))}inheritParamsAndData(e){const t=e.value,r=St(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,nn.D)(Object.keys(r.children)).pipe(il(i=>{const a=r.children[i],l=UE(t,i);return this.processSegmentGroup(e,l,a,i)}),vo((i,a)=>i&&a?(i.push(...a),i):null),function Em(n,e=!1){return(0,Rr.e)((t,r)=>{let i=0;t.subscribe((0,_e.x)(r,a=>{const l=n(a,i++);(l||e)&&r.next(a),!l&&r.complete()}))})}(i=>null!==i),yp(null),ph(),(0,T.U)(i=>{if(null===i)return null;const a=QE(i);return function UT(n){n.sort((e,t)=>e.value.outlet===bt?-1:t.value.outlet===bt?1:e.value.outlet.localeCompare(t.value.outlet))}(a),a}))}processSegment(e,t,r,i,a){return(0,nn.D)(t).pipe(il(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,i,a)),sa(l=>!!l),Za(l=>{if(su(l))return Ph(r,i,a)?rt([]):rt(null);throw l}))}processSegmentAgainstRoute(e,t,r,i,a){if(t.redirectTo||!KE(t,r,i,a))return rt(null);let l;if("**"===t.path){const h=i.length>0?_h(i).parameters:{},_=JE(r)+i.length;l=rt({snapshot:new Gn(i,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,ua(t),Gs(t),t.component??t._loadedComponent??null,t,XE(r),_,eI(t)),consumedSegments:[],remainingSegments:[]})}else l=WE(r,t,i,e).pipe((0,T.U)(({matched:h,consumedSegments:_,remainingSegments:w,parameters:b})=>{if(!h)return null;const x=JE(r)+_.length;return{snapshot:new Gn(_,b,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,ua(t),Gs(t),t.component??t._loadedComponent??null,t,XE(r),x,eI(t)),consumedSegments:_,remainingSegments:w}}));return l.pipe(Hn(h=>{if(null===h)return rt(null);const{snapshot:_,consumedSegments:w,remainingSegments:b}=h;e=t._injector??e;const x=t._loadedInjector??e,k=function BT(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:U,slicedSegments:W}=kh(r,w,b,k.filter(ve=>void 0===ve.redirectTo));if(0===W.length&&U.hasChildren())return this.processChildren(x,k,U).pipe((0,T.U)(ve=>null===ve?null:[new A(_,ve)]));if(0===k.length&&0===W.length)return rt([new A(_,[])]);const ae=Gs(t)===a;return this.processSegment(x,k,U,W,ae?bt:a).pipe((0,T.U)(ve=>null===ve?null:[new A(_,ve)]))}))}}function jT(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function QE(n){const e=[],t=new Set;for(const r of n){if(!jT(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=QE(r.children);e.push(new A(r.value,i))}return e.filter(r=>!t.has(r))}function XE(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function JE(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function ua(n){return n.data||{}}function eI(n){return n.resolve||{}}function bv(n){return"string"==typeof n.title||null===n.title}function Dv(n){return Hn(e=>{const t=n(e);return t?(0,nn.D)(t).pipe((0,T.U)(()=>e)):rt(e)})}const Fh=new p.OlP("ROUTES");let Is=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return rt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=er(t.loadComponent()).pipe((0,T.U)(Tv),(0,hi.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),gh(()=>{this.componentLoaders.delete(t)})),i=new _p(r,()=>new _s.x).pipe(dh());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return rt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,T.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(r);let _,w,b=!1;Array.isArray(h)?w=h:(_=h.create(t).injector,w=bm(_.get(Fh,[],p.XFs.Self|p.XFs.Optional)));return{routes:w.map(Fm),injector:_}}),gh(()=>{this.childrenLoaders.delete(r)})),l=new _p(a,()=>new _s.x).pipe(dh());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return er(t()).pipe((0,T.U)(Tv),(0,lr.z)(i=>i instanceof p.YKP||Array.isArray(i)?rt(i):(0,nn.D)(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.zs3),p.LFG(p.Sil))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Tv(n){return function GT(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Hm=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new _s.x,this.configLoader=(0,p.f3M)(Is),this.environmentInjector=(0,p.f3M)(p.lqb),this.urlSerializer=(0,p.f3M)(Xa),this.rootContexts=(0,p.f3M)(Om),this.navigationId=0,this.afterPreactivation=()=>rt(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new Io(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new Op(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new Hi({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Xc,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ws(r=>0!==r.id),(0,T.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),Hn(r=>{let i=!1,a=!1;return rt(r).pipe((0,hi.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Hn(l=>{const h=t.browserUrlTree.toString(),_=!t.navigated||l.extractedUrl.toString()!==h||h!==t.currentUrlTree.toString();if(!_&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const b="";return this.events.next(new Jc(l.id,t.serializeUrl(r.rawUrl),b,0)),t.rawUrlTree=l.rawUrl,l.resolve(null),Zr.E}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return sI(l.source)&&(t.browserUrlTree=l.extractedUrl),rt(l).pipe(Hn(b=>{const x=this.transitions?.getValue();return this.events.next(new kp(b.id,this.urlSerializer.serialize(b.extractedUrl),b.source,b.restoredState)),x!==this.transitions?.getValue()?Zr.E:Promise.resolve(b)}),function YE(n,e,t,r){return Hn(i=>function LT(n,e,t,r,i){return new ZE(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,T.U)(a=>({...i,urlAfterRedirects:a}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,hi.b)(b=>{this.currentNavigation={...this.currentNavigation,finalUrl:b.urlAfterRedirects},r.urlAfterRedirects=b.urlAfterRedirects}),function HT(n,e,t,r,i){return(0,lr.z)(a=>function Cv(n,e,t,r,i,a,l="emptyOnly"){return new Gp(n,e,t,r,i,l,a).recognize().pipe(Hn(h=>null===h?function VT(n){return new Jn.y(e=>e.error(n))}(new Iv):rt(h)))}(n,e,t,a.urlAfterRedirects,r.serialize(a.urlAfterRedirects),r,i).pipe((0,T.U)(l=>({...a,targetSnapshot:l}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,hi.b)(b=>{if(r.targetSnapshot=b.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!b.extras.skipLocationChange){const k=t.urlHandlingStrategy.merge(b.urlAfterRedirects,b.rawUrl);t.setBrowserUrl(k,b)}t.browserUrlTree=b.urlAfterRedirects}const x=new ru(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot);this.events.next(x)}));if(_&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:b,extractedUrl:x,source:k,restoredState:U,extras:W}=l,ae=new kp(b,this.urlSerializer.serialize(x),k,U);this.events.next(ae);const ve=ce(x,this.rootComponentType).snapshot;return rt(r={...l,targetSnapshot:ve,urlAfterRedirects:x,extras:{...W,skipLocationChange:!1,replaceUrl:!1}})}{const b="";return this.events.next(new Jc(l.id,t.serializeUrl(r.extractedUrl),b,1)),t.rawUrlTree=l.rawUrl,l.resolve(null),Zr.E}}),(0,hi.b)(l=>{const h=new Rm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),(0,T.U)(l=>r={...l,guards:jp(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function Vm(n,e){return(0,lr.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?rt({...t,guardsResult:!0}):function RT(n,e,t,r){return(0,nn.D)(n).pipe((0,lr.z)(i=>function MT(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?rt(a.map(h=>{const _=Bp(e)??i,w=nd(h,_);return er(function AT(n){return n&&Mh(n.canDeactivate)}(w)?w.canDeactivate(n,e,t,r):_.runInContext(()=>w(n,e,t,r))).pipe(sa())})).pipe(El()):rt(!0)}(i.component,i.route,t,e,r)),sa(i=>!0!==i,!0))}(l,r,i,n).pipe((0,lr.z)(h=>h&&function $E(n){return"boolean"==typeof n}(h)?function gv(n,e,t,r){return(0,nn.D)(e).pipe(il(i=>$n(function rd(n,e){return null!==n&&e&&e(new _l(n)),rt(!0)}(i.route.parent,r),function Um(n,e){return null!==n&&e&&e(new Sh(n)),rt(!0)}(i.route,r),function mv(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function dv(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>rl(()=>rt(l.guards.map(_=>{const w=Bp(l.node)??t,b=nd(_,w);return er(function fv(n){return n&&Mh(n.canActivateChild)}(b)?b.canActivateChild(r,n):w.runInContext(()=>b(r,n))).pipe(sa())})).pipe(El())));return rt(a).pipe(El())}(n,i.path,t),function GE(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return rt(!0);const i=r.map(a=>rl(()=>{const l=Bp(e)??t,h=nd(a,l);return er(function oN(n){return n&&Mh(n.canActivate)}(h)?h.canActivate(e,n):l.runInContext(()=>h(e,n))).pipe(sa())}));return rt(i).pipe(El())}(n,i.route,t))),sa(i=>!0!==i,!0))}(r,a,n,e):rt(h)),(0,T.U)(h=>({...t,guardsResult:h})))})}(this.environmentInjector,l=>this.events.next(l)),(0,hi.b)(l=>{if(r.guardsResult=l.guardsResult,eu(l.guardsResult))throw Pm(0,l.guardsResult);const h=new bi(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(h)}),ws(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),Dv(l=>{if(l.guards.canActivateChecks.length)return rt(l).pipe((0,hi.b)(h=>{const _=new Mm(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(_)}),Hn(h=>{let _=!1;return rt(h).pipe(function aN(n,e){return(0,lr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return rt(t);let a=0;return(0,nn.D)(i).pipe(il(l=>function uN(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!bv(i)&&(a[jc]=i.title),function tI(n,e,t,r){const i=function lN(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return rt({});const a={};return(0,nn.D)(i).pipe((0,lr.z)(l=>function nI(n,e,t,r){const i=Bp(e)??r,a=nd(n,i);return er(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[l],e,t,r).pipe(sa(),(0,hi.b)(h=>{a[l]=h}))),fh(1),function Im(n){return(0,T.U)(()=>n)}(a),Za(l=>su(l)?Zr.E:di(l)))}(a,n,e,r).pipe((0,T.U)(l=>(n._resolvedData=l,n.data=St(n,t).resolve,i&&bv(i)&&(n.data[jc]=i.title),null)))}(l.route,r,n,e)),(0,hi.b)(()=>a++),fh(1),(0,lr.z)(l=>a===i.length?rt(t):Zr.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,hi.b)({next:()=>_=!0,complete:()=>{_||(t.restoreHistory(h),this.cancelNavigationTransition(h,"",2))}}))}),(0,hi.b)(h=>{const _=new Pp(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(_)}))}),Dv(l=>{const h=_=>{const w=[];_.routeConfig?.loadComponent&&!_.routeConfig._loadedComponent&&w.push(this.configLoader.loadComponent(_.routeConfig).pipe((0,hi.b)(b=>{_.component=b}),(0,T.U)(()=>{})));for(const b of _.children)w.push(...h(b));return w};return ct(h(l.targetSnapshot.root)).pipe(yp(),hh(1))}),Dv(()=>this.afterPreactivation()),(0,T.U)(l=>{const h=function vl(n,e,t){const r=aa(n,e._root,t?t._root:void 0);return new q(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:h}}),(0,hi.b)(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t)=>(0,T.U)(r=>(new BE(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l)),(0,hi.b)({next:l=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new fi(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{i=!0}}),gh(()=>{i||a||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Za(l=>{if(a=!0,xh(l)){wl(l)||(t.navigated=!0,t.restoreHistory(r,!0));const h=new ml(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode);if(this.events.next(h),wl(l)){const _=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),w={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||sI(r.source)};t.scheduleNavigation(_,Xc,null,w,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const h=new Th(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);this.events.next(h);try{r.resolve(t.errorHandler(l))}catch(_){r.reject(_)}}return Zr.E}))}))}cancelNavigationTransition(t,r,i){const a=new ml(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(a),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function sI(n){return n!==Xc}let oI=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===bt);return r}getResolvedTitleForRoute(t){return t.data[jc]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(aI)},providedIn:"root"}),n})(),aI=(()=>{class n extends oI{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ta))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),WT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(qT)},providedIn:"root"}),n})();class zT{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let qT=(()=>{class n extends zT{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const zp=new p.OlP("",{providedIn:"root",factory:()=>({})});let uI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(lI)},providedIn:"root"}),n})(),lI=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function KT(n){throw n}function dI(n,e,t){return e.parse("/")}const ZT={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},hI={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Di=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,p.f3M)(p.c2e),this.isNgZoneEnabled=!1,this.options=(0,p.f3M)(zp,{optional:!0})||{},this.errorHandler=this.options.errorHandler||KT,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||dI,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,p.f3M)(uI),this.routeReuseStrategy=(0,p.f3M)(WT),this.urlCreationStrategy=(0,p.f3M)(y),this.titleStrategy=(0,p.f3M)(oI),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=bm((0,p.f3M)(Fh,{optional:!0})??[]),this.navigationTransitions=(0,p.f3M)(Hm),this.urlSerializer=(0,p.f3M)(Xa),this.location=(0,p.f3M)(Le),this.isNgZoneEnabled=(0,p.f3M)(p.R0b)instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Ci,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=ce(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Xc,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const a={replaceUrl:!0},l=i?.navigationId?i:null;if(i){const _={...i};delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(a.state=_)}const h=this.parseUrl(t);this.scheduleNavigation(h,r,l,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(Fm),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:h,preserveFragment:_}=r,w=_?this.currentUrlTree.fragment:l;let b=null;switch(h){case"merge":b={...this.currentUrlTree.queryParams,...a};break;case"preserve":b=this.currentUrlTree.queryParams;break;default:b=a||null}return null!==b&&(b=this.removeEmptyProps(b)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,t,b,w??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=eu(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,Xc,null,r)}navigate(t,r={skipLocationChange:!1}){return function YT(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new p.vHH(4008,!1)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...ZT}:!1===r?{...hI}:r,eu(t))return Vr(this.currentUrlTree,t,i);const a=this.parseUrl(t);return Vr(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}scheduleNavigation(t,r,i,a,l){if(this.disposed)return Promise.resolve(!1);let h,_,w,b;return l?(h=l.resolve,_=l.reject,w=l.promise):w=new Promise((x,k)=>{h=x,_=k}),b="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:b,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:a,resolve:h,reject:_,promise:w,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),w.catch(x=>Promise.reject(x))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===i?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Sv=(()=>{class n{constructor(t,r,i,a,l,h){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=l,this.locationStrategy=h,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new _s.x;const _=l.nativeElement.tagName;this.isAnchorElement="A"===_||"AREA"===_,this.isAnchorElement?this.subscription=t.events.subscribe(w=>{w instanceof fi&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,p.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,p.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,p.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,a,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||a||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,p.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,a=this.el.nativeElement;null!==r?i.setAttribute(a,t,r):i.removeAttribute(a,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Di),p.Y36(Xe),p.$8M("tabindex"),p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(ut))},n.\u0275dir=p.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&p.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&p.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[p.TTD]}),n})();class Il{}let Av=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(ws(t=>t instanceof fi),il(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,p.MMx)(a.providers,t,`Route: ${a.path}`));const l=a._injector??t,h=a._loadedInjector??l;a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent?i.push(this.preloadConfig(l,a)):(a.children||a._loadedRoutes)&&i.push(this.processRoutes(h,a.children??a._loadedRoutes))}return(0,nn.D)(i).pipe((0,Dt.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):rt(null);const a=i.pipe((0,lr.z)(l=>null===l?rt(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,nn.D)([a,l]).pipe((0,Dt.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Di),p.LFG(p.Sil),p.LFG(p.lqb),p.LFG(Il),p.LFG(Is))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const xv=new p.OlP("");let QT=(()=>{class n{constructor(t,r,i,a,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=a,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof kp?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof fi&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof td&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new td(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){p.$Z()},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function Cl(n,e){return{\u0275kind:n,\u0275providers:e}}function Rv(){const n=(0,p.f3M)(p.zs3);return e=>{const t=n.get(p.z2F);if(e!==t.components[0])return;const r=n.get(Di),i=n.get(Zp);1===n.get(Mv)&&r.initialNavigation(),n.get(vI,null,p.XFs.Optional)?.setUpPreloading(),n.get(xv,null,p.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const Zp=new p.OlP("",{factory:()=>new _s.x}),Mv=new p.OlP("",{providedIn:"root",factory:()=>1});const vI=new p.OlP("");function tS(n){return Cl(0,[{provide:vI,useExisting:Av},{provide:Il,useExisting:n}])}const Nv=new p.OlP("ROUTER_FORROOT_GUARD"),kv=[Le,{provide:Xa,useClass:Tp},Di,Om,{provide:Xe,useFactory:function mI(n){return n.routerState.root},deps:[Di]},Is,[]];function fN(){return new p.PXZ("Router",Di)}let Gm=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[kv,[],{provide:Fh,multi:!0,useValue:t},{provide:Nv,useFactory:wI,deps:[[Di,new p.FiY,new p.tp0]]},{provide:zp,useValue:r||{}},r?.useHash?{provide:ut,useClass:Se}:{provide:ut,useClass:Ae},{provide:xv,useFactory:()=>{const n=(0,p.f3M)(jo),e=(0,p.f3M)(p.R0b),t=(0,p.f3M)(zp),r=(0,p.f3M)(Hm),i=(0,p.f3M)(Xa);return t.scrollOffset&&n.setOffset(t.scrollOffset),new QT(i,r,n,e,t)}},r?.preloadingStrategy?tS(r.preloadingStrategy).\u0275providers:[],{provide:p.PXZ,multi:!0,useFactory:fN},r?.initialNavigation?sS(r):[],[{provide:Pv,useFactory:Rv},{provide:p.tb,multi:!0,useExisting:Pv}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Fh,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Nv,8))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[av]}),n})();function wI(n){return"guarded"}function sS(n){return["disabled"===n.initialNavigation?Cl(3,[{provide:p.ip1,multi:!0,useFactory:()=>{const e=(0,p.f3M)(Di);return()=>{e.setUpLocationChangeListener()}}},{provide:Mv,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Cl(2,[{provide:Mv,useValue:0},{provide:p.ip1,multi:!0,deps:[p.zs3],useFactory:e=>{const t=e.get(ue,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const a=e.get(Di),l=e.get(Zp);(function r(i){e.get(Di).events.pipe(ws(l=>l instanceof fi||l instanceof ml||l instanceof Th),(0,T.U)(l=>l instanceof fi||l instanceof ml&&(0===l.code||1===l.code)&&null),ws(l=>null!==l),hh(1)).subscribe(()=>{i()})})(()=>{i(!0)}),e.get(Hm).afterPreactivation=()=>(i(!0),l.closed?rt(void 0):l),a.initialNavigation()}))}}]).\u0275providers:[]]}const Pv=new p.OlP("");var Vh=F(4986),rn=F(2122);function Qp(){return(0,Rr.e)((n,e)=>{let t,r=!1;n.subscribe((0,_e.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function Uh(n,e=D.y){return n=n??Ov,(0,Rr.e)((t,r)=>{let i,a=!0;t.subscribe((0,_e.x)(r,l=>{const h=e(l);(a||!n(i,h))&&(a=!1,i=h,r.next(l))}))})}function Ov(n,e){return n===e}var mt,hr=F(2011),Xp=(F(750),F(3942)),pe=F(5861),pi=F(9681),Ws=F(4859),Cs=F(1877),P=F(2090),uS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},la={},Wm=Wm||{},Vt=uS||self;function zm(){}function qm(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function gi(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Fv="closure_uid_"+(1e9*Math.random()>>>0),mN=0;function Lv(n,e,t){return n.call.apply(n.bind,arguments)}function II(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Ti(n,e,t){return(Ti=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Lv:II).apply(null,arguments)}function Km(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function mi(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,a){for(var l=Array(arguments.length-2),h=2;h<arguments.length;h++)l[h-2]=arguments[h];return e.prototype[i].apply(r,l)}}function au(){this.s=this.s,this.o=this.o}au.prototype.s=!1,au.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function EI(n){Object.prototype.hasOwnProperty.call(n,Fv)&&n[Fv]||(n[Fv]=++mN)}(this)},au.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const CI=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Jp(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function bI(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(qm(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let l=0;l<a;l++)n[i+l]=r[l]}else n.push(r)}}function Si(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Si.prototype.h=function(){this.defaultPrevented=!0};var cS=function(){if(!Vt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Vt.addEventListener("test",zm,e),Vt.removeEventListener("test",zm,e)}catch{}return n}();function Zm(n){return/^[\s\xa0]*$/.test(n)}var DI=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function zs(n,e){return n<e?-1:n>e?1:0}function Bh(){var n=Vt.navigator;return n&&(n=n.userAgent)?n:""}function ca(n){return-1!=Bh().indexOf(n)}function Vv(n){return Vv[" "](n),n}Vv[" "]=zm;var $h,n,dS=ca("Opera"),jh=ca("Trident")||ca("MSIE"),SI=ca("Edge"),eg=SI||jh,AI=ca("Gecko")&&!(-1!=Bh().toLowerCase().indexOf("webkit")&&!ca("Edge"))&&!(ca("Trident")||ca("MSIE"))&&!ca("Edge"),hS=-1!=Bh().toLowerCase().indexOf("webkit")&&!ca("Edge");function tg(){var n=Vt.document;return n?n.documentMode:void 0}e:{var Hh="",xI=(n=Bh(),AI?/rv:([^\);]+)(\)|;)/.exec(n):SI?/Edge\/([\d\.]+)/.exec(n):jh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):hS?/WebKit\/(\S+)/.exec(n):dS?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(xI&&(Hh=xI?xI[1]:""),jh){var ng=tg();if(null!=ng&&ng>parseFloat(Hh)){$h=String(ng);break e}}$h=Hh}var _N={};var MI=Vt.document&&jh&&(tg()||parseInt($h,10))||void 0;function id(n,e){if(Si.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(AI){e:{try{Vv(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:uu[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&id.X.h.call(this)}}mi(id,Si);var uu={2:"touch",3:"pen",4:"mouse"};id.prototype.h=function(){id.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var bl="closure_listenable_"+(1e6*Math.random()|0),Qm=0;function rg(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++Qm,this.ba=this.ea=!1}function Xm(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Jm(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Bv(n){const e={};for(const t in n)e[t]=n[t];return e}const NI="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function kI(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<NI.length;a++)t=NI[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Dl(n){this.src=n,this.g={},this.h=0}function jv(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=CI(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(Xm(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function PI(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ba&&a.listener==e&&a.capture==!!t&&a.ha==r)return i}return-1}Dl.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=PI(n,e,r,i);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new rg(e,this.src,a,!!r,i)).ea=t,n.push(e)),e};var $v="closure_lm_"+(1e6*Math.random()|0),Hv={};function OI(n,e,t,r,i){if(r&&r.once)return LI(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)OI(n,e[a],t,r,i);return null}return t=Wv(t),n&&n[bl]?n.N(e,t,gi(r)?!!r.capture:!!r,i):FI(n,e,t,!1,r,i)}function FI(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=gi(i)?!!i.capture:!!i,h=ig(n);if(h||(n[$v]=h=new Dl(n)),(t=h.add(e,t,r,l,a)).proxy)return t;if(r=function fS(){const e=pS;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)cS||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(t_(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function LI(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)LI(n,e[a],t,r,i);return null}return t=Wv(t),n&&n[bl]?n.O(e,t,gi(r)?!!r.capture:!!r,i):FI(n,e,t,!0,r,i)}function VI(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)VI(n,e[a],t,r,i);else r=gi(r)?!!r.capture:!!r,t=Wv(t),n&&n[bl]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=PI(a=n.g[e],t,r,i))&&(Xm(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=ig(n))&&(e=n.g[e.toString()],n=-1,e&&(n=PI(e,t,r,i)),(t=-1<n?e[n]:null)&&e_(t))}function e_(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[bl])jv(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(t_(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=ig(e))?(jv(t,n),0==t.h&&(t.src=null,e[$v]=null)):Xm(n)}}}function t_(n){return n in Hv?Hv[n]:Hv[n]="on"+n}function pS(n,e){if(n.ba)n=!0;else{e=new id(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&e_(n),n=t.call(r,e)}return n}function ig(n){return(n=n[$v])instanceof Dl?n:null}var Gv="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wv(n){return"function"==typeof n?n:(n[Gv]||(n[Gv]=function(e){return n.handleEvent(e)}),n[Gv])}function Yr(){au.call(this),this.i=new Dl(this),this.P=this,this.I=null}function _i(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Si(e,n);else if(e instanceof Si)e.target=e.target||n;else{var i=e;kI(e=new Si(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=n_(l,r,!0,e)&&i}if(i=n_(l=e.g=n,r,!0,e)&&i,i=n_(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=n_(l=e.g=t[a],r,!1,e)&&i}function n_(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.ba&&l.capture==t){var h=l.listener,_=l.ha||l.src;l.ea&&jv(n.i,l),i=!1!==h.call(_,r)&&i}}return i&&!r.defaultPrevented}mi(Yr,au),Yr.prototype[bl]=!0,Yr.prototype.removeEventListener=function(n,e,t,r){VI(this,n,e,t,r)},Yr.prototype.M=function(){if(Yr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Xm(t[r]);delete n.g[e],n.h--}}this.I=null},Yr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Yr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var zv=Vt.JSON.stringify;function gS(){var n=sg;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Gh,qv=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new mS,n=>n.reset());class mS{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function yN(n){Vt.setTimeout(()=>{throw n},0)}function Kv(n,e){Gh||function sd(){var n=Vt.Promise.resolve(void 0);Gh=function(){n.then(_S)}}(),BI||(Gh(),BI=!0),sg.add(n,e)}var BI=!1,sg=new class UI{constructor(){this.h=this.g=null}add(e,t){const r=qv.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function _S(){for(var n;n=gS();){try{n.h.call(n.g)}catch(t){yN(t)}var e=qv;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}BI=!1}function r_(n,e){Yr.call(this),this.h=n||1,this.g=e||Vt,this.j=Ti(this.lb,this),this.l=Date.now()}function og(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function Zv(n,e,t){if("function"==typeof n)t&&(n=Ti(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Ti(n.handleEvent,n)}return 2147483647<Number(e)?-1:Vt.setTimeout(n,e||0)}function Co(n){n.g=Zv(()=>{n.g=null,n.i&&(n.i=!1,Co(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}mi(r_,Yr),(mt=r_.prototype).ca=!1,mt.R=null,mt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),_i(this,"tick"),this.ca&&(og(this),this.start()))}},mt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},mt.M=function(){r_.X.M.call(this),og(this),delete this.g};class ag extends au{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Co(this)}M(){super.M(),this.g&&(Vt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mr(n){au.call(this),this.h=n,this.g={}}mi(Mr,au);var Tl=[];function ug(n,e,t,r){Array.isArray(t)||(t&&(Tl[0]=t.toString()),t=Tl);for(var i=0;i<t.length;i++){var a=OI(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function bs(n){Jm(n.g,function(e,t){this.g.hasOwnProperty(t)&&e_(e)},n),n.g={}}function Wh(){this.g=!0}function bo(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Zh(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return zv(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Mr.prototype.M=function(){Mr.X.M.call(this),bs(this)},Mr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Wh.prototype.Aa=function(){this.g=!1},Wh.prototype.info=function(){};var qs={},od=null;function lu(){return od=od||new Yr}function ad(n){Si.call(this,qs.Pa,n)}function Yh(n){const e=lu();_i(e,new ad(e))}function Yv(n,e){Si.call(this,qs.STAT_EVENT,n),this.stat=e}function Ai(n){const e=lu();_i(e,new Yv(e,n))}function Qv(n,e){Si.call(this,qs.Qa,n),this.size=e}function Qh(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Vt.setTimeout(function(){n()},e)}qs.Pa="serverreachability",mi(ad,Si),qs.STAT_EVENT="statevent",mi(Yv,Si),qs.Qa="timingevent",mi(Qv,Si);var lg={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Xv={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function i_(){}function jI(){}i_.prototype.h=null;var tw,cg={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function s_(){Si.call(this,"d")}function ew(){Si.call(this,"c")}function Xh(){}function ud(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Mr(this),this.O=o_,this.T=new r_(n=eg?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new $I}function $I(){this.i=null,this.g="",this.h=!1}mi(s_,Si),mi(ew,Si),mi(Xh,i_),Xh.prototype.g=function(){return new XMLHttpRequest},Xh.prototype.i=function(){return{}},tw=new Xh;var o_=45e3,Jh={},ef={};function nw(n,e,t){n.K=1,n.v=fg(cu(e)),n.s=t,n.P=!0,a_(n,null)}function a_(n,e){n.F=Date.now(),ld(n),n.A=cu(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),KI(t.i,"t",r),n.C=0,t=n.l.H,n.h=new $I,n.g=uC(n.l,t?e:null,!n.s),0<n.N&&(n.L=new ag(Ti(n.La,n,n.g),n.N)),ug(n.S,n.g,"readystatechange",n.ib),e=n.H?Bv(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Yh(),function zh(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",h=a.split("&"),_=0;_<h.length;_++){var w=h[_].split("=");if(1<w.length){var b=w[0];w=w[1];var x=b.split("_");l=2<=x.length&&"type"==x[1]?l+(b+"=")+w+"&":l+(b+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function u_(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function rw(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=HI(n,t),i==ef){4==e&&(n.o=4,Ai(14),r=!1),bo(n.j,n.m,null,"[Incomplete Response]");break}if(i==Jh){n.o=4,Ai(15),bo(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}bo(n.j,n.m,i,null),sw(n,i)}u_(n)&&i!=ef&&i!=Jh&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ai(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),w_(e),e.K=!0,Ai(11))):(bo(n.j,n.m,t,"[Invalid Chunked Response]"),Sl(n),cd(n))}function HI(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?ef:(t=Number(e.substring(t,r)),isNaN(t)?Jh:(r+=1)+t>e.length?ef:(e=e.substr(r,t),n.C=r+t,e))}function ld(n){n.V=Date.now()+n.O,iw(n,n.O)}function iw(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Qh(Ti(n.gb,n),e)}function dg(n){n.B&&(Vt.clearTimeout(n.B),n.B=null)}function cd(n){0==n.l.G||n.I||gw(n.l,n)}function Sl(n){dg(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,og(n.T),bs(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function sw(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Er(t.h,n)))if(!n.J&&Er(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;wg(t),__(t)}vg(t),Ai(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=Qh(Ti(t.cb,t),6e3));if(1>=YI(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Ml(t,11)}else if((n.J||t.g==n)&&wg(t),!Zm(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let w=i[e];if(t.T=w[0],w=w[1],2==t.G)if("c"==w[0]){t.I=w[1],t.ka=w[2];const b=w[3];null!=b&&(t.ma=b,t.j.info("VER="+t.ma));const x=w[4];null!=x&&(t.Ca=x,t.j.info("SVER="+t.Ca));const k=w[5];null!=k&&"number"==typeof k&&0<k&&(t.J=r=1.5*k,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const U=n.g;if(U){const W=U.g?U.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(W){var a=r.h;a.g||-1==W.indexOf("spdy")&&-1==W.indexOf("quic")&&-1==W.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(d_(a,a.h),a.h=null))}if(r.D){const ae=U.g?U.g.getResponseHeader("X-HTTP-Session-Id"):null;ae&&(r.za=ae,Vn(r.F,r.D,ae))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=yw(r,r.H?r.ka:null,r.V),l.J){QI(r.h,l);var h=l,_=r.J;_&&h.setTimeout(_),h.B&&(dg(h),ld(h)),r.g=l}else v_(r);0<t.i.length&&yg(t)}else"stop"!=w[0]&&"close"!=w[0]||Ml(t,7);else 3==t.G&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?Ml(t,7):m_(t):"noop"!=w[0]&&t.l&&t.l.wa(w),t.A=0)}Yh()}catch{}}function ow(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(qm(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function WI(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(qm(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function GI(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(qm(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(mt=ud.prototype).setTimeout=function(n){this.O=n},mt.ib=function(n){n=n.target;const e=this.L;e&&3==hu(n)?e.l():this.La(n)},mt.La=function(n){try{if(n==this.g)e:{const b=hu(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>b)&&(3!=b||eg||this.g&&(this.h.h||this.g.fa()||iC(this.g)))){this.I||4!=b||7==e||Yh(),dg(this);var t=this.g.aa();this.Y=t;t:if(u_(this)){var r=iC(this.g);n="";var i=r.length,a=4==hu(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Sl(this),cd(this);var l="";break t}this.h.i=new Vt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function qh(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.U,b,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var h,_=this.g;if((h=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Zm(h)){var w=h;break t}}w=null}if(!(t=w)){this.i=!1,this.o=3,Ai(12),Sl(this),cd(this);break e}bo(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,sw(this,t)}this.P?(rw(this,b,l),eg&&this.i&&3==b&&(ug(this.S,this.T,"tick",this.hb),this.T.start())):(bo(this.j,this.m,l,null),sw(this,l)),4==b&&Sl(this),this.i&&!this.I&&(4==b?gw(this.l,this):(this.i=!1,ld(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Ai(12)):(this.o=0,Ai(13)),Sl(this),cd(this)}}}catch{}},mt.hb=function(){if(this.g){var n=hu(this.g),e=this.g.fa();this.C<e.length&&(dg(this),rw(this,n,e),this.i&&4!=n&&ld(this))}},mt.cancel=function(){this.I=!0,Sl(this)},mt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function Kh(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Yh(),Ai(17)),Sl(this),this.o=2,cd(this)):iw(this,this.V-n)};var aw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dd(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof dd){this.h=void 0!==e?e:n.h,hg(this,n.j),this.s=n.s,this.g=n.g,hd(this,n.m),this.l=n.l,e=n.i;var t=new pg;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),uw(this,t),this.o=n.o}else n&&(t=String(n).match(aw))?(this.h=!!e,hg(this,t[1]||"",!0),this.s=tf(t[2]||""),this.g=tf(t[3]||"",!0),hd(this,t[4]),this.l=tf(t[5]||"",!0),uw(this,t[6]||"",!0),this.o=tf(t[7]||"")):(this.h=!!e,this.i=new pg(null,this.h))}function cu(n){return new dd(n)}function hg(n,e,t){n.j=t?tf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function hd(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function uw(n,e,t){e instanceof pg?(n.i=e,function vN(n,e){e&&!n.j&&(da(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(xl(this,r),KI(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=nf(e,Al)),n.i=new pg(e,n.h))}function Vn(n,e,t){n.i.set(e,t)}function fg(n){return Vn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function tf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function nf(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,zI),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function zI(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}dd.prototype.toString=function(){var n=[],e=this.j;e&&n.push(nf(e,lw,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(nf(e,lw,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(nf(t,"/"==t.charAt(0)?l_:qI,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",nf(t,vS)),n.join("")};var lw=/[#\/\?@]/g,qI=/[#\?:]/g,l_=/[#\?]/g,Al=/[#\?@]/g,vS=/#/g;function pg(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function da(n){n.g||(n.g=new Map,n.h=0,n.i&&function yS(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function xl(n,e){da(n),e=Rl(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function c_(n,e){return da(n),e=Rl(n,e),n.g.has(e)}function KI(n,e,t){xl(n,e),0<t.length&&(n.i=null,n.g.set(Rl(n,e),Jp(t)),n.h+=t.length)}function Rl(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function ZI(n){this.l=n||wS,n=Vt.PerformanceNavigationTiming?0<(n=Vt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Vt.g&&Vt.g.Ga&&Vt.g.Ga()&&Vt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(mt=pg.prototype).add=function(n,e){da(this),this.i=null,n=Rl(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},mt.forEach=function(n,e){da(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},mt.oa=function(){da(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},mt.W=function(n){da(this);let e=[];if("string"==typeof n)c_(this,n)&&(e=e.concat(this.g.get(Rl(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},mt.set=function(n,e){return da(this),this.i=null,c_(this,n=Rl(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},mt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},mt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var i=a;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var wS=10;function cw(n){return!!n.h||!!n.g&&n.g.size>=n.j}function YI(n){return n.h?1:n.g?n.g.size:0}function Er(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function d_(n,e){n.g?n.g.add(e):n.h=e}function QI(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function XI(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Jp(n.i)}function h_(){}function ES(){this.g=new h_}function JI(n,e,t){const r=t||"";try{ow(n,function(i,a){let l=i;gi(i)&&(l=zv(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function du(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function gg(n){this.l=n.ac||null,this.j=n.jb||!1}function f_(n,e){Yr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=p_,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ZI.prototype.cancel=function(){if(this.i=XI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},h_.prototype.stringify=function(n){return Vt.JSON.stringify(n,void 0)},h_.prototype.parse=function(n){return Vt.JSON.parse(n,void 0)},mi(gg,i_),gg.prototype.g=function(){return new f_(this.l,this.j)},gg.prototype.i=function(n){return function(){return n}}({}),mi(f_,Yr);var p_=0;function tC(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function rf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,g_(n)}function g_(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(mt=f_.prototype).open=function(n,e){if(this.readyState!=p_)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,g_(this)},mt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Vt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},mt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,rf(this)),this.readyState=p_},mt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,g_(this)),this.g&&(this.readyState=3,g_(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Vt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;tC(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},mt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?rf(this):g_(this),3==this.readyState&&tC(this)}},mt.Va=function(n){this.g&&(this.response=this.responseText=n,rf(this))},mt.Ua=function(n){this.g&&(this.response=n,rf(this))},mt.ga=function(){this.g&&rf(this)},mt.setRequestHeader=function(n,e){this.v.append(n,e)},mt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},mt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(f_.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var nC=Vt.JSON.parse;function Wn(n){Yr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Do,this.K=this.L=!1}mi(Wn,Yr);var Do="",IS=/^https?$/i,CS=["POST","PUT"];function Ks(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Zs(n),mg(n)}function Zs(n){n.D||(n.D=!0,_i(n,"complete"),_i(n,"error"))}function dw(n){if(n.h&&typeof Wm<"u"&&(!n.C[1]||4!=hu(n)||2!=n.aa()))if(n.v&&4==hu(n))Zv(n.Ha,0,n);else if(_i(n,"readystatechange"),4==hu(n)){n.h=!1;try{const h=n.aa();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(aw)[1]||null;if(!i&&Vt.self&&Vt.self.location){var a=Vt.self.location.protocol;i=a.substr(0,a.length-1)}r=!IS.test(i?i.toLowerCase():"")}t=r}if(t)_i(n,"complete"),_i(n,"success");else{n.m=6;try{var l=2<hu(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.aa()+"]",Zs(n)}}finally{mg(n)}}}function mg(n,e){if(n.g){rC(n);const t=n.g,r=n.C[0]?zm:null;n.g=null,n.C=null,e||_i(n,"ready");try{t.onreadystatechange=r}catch{}}}function rC(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Vt.clearTimeout(n.A),n.A=null)}function hu(n){return n.g?n.g.readyState:0}function iC(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Do:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function sC(n){let e="";return Jm(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function _g(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=sC(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Vn(n,e,t))}function fu(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function oC(n){this.Ca=0,this.i=[],this.j=new Wh,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=fu("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=fu("baseRetryDelayMs",5e3,n),this.bb=fu("retryDelaySeedMs",1e4,n),this.$a=fu("forwardChannelMaxRetries",2,n),this.ta=fu("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new ZI(n&&n.concurrentRequestLimit),this.Fa=new ES,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function m_(n){if(hw(n),3==n.G){var e=n.U++,t=cu(n.F);Vn(t,"SID",n.I),Vn(t,"RID",e),Vn(t,"TYPE","terminate"),sf(n,t),(e=new ud(n,n.j,e,void 0)).K=2,e.v=fg(cu(t)),t=!1,Vt.navigator&&Vt.navigator.sendBeacon&&(t=Vt.navigator.sendBeacon(e.v.toString(),"")),!t&&Vt.Image&&((new Image).src=e.v,t=!0),t||(e.g=uC(e.l,null),e.g.da(e.v)),e.F=Date.now(),ld(e)}_w(n)}function __(n){n.g&&(w_(n),n.g.cancel(),n.g=null)}function hw(n){__(n),n.u&&(Vt.clearTimeout(n.u),n.u=null),wg(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Vt.clearTimeout(n.m),n.m=null)}function yg(n){cw(n.h)||n.m||(n.m=!0,Kv(n.Ja,n),n.C=0)}function aC(n,e){var t;t=e?e.m:n.U++;const r=cu(n.F);Vn(r,"SID",n.I),Vn(r,"RID",t),Vn(r,"AID",n.T),sf(n,r),n.o&&n.s&&_g(r,n.o,n.s),t=new ud(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=fw(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),d_(n.h,t),nw(t,r,e)}function sf(n,e){n.ia&&Jm(n.ia,function(t,r){Vn(e,r,t)}),n.l&&ow({},function(t,r){Vn(e,r,t)})}function fw(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Ti(n.l.Ra,n.l,n):null;e:{var i=n.i;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].h,l.push("ofs="+a)):a=0:l.push("ofs="+a);let h=!0;for(let _=0;_<t;_++){let w=i[_].h;const b=i[_].g;if(w-=a,0>w)a=Math.max(0,i[_].h-100),h=!1;else try{JI(b,l,"req"+w+"_")}catch{r&&r(b)}}if(h){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function v_(n){n.g||n.u||(n.Z=1,Kv(n.Ia,n),n.A=0)}function vg(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Qh(Ti(n.Ia,n),mw(n,n.A)),n.A++,0))}function w_(n){null!=n.B&&(Vt.clearTimeout(n.B),n.B=null)}function pw(n){n.g=new ud(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=cu(n.sa);Vn(e,"RID","rpc"),Vn(e,"SID",n.I),Vn(e,"CI",n.L?"0":"1"),Vn(e,"AID",n.T),Vn(e,"TYPE","xmlhttp"),sf(n,e),n.o&&n.s&&_g(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=fg(cu(e)),t.s=null,t.P=!0,a_(t,n)}function wg(n){null!=n.v&&(Vt.clearTimeout(n.v),n.v=null)}function gw(n,e){var t=null;if(n.g==e){wg(n),w_(n),n.g=null;var r=2}else{if(!Er(n.h,e))return;t=e.D,QI(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;_i(r=lu(),new Qv(r,t)),yg(n)}else v_(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function y_(n,e){return!(YI(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Qh(Ti(n.Ja,n,e),mw(n,n.C)),n.C++,0)))}(n,e)||2==r&&vg(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:Ml(n,5);break;case 4:Ml(n,10);break;case 3:Ml(n,6);break;default:Ml(n,2)}}function mw(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Ml(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Ti(n.kb,n);t||(t=new dd("//www.google.com/images/cleardot.gif"),Vt.location&&"http"==Vt.location.protocol||hg(t,"https"),fg(t)),function eC(n,e){const t=new Wh;if(Vt.Image){const r=new Image;r.onload=Km(du,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Km(du,t,r,"TestLoadImage: error",!1,e),r.onabort=Km(du,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Km(du,t,r,"TestLoadImage: timeout",!1,e),Vt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ai(2);n.G=0,n.l&&n.l.va(e),_w(n),hw(n)}function _w(n){if(n.G=0,n.la=[],n.l){const e=XI(n.h);(0!=e.length||0!=n.i.length)&&(bI(n.la,e),bI(n.la,n.i),n.h.i.length=0,Jp(n.i),n.i.length=0),n.l.ua()}}function yw(n,e,t){var r=t instanceof dd?cu(t):new dd(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),hd(r,r.m);else{var i=Vt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new dd(null,void 0);r&&hg(a,r),e&&(a.g=e),i&&hd(a,i),t&&(a.l=t),r=a}return e=n.za,(t=n.D)&&e&&Vn(r,t,e),Vn(r,"VER",n.ma),sf(n,r),r}function uC(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Wn(t&&n.Da&&!n.ra?new gg({jb:!0}):n.ra)).Ka(n.H),e}function lC(){}function E_(){if(jh&&!(10<=Number(MI)))throw Error("Environmental error: no available transport.")}function Ds(n,e){Yr.call(this),this.g=new oC(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!Zm(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Zm(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new af(this)}function cC(n){s_.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function dC(){ew.call(this),this.status=1}function af(n){this.g=n}(mt=Wn.prototype).Ka=function(n){this.L=n},mt.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():tw.g(),this.C=function Jv(n){return n.h||(n.h=n.i())}(this.u?this.u:tw),this.g.onreadystatechange=Ti(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void Ks(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=Vt.FormData&&n instanceof Vt.FormData,!(0<=CI(CS,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,l]of t)this.g.setRequestHeader(a,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{rC(this),0<this.B&&((this.K=function ha(n){return jh&&function RI(){return function TI(n){var e=_N;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=DI(String($h)).split("."),t=DI("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",a=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=zs(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||zs(0==i[2].length,0==a[2].length)||zs(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ti(this.qa,this)):this.A=Zv(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){Ks(this,a)}},mt.qa=function(){typeof Wm<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,_i(this,"timeout"),this.abort(8))},mt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,_i(this,"complete"),_i(this,"abort"),mg(this))},mt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),mg(this,!0)),Wn.X.M.call(this)},mt.Ha=function(){this.s||(this.F||this.v||this.l?dw(this):this.fb())},mt.fb=function(){dw(this)},mt.aa=function(){try{return 2<hu(this)?this.g.status:-1}catch{return-1}},mt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},mt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),nC(e)}},mt.Ea=function(){return this.m},mt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(mt=oC.prototype).ma=8,mt.G=1,mt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new ud(this,this.j,n,void 0);let a=this.s;if(this.S&&(a?(a=Bv(a),kI(a,this.S)):a=this.S),null!==this.o||this.N||(i.H=a,a=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=fw(this,i,e),Vn(t=cu(this.F),"RID",n),Vn(t,"CVER",22),this.D&&Vn(t,"X-HTTP-Session-Id",this.D),sf(this,t),a&&(this.N?e="headers="+encodeURIComponent(String(sC(a)))+"&"+e:this.o&&_g(t,this.o,a)),d_(this.h,i),this.Ya&&Vn(t,"TYPE","init"),this.O?(Vn(t,"$req",e),Vn(t,"SID","null"),i.Z=!0,nw(i,t,null)):nw(i,t,e),this.G=2}}else 3==this.G&&(n?aC(this,n):0==this.i.length||cw(this.h)||aC(this))},mt.Ia=function(){if(this.u=null,pw(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Qh(Ti(this.eb,this),n)}},mt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Ai(10),__(this),pw(this))},mt.cb=function(){null!=this.v&&(this.v=null,__(this),vg(this),Ai(19))},mt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Ai(2)):(this.j.info("Failed to ping google.com"),Ai(1))},(mt=lC.prototype).xa=function(){},mt.wa=function(){},mt.va=function(){},mt.ua=function(){},mt.Ra=function(){},E_.prototype.g=function(n,e){return new Ds(n,e)},mi(Ds,Yr),Ds.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Ai(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=yw(n,null,n.V),yg(n)},Ds.prototype.close=function(){m_(this.g)},Ds.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=zv(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&yg(e)},Ds.prototype.M=function(){this.g.l=null,delete this.j,m_(this.g),delete this.g,Ds.X.M.call(this)},mi(cC,s_),mi(dC,ew),mi(af,lC),af.prototype.xa=function(){_i(this.g,"a")},af.prototype.wa=function(n){_i(this.g,new cC(n))},af.prototype.va=function(n){_i(this.g,new dC)},af.prototype.ua=function(){_i(this.g,"b")},E_.prototype.createWebChannel=E_.prototype.g,Ds.prototype.send=Ds.prototype.u,Ds.prototype.open=Ds.prototype.m,Ds.prototype.close=Ds.prototype.close,lg.NO_ERROR=0,lg.TIMEOUT=8,lg.HTTP_ERROR=6,Xv.COMPLETE="complete",jI.EventType=cg,cg.OPEN="a",cg.CLOSE="b",cg.ERROR="c",cg.MESSAGE="d",Yr.prototype.listen=Yr.prototype.N,Wn.prototype.listenOnce=Wn.prototype.O,Wn.prototype.getLastError=Wn.prototype.Oa,Wn.prototype.getLastErrorCode=Wn.prototype.Ea,Wn.prototype.getStatus=Wn.prototype.aa,Wn.prototype.getResponseJson=Wn.prototype.Sa,Wn.prototype.getResponseText=Wn.prototype.fa,Wn.prototype.send=Wn.prototype.da,Wn.prototype.setWithCredentials=Wn.prototype.Ka;var bS=la.createWebChannelTransport=function(){return new E_},DS=la.getStatEventTarget=function(){return lu()},vw=la.ErrorCode=lg,TS=la.EventType=Xv,SS=la.Event=qs,hC=la.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},AS=la.FetchXmlHttpFactory=gg,I_=la.WebChannel=jI,xS=la.XhrIo=Wn;const fC="@firebase/firestore";class Qr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Qr.UNAUTHENTICATED=new Qr(null),Qr.GOOGLE_CREDENTIALS=new Qr("google-credentials-uid"),Qr.FIRST_PARTY=new Qr("first-party-uid"),Qr.MOCK_USER=new Qr("mock-user");let fd="9.16.0";const pu=new Cs.Yd("@firebase/firestore");function C_(){return pu.logLevel}function ke(n,...e){if(pu.logLevel<=Cs.in.DEBUG){const t=e.map(b_);pu.debug(`Firestore (${fd}): ${n}`,...t)}}function fr(n,...e){if(pu.logLevel<=Cs.in.ERROR){const t=e.map(b_);pu.error(`Firestore (${fd}): ${n}`,...t)}}function Nl(n,...e){if(pu.logLevel<=Cs.in.WARN){const t=e.map(b_);pu.warn(`Firestore (${fd}): ${n}`,...t)}}function b_(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function nt(n="Unexpected state"){const e=`FIRESTORE (${fd}) INTERNAL ASSERTION FAILED: `+n;throw fr(e),new Error(e)}function ht(n,e){n||nt()}function Ge(n,e){return n}const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Me extends P.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class zn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class RS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ww{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Qr.UNAUTHENTICATED))}shutdown(){}}class EN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class mC{constructor(e){this.t=e,this.currentUser=Qr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=w=>this.i!==i?(i=this.i,t(w)):Promise.resolve();let l=new zn;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new zn,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const w=l;e.enqueueRetryable((0,pe.Z)(function*(){yield w.promise,yield a(r.currentUser)}))},_=w=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(w=>_(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?_(w):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new zn)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ht("string"==typeof r.accessToken),new RS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ht(null===e||"string"==typeof e),new Qr(e)}}class _C{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=Qr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(ht(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class IN{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new _C(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Qr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class At{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class MS{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=a=>{null!=a.error&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.A;return this.A=a.token,ke("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.T.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.T.getImmediate({optional:!0});a?i(a):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ht("string"==typeof t.token),this.A=t.token,new At(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function NS(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class pd{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=NS(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function $t(n,e){return n<e?-1:n>e?1:0}function gu(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Eg(n){return n+"\0"}class Ht{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Me(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Me(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Me(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Me(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ht.fromMillis(Date.now())}static fromDate(e){return Ht.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Ht(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?$t(this.nanoseconds,e.nanoseconds):$t(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class It{constructor(e){this.timestamp=e}static fromTimestamp(e){return new It(e)}static min(){return new It(new Ht(0,0))}static max(){return new It(new Ht(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class uf{constructor(e,t,r){void 0===t?t=0:t>e.length&&nt(),void 0===r?r=e.length-t:r>e.length-t&&nt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===uf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof uf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class dn extends uf{construct(e,t,r){return new dn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Me(oe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new dn(t)}static emptyPath(){return new dn([])}}const kS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tr extends uf{construct(e,t,r){return new tr(e,t,r)}static isValidIdentifier(e){return kS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new tr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Me(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Me(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Me(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===h?(l=!l,i++):"."!==h||l?(r+=h,i++):(a(),i++)}if(a(),l)throw new Me(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tr(t)}static emptyPath(){return new tr([])}}class qe{constructor(e){this.path=e}static fromPath(e){return new qe(dn.fromString(e))}static fromName(e){return new qe(dn.fromString(e).popFirst(5))}static empty(){return new qe(dn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===dn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return dn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qe(new dn(e.slice()))}}class Ig{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function D_(n){return n.fields.find(e=>2===e.kind)}function gd(n){return n.fields.filter(e=>2!==e.kind)}Ig.UNKNOWN_ID=-1;class T_{constructor(e,t){this.fieldPath=e,this.kind=t}}class bg{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new bg(0,xi.min())}}function yC(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=It.fromTimestamp(1e9===r?new Ht(t+1,0):new Ht(t,r));return new xi(i,qe.empty(),e)}function vC(n){return new xi(n.readTime,n.key,-1)}class xi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new xi(It.min(),qe.empty(),-1)}static max(){return new xi(It.max(),qe.empty(),-1)}}function S_(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=qe.comparator(n.documentKey,e.documentKey),0!==t?t:$t(n.largestBatchId,e.largestBatchId))}const Ew="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Iw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function kl(n){return md.apply(this,arguments)}function md(){return md=(0,pe.Z)(function*(n){if(n.code!==oe.FAILED_PRECONDITION||n.message!==Ew)throw n;ke("LocalStore","Unexpectedly lost primary lease")}),md.apply(this,arguments)}class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&nt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new te((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof te?t:te.resolve(t)}catch(t){return te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):te.reject(t)}static resolve(e){return new te((t,r)=>{t(e)})}static reject(e){return new te((t,r)=>{r(e)})}static waitFor(e){return new te((t,r)=>{let i=0,a=0,l=!1;e.forEach(h=>{++i,h.next(()=>{++a,l&&a===i&&t()},_=>r(_))}),l=!0,a===i&&t()})}static or(e){let t=te.resolve(!1);for(const r of e)t=t.next(i=>i?te.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new te((r,i)=>{const a=e.length,l=new Array(a);let h=0;for(let _=0;_<a;_++){const w=_;t(e[w]).next(b=>{l[w]=b,++h,h===a&&r(l)},b=>i(b))}})}static doWhile(e,t){return new te((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class A_{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new zn,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new lf(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=bw(r.target.error);this.P.reject(new lf(e,i))}}static open(e,t,r,i){try{return new A_(t,e.transaction(i,r))}catch(a){throw new lf(t,a)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(ke("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new wC(t)}}class To{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===To.D((0,P.z$)())&&fr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ke("SimpleDb","Removing database:",e),_d(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,P.hl)())return!1;if(To.N())return!0;const e=(0,P.z$)(),t=To.D(e),r=0<t&&t<10,i=To.k(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,pe.Z)(function*(){return t.db||(ke("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new lf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const h=l.target.error;i("VersionError"===h.name?new Me(oe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Me(oe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new lf(e,h))},a.onupgradeneeded=l=>{ke("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.S.$(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{ke("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,pe.Z)(function*(){const l="readonly"===t;let h=0;for(;;){++h;try{a.db=yield a.F(e);const _=A_.open(a.db,e,l?"readonly":"readwrite",r),w=i(_).next(b=>(_.V(),b)).catch(b=>(_.abort(b),te.reject(b))).toPromise();return w.catch(()=>{}),yield _.v,w}catch(_){const w=_,b="FirebaseError"!==w.name&&h<3;if(ke("SimpleDb","Transaction failed with error:",w.message,"Retrying:",b),a.close(),!b)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class OS{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return _d(this.q.delete())}}class lf extends Me{constructor(e,t){super(oe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function mu(n){return"IndexedDbTransactionError"===n.name}class wC{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ke("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ke("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),_d(r)}add(e){return ke("SimpleDb","ADD",this.store.name,e,e),_d(this.store.add(e))}get(e){return _d(this.store.get(e)).next(t=>(void 0===t&&(t=null),ke("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ke("SimpleDb","DELETE",this.store.name,e),_d(this.store.delete(e))}count(){return ke("SimpleDb","COUNT",this.store.name),_d(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.H(i,(l,h)=>{a.push(h)}).next(()=>a)}{const i=this.store.getAll(r.range);return new te((a,l)=>{i.onerror=h=>{l(h.target.error)},i.onsuccess=h=>{a(h.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new te((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}Y(e,t){ke("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(a,l,h)=>h.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new te((r,i)=>{t.onerror=a=>{const l=bw(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(h=>{h?l.continue():r()}):r()}})}H(e,t){const r=[];return new te((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const h=l.target.result;if(!h)return void i();const _=new OS(h),w=t(h.primaryKey,h.value,_);if(w instanceof te){const b=w.catch(x=>(_.done(),te.reject(x)));r.push(b)}_.isDone?i():null===_.G?h.continue():h.continue(_.G)}}).next(()=>te.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function _d(n){return new te((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=bw(r.target.error);t(i)}})}let Cw=!1;function bw(n){const e=To.D((0,P.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Me("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Cw||(Cw=!0,setTimeout(()=>{throw r},0)),r}}return n}class FS{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;ke("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,pe.Z)(function*(){t.task=null;try{ke("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){mu(r)?ke("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield kl(r)}yield t.nt(6e4)}))}}class bN{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,pe.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,a=!0;return te.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return ke("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,i).next(h=>{i-=h,r.add(l)});a=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(i,a)).next(h=>(ke("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>l.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,a)=>{const l=vC(a);S_(l,r)>0&&(r=l)}),new xi(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Ys=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ut(i),this.ct=i=>r.writeSequenceNumber(i))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return n.at=-1,n})();class DN{constructor(e,t,r,i,a,l,h,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.useFetchStreams=_}}class yd{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new yd("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof yd&&e.projectId===this.projectId&&e.database===this.database}}function Dw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function fa(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function EC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Dg(n){return null==n}function cf(n){return 0===n&&1/n==-1/0}function df(n){return"number"==typeof n&&Number.isInteger(n)&&!cf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Ur{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Ur(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new Ur(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $t(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ur.EMPTY_BYTE_STRING=new Ur("");const VS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pl(n){if(ht(!!n),"string"==typeof n){let e=0;const t=VS.exec(n);if(ht(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ir(n.seconds),nanos:Ir(n.nanos)}}function Ir(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function vd(n){return"string"==typeof n?Ur.fromBase64String(n):Ur.fromUint8Array(n)}function x_(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function IC(n){const e=n.mapValue.fields.__previous_value__;return x_(e)?IC(e):e}function Tg(n){const e=Pl(n.mapValue.fields.__local_write_time__.timestampValue);return new Ht(e.seconds,e.nanos)}const Qs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},R_={nullValue:"NULL_VALUE"};function Ol(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?x_(n)?4:DC(n)?9007199254740991:10:nt()}function pa(n,e){if(n===e)return!0;const t=Ol(n);if(t!==Ol(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Tg(n).isEqual(Tg(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=Pl(r.timestampValue),l=Pl(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,vd(n.bytesValue).isEqual(vd(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Ir(r.geoPointValue.latitude)===Ir(i.geoPointValue.latitude)&&Ir(r.geoPointValue.longitude)===Ir(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Ir(r.integerValue)===Ir(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Ir(r.doubleValue),l=Ir(i.doubleValue);return a===l?cf(a)===cf(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return gu(n.arrayValue.values||[],e.arrayValue.values||[],pa);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(Dw(a)!==Dw(l))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(void 0===l[h]||!pa(a[h],l[h])))return!1;return!0}(n,e);default:return nt()}var i}function hf(n,e){return void 0!==(n.values||[]).find(t=>pa(t,e))}function Fl(n,e){if(n===e)return 0;const t=Ol(n),r=Ol(e);if(t!==r)return $t(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return $t(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=Ir(i.integerValue||i.doubleValue),h=Ir(a.integerValue||a.doubleValue);return l<h?-1:l>h?1:l===h?0:isNaN(l)?isNaN(h)?0:-1:1}(n,e);case 3:return Tw(n.timestampValue,e.timestampValue);case 4:return Tw(Tg(n),Tg(e));case 5:return $t(n.stringValue,e.stringValue);case 6:return function(i,a){const l=vd(i),h=vd(a);return l.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),h=a.split("/");for(let _=0;_<l.length&&_<h.length;_++){const w=$t(l[_],h[_]);if(0!==w)return w}return $t(l.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=$t(Ir(i.latitude),Ir(a.latitude));return 0!==l?l:$t(Ir(i.longitude),Ir(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],h=a.values||[];for(let _=0;_<l.length&&_<h.length;++_){const w=Fl(l[_],h[_]);if(w)return w}return $t(l.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===Qs.mapValue&&a===Qs.mapValue)return 0;if(i===Qs.mapValue)return 1;if(a===Qs.mapValue)return-1;const l=i.fields||{},h=Object.keys(l),_=a.fields||{},w=Object.keys(_);h.sort(),w.sort();for(let b=0;b<h.length&&b<w.length;++b){const x=$t(h[b],w[b]);if(0!==x)return x;const k=Fl(l[h[b]],_[w[b]]);if(0!==k)return k}return $t(h.length,w.length)}(n.mapValue,e.mapValue);default:throw nt()}}function Tw(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return $t(n,e);const t=Pl(n),r=Pl(e),i=$t(t.seconds,r.seconds);return 0!==i?i:$t(t.nanos,r.nanos)}function ff(n){return Sg(n)}function Sg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Pl(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?vd(n.bytesValue).toBase64():"referenceValue"in n?qe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=Sg(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const h of i)l?l=!1:a+=",",a+=`${h}:${Sg(r.fields[h])}`;return a+"}"}(n.mapValue):nt();var e}function wd(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function M_(n){return!!n&&"integerValue"in n}function pf(n){return!!n&&"arrayValue"in n}function CC(n){return!!n&&"nullValue"in n}function bC(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function N_(n){return!!n&&"mapValue"in n}function Ed(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return fa(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ed(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ed(n.arrayValue.values[t]);return e}return Object.assign({},n)}function DC(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function TC(n){return"nullValue"in n?R_:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?wd(yd.empty(),qe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:nt()}function US(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?wd(yd.empty(),qe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Qs:nt()}function SC(n,e){const t=Fl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function AC(n,e){const t=Fl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ll{constructor(e,t){this.position=e,this.inclusive=t}}function xC(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?qe.comparator(qe.fromName(l.referenceValue),t.key):Fl(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function RC(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!pa(n.position[t],e.position[t]))return!1;return!0}class MC{}class un extends MC{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Mw(e,t,r):"array-contains"===t?new BS(e,r):"in"===t?new P_(e,r):"not-in"===t?new jS(e,r):"array-contains-any"===t?new FC(e,r):new un(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new PC(e,r):new Nw(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Fl(t,this.value)):null!==t&&Ol(this.value)===Ol(t)&&this.matchesComparison(Fl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return nt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class mn extends MC{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new mn(e,t)}matches(e){return Id(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Id(n){return"and"===n.op}function Sw(n){return"or"===n.op}function Aw(n){return xw(n)&&Id(n)}function xw(n){for(const e of n.filters)if(e instanceof mn)return!1;return!0}function Rw(n){if(n instanceof un)return n.field.canonicalString()+n.op.toString()+ff(n.value);if(Aw(n))return n.filters.map(e=>Rw(e)).join(",");{const e=n.filters.map(t=>Rw(t)).join(",");return`${n.op}(${e})`}}function NC(n,e){return n instanceof un?(t=n,(r=e)instanceof un&&t.op===r.op&&t.field.isEqual(r.field)&&pa(t.value,r.value)):n instanceof mn?function(t,r){return r instanceof mn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,a,l)=>i&&NC(a,r.filters[l]),!0)}(n,e):void nt();var t,r}function kC(n,e){const t=n.filters.concat(e);return mn.create(t,n.op)}function k_(n){return n instanceof un?`${(e=n).field.canonicalString()} ${e.op} ${ff(e.value)}`:n instanceof mn?function(e){return e.op.toString()+" {"+e.getFilters().map(k_).join(" ,")+"}"}(n):"Filter";var e}class Mw extends un{constructor(e,t,r){super(e,t,r),this.key=qe.fromName(r.referenceValue)}matches(e){const t=qe.comparator(e.key,this.key);return this.matchesComparison(t)}}class PC extends un{constructor(e,t){super(e,"in",t),this.keys=OC(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Nw extends un{constructor(e,t){super(e,"not-in",t),this.keys=OC(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function OC(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>qe.fromName(r.referenceValue))}class BS extends un{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return pf(t)&&hf(t.arrayValue,this.value)}}class P_ extends un{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&hf(this.value.arrayValue,t)}}class jS extends un{constructor(e,t){super(e,"not-in",t)}matches(e){if(hf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!hf(this.value.arrayValue,t)}}class FC extends un{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!pf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>hf(this.value.arrayValue,r))}}class So{constructor(e,t="asc"){this.field=e,this.dir=t}}function LC(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class pr{constructor(e,t){this.comparator=e,this.root=t||Xr.EMPTY}insert(e,t){return new pr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xr.BLACK,null,null))}remove(e){return new pr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kw(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kw(this.root,e,this.comparator,!1)}getReverseIterator(){return new kw(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kw(this.root,e,this.comparator,!0)}}class kw{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xr{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Xr.RED,this.left=i??Xr.EMPTY,this.right=a??Xr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Xr(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Xr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Xr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw nt();const e=this.left.check();if(e!==this.right.check())throw nt();return e+(this.isRed()?0:1)}}Xr.EMPTY=null,Xr.RED=!0,Xr.BLACK=!1,Xr.EMPTY=new class{constructor(){this.size=0}get key(){throw nt()}get value(){throw nt()}get color(){throw nt()}get left(){throw nt()}get right(){throw nt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Xr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class _n{constructor(e){this.comparator=e,this.data=new pr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new VC(this.data.getIterator())}getIteratorFrom(e){return new VC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof _n)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new _n(this.comparator);return t.data=e,t}}class VC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Vl(n){return n.hasNext()?n.getNext():void 0}class is{constructor(e){this.fields=e,e.sort(tr.comparator)}static empty(){return new is([])}unionWith(e){let t=new _n(tr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new is(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return gu(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Jr{constructor(e){this.value=e}static empty(){return new Jr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!N_(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ed(t)}setAll(e){let t=tr.emptyPath(),r={},i=[];e.forEach((l,h)=>{if(!t.isImmediateParentOf(h)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=h.popLast()}l?r[h.lastSegment()]=Ed(l):i.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());N_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return pa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];N_(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){fa(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Jr(Ed(this.value))}}function O_(n){const e=[];return fa(n.fields,(t,r)=>{const i=new tr([t]);if(N_(r)){const a=O_(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new is(e)}class On{constructor(e,t,r,i,a,l,h){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=l,this.documentState=h}static newInvalidDocument(e){return new On(e,0,It.min(),It.min(),It.min(),Jr.empty(),0)}static newFoundDocument(e,t,r,i){return new On(e,1,t,It.min(),r,i,0)}static newNoDocument(e,t){return new On(e,2,t,It.min(),It.min(),Jr.empty(),0)}static newUnknownDocument(e,t){return new On(e,3,t,It.min(),It.min(),Jr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(It.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=It.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof On&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new On(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class UC{constructor(e,t=null,r=[],i=[],a=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=h,this.ft=null}}function F_(n,e=null,t=[],r=[],i=null,a=null,l=null){return new UC(n,e,t,r,i,a,l)}function Ul(n){const e=Ge(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Rw(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Dg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ff(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ff(r)).join(",")),e.ft=t}return e.ft}function Ag(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!LC(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!NC(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!RC(n.startAt,e.startAt)&&RC(n.endAt,e.endAt)}function L_(n){return qe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function V_(n,e){return n.filters.filter(t=>t instanceof un&&t.field.isEqual(e))}function BC(n,e,t){let r=R_,i=!0;for(const a of V_(n,e)){let l=R_,h=!0;switch(a.op){case"<":case"<=":l=TC(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,h=!1;break;case"!=":case"not-in":l=R_}SC({value:r,inclusive:i},{value:l,inclusive:h})<0&&(r=l,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];SC({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function Pw(n,e,t){let r=Qs,i=!0;for(const a of V_(n,e)){let l=Qs,h=!0;switch(a.op){case">=":case">":l=US(a.value),h=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,h=!1;break;case"!=":case"not-in":l=Qs}AC({value:r,inclusive:i},{value:l,inclusive:h})>0&&(r=l,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];AC({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class Bl{constructor(e,t=null,r=[],i=[],a=null,l="F",h=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=h,this.endAt=_,this.dt=null,this._t=null}}function Ow(n,e,t,r,i,a,l,h){return new Bl(n,e,t,r,i,a,l,h)}function gf(n){return new Bl(n)}function jC(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function $C(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function U_(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Fw(n){return null!==n.collectionGroup}function Cd(n){const e=Ge(n);if(null===e.dt){e.dt=[];const t=U_(e),r=$C(e);if(null!==t&&null===r)t.isKeyField()||e.dt.push(new So(t)),e.dt.push(new So(tr.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.dt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new So(tr.keyField(),a))}}}return e.dt}function Gi(n){const e=Ge(n);if(!e._t)if("F"===e.limitType)e._t=F_(e.path,e.collectionGroup,Cd(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Cd(e))t.push(new So(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Ll(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Ll(e.startAt.position,e.startAt.inclusive):null;e._t=F_(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function Lw(n,e){e.getFirstInequalityField(),U_(n);const t=n.filters.concat([e]);return new Bl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function B_(n,e,t){return new Bl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function xg(n,e){return Ag(Gi(n),Gi(e))&&n.limitType===e.limitType}function HC(n){return`${Ul(Gi(n))}|lt:${n.limitType}`}function Vw(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>k_(r)).join(", ")}]`),Dg(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ff(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ff(r)).join(",")),`Target(${t})`}(Gi(n))}; limitType=${n.limitType})`}function Uw(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):qe.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of Cd(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const h=xC(i,a,l);return i.inclusive?h<=0:h<0}(t.startAt,Cd(t),r)||t.endAt&&!function(i,a,l){const h=xC(i,a,l);return i.inclusive?h>=0:h>0}(t.endAt,Cd(t),r)));var t,r}function GC(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function WC(n){return(e,t)=>{let r=!1;for(const i of Cd(n)){const a=Rg(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function Rg(n,e,t){const r=n.field.isKeyField()?qe.comparator(e.key,t.key):function(i,a,l){const h=a.data.field(i),_=l.data.field(i);return null!==h&&null!==_?Fl(h,_):nt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return nt()}}function Bw(n,e){if(n.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cf(e)?"-0":e}}function jw(n){return{integerValue:""+n}}function $w(n,e){return df(e)?jw(e):Bw(n,e)}class Mg{constructor(){this._=void 0}}function zC(n,e,t){return n instanceof Ng?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof bd?KC(n,e):n instanceof Dd?ZC(n,e):function(r,i){const a=qC(r,i),l=_f(a)+_f(r.gt);return M_(a)&&M_(r.gt)?jw(l):Bw(r.yt,l)}(n,e)}function $S(n,e,t){return n instanceof bd?KC(n,e):n instanceof Dd?ZC(n,e):t}function qC(n,e){return n instanceof mf?M_(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Ng extends Mg{}class bd extends Mg{constructor(e){super(),this.elements=e}}function KC(n,e){const t=YC(e);for(const r of n.elements)t.some(i=>pa(i,r))||t.push(r);return{arrayValue:{values:t}}}class Dd extends Mg{constructor(e){super(),this.elements=e}}function ZC(n,e){let t=YC(e);for(const r of n.elements)t=t.filter(i=>!pa(i,r));return{arrayValue:{values:t}}}class mf extends Mg{constructor(e,t){super(),this.yt=e,this.gt=t}}function _f(n){return Ir(n.integerValue||n.doubleValue)}function YC(n){return pf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Td{constructor(e,t){this.field=e,this.transform=t}}class HS{constructor(e,t){this.version=e,this.transformResults=t}}class Fn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Fn}static exists(e){return new Fn(void 0,e)}static updateTime(e){return new Fn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jl(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class j_{}function QC(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Hl(n.key,Fn.none()):new yf(n.key,n.data,Fn.none());{const t=n.data,r=Jr.empty();let i=new _n(tr.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);null===l&&a.length>1&&(a=a.popLast(),l=t.field(a)),null===l?r.delete(a):r.set(a,l),i=i.add(a)}return new ma(n.key,r,new is(i.toArray()),Fn.none())}}function GS(n,e,t){n instanceof yf?function(r,i,a){const l=r.value.clone(),h=H_(r.fieldTransforms,i,a.transformResults);l.setAll(h),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof ma?function(r,i,a){if(!jl(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=H_(r.fieldTransforms,i,a.transformResults),h=i.data;h.setAll(Hw(r)),h.setAll(l),i.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function $l(n,e,t,r){return n instanceof yf?function(i,a,l,h){if(!jl(i.precondition,a))return l;const _=i.value.clone(),w=Gw(i.fieldTransforms,h,a);return _.setAll(w),a.convertToFoundDocument(a.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof ma?function(i,a,l,h){if(!jl(i.precondition,a))return l;const _=Gw(i.fieldTransforms,h,a),w=a.data;return w.setAll(Hw(i)),w.setAll(_),a.convertToFoundDocument(a.version,w).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(b=>b.field))}(n,e,t,r):(l=t,jl(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l);var a,l}function $_(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=qC(r.transform,i||null);null!=a&&(null===t&&(t=Jr.empty()),t.set(r.field,a))}return t||null}function XC(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&gu(t,r,(i,a)=>function ga(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof bd&&r instanceof bd||t instanceof Dd&&r instanceof Dd?gu(t.elements,r.elements,pa):t instanceof mf&&r instanceof mf?pa(t.gt,r.gt):t instanceof Ng&&r instanceof Ng);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class yf extends j_{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ma extends j_{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Hw(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function H_(n,e,t){const r=new Map;ht(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,h=e.data.field(a.field);r.set(a.field,$S(l,h,t[i]))}return r}function Gw(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,zC(a,l,e))}return r}class Hl extends j_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kg extends j_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class JC{constructor(e){this.count=e}}var gr,ln;function eb(n){switch(n){default:return nt();case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0}}function tb(n){if(void 0===n)return fr("GRPC error has no .code"),oe.UNKNOWN;switch(n){case gr.OK:return oe.OK;case gr.CANCELLED:return oe.CANCELLED;case gr.UNKNOWN:return oe.UNKNOWN;case gr.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case gr.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case gr.INTERNAL:return oe.INTERNAL;case gr.UNAVAILABLE:return oe.UNAVAILABLE;case gr.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case gr.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case gr.NOT_FOUND:return oe.NOT_FOUND;case gr.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case gr.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case gr.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case gr.ABORTED:return oe.ABORTED;case gr.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case gr.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case gr.DATA_LOSS:return oe.DATA_LOSS;default:return nt()}}(ln=gr||(gr={}))[ln.OK=0]="OK",ln[ln.CANCELLED=1]="CANCELLED",ln[ln.UNKNOWN=2]="UNKNOWN",ln[ln.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ln[ln.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ln[ln.NOT_FOUND=5]="NOT_FOUND",ln[ln.ALREADY_EXISTS=6]="ALREADY_EXISTS",ln[ln.PERMISSION_DENIED=7]="PERMISSION_DENIED",ln[ln.UNAUTHENTICATED=16]="UNAUTHENTICATED",ln[ln.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ln[ln.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ln[ln.ABORTED=10]="ABORTED",ln[ln.OUT_OF_RANGE=11]="OUT_OF_RANGE",ln[ln.UNIMPLEMENTED=12]="UNIMPLEMENTED",ln[ln.INTERNAL=13]="INTERNAL",ln[ln.UNAVAILABLE=14]="UNAVAILABLE",ln[ln.DATA_LOSS=15]="DATA_LOSS";class Gl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){fa(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return EC(this.inner)}size(){return this.innerSize}}const WS=new pr(qe.comparator);function Wi(){return WS}const G_=new pr(qe.comparator);function vf(...n){let e=G_;for(const t of n)e=e.insert(t.key,t);return e}function nb(n){let e=G_;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ao(){return Pg()}function Ww(){return Pg()}function Pg(){return new Gl(n=>n.toString(),(n,e)=>n.isEqual(e))}const rb=new pr(qe.comparator),ib=new _n(qe.comparator);function Kt(...n){let e=ib;for(const t of n)e=e.add(t);return e}const sb=new _n($t);function W_(){return sb}class Br{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,_a.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Br(It.min(),i,W_(),Wi(),Kt())}}class _a{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new _a(r,t,Kt(),Kt(),Kt())}}class z_{constructor(e,t,r,i){this.It=e,this.removedTargetIds=t,this.key=r,this.Tt=i}}class ob{constructor(e,t){this.targetId=e,this.Et=t}}class zS{constructor(e,t,r=Ur.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class qS{constructor(){this.At=0,this.Rt=wf(),this.bt=Ur.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=Kt(),t=Kt(),r=Kt();return this.Rt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:nt()}}),new _a(this.bt,this.Pt,e,t,r)}xt(){this.vt=!1,this.Rt=wf()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class ab{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=Wi(),this.qt=zw(),this.Ut=new _n($t)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const r=this.Wt(t);switch(e.state){case 0:this.zt(t)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),r.Dt(e.resumeToken));break;default:nt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((r,i)=>{this.zt(i)&&t(i)})}Jt(e){const t=e.targetId,r=e.Et.count,i=this.Yt(t);if(i){const a=i.target;if(L_(a))if(0===r){const l=new qe(a.path);this.Qt(t,l,On.newNoDocument(l,It.min()))}else ht(1===r);else this.Xt(t)!==r&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((a,l)=>{const h=this.Yt(l);if(h){if(a.current&&L_(h.target)){const _=new qe(h.target.path);null!==this.Lt.get(_)||this.te(l,_)||this.Qt(l,_,On.newNoDocument(_,e))}a.St&&(t.set(l,a.Ct()),a.xt())}});let r=Kt();this.qt.forEach((a,l)=>{let h=!0;l.forEachWhile(_=>{const w=this.Yt(_);return!w||2===w.purpose||(h=!1,!1)}),h&&(r=r.add(a))}),this.Lt.forEach((a,l)=>l.setReadTime(e));const i=new Br(e,t,this.Ut,this.Lt,r);return this.Lt=Wi(),this.qt=zw(),this.Ut=new _n($t),i}Gt(e,t){if(!this.zt(e))return;const r=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,r),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,r){if(!this.zt(e))return;const i=this.Wt(e);this.te(e,t)?i.Nt(t,1):i.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),r&&(this.Lt=this.Lt.insert(t,r))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new qS,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new _n($t),this.qt=this.qt.insert(e,t)),t}zt(e){const t=null!==this.Yt(e);return t||ke("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new qS),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function zw(){return new pr(qe.comparator)}function wf(){return new pr(qe.comparator)}const KS={asc:"ASCENDING",desc:"DESCENDING"},qw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ZS={and:"AND",or:"OR"};class ub{constructor(e,t){this.databaseId=e,this.wt=t}}function Ef(n,e){return n.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function lb(n,e){return n.wt?e.toBase64():e.toUint8Array()}function YS(n,e){return Ef(n,e.toTimestamp())}function nr(n){return ht(!!n),It.fromTimestamp(function(e){const t=Pl(e);return new Ht(t.seconds,t.nanos)}(n))}function q_(n,e){return(t=n,new dn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Kw(n){const e=dn.fromString(n);return ht(n0(e)),e}function Wl(n,e){return q_(n.databaseId,e.path)}function Xs(n,e){const t=Kw(e);if(t.get(1)!==n.databaseId.projectId)throw new Me(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Me(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new qe(Yw(t))}function cb(n,e){return q_(n.databaseId,e)}function Zw(n){const e=Kw(n);return 4===e.length?dn.emptyPath():Yw(e)}function Og(n){return new dn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Yw(n){return ht(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Sd(n,e,t){return{name:Wl(n,e),fields:t.value.mapValue.fields}}function db(n,e,t){const r=Xs(n,e.name),i=nr(e.updateTime),a=e.createTime?nr(e.createTime):It.min(),l=new Jr({mapValue:{fields:e.fields}}),h=On.newFoundDocument(r,i,a,l);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function K_(n,e){let t;if(e instanceof yf)t={update:Sd(n,e.key,e.value)};else if(e instanceof Hl)t={delete:Wl(n,e.key)};else if(e instanceof ma)t={update:Sd(n,e.key,e.data),updateMask:XS(e.fieldMask)};else{if(!(e instanceof kg))return nt();t={verify:Wl(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof Ng)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof bd)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Dd)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof mf)return{fieldPath:a.field.canonicalString(),increment:l.gt};throw nt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:YS(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:nt()),t;var i}function Xw(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Fn.updateTime(nr(i.updateTime)):void 0!==i.exists?Fn.exists(i.exists):Fn.none():Fn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let h=null;"setToServerValue"in l?(ht("REQUEST_TIME"===l.setToServerValue),h=new Ng):"appendMissingElements"in l?h=new bd(l.appendMissingElements.values||[]):"removeAllFromArray"in l?h=new Dd(l.removeAllFromArray.values||[]):"increment"in l?h=new mf(a,l.increment):nt();const _=tr.fromServerFormat(l.fieldPath);return new Td(_,h)}(n,i)):[];var i;if(e.update){const i=Xs(n,e.update.name),a=new Jr({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new is((e.updateMask.fieldPaths||[]).map(w=>tr.fromServerFormat(w)));return new ma(i,a,l,t,r)}return new yf(i,a,t,r)}if(e.delete){const i=Xs(n,e.delete);return new Hl(i,t)}if(e.verify){const i=Xs(n,e.verify);return new kg(i,t)}return nt()}function fb(n,e){return{documents:[cb(n,e.path)]}}function Jw(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=cb(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=cb(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0!==_.length)return t0(mn.create(_,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const a=function(_){if(0!==_.length)return _.map(w=>{return{field:If((b=w).field),direction:QS(b.dir)};var b})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=(w=e.limit,n.wt||Dg(w)?w:{value:w});var w,h,_;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function pb(n){let e=Zw(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){ht(1===r);const b=t.from[0];b.allDescendants?i=b.collectionId:e=e.child(b.collectionId)}let a=[];t.where&&(a=function(b){const x=e0(b);return x instanceof mn&&Aw(x)?x.getFilters():[x]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(b=>{return new So(Cf((x=b).field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction));var x}));let h=null;t.limit&&(h=function(b){let x;return x="object"==typeof b?b.value:b,Dg(x)?null:x}(t.limit));let _=null;var b;t.startAt&&(_=new Ll((b=t.startAt).values||[],!!b.before));let w=null;return t.endAt&&(w=function(b){return new Ll(b.values||[],!b.before)}(t.endAt)),Ow(e,i,l,a,h,"F",_,w)}function e0(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Cf(e.unaryFilter.field);return un.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Cf(e.unaryFilter.field);return un.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Cf(e.unaryFilter.field);return un.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Cf(e.unaryFilter.field);return un.create(a,"!=",{nullValue:"NULL_VALUE"});default:return nt()}}(n):void 0!==n.fieldFilter?un.create(Cf((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return nt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return mn.create(e.compositeFilter.filters.map(t=>e0(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return nt()}}(e.compositeFilter.op))}(n):nt();var e}function QS(n){return KS[n]}function mb(n){return qw[n]}function _b(n){return ZS[n]}function If(n){return{fieldPath:n.canonicalString()}}function Cf(n){return tr.fromServerFormat(n.fieldPath)}function t0(n){return n instanceof un?function(e){if("=="===e.op){if(bC(e.value))return{unaryFilter:{field:If(e.field),op:"IS_NAN"}};if(CC(e.value))return{unaryFilter:{field:If(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(bC(e.value))return{unaryFilter:{field:If(e.field),op:"IS_NOT_NAN"}};if(CC(e.value))return{unaryFilter:{field:If(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:If(e.field),op:mb(e.op),value:e.value}}}(n):n instanceof mn?function(e){const t=e.getFilters().map(r=>t0(r));return 1===t.length?t[0]:{compositeFilter:{op:_b(e.op),filters:t}}}(n):nt()}function XS(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function n0(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ri(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=r0(e)),e=yb(n.get(t),e);return r0(e)}function yb(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function r0(n){return n+"\x01\x01"}function ya(n){const e=n.length;if(ht(e>=2),2===e)return ht("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),dn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&nt(),n.charAt(l+1)){case"\x01":const h=n.substring(a,l);let _;0===i.length?_=h:(i+=h,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:nt()}a=l+2}return new dn(r)}const vb=["userId","batchId"];function s0(n,e){return[n,Ri(e)]}function o0(n,e,t){return[n,Ri(e),t]}const SN={},AN=["prefixPath","collectionGroup","readTime","documentId"],xN=["prefixPath","collectionGroup","documentId"],RN=["collectionGroup","readTime","prefixPath","documentId"],MN=["canonicalId","targetId"],NN=["targetId","path"],kN=["path","targetId"],PN=["collectionId","parent"],Z_=["indexId","uid"],ON=["uid","sequenceNumber"],wb=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Y_=["indexId","uid","orderedDocumentKey"],Eb=["userId","collectionPath","documentId"],Ib=["userId","collectionPath","largestBatchId"],FN=["userId","collectionGroup","largestBatchId"],Q_=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Cb=[...Q_,"documentOverlays"],bb=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],a0=bb,LN=[...a0,"indexConfiguration","indexState","indexEntries"];class Db extends Iw{constructor(e,t){super(),this.se=e,this.currentSequenceNumber=t}}function ei(n,e){const t=Ge(n);return To.M(t.se,e)}class u0{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&GS(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=$l(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=$l(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Ww();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let h=this.applyToLocalView(l,a.mutatedFields);h=t.has(i.key)?null:h;const _=QC(l,h);null!==_&&r.set(i.key,_),l.isValidDocument()||l.convertToNoDocument(It.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Kt())}isEqual(e){return this.batchId===e.batchId&&gu(this.mutations,e.mutations,(t,r)=>XC(t,r))&&gu(this.baseMutations,e.baseMutations,(t,r)=>XC(t,r))}}class bf{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ht(e.mutations.length===r.length);let i=rb;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new bf(e,t,r,i)}}class l0{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ad{constructor(e,t,r,i,a=It.min(),l=It.min(),h=Ur.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h}withSequenceNumber(e){return new Ad(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Ad(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ad(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class JS{constructor(e){this.ie=e}}function Tb(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:X_(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Wl(i=n.ie,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:Ef(i,a.version.toTimestamp()),createTime:Ef(i,a.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:xd(e.version)};else{if(!e.isUnknownDocument())return nt();r.unknownDocument={path:t.path.toArray(),version:xd(e.version)}}var i,a;return r}function X_(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function xd(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Df(n){const e=new Ht(n.seconds,n.nanoseconds);return It.fromTimestamp(e)}function Rd(n,e){const t=(e.baseMutations||[]).map(a=>Xw(n.ie,a));for(let a=0;a<e.mutations.length-1;++a)a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(e.mutations[a].updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a);const r=e.mutations.map(a=>Xw(n.ie,a)),i=Ht.fromMillis(e.localWriteTimeMs);return new u0(e.batchId,i,t,r)}function Tf(n){const e=Df(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Df(n.lastLimboFreeSnapshotVersion):It.min();let r;var i;return void 0!==n.query.documents?(ht(1===(i=n.query).documents.length),r=Gi(gf(Zw(i.documents[0])))):r=Gi(pb(n.query)),new Ad(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Ur.fromBase64String(n.resumeToken))}function c0(n,e){const t=xd(e.snapshotVersion),r=xd(e.lastLimboFreeSnapshotVersion);let i;i=L_(e.target)?fb(n.ie,e.target):Jw(n.ie,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ul(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Sb(n){const e=pb({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?B_(e,e.limit,"L"):e}function Ts(n,e){return new l0(e.largestBatchId,Xw(n.ie,e.overlayMutation))}function Ab(n,e){const t=e.path.lastSegment();return[n,Ri(e.path.popLast()),t]}function J_(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:xd(r.readTime),documentKey:Ri(r.documentKey.path),largestBatchId:r.largestBatchId}}class eA{getBundleMetadata(e,t){return tA(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Df(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return tA(e).put({bundleId:(r=t).id,createTime:xd(nr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Ss(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:Sb(i.bundledQuery),readTime:Df(i.readTime)};var i})}saveNamedQuery(e,t){return Ss(e).put({name:(r=t).name,readTime:xd(nr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function tA(n){return ei(n,"bundles")}function Ss(n){return ei(n,"namedQueries")}class ey{constructor(e,t){this.yt=e,this.userId=t}static re(e,t){return new ey(e,t.uid||"")}getOverlay(e,t){return Md(e).get(Ab(this.userId,t)).next(r=>r?Ts(this.yt,r):null)}getOverlays(e,t){const r=Ao();return te.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,l)=>{const h=new l0(t,l);i.push(this.oe(e,h))}),te.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Ri(l.getCollectionPath())));const a=[];return i.forEach(l=>{const h=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(Md(e).Y("collectionPathOverlayIndex",h))}),te.waitFor(a)}getOverlaysForCollection(e,t,r){const i=Ao(),a=Ri(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Md(e).W("collectionPathOverlayIndex",l).next(h=>{for(const _ of h){const w=Ts(this.yt,_);i.set(w.getKey(),w)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=Ao();let l;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Md(e).Z({index:"collectionGroupOverlayIndex",range:h},(_,w,b)=>{const x=Ts(this.yt,w);a.size()<i||x.largestBatchId===l?(a.set(x.getKey(),x),l=x.largestBatchId):b.done()}).next(()=>a)}oe(e,t){return Md(e).put(function(r,i,a){const[l,h,_]=Ab(i,a.mutation.key);return{userId:i,collectionPath:h,documentId:_,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:K_(r.ie,a.mutation)}}(this.yt,this.userId,t))}}function Md(n){return ei(n,"documentOverlays")}class Nd{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(Ir(e.integerValue));else if("doubleValue"in e){const r=Ir(e.doubleValue);isNaN(r)?this.he(t,13):(this.he(t,15),cf(r)?t.le(0):t.le(r))}else if("timestampValue"in e){const r=e.timestampValue;this.he(t,20),"string"==typeof r?t.fe(r):(t.fe(`${r.seconds||""}`),t.le(r.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(vd(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.he(t,45),t.le(r.latitude||0),t.le(r.longitude||0)}else"mapValue"in e?DC(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):nt()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const r=e.fields||{};this.he(t,55);for(const i of Object.keys(r))this.de(i,t),this.ce(r[i],t)}ye(e,t){const r=e.values||[];this.he(t,50);for(const i of r)this.ce(i,t)}me(e,t){this.he(t,37),qe.fromName(e).path.forEach(r=>{this.he(t,60),this.pe(r,t)})}he(e,t){e.le(t)}_e(e){e.le(2)}}function nA(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function ty(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=nA(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}Nd.Ie=new Nd;class xb{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ee(r.value),r=t.next();this.Ae()}Re(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.be(r.value),r=t.next();this.Pe()}ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ee(r);else if(r<2048)this.Ee(960|r>>>6),this.Ee(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ee(480|r>>>12),this.Ee(128|63&r>>>6),this.Ee(128|63&r);else{const i=t.codePointAt(0);this.Ee(240|i>>>18),this.Ee(128|63&i>>>12),this.Ee(128|63&i>>>6),this.Ee(128|63&i)}}this.Ae()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.be(r);else if(r<2048)this.be(960|r>>>6),this.be(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.be(480|r>>>12),this.be(128|63&r>>>6),this.be(128|63&r);else{const i=t.codePointAt(0);this.be(240|i>>>18),this.be(128|63&i>>>12),this.be(128|63&i>>>6),this.be(128|63&i)}}this.Pe()}Se(e){const t=this.De(e),r=ty(t);this.Ce(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}xe(e){const t=this.De(e),r=ty(t);this.Ce(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ee(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}be(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class Rb{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class rA{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class Sf{constructor(){this.$e=new xb,this.Be=new Rb(this.$e),this.Le=new rA(this.$e)}seed(e){this.$e.seed(e)}qe(e){return 0===e?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class zl{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ue(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new zl(this.indexId,this.documentKey,this.arrayValue,r)}}function ql(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=d0(n.arrayValue,e.arrayValue),0!==t?t:(t=d0(n.directionalValue,e.directionalValue),0!==t?t:qe.comparator(n.documentKey,e.documentKey)))}function d0(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class iA{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const t of e.filters){const r=t;r.isInequality()?this.Qe=r:this.Ge.push(r)}}je(e){ht(e.collectionGroup===this.collectionId);const t=D_(e);if(void 0!==t&&!this.We(t))return!1;const r=gd(e);let i=0,a=0;for(;i<r.length&&this.We(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Qe){const l=r[i];if(!this.ze(this.Qe,l)||!this.He(this.Ke[a++],l))return!1;++i}for(;i<r.length;++i)if(a>=this.Ke.length||!this.He(this.Ke[a++],r[i]))return!1;return!0}We(e){for(const t of this.Ge)if(this.ze(t,e))return!0;return!1}ze(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}He(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function ny(n){var e,t;if(ht(n instanceof un||n instanceof mn),n instanceof un){if(n instanceof P_){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(a=>un.create(n.field,"==",a)))||[];return mn.create(i,"or")}return n}const r=n.filters.map(i=>ny(i));return mn.create(r,n.op)}function Kl(n){if(0===n.getFilters().length)return[];const e=h0(ny(n));return ht(va(e)),ry(e)||Fg(e)?[e]:e.getFilters()}function ry(n){return n instanceof un}function Fg(n){return n instanceof mn&&Aw(n)}function va(n){return ry(n)||Fg(n)||function(e){if(e instanceof mn&&Sw(e)){for(const t of e.getFilters())if(!ry(t)&&!Fg(t))return!1;return!0}return!1}(n)}function h0(n){if(ht(n instanceof un||n instanceof mn),n instanceof un)return n;if(1===n.filters.length)return h0(n.filters[0]);const e=n.filters.map(r=>h0(r));let t=mn.create(e,n.op);return t=iy(t),va(t)?t:(ht(t instanceof mn),ht(Id(t)),ht(t.filters.length>1),t.filters.reduce((r,i)=>Mb(r,i)))}function Mb(n,e){let t;return ht(n instanceof un||n instanceof mn),ht(e instanceof un||e instanceof mn),t=n instanceof un?e instanceof un?mn.create([n,e],"and"):Nb(n,e):e instanceof un?Nb(e,n):function(r,i){if(ht(r.filters.length>0&&i.filters.length>0),Id(r)&&Id(i))return kC(r,i.getFilters());const a=Sw(r)?r:i,l=Sw(r)?i:r,h=a.filters.map(_=>Mb(_,l));return mn.create(h,"or")}(n,e),iy(t)}function Nb(n,e){if(Id(e))return kC(e,n.getFilters());{const t=e.filters.map(r=>Mb(n,r));return mn.create(t,"or")}}function iy(n){if(ht(n instanceof un||n instanceof mn),n instanceof un)return n;const e=n.getFilters();if(1===e.length)return iy(e[0]);if(xw(n))return n;const t=e.map(i=>iy(i)),r=[];return t.forEach(i=>{i instanceof un?r.push(i):i instanceof mn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:mn.create(r,n.op)}class sA{constructor(){this.Je=new f0}addToCollectionParentIndex(e,t){return this.Je.add(t),te.resolve()}getCollectionParents(e,t){return te.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return te.resolve()}deleteFieldIndex(e,t){return te.resolve()}getDocumentsMatchingTarget(e,t){return te.resolve(null)}getIndexType(e,t){return te.resolve(0)}getFieldIndexes(e,t){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,t){return te.resolve(xi.min())}getMinOffsetFromCollectionGroup(e,t){return te.resolve(xi.min())}updateCollectionGroup(e,t,r){return te.resolve()}updateIndexEntries(e,t){return te.resolve()}}class f0{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new _n(dn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new _n(dn.comparator)).toArray()}}const Lg=new Uint8Array(0);class UN{constructor(e,t){this.user=e,this.databaseId=t,this.Ye=new f0,this.Xe=new Gl(r=>Ul(r),(r,i)=>Ag(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ye.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ye.add(t)});const a={collectionId:r,parent:Ri(i)};return p0(e).put(a)}return te.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[Eg(t),""],!1,!0);return p0(e).W(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(ya(l.parent))}return r})}addFieldIndex(e,t){const r=Ug(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var l;delete i.indexId;const a=r.add(i);if(t.indexState){const l=sy(e);return a.next(h=>{l.put(J_(h,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=Ug(e),i=sy(e),a=Vg(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Vg(e);let i=!0;const a=new Map;return te.forEach(this.Ze(t),l=>this.tn(e,l).next(h=>{i&&(i=!!h),a.set(l,h)})).next(()=>{if(i){let l=Kt();const h=[];return te.forEach(a,(_,w)=>{var b;ke("IndexedDbIndexManager",`Using index ${b=_,`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(st=>`${st.fieldPath}:${st.kind}`).join(",")}`} to execute ${Ul(t)}`);const x=function(st,dt){const Mt=D_(dt);if(void 0===Mt)return null;for(const Wt of V_(st,Mt.fieldPath))switch(Wt.op){case"array-contains-any":return Wt.value.arrayValue.values||[];case"array-contains":return[Wt.value]}return null}(w,_),k=function(st,dt){const Mt=new Map;for(const Wt of gd(dt))for(const Tr of V_(st,Wt.fieldPath))switch(Tr.op){case"==":case"in":Mt.set(Wt.fieldPath.canonicalString(),Tr.value);break;case"not-in":case"!=":return Mt.set(Wt.fieldPath.canonicalString(),Tr.value),Array.from(Mt.values())}return null}(w,_),U=function(st,dt){const Mt=[];let Wt=!0;for(const Tr of gd(dt)){const Cu=0===Tr.kind?BC(st,Tr.fieldPath,st.startAt):Pw(st,Tr.fieldPath,st.startAt);Mt.push(Cu.value),Wt&&(Wt=Cu.inclusive)}return new Ll(Mt,Wt)}(w,_),W=function(st,dt){const Mt=[];let Wt=!0;for(const Tr of gd(dt)){const Cu=0===Tr.kind?Pw(st,Tr.fieldPath,st.endAt):BC(st,Tr.fieldPath,st.endAt);Mt.push(Cu.value),Wt&&(Wt=Cu.inclusive)}return new Ll(Mt,Wt)}(w,_),ae=this.en(_,w,U),ve=this.en(_,w,W),pt=this.nn(_,w,k),_t=this.sn(_.indexId,x,ae,U.inclusive,ve,W.inclusive,pt);return te.forEach(_t,st=>r.J(st,t.limit).next(dt=>{dt.forEach(Mt=>{const Wt=qe.fromSegments(Mt.documentKey);l.has(Wt)||(l=l.add(Wt),h.push(Wt))})}))}).next(()=>h)}return te.resolve(null)})}Ze(e){let t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:Kl(mn.create(e.filters,"and")).map(r=>F_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,t),t)}sn(e,t,r,i,a,l,h){const _=(null!=t?t.length:1)*Math.max(r.length,a.length),w=_/(null!=t?t.length:1),b=[];for(let x=0;x<_;++x){const k=t?this.rn(t[x/w]):Lg,U=this.on(e,k,r[x%w],i),W=this.un(e,k,a[x%w],l),ae=h.map(ve=>this.on(e,k,ve,!0));b.push(...this.createRange(U,W,ae))}return b}on(e,t,r,i){const a=new zl(e,qe.empty(),t,r);return i?a:a.Ue()}un(e,t,r,i){const a=new zl(e,qe.empty(),t,r);return i?a.Ue():a}tn(e,t){const r=new iA(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let l=null;for(const h of a)r.je(h)&&(!l||h.fields.length>l.fields.length)&&(l=h);return l})}getIndexType(e,t){let r=2;const i=this.Ze(t);return te.forEach(i,a=>this.tn(e,a).next(l=>{l?0!==r&&l.fields.length<function(h){let _=new _n(tr.comparator),w=!1;for(const b of h.filters)for(const x of b.getFlattenedFilters())x.field.isKeyField()||("array-contains"===x.op||"array-contains-any"===x.op?w=!0:_=_.add(x.field));for(const b of h.orderBy)b.field.isKeyField()||(_=_.add(b.field));return _.size+(w?1:0)}(a)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}cn(e,t){const r=new Sf;for(const i of gd(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.qe(i.kind);Nd.Ie.ue(a,l)}return r.Fe()}rn(e){const t=new Sf;return Nd.Ie.ue(e,t.qe(0)),t.Fe()}an(e,t){const r=new Sf;return Nd.Ie.ue(wd(this.databaseId,t),r.qe(function(i){const a=gd(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Fe()}nn(e,t,r){if(null===r)return[];let i=[];i.push(new Sf);let a=0;for(const l of gd(e)){const h=r[a++];for(const _ of i)if(this.hn(t,l.fieldPath)&&pf(h))i=this.ln(i,l,h);else{const w=_.qe(l.kind);Nd.Ie.ue(h,w)}}return this.fn(i)}en(e,t,r){return this.nn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Fe();return t}ln(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const h of i){const _=new Sf;_.seed(h.Fe()),Nd.Ie.ue(l,_.qe(t.kind)),a.push(_)}return a}hn(e,t){return!!e.filters.find(r=>r instanceof un&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Ug(e),i=sy(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(a=>{const l=[];return te.forEach(a,h=>i.get([h.indexId,this.uid]).next(_=>{l.push(function(w,b){const x=b?new bg(b.sequenceNumber,new xi(Df(b.readTime),new qe(ya(b.documentKey)),b.largestBatchId)):bg.empty(),k=w.fields.map(([U,W])=>new T_(tr.fromServerFormat(U),W));return new Ig(w.indexId,w.collectionGroup,k,x)}(h,_))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:$t(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Ug(e),a=sy(e);return this.dn(e).next(l=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>te.forEach(h,_=>a.put(J_(_.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return te.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?te.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),te.forEach(h,_=>this._n(e,i,_).next(w=>{const b=this.wn(a,_);return w.isEqual(b)?te.resolve():this.mn(e,a,_,w,b)}))))})}gn(e,t,r,i){return Vg(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.an(r,t.key),documentKey:t.key.path.toArray()})}yn(e,t,r,i){return Vg(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.an(r,t.key),t.key.path.toArray()])}_n(e,t,r){const i=Vg(e);let a=new _n(ql);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.an(r,t)])},(l,h)=>{a=a.add(new zl(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>a)}wn(e,t){let r=new _n(ql);const i=this.cn(t,e);if(null==i)return r;const a=D_(t);if(null!=a){const l=e.data.field(a.fieldPath);if(pf(l))for(const h of l.arrayValue.values||[])r=r.add(new zl(t.indexId,e.key,this.rn(h),i))}else r=r.add(new zl(t.indexId,e.key,Lg,i));return r}mn(e,t,r,i,a){ke("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(h,_,w,b,x){const k=h.getIterator(),U=_.getIterator();let W=Vl(k),ae=Vl(U);for(;W||ae;){let ve=!1,pt=!1;if(W&&ae){const _t=w(W,ae);_t<0?pt=!0:_t>0&&(ve=!0)}else null!=W?pt=!0:ve=!0;ve?(b(ae),ae=Vl(U)):pt?(x(W),W=Vl(k)):(W=Vl(k),ae=Vl(U))}}(i,a,ql,h=>{l.push(this.gn(e,t,r,h))},h=>{l.push(this.yn(e,t,r,h))}),te.waitFor(l)}dn(e){let t=1;return sy(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,h)=>ql(l,h)).filter((l,h,_)=>!h||0!==ql(l,_[h-1]));const i=[];i.push(e);for(const l of r){const h=ql(l,e),_=ql(l,t);if(0===h)i[0]=e.Ue();else if(h>0&&_<0)i.push(l),i.push(l.Ue());else if(_>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2){if(this.pn(i[l],i[l+1]))return[];a.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,Lg,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,Lg,[]]))}return a}pn(e,t){return ql(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(oy)}getMinOffset(e,t){return te.mapArray(this.Ze(t),r=>this.tn(e,r).next(i=>i||nt())).next(oy)}}function p0(n){return ei(n,"collectionParents")}function Vg(n){return ei(n,"indexEntries")}function Ug(n){return ei(n,"indexConfiguration")}function sy(n){return ei(n,"indexState")}function oy(n){ht(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;S_(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new xi(e.readTime,e.documentKey,t)}const g0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class zi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new zi(e,zi.DEFAULT_COLLECTION_PERCENTILE,zi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function m0(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let h=0;const _=r.Z({range:l},(b,x,k)=>(h++,k.delete()));a.push(_.next(()=>{ht(1===h)}));const w=[];for(const b of t.mutations){const x=o0(e,b.key.path,t.batchId);a.push(i.delete(x)),w.push(b.key)}return te.waitFor(a).next(()=>w)}function Bg(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw nt();e=n.noDocument}return JSON.stringify(e).length}zi.DEFAULT_COLLECTION_PERCENTILE=10,zi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zi.DEFAULT=new zi(41943040,zi.DEFAULT_COLLECTION_PERCENTILE,zi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zi.DISABLED=new zi(-1,0,0);class jg{constructor(e,t,r,i){this.userId=e,this.yt=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static re(e,t,r,i){ht(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new jg(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return xo(e).Z({index:"userMutationsIndex",range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=kd(e),l=xo(e);return l.add({}).next(h=>{ht("number"==typeof h);const _=new u0(h,t,r,i),w=function(k,U,W){const ae=W.baseMutations.map(pt=>K_(k.ie,pt)),ve=W.mutations.map(pt=>K_(k.ie,pt));return{userId:U,batchId:W.batchId,localWriteTimeMs:W.localWriteTime.toMillis(),baseMutations:ae,mutations:ve}}(this.yt,this.userId,_),b=[];let x=new _n((k,U)=>$t(k.canonicalString(),U.canonicalString()));for(const k of i){const U=o0(this.userId,k.key.path,h);x=x.add(k.key.path.popLast()),b.push(l.put(w)),b.push(a.put(U,SN))}return x.forEach(k=>{b.push(this.indexManager.addToCollectionParentIndex(e,k))}),e.addOnCommittedListener(()=>{this.In[h]=_.keys()}),te.waitFor(b).next(()=>_)})}lookupMutationBatch(e,t){return xo(e).get(t).next(r=>r?(ht(r.userId===this.userId),Rd(this.yt,r)):null)}Tn(e,t){return this.In[t]?te.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return xo(e).Z({index:"userMutationsIndex",range:i},(l,h,_)=>{h.userId===this.userId&&(ht(h.batchId>=r),a=Rd(this.yt,h)),_.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return xo(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return xo(e).W("userMutationsIndex",t).next(r=>r.map(i=>Rd(this.yt,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=s0(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return kd(e).Z({range:i},(l,h,_)=>{const[w,b,x]=l,k=ya(b);if(w===this.userId&&t.path.isEqual(k))return xo(e).get(x).next(U=>{if(!U)throw nt();ht(U.userId===this.userId),a.push(Rd(this.yt,U))});_.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _n($t);const i=[];return t.forEach(a=>{const l=s0(this.userId,a.path),h=IDBKeyRange.lowerBound(l),_=kd(e).Z({range:h},(w,b,x)=>{const[k,U,W]=w,ae=ya(U);k===this.userId&&a.path.isEqual(ae)?r=r.add(W):x.done()});i.push(_)}),te.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=s0(this.userId,r),l=IDBKeyRange.lowerBound(a);let h=new _n($t);return kd(e).Z({range:l},(_,w,b)=>{const[x,k,U]=_,W=ya(k);x===this.userId&&r.isPrefixOf(W)?W.length===i&&(h=h.add(U)):b.done()}).next(()=>this.En(e,h))}En(e,t){const r=[],i=[];return t.forEach(a=>{i.push(xo(e).get(a).next(l=>{if(null===l)throw nt();ht(l.userId===this.userId),r.push(Rd(this.yt,l))}))}),te.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return m0(e.se,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),te.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return te.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return kd(e).Z({range:r},(a,l,h)=>{if(a[0]===this.userId){const _=ya(a[1]);i.push(_)}else h.done()}).next(()=>{ht(0===i.length)})})}containsKey(e,t){return $g(e,this.userId,t)}Rn(e){return kb(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function $g(n,e,t){const r=s0(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return kd(n).Z({range:a,X:!0},(h,_,w)=>{const[b,x,k]=h;b===e&&x===i&&(l=!0),w.done()}).next(()=>l)}function xo(n){return ei(n,"mutations")}function kd(n){return ei(n,"documentMutations")}function kb(n){return ei(n,"mutationQueues")}class Pd{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Pd(0)}static vn(){return new Pd(-1)}}class BN{constructor(e,t){this.referenceDelegate=e,this.yt=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new Pd(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>It.fromTimestamp(new Ht(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Hg(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(ht(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return Hg(e).Z((l,h)=>{const _=Tf(h);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,a.push(this.removeTargetData(e,_)))}).next(()=>te.waitFor(a)).next(()=>i)}forEachTarget(e,t){return Hg(e).Z((r,i)=>{const a=Tf(i);t(a)})}Vn(e){return oA(e).get("targetGlobalKey").next(t=>(ht(null!==t),t))}Sn(e,t){return oA(e).put("targetGlobalKey",t)}Dn(e,t){return Hg(e).put(c0(this.yt,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Ul(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return Hg(e).Z({range:i,index:"queryTargetsIndex"},(l,h,_)=>{const w=Tf(h);Ag(t,w.target)&&(a=w,_.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=_u(e);return t.forEach(l=>{const h=Ri(l.path);i.push(a.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,l))}),te.waitFor(i)}removeMatchingKeys(e,t,r){const i=_u(e);return te.forEach(t,a=>{const l=Ri(a.path);return te.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=_u(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=_u(e);let a=Kt();return i.Z({range:r,X:!0},(l,h,_)=>{const w=ya(l[1]),b=new qe(w);a=a.add(b)}).next(()=>a)}containsKey(e,t){const r=Ri(t.path),i=IDBKeyRange.bound([r],[Eg(r)],!1,!0);let a=0;return _u(e).Z({index:"documentTargetsIndex",X:!0,range:i},([l,h],_,w)=>{0!==l&&(a++,w.done())}).next(()=>a>0)}ne(e,t){return Hg(e).get(t).next(r=>r?Tf(r):null)}}function Hg(n){return ei(n,"targets")}function oA(n){return ei(n,"targetGlobal")}function _u(n){return ei(n,"targetDocuments")}function Pb([n,e],[t,r]){const i=$t(n,t);return 0===i?$t(e,r):i}class aA{constructor(e){this.xn=e,this.buffer=new _n(Pb),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Pb(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class uA{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;ke("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,pe.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){mu(r)?ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield kl(r)}yield t.Fn(3e5)}))}}class jN{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return te.resolve(Ys.at);const r=new aA(t);return this.$n.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(g0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),g0):this.qn(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,t){let r,i,a,l,h,_,w;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),i=this.params.maximumSequenceNumbersToCollect):i=x,l=Date.now(),this.nthSequenceNumber(e,i))).next(x=>(r=x,h=Date.now(),this.removeTargets(e,r,t))).next(x=>(a=x,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(x=>(w=Date.now(),C_()<=Cs.in.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-b}ms\n\tDetermined least recently used ${i} in `+(h-l)+`ms\n\tRemoved ${a} targets in `+(_-h)+`ms\n\tRemoved ${x} documents in `+(w-_)+`ms\nTotal Duration: ${w-b}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:x})))}}class $N{constructor(e,t){this.db=e,this.garbageCollector=new jN(this,t)}Bn(e){const t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Un(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return _0(e,r)}removeReference(e,t,r){return _0(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return _0(e,t)}Gn(e,t){return function(r,i){let a=!1;return kb(r).tt(l=>$g(r,l,i).next(h=>(h&&(a=!0),te.resolve(!h)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Kn(e,(l,h)=>{if(h<=t){const _=this.Gn(e,l).next(w=>{if(!w)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,It.min()),_u(e).delete([0,Ri(l.path)])))});i.push(_)}}).next(()=>te.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return _0(e,t)}Kn(e,t){const r=_u(e);let i,a=Ys.at;return r.Z({index:"documentTargetsIndex"},([l,h],{path:_,sequenceNumber:w})=>{0===l?(a!==Ys.at&&t(new qe(ya(i)),a),a=w,i=_):a=Ys.at}).next(()=>{a!==Ys.at&&t(new qe(ya(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function _0(n,e){return _u(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ri(e.path),sequenceNumber:r}));var r}class lA{constructor(){this.changes=new Gl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,On.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?te.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class HN{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Od(e).put(r)}removeEntry(e,t,r){return Od(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],X_(a),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=On.newInvalidDocument(t);return Od(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Af(t))},(i,a)=>{r=this.jn(t,a)}).next(()=>r)}Wn(e,t){let r={size:0,document:On.newInvalidDocument(t)};return Od(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Af(t))},(i,a)=>{r={document:this.jn(t,a),size:Bg(a)}}).next(()=>r)}getEntries(e,t){let r=Wi();return this.zn(e,t,(i,a)=>{const l=this.jn(i,a);r=r.insert(i,l)}).next(()=>r)}Hn(e,t){let r=Wi(),i=new pr(qe.comparator);return this.zn(e,t,(a,l)=>{const h=this.jn(a,l);r=r.insert(a,h),i=i.insert(a,Bg(l))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return te.resolve();let i=new _n(y0);t.forEach(_=>i=i.add(_));const a=IDBKeyRange.bound(Af(i.first()),Af(i.last())),l=i.getIterator();let h=l.getNext();return Od(e).Z({index:"documentKeyIndex",range:a},(_,w,b)=>{const x=qe.fromSegments([...w.prefixPath,w.collectionGroup,w.documentId]);for(;h&&y0(h,x)<0;)r(h,null),h=l.getNext();h&&h.isEqual(x)&&(r(h,w),h=l.hasNext()?l.getNext():null),h?b.j(Af(h)):b.done()}).next(()=>{for(;h;)r(h,null),h=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),X_(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Od(e).W(IDBKeyRange.bound(i,a,!0)).next(l=>{let h=Wi();for(const _ of l){const w=this.jn(qe.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);h=h.insert(w.key,w)}return h})}getAllFromCollectionGroup(e,t,r,i){let a=Wi();const l=Zl(t,r),h=Zl(t,xi.max());return Od(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,h,!0)},(_,w,b)=>{const x=this.jn(qe.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);a=a.insert(x.key,x),a.size===i&&b.done()}).next(()=>a)}newChangeBuffer(e){return new ay(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Fb(e).get("remoteDocumentGlobalKey").next(t=>(ht(!!t),t))}Qn(e,t){return Fb(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function VN(n,e){let t;if(e.document)t=db(n.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=qe.fromSegments(e.noDocument.path),i=Df(e.noDocument.readTime);t=On.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return nt();{const r=qe.fromSegments(e.unknownDocument.path),i=Df(e.unknownDocument.version);t=On.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Ht(r[0],r[1]);return It.fromTimestamp(i)}(e.readTime)),t}(this.yt,t);if(!r.isNoDocument()||!r.version.isEqual(It.min()))return r}return On.newInvalidDocument(e)}}function Ob(n){return new HN(n)}class ay extends lA{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Gl(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new _n((a,l)=>$t(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const h=this.Xn.get(a);if(t.push(this.Yn.removeEntry(e,a,h.readTime)),l.isValidDocument()){const _=Tb(this.Yn.yt,l);i=i.add(a.path.popLast());const w=Bg(_);r+=w-h.size,t.push(this.Yn.addEntry(e,a,_))}else if(r-=h.size,this.trackRemovals){const _=Tb(this.Yn.yt,l.convertToNoDocument(It.min()));t.push(this.Yn.addEntry(e,a,_))}}),i.forEach(a=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Yn.updateMetadata(e,r)),te.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((a,l)=>{this.Xn.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function Fb(n){return ei(n,"remoteDocumentGlobal")}function Od(n){return ei(n,"remoteDocumentsV14")}function Af(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Zl(n,e){const t=e.documentKey.path.toArray();return[n,X_(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function y0(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=$t(t[a],r[a]),i)return i;return i=$t(t.length,r.length),i||(i=$t(t[t.length-2],r[r.length-2]),i||$t(t[t.length-1],r[r.length-1]))}class v0{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class uy{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&$l(r.mutation,i,is.empty(),Ht.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Kt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Kt()){const i=Ao();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let l=vf();return a.forEach((h,_)=>{l=l.insert(h,_.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=Ao();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Kt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,h)=>{t.set(l,h)})})}computeViews(e,t,r,i){let a=Wi();const l=Pg(),h=Pg();return t.forEach((_,w)=>{const b=r.get(w.key);i.has(w.key)&&(void 0===b||b.mutation instanceof ma)?a=a.insert(w.key,w):void 0!==b?(l.set(w.key,b.mutation.getFieldMask()),$l(b.mutation,w,b.mutation.getFieldMask(),Ht.now())):l.set(w.key,is.empty())}),this.recalculateAndSaveOverlays(e,a).next(_=>(_.forEach((w,b)=>l.set(w,b)),t.forEach((w,b)=>{var x;return h.set(w,new v0(b,null!==(x=l.get(w))&&void 0!==x?x:null))}),h))}recalculateAndSaveOverlays(e,t){const r=Pg();let i=new pr((l,h)=>l-h),a=Kt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const h of l)h.keys().forEach(_=>{const w=t.get(_);if(null===w)return;let b=r.get(_)||is.empty();b=h.applyToLocalView(w,b),r.set(_,b);const x=(i.get(h.batchId)||Kt()).add(_);i=i.insert(h.batchId,x)})}).next(()=>{const l=[],h=i.getReverseIterator();for(;h.hasNext();){const _=h.getNext(),w=_.key,b=_.value,x=Ww();b.forEach(k=>{if(!a.has(k)){const U=QC(t.get(k),r.get(k));null!==U&&x.set(k,U),a=a.add(k)}}),l.push(this.documentOverlayCache.saveOverlays(e,w,x))}return te.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return qe.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Fw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):te.resolve(Ao());let h=-1,_=a;return l.next(w=>te.forEach(w,(b,x)=>(h<x.largestBatchId&&(h=x.largestBatchId),a.get(b)?te.resolve():this.remoteDocumentCache.getEntry(e,b).next(k=>{_=_.insert(b,k)}))).next(()=>this.populateOverlays(e,w,a)).next(()=>this.computeViews(e,_,w,Kt())).next(b=>({batchId:h,changes:nb(b)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new qe(t)).next(r=>{let i=vf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=vf();return this.indexManager.getCollectionParents(e,i).next(l=>te.forEach(l,h=>{const _=(w=t,b=h.child(i),new Bl(b,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,b;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(w=>{w.forEach((b,x)=>{a=a.insert(b,x)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(a=>{a.forEach((h,_)=>{const w=_.getKey();null===i.get(w)&&(i=i.insert(w,On.newInvalidDocument(w)))});let l=vf();return i.forEach((h,_)=>{const w=a.get(h);void 0!==w&&$l(w.mutation,_,is.empty(),Ht.now()),Uw(t,_)&&(l=l.insert(h,_))}),l})}}class cA{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return te.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:nr(r.createTime)}),te.resolve()}getNamedQuery(e,t){return te.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:Sb(r.bundledQuery),readTime:nr(r.readTime)}),te.resolve();var r}}class w0{constructor(){this.overlays=new pr(qe.comparator),this.es=new Map}getOverlay(e,t){return te.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ao();return te.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.oe(e,t,a)}),te.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.es.delete(r)),te.resolve()}getOverlaysForCollection(e,t,r){const i=Ao(),a=t.length+1,l=new qe(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const _=h.getNext().value,w=_.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===a&&_.largestBatchId>r&&i.set(_.getKey(),_)}return te.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new pr((w,b)=>w-b);const l=this.overlays.getIterator();for(;l.hasNext();){const w=l.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>r){let b=a.get(w.largestBatchId);null===b&&(b=Ao(),a=a.insert(w.largestBatchId,b)),b.set(w.getKey(),w)}}const h=Ao(),_=a.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((w,b)=>h.set(w,b)),!(h.size()>=i)););return te.resolve(h)}oe(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new l0(t,r));let a=this.es.get(t);void 0===a&&(a=Kt(),this.es.set(t,a)),this.es.set(t,a.add(r.key))}}class Gg{constructor(){this.ns=new _n(Cr.ss),this.rs=new _n(Cr.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new Cr(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new Cr(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new qe(new dn([])),r=new Cr(t,e),i=new Cr(t,e+1),a=[];return this.rs.forEachInRange([r,i],l=>{this.cs(l),a.push(l.key)}),a}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new qe(new dn([])),r=new Cr(t,e),i=new Cr(t,e+1);let a=Kt();return this.rs.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new Cr(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Cr{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return qe.comparator(e.key,t.key)||$t(e._s,t._s)}static os(e,t){return $t(e._s,t._s)||qe.comparator(e.key,t.key)}}class GN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new _n(Cr.ss)}checkEmpty(e){return te.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.ws;this.ws++;const l=new u0(a,t,r,i);this.mutationQueue.push(l);for(const h of i)this.gs=this.gs.add(new Cr(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return te.resolve(l)}lookupMutationBatch(e,t){return te.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),a=i<0?0:i;return te.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Cr(t,0),i=new Cr(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],l=>{const h=this.ys(l._s);a.push(h)}),te.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _n($t);return t.forEach(i=>{const a=new Cr(i,0),l=new Cr(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([a,l],h=>{r=r.add(h._s)})}),te.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;qe.isDocumentKey(a)||(a=a.child(""));const l=new Cr(new qe(a),0);let h=new _n($t);return this.gs.forEachWhile(_=>{const w=_.key.path;return!!r.isPrefixOf(w)&&(w.length===i&&(h=h.add(_._s)),!0)},l),te.resolve(this.Is(h))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){ht(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return te.forEach(t.mutations,i=>{const a=new Cr(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new Cr(t,0),i=this.gs.firstAfterOrEqual(r);return te.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return te.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class WN{constructor(e){this.Es=e,this.docs=new pr(qe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return te.resolve(r?r.document.mutableCopy():On.newInvalidDocument(t))}getEntries(e,t){let r=Wi();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():On.newInvalidDocument(i))}),te.resolve(r)}getAllFromCollection(e,t,r){let i=Wi();const a=new qe(t.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:h,value:{document:_}}=l.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||S_(vC(_),r)<=0||(i=i.insert(_.key,_.mutableCopy()))}return te.resolve(i)}getAllFromCollectionGroup(e,t,r,i){nt()}As(e,t){return te.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new zN(this)}getSize(e){return te.resolve(this.size)}}class zN extends lA{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),te.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class qN{constructor(e){this.persistence=e,this.Rs=new Gl(t=>Ul(t),Ag),this.lastRemoteSnapshotVersion=It.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Gg,this.targetCount=0,this.vs=Pd.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),te.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Pd(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,te.resolve()}updateTargetData(e,t){return this.Dn(t),te.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Rs.forEach((l,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.Rs.delete(l),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),te.waitFor(a).next(()=>i)}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return te.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),te.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),te.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),te.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return te.resolve(r)}containsKey(e,t){return te.resolve(this.Ps.containsKey(t))}}class E0{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Ys(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new qN(this),this.indexManager=new sA,this.remoteDocumentCache=new WN(r=>this.referenceDelegate.xs(r)),this.yt=new JS(t),this.Ns=new cA(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new w0,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new GN(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){ke("MemoryPersistence","Starting transaction:",e);const i=new dA(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(a=>this.referenceDelegate.Os(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ms(e,t){return te.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class dA extends Iw{constructor(e){super(),this.currentSequenceNumber=e}}class ly{constructor(e){this.persistence=e,this.Fs=new Gg,this.$s=null}static Bs(e){return new ly(e)}get Ls(){if(this.$s)return this.$s;throw nt()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),te.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),te.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),te.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Ls.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.Ls,r=>{const i=qe.fromPath(r);return this.qs(e,i).next(a=>{a||t.removeEntry(i,It.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return te.or([()=>te.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class hA{constructor(e){this.yt=e}$(e,t,r,i){const a=new A_("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",vb,{unique:!0}),h.createObjectStore("documentMutations"),Lb(e),function(h){h.createObjectStore("remoteDocuments")}(e));let l=te.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),Lb(e)),l=l.next(()=>function(h){const _=h.store("targetGlobal"),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:It.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",w)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(h,_){return _.store("mutations").W().next(w=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",vb,{unique:!0});const b=_.store("mutations"),x=w.map(k=>b.put(k));return te.waitFor(x)})}(e,a))),l=l.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Us(a))),r<6&&i>=6&&(l=l.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(a)))),r<7&&i>=7&&(l=l.next(()=>this.Gs(a))),r<8&&i>=8&&(l=l.next(()=>this.Qs(e,a))),r<9&&i>=9&&(l=l.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.js(a))),r<11&&i>=11&&(l=l.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(h){const _=h.createObjectStore("documentOverlays",{keyPath:Eb});_.createIndex("collectionPathOverlayIndex",Ib,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",FN,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(h){const _=h.createObjectStore("remoteDocumentsV14",{keyPath:AN});_.createIndex("documentKeyIndex",xN),_.createIndex("collectionGroupIndex",RN)}(e)).next(()=>this.Ws(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.zs(e,a))),r<15&&i>=15&&(l=l.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:Z_}).createIndex("sequenceNumberIndex",ON,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:wb}).createIndex("documentKeyIndex",Y_,{unique:!1})}(e))),l}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=Bg(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Us(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>te.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(h=>te.forEach(h,_=>{ht(_.userId===a.userId);const w=Rd(this.yt,_);return m0(e,a.userId,w).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Z((l,h)=>{const _=new dn(l),w=[0,Ri(_)];a.push(t.get(w).next(b=>b?te.resolve():t.put({targetId:0,path:Ri(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>te.waitFor(a))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:PN});const r=t.store("collectionParents"),i=new f0,a=l=>{if(i.add(l)){const h=l.lastSegment(),_=l.popLast();return r.put({collectionId:h,parent:Ri(_)})}};return t.store("remoteDocuments").Z({X:!0},(l,h)=>{const _=new dn(l);return a(_.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([l,h,_],w)=>{const b=ya(h);return a(b.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const a=Tf(i),l=c0(this.yt,a);return t.put(l)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((a,l)=>{const h=t.store("remoteDocumentsV14"),_=(w=l,w.document?new qe(dn.fromString(w.document.name).popFirst(5)):w.noDocument?qe.fromSegments(w.noDocument.path):w.unknownDocument?qe.fromSegments(w.unknownDocument.path):nt()).path.toArray();var w;const b={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(h.put(b))}).next(()=>te.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=Ob(this.yt),a=new E0(ly.Bs,this.yt.ie);return r.W().next(l=>{const h=new Map;return l.forEach(_=>{var w;let b=null!==(w=h.get(_.userId))&&void 0!==w?w:Kt();Rd(this.yt,_).keys().forEach(x=>b=b.add(x)),h.set(_.userId,b)}),te.forEach(h,(_,w)=>{const b=new Qr(w),x=ey.re(this.yt,b),k=a.getIndexManager(b),U=jg.re(b,this.yt,k,a.referenceDelegate);return new uy(i,U,x,k).recalculateAndSaveOverlaysForDocumentKeys(new Db(t,Ys.at),_).next()})})}}function Lb(n){n.createObjectStore("targetDocuments",{keyPath:NN}).createIndex("documentTargetsIndex",kN,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",MN,{unique:!0}),n.createObjectStore("targetGlobal")}const cy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class dy{constructor(e,t,r,i,a,l,h,_,w,b,x=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=a,this.window=l,this.document=h,this.Js=w,this.Ys=b,this.Xs=x,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=k=>Promise.resolve(),!dy.C())throw new Me(oe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new $N(this,i),this.ii=t+"main",this.yt=new JS(_),this.ri=new To(this.ii,this.Xs,new hA(this.yt)),this.Cs=new BN(this.referenceDelegate,this.yt),this.remoteDocumentCache=Ob(this.yt),this.Ns=new eA,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===b&&fr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Me(oe.FAILED_PRECONDITION,cy);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Ys(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,pe.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,pe.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,pe.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>hy(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(mu(e))return ke("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return xf(e).get("owner").next(t=>te.resolve(this.mi(t)))}gi(e){return hy(e).delete(this.clientId)}yi(){var e=this;return(0,pe.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=ei(r,"clientMetadata");return i.W().next(a=>{const l=e.Ii(a,18e5),h=a.filter(_=>-1===l.indexOf(_));return te.forEach(h,_=>i.delete(_.clientId)).next(()=>h)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?te.resolve(!0):xf(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Me(oe.FAILED_PRECONDITION,cy);return!1}}return!(!this.networkEnabled||!this.inForeground)||hy(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&ke("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,pe.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Db(t,Ys.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>hy(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return jg.re(e,this.yt,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new UN(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return ey.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){ke("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(l=this.Xs)?LN:14===l?a0:13===l?bb:12===l?Cb:11===l?Q_:void nt();var l;let h;return this.ri.runTransaction(e,i,a,_=>(h=new Db(_,this.Ss?this.Ss.next():Ys.at),"readwrite-primary"===t?this.fi(h).next(w=>!!w||this.di(h)).next(w=>{if(!w)throw fr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Me(oe.FAILED_PRECONDITION,Ew);return r(h)}).next(w=>this.wi(h).next(()=>w)):this.Vi(h).next(()=>r(h)))).then(_=>(h.raiseOnCommittedEvent(),_))}Vi(e){return xf(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Me(oe.FAILED_PRECONDITION,cy)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return xf(e).put("owner",t)}static C(){return To.C()}_i(e){const t=xf(e);return t.get("owner").next(r=>this.mi(r)?(ke("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):te.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(fr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,P.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return ke("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return fr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){fr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function xf(n){return ei(n,"owner")}function hy(n){return ei(n,"clientMetadata")}function I0(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class fy{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=Kt(),i=Kt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new fy(e,t.fromCache,r,i)}}class py{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(a=>a||this.Oi(e,t,i,r)).next(a=>a||this.Mi(e,t))}ki(e,t){if(jC(t))return te.resolve(null);let r=Gi(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=B_(t,null,"F"),r=Gi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const l=Kt(...a);return this.Ni.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,r).next(_=>{const w=this.Fi(t,h);return this.$i(t,w,l,_.readTime)?this.ki(e,B_(t,null,"F")):this.Bi(e,w,t,_)}))})))}Oi(e,t,r,i){return jC(t)||i.isEqual(It.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(a=>{const l=this.Fi(t,a);return this.$i(t,l,r,i)?this.Mi(e,t):(C_()<=Cs.in.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Vw(t)),this.Bi(e,l,t,yC(i,-1)))})}Fi(e,t){let r=new _n(WC(e));return t.forEach((i,a)=>{Uw(e,a)&&(r=r.add(a))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Mi(e,t){return C_()<=Cs.in.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",Vw(t)),this.Ni.getDocumentsMatchingQuery(e,t,xi.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}class KN{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.yt=i,this.qi=new pr($t),this.Ui=new Gl(a=>Ul(a),Ag),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uy(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}}function C0(n,e,t,r){return new KN(n,e,t,r)}function gy(n,e){return b0.apply(this,arguments)}function b0(){return b0=(0,pe.Z)(function*(n,e){const t=Ge(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const l=[],h=[];let _=Kt();for(const w of i){l.push(w.batchId);for(const b of w.mutations)_=_.add(b.key)}for(const w of a){h.push(w.batchId);for(const b of w.mutations)_=_.add(b.key)}return t.localDocuments.getDocuments(r,_).next(w=>({ji:w,removedBatchIds:l,addedBatchIds:h}))})})}),b0.apply(this,arguments)}function fA(n,e){const t=Ge(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Gi.newChangeBuffer({trackRemovals:!0});return function(l,h,_,w){const b=_.batch,x=b.keys();let k=te.resolve();return x.forEach(U=>{k=k.next(()=>w.getEntry(h,U)).next(W=>{const ae=_.docVersions.get(U);ht(null!==ae),W.version.compareTo(ae)<0&&(b.applyToRemoteDocument(W,_),W.isValidDocument()&&(W.setReadTime(_.commitVersion),w.addEntry(W)))})}),k.next(()=>l.mutationQueue.removeMutationBatch(h,b))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let h=Kt();for(let _=0;_<l.mutationResults.length;++_)l.mutationResults[_].transformResults.length>0&&(h=h.add(l.batch.mutations[_].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function pA(n){const e=Ge(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function ZN(n,e){const t=Ge(n),r=e.snapshotVersion;let i=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.qi;const h=[];e.targetChanges.forEach((b,x)=>{const k=i.get(x);if(!k)return;h.push(t.Cs.removeMatchingKeys(a,b.removedDocuments,x).next(()=>t.Cs.addMatchingKeys(a,b.addedDocuments,x)));let U=k.withSequenceNumber(a.currentSequenceNumber);var W,ae,ve;e.targetMismatches.has(x)?U=U.withResumeToken(Ur.EMPTY_BYTE_STRING,It.min()).withLastLimboFreeSnapshotVersion(It.min()):b.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(b.resumeToken,r)),i=i.insert(x,U),ae=U,ve=b,(0===(W=k).resumeToken.approximateByteSize()||ae.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=3e8||ve.addedDocuments.size+ve.modifiedDocuments.size+ve.removedDocuments.size>0)&&h.push(t.Cs.updateTargetData(a,U))});let _=Wi(),w=Kt();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,b))}),h.push(Vb(a,l,e.documentUpdates).next(b=>{_=b.Wi,w=b.zi})),!r.isEqual(It.min())){const b=t.Cs.getLastRemoteSnapshotVersion(a).next(x=>t.Cs.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(b)}return te.waitFor(h).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,_,w)).next(()=>_)}).then(a=>(t.qi=i,a))}function Vb(n,e,t){let r=Kt(),i=Kt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let l=Wi();return t.forEach((h,_)=>{const w=a.get(h);_.isFoundDocument()!==w.isFoundDocument()&&(i=i.add(h)),_.isNoDocument()&&_.version.isEqual(It.min())?(e.removeEntry(h,_.readTime),l=l.insert(h,_)):!w.isValidDocument()||_.version.compareTo(w.version)>0||0===_.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(_),l=l.insert(h,_)):ke("LocalStore","Ignoring outdated watch update for ",h,". Current version:",w.version," Watch version:",_.version)}),{Wi:l,zi:i}})}function gA(n,e){const t=Ge(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Rf(n,e){const t=Ge(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(a=>a?(i=a,te.resolve(i)):t.Cs.allocateTargetId(r).next(l=>(i=new Ad(e,l,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.qi.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.qi=t.qi.insert(r.targetId,r),t.Ui.set(e,r.targetId)),r})}function Wg(n,e,t){return Ub.apply(this,arguments)}function Ub(){return Ub=(0,pe.Z)(function*(n,e,t){const r=Ge(n),i=r.qi.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!mu(l))throw l;ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.qi=r.qi.remove(e),r.Ui.delete(i.target)}),Ub.apply(this,arguments)}function D0(n,e,t){const r=Ge(n);let i=It.min(),a=Kt();return r.persistence.runTransaction("Execute query","readonly",l=>function(h,_,w){const b=Ge(h),x=b.Ui.get(w);return void 0!==x?te.resolve(b.qi.get(x)):b.Cs.getTargetData(_,w)}(r,l,Gi(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(l,h.targetId).next(_=>{a=_})}).next(()=>r.Li.getDocumentsMatchingQuery(l,e,t?i:It.min(),t?a:Kt())).next(h=>(Bb(r,GC(e),h),{documents:h,Hi:a})))}function mA(n,e){const t=Ge(n),r=Ge(t.Cs),i=t.qi.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.ne(a,e).next(l=>l?l.target:null))}function _A(n,e){const t=Ge(n),r=t.Ki.get(e)||It.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,yC(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Bb(t,e,i),i))}function Bb(n,e,t){let r=n.Ki.get(e)||It.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Ki.set(e,r)}function jb(){return jb=(0,pe.Z)(function*(n,e,t,r){const i=Ge(n);let a=Kt(),l=Wi();for(const w of t){const b=e.Ji(w.metadata.name);w.document&&(a=a.add(b));const x=e.Yi(w);x.setReadTime(e.Xi(w.metadata.readTime)),l=l.insert(b,x)}const h=i.Gi.newChangeBuffer({trackRemovals:!0}),_=yield Rf(i,(w=r,Gi(gf(dn.fromString(`__bundle__/docs/${w}`)))));var w;return i.persistence.runTransaction("Apply bundle documents","readwrite",w=>Vb(w,h,l).next(b=>(h.apply(w),b)).next(b=>i.Cs.removeMatchingKeysForTargetId(w,_.targetId).next(()=>i.Cs.addMatchingKeys(w,a,_.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(w,b.Wi,b.zi)).next(()=>b.Wi)))}),jb.apply(this,arguments)}function QN(n,e){return $b.apply(this,arguments)}function $b(){return $b=(0,pe.Z)(function*(n,e,t=Kt()){const r=yield Rf(n,Gi(Sb(e.bundledQuery))),i=Ge(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=nr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Ns.saveNamedQuery(a,e);const h=r.withResumeToken(Ur.EMPTY_BYTE_STRING,l);return i.qi=i.qi.insert(h.targetId,h),i.Cs.updateTargetData(a,h).next(()=>i.Cs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Cs.addMatchingKeys(a,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(a,e))})}),$b.apply(this,arguments)}function yA(n,e){return`firestore_clients_${n}_${e}`}function vA(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function s(n,e){return`firestore_targets_${n}_${e}`}class o{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new Me(i.error.code,i.error.message))),l?new o(e,t,i.state,a):(fr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class u{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Me(r.error.code,r.error.message))),a?new u(e,r.state,i):(fr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class c{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=W_();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=df(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new c(e,a):(fr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class d{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new d(t.clientId,t.onlineState):(fr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class g{constructor(){this.activeTargetIds=W_()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class v{constructor(e,t,r,i,a){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new pr($t),this.started=!1,this.cr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=yA(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new g),this.lr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,pe.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const a=e.getItem(yA(e.persistenceKey,i));if(a){const l=c.Zi(i,a);l&&(e.ur=e.ur.insert(l.clientId,l))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(s(this.persistenceKey,e));if(r){const i=u.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(s(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ke("SharedClientState","READ",e,t),t}setItem(e,t){ke("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ke("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ke("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void fr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,pe.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(a){let l=Ys.at;if(null!=a)try{const h=JSON.parse(a);ht("number"==typeof h),l=h}catch(h){fr("SharedClientState","Failed to read sequence number from WebStorage",h)}return l}(r.newValue);i!==Ys.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Or(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Mr(a)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new o(this.currentUser,e,t,r),a=vA(this.persistenceKey,this.currentUser,e);this.setItem(a,i.tr())}Er(e){const t=vA(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=s(this.persistenceKey,e),a=new u(e,t,r);this.setItem(i,a.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return c.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return o.Zi(new Qr(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return u.Zi(i,t)}yr(e){return d.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,pe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);ke("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),a=this.Ir(r),l=[],h=[];return a.forEach(_=>{i.has(_)||l.push(_)}),i.forEach(_=>{a.has(_)||h.push(_)}),this.syncEngine.Br(l,h).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=W_();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class I{constructor(){this.Lr=new g,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new g,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class C{Ur(e){}shutdown(){}}class S{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const M={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class L{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class z extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,i,a){const l=this.ho(e,t);ke("RestConnection","Sending: ",l,r);const h={};return this.lo(h,i,a),this.fo(e,l,h,r).then(_=>(ke("RestConnection","Received: ",_),_),_=>{throw Nl("RestConnection",`${e} failed with error: `,_,"url: ",l,"request:",r),_})}_o(e,t,r,i,a,l){return this.ao(e,t,r,i,a)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+fd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}ho(e,t){return`${this.oo}/v1/${t}:${M[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((a,l)=>{const h=new xS;h.setWithCredentials(!0),h.listenOnce(TS.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case vw.NO_ERROR:const w=h.getResponseJson();ke("Connection","XHR received:",JSON.stringify(w)),a(w);break;case vw.TIMEOUT:ke("Connection",'RPC "'+e+'" timed out'),l(new Me(oe.DEADLINE_EXCEEDED,"Request time out"));break;case vw.HTTP_ERROR:const b=h.getStatus();if(ke("Connection",'RPC "'+e+'" failed with status:',b,"response text:",h.getResponseText()),b>0){let x=h.getResponseJson();Array.isArray(x)&&(x=x[0]);const k=x?.error;if(k&&k.status&&k.message){const U=function(W){const ae=W.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(ae)>=0?ae:oe.UNKNOWN}(k.status);l(new Me(U,k.message))}else l(new Me(oe.UNKNOWN,"Server responded with status "+h.getStatus()))}else l(new Me(oe.UNAVAILABLE,"Connection failed."));break;default:nt()}}finally{ke("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(i);h.send(t,"POST",_,r,15)})}wo(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=bS(),l=DS(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new AS({})),this.lo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const _=i.join("");ke("Connection","Creating WebChannel: "+_,h);const w=a.createWebChannel(_,h);let b=!1,x=!1;const k=new L({Hr:W=>{x?ke("Connection","Not sending because WebChannel is closed:",W):(b||(ke("Connection","Opening WebChannel transport."),w.open(),b=!0),ke("Connection","WebChannel sending:",W),w.send(W))},Jr:()=>w.close()}),U=(W,ae,ve)=>{W.listen(ae,pt=>{try{ve(pt)}catch(_t){setTimeout(()=>{throw _t},0)}})};return U(w,I_.EventType.OPEN,()=>{x||ke("Connection","WebChannel transport opened.")}),U(w,I_.EventType.CLOSE,()=>{x||(x=!0,ke("Connection","WebChannel transport closed"),k.io())}),U(w,I_.EventType.ERROR,W=>{x||(x=!0,Nl("Connection","WebChannel transport errored:",W),k.io(new Me(oe.UNAVAILABLE,"The operation could not be completed")))}),U(w,I_.EventType.MESSAGE,W=>{var ae;if(!x){const ve=W.data[0];ht(!!ve);const _t=ve.error||(null===(ae=ve[0])||void 0===ae?void 0:ae.error);if(_t){ke("Connection","WebChannel received error:",_t);const st=_t.status;let dt=function(Wt){const Tr=gr[Wt];if(void 0!==Tr)return tb(Tr)}(st),Mt=_t.message;void 0===dt&&(dt=oe.INTERNAL,Mt="Unknown error status: "+st+" with message "+_t.message),x=!0,k.io(new Me(dt,Mt)),w.close()}else ke("Connection","WebChannel received:",ve),k.ro(ve)}}),U(l,SS.STAT_EVENT,W=>{W.stat===hC.PROXY?ke("Connection","Detected buffering proxy"):W.stat===hC.NOPROXY&&ke("Connection","Detected no buffering proxy")}),setTimeout(()=>{k.so()},0),k}}function X(){return typeof window<"u"?window:null}function ye(){return typeof document<"u"?document:null}function Oe(n){return new ub(n,!0)}class Ze{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&ke("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class at{constructor(e,t,r,i,a,l,h,_){this.Hs=e,this.vo=r,this.Vo=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=_,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Ze(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,pe.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,pe.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,pe.Z)(function*(){r.Lo(),r.qo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===oe.RESOURCE_EXHAUSTED?(fr(t.toString()),fr("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===oe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Uo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new Me(oe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,pe.Z)(function*(){e.state=0,e.start()}))}Qo(e){return ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Rt extends at{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.yt=a}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function Qw(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:nt(),i=e.targetChange.targetIds||[],a=function(_,w){return _.wt?(ht(void 0===w||"string"==typeof w),Ur.fromBase64String(w||"")):(ht(void 0===w||w instanceof Uint8Array),Ur.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(_){const w=void 0===_.code?oe.UNKNOWN:tb(_.code);return new Me(w,_.message||"")}(l);t=new zS(r,i,a,h||null)}else if("documentChange"in e){const r=e.documentChange,i=Xs(n,r.document.name),a=nr(r.document.updateTime),l=r.document.createTime?nr(r.document.createTime):It.min(),h=new Jr({mapValue:{fields:r.document.fields}}),_=On.newFoundDocument(i,a,l,h);t=new z_(r.targetIds||[],r.removedTargetIds||[],_.key,_)}else if("documentDelete"in e){const r=e.documentDelete,i=Xs(n,r.document),a=r.readTime?nr(r.readTime):It.min(),l=On.newNoDocument(i,a);t=new z_([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=Xs(n,r.document);t=new z_([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return nt();{const r=e.filter,a=new JC(r.count||0);t=new ob(r.targetId,a)}}var _;return t}(this.yt,e),r=function(i){if(!("targetChange"in i))return It.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?It.min():a.readTime?nr(a.readTime):It.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=Og(this.yt),t.addTarget=function(i,a){let l;const h=a.target;return l=L_(h)?{documents:fb(i,h)}:{query:Jw(i,h)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?l.resumeToken=lb(i,a.resumeToken):a.snapshotVersion.compareTo(It.min())>0&&(l.readTime=Ef(i,a.snapshotVersion.toTimestamp())),l}(this.yt,e);const r=function gb(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return nt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=Og(this.yt),t.removeTarget=e,this.Bo(t)}}class Ne extends at{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.yt=a,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(ht(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function TN(n,e){return n&&n.length>0?(ht(void 0!==e),n.map(t=>function(r,i){let a=nr(r.updateTime?r.updateTime:i);return a.isEqual(It.min())&&(a=nr(i)),new HS(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=nr(e.commitTime);return this.listener.Zo(r,t)}return ht(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Og(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>K_(this.yt,r))};this.Bo(t)}}class Gt extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.yt=i,this.nu=!1}su(){if(this.nu)throw new Me(oe.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.ao(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Me(oe.UNKNOWN,i.toString())})}_o(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection._o(e,t,r,a,l,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Me(oe.UNKNOWN,a.toString())})}terminate(){this.nu=!0}}class XN{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(fr(t),this.ou=!1):ke("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class eV{constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.Ur(h=>{r.enqueueAndForget((0,pe.Z)(function*(){var _;Fd(l)&&(ke("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,pe.Z)(function*(w){const b=Ge(w);b._u.add(4),yield my(b),b.gu.set("Unknown"),b._u.delete(4),yield T0(b)}),function(w){return _.apply(this,arguments)})(l))}))}),this.gu=new XN(r,i)}}function T0(n){return wA.apply(this,arguments)}function wA(){return wA=(0,pe.Z)(function*(n){if(Fd(n))for(const e of n.wu)yield e(!0)}),wA.apply(this,arguments)}function my(n){return EA.apply(this,arguments)}function EA(){return EA=(0,pe.Z)(function*(n){for(const e of n.wu)yield e(!1)}),EA.apply(this,arguments)}function Hb(n,e){const t=Ge(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),bA(t)?CA(t):yy(t).ko()&&IA(t,e))}function S0(n,e){const t=Ge(n),r=yy(t);t.du.delete(e),r.ko()&&JN(t,e),0===t.du.size&&(r.ko()?r.Fo():Fd(t)&&t.gu.set("Unknown"))}function IA(n,e){n.yu.Ot(e.targetId),yy(n).zo(e)}function JN(n,e){n.yu.Ot(e),yy(n).Ho(e)}function CA(n){n.yu=new ab({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>n.du.get(e)||null}),yy(n).start(),n.gu.uu()}function bA(n){return Fd(n)&&!yy(n).No()&&n.du.size>0}function Fd(n){return 0===Ge(n)._u.size}function ek(n){n.yu=void 0}function tV(n){return DA.apply(this,arguments)}function DA(){return DA=(0,pe.Z)(function*(n){n.du.forEach((e,t)=>{IA(n,e)})}),DA.apply(this,arguments)}function nV(n,e){return TA.apply(this,arguments)}function TA(){return TA=(0,pe.Z)(function*(n,e){ek(n),bA(n)?(n.gu.hu(e),CA(n)):n.gu.set("Unknown")}),TA.apply(this,arguments)}function rV(n,e,t){return SA.apply(this,arguments)}function SA(){return SA=(0,pe.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof zS&&2===e.state&&e.cause)try{yield(r=(0,pe.Z)(function*(i,a){const l=a.cause;for(const h of a.targetIds)i.du.has(h)&&(yield i.remoteSyncer.rejectListen(h,l),i.du.delete(h),i.yu.removeTarget(h))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Gb(n,r)}else if(e instanceof z_?n.yu.Kt(e):e instanceof ob?n.yu.Jt(e):n.yu.jt(e),!t.isEqual(It.min()))try{const r=yield pA(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.yu.Zt(a);return l.targetChanges.forEach((h,_)=>{if(h.resumeToken.approximateByteSize()>0){const w=i.du.get(_);w&&i.du.set(_,w.withResumeToken(h.resumeToken,a))}}),l.targetMismatches.forEach(h=>{const _=i.du.get(h);if(!_)return;i.du.set(h,_.withResumeToken(Ur.EMPTY_BYTE_STRING,_.snapshotVersion)),JN(i,h);const w=new Ad(_.target,h,1,_.sequenceNumber);IA(i,w)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){ke("RemoteStore","Failed to raise snapshot:",r),yield Gb(n,r)}var r}),SA.apply(this,arguments)}function Gb(n,e,t){return AA.apply(this,arguments)}function AA(){return AA=(0,pe.Z)(function*(n,e,t){if(!mu(e))throw e;n._u.add(1),yield my(n),n.gu.set("Offline"),t||(t=()=>pA(n.localStore)),n.asyncQueue.enqueueRetryable((0,pe.Z)(function*(){ke("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield T0(n)}))}),AA.apply(this,arguments)}function tk(n,e){return e().catch(t=>Gb(n,t,e))}function _y(n){return xA.apply(this,arguments)}function xA(){return xA=(0,pe.Z)(function*(n){const e=Ge(n),t=Mf(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;iV(e);)try{const i=yield gA(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,sV(e,i)}catch(i){yield Gb(e,i)}nk(e)&&rk(e)}),xA.apply(this,arguments)}function iV(n){return Fd(n)&&n.fu.length<10}function sV(n,e){n.fu.push(e);const t=Mf(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function nk(n){return Fd(n)&&!Mf(n).No()&&n.fu.length>0}function rk(n){Mf(n).start()}function oV(n){return RA.apply(this,arguments)}function RA(){return RA=(0,pe.Z)(function*(n){Mf(n).eu()}),RA.apply(this,arguments)}function aV(n){return MA.apply(this,arguments)}function MA(){return MA=(0,pe.Z)(function*(n){const e=Mf(n);for(const t of n.fu)e.Xo(t.mutations)}),MA.apply(this,arguments)}function uV(n,e,t){return NA.apply(this,arguments)}function NA(){return NA=(0,pe.Z)(function*(n,e,t){const r=n.fu.shift(),i=bf.from(r,e,t);yield tk(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield _y(n)}),NA.apply(this,arguments)}function lV(n,e){return kA.apply(this,arguments)}function kA(){return kA=(0,pe.Z)(function*(n,e){var t;e&&Mf(n).Yo&&(yield(t=(0,pe.Z)(function*(r,i){if(eb(a=i.code)&&a!==oe.ABORTED){const l=r.fu.shift();Mf(r).Mo(),yield tk(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield _y(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),nk(n)&&rk(n)}),kA.apply(this,arguments)}function ik(n,e){return PA.apply(this,arguments)}function PA(){return PA=(0,pe.Z)(function*(n,e){const t=Ge(n);t.asyncQueue.verifyOperationInProgress(),ke("RemoteStore","RemoteStore received new credentials");const r=Fd(t);t._u.add(3),yield my(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield T0(t)}),PA.apply(this,arguments)}function OA(n,e){return FA.apply(this,arguments)}function FA(){return FA=(0,pe.Z)(function*(n,e){const t=Ge(n);e?(t._u.delete(2),yield T0(t)):e||(t._u.add(2),yield my(t),t.gu.set("Unknown"))}),FA.apply(this,arguments)}function yy(n){return n.pu||(n.pu=function(e,t,r){const i=Ge(e);return i.su(),new Rt(t,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,r)}(n.datastore,n.asyncQueue,{Yr:tV.bind(null,n),Zr:nV.bind(null,n),Wo:rV.bind(null,n)}),n.wu.push(function(){var e=(0,pe.Z)(function*(t){t?(n.pu.Mo(),bA(n)?CA(n):n.gu.set("Unknown")):(yield n.pu.stop(),ek(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Mf(n){return n.Iu||(n.Iu=function(e,t,r){const i=Ge(e);return i.su(),new Ne(t,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,r)}(n.datastore,n.asyncQueue,{Yr:oV.bind(null,n),Zr:lV.bind(null,n),tu:aV.bind(null,n),Zo:uV.bind(null,n)}),n.wu.push(function(){var e=(0,pe.Z)(function*(t){t?(n.Iu.Mo(),yield _y(n)):(yield n.Iu.stop(),n.fu.length>0&&(ke("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class LA{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new zn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,h=new LA(e,t,l,i,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Me(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vy(n,e){if(fr("AsyncQueue",`${e}: ${n}`),mu(n))return new Me(oe.UNAVAILABLE,`${e}: ${n}`);throw n}class wy{constructor(e){this.comparator=e?(t,r)=>e(t,r)||qe.comparator(t.key,r.key):(t,r)=>qe.comparator(t.key,r.key),this.keyedMap=vf(),this.sortedSet=new pr(this.comparator)}static emptySet(e){return new wy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof wy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new wy;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class sk{constructor(){this.Tu=new pr(qe.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):nt():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ey{constructor(e,t,r,i,a,l,h,_,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=_,this.hasCachedResults=w}static fromInitialDocuments(e,t,r,i,a){const l=[];return t.forEach(h=>{l.push({type:0,doc:h})}),new Ey(e,t,wy.emptySet(t),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class cV{constructor(){this.Au=void 0,this.listeners=[]}}class dV{constructor(){this.queries=new Gl(e=>HC(e),xg),this.onlineState="Unknown",this.Ru=new Set}}function VA(n,e){return UA.apply(this,arguments)}function UA(){return UA=(0,pe.Z)(function*(n,e){const t=Ge(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new cV),i)try{a.Au=yield t.onListen(r)}catch(l){const h=vy(l,`Initialization of query '${Vw(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,a),a.listeners.push(e),e.bu(t.onlineState),a.Au&&e.Pu(a.Au)&&$A(t)}),UA.apply(this,arguments)}function BA(n,e){return jA.apply(this,arguments)}function jA(){return jA=(0,pe.Z)(function*(n,e){const t=Ge(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),jA.apply(this,arguments)}function hV(n,e){const t=Ge(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const h of l.listeners)h.Pu(i)&&(r=!0);l.Au=i}}r&&$A(t)}function fV(n,e,t){const r=Ge(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function $A(n){n.Ru.forEach(e=>{e.next()})}class HA{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Ey(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Ey.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class pV{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class ok{constructor(e){this.yt=e}Ji(e){return Xs(this.yt,e)}Yi(e){return e.metadata.exists?db(this.yt,e.document,!1):On.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return nr(e)}}class gV{constructor(e,t,r){this.Mu=e,this.localStore=t,this.yt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=ak(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=dn.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new ok(this.yt);for(const i of e)if(i.metadata.queries){const a=r.Ji(i.metadata.name);for(const l of i.metadata.queries){const h=(t.get(l)||Kt()).add(a);t.set(l,h)}}return t}complete(){var e=this;return(0,pe.Z)(function*(){const t=yield function YN(n,e,t,r){return jb.apply(this,arguments)}(e.localStore,new ok(e.yt),e.documents,e.Mu.id),r=e.$u(e.documents);for(const i of e.queries)yield QN(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function ak(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class uk{constructor(e){this.key=e}}class lk{constructor(e){this.key=e}}class ck{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Kt(),this.mutatedKeys=Kt(),this.Gu=WC(e),this.Qu=new wy(this.Gu)}get ju(){return this.qu}Wu(e,t){const r=t?t.zu:new sk,i=t?t.Qu:this.Qu;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,h=!1;const _="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,w="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((b,x)=>{const k=i.get(b),U=Uw(this.query,x)?x:null,W=!!k&&this.mutatedKeys.has(k.key),ae=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let ve=!1;k&&U?k.data.isEqual(U.data)?W!==ae&&(r.track({type:3,doc:U}),ve=!0):this.Hu(k,U)||(r.track({type:2,doc:U}),ve=!0,(_&&this.Gu(U,_)>0||w&&this.Gu(U,w)<0)&&(h=!0)):!k&&U?(r.track({type:0,doc:U}),ve=!0):k&&!U&&(r.track({type:1,doc:k}),ve=!0,(_||w)&&(h=!0)),ve&&(U?(l=l.add(U),a=ae?a.add(b):a.delete(b)):(l=l.delete(b),a=a.delete(b)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const b="F"===this.query.limitType?l.last():l.first();l=l.delete(b.key),a=a.delete(b.key),r.track({type:1,doc:b})}return{Qu:l,zu:r,$i:h,mutatedKeys:a}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const a=e.zu.Eu();a.sort((w,b)=>function(x,k){const U=W=>{switch(W){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return nt()}};return U(x)-U(k)}(w.type,b.type)||this.Gu(w.doc,b.doc)),this.Ju(r);const l=t?this.Yu():[],h=0===this.Ku.size&&this.current?1:0,_=h!==this.Uu;return this.Uu=h,0!==a.length||_?{snapshot:new Ey(this.query,e.Qu,i,a,e.mutatedKeys,0===h,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:l}:{Xu:l}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new sk,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Kt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new lk(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new uk(r))}),t}tc(e){this.qu=e.Hi,this.Ku=Kt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return Ey.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class mV{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class _V{constructor(e){this.key=e,this.nc=!1}}class yV{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.sc={},this.ic=new Gl(h=>HC(h),xg),this.rc=new Map,this.oc=new Set,this.uc=new pr(qe.comparator),this.cc=new Map,this.ac=new Gg,this.hc={},this.lc=new Map,this.fc=Pd.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function vV(n,e){return GA.apply(this,arguments)}function GA(){return GA=(0,pe.Z)(function*(n,e){const t=fx(n);let r,i;const a=t.ic.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.ec();else{const l=yield Rf(t.localStore,Gi(e));t.isPrimaryClient&&Hb(t.remoteStore,l);const h=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield WA(t,e,r,"current"===h,l.resumeToken)}return i}),GA.apply(this,arguments)}function WA(n,e,t,r,i){return zA.apply(this,arguments)}function zA(){return zA=(0,pe.Z)(function*(n,e,t,r,i){n._c=(x,k,U)=>{return(W=(0,pe.Z)(function*(ae,ve,pt,_t){let st=ve.view.Wu(pt);st.$i&&(st=yield D0(ae.localStore,ve.query,!1).then(({documents:Wt})=>ve.view.Wu(Wt,st)));const dt=_t&&_t.targetChanges.get(ve.targetId),Mt=ve.view.applyChanges(st,ae.isPrimaryClient,dt);return nx(ae,ve.targetId,Mt.Xu),Mt.snapshot}),function(ae,ve,pt,_t){return W.apply(this,arguments)})(n,x,k,U);var W};const a=yield D0(n.localStore,e,!0),l=new ck(e,a.Hi),h=l.Wu(a.documents),_=_a.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),w=l.applyChanges(h,n.isPrimaryClient,_);nx(n,t,w.Xu);const b=new mV(e,t,l);return n.ic.set(e,b),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),w.snapshot}),zA.apply(this,arguments)}function wV(n,e){return qA.apply(this,arguments)}function qA(){return qA=(0,pe.Z)(function*(n,e){const t=Ge(n),r=t.ic.get(e),i=t.rc.get(r.targetId);if(i.length>1)return t.rc.set(r.targetId,i.filter(a=>!xg(a,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Wg(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),S0(t.remoteStore,r.targetId),Iy(t,r.targetId)}).catch(kl))):(Iy(t,r.targetId),yield Wg(t.localStore,r.targetId,!0))}),qA.apply(this,arguments)}function KA(){return KA=(0,pe.Z)(function*(n,e,t){const r=px(n);try{const i=yield function(a,l){const h=Ge(a),_=Ht.now(),w=l.reduce((k,U)=>k.add(U.key),Kt());let b,x;return h.persistence.runTransaction("Locally write mutations","readwrite",k=>{let U=Wi(),W=Kt();return h.Gi.getEntries(k,w).next(ae=>{U=ae,U.forEach((ve,pt)=>{pt.isValidDocument()||(W=W.add(ve))})}).next(()=>h.localDocuments.getOverlayedDocuments(k,U)).next(ae=>{b=ae;const ve=[];for(const pt of l){const _t=$_(pt,b.get(pt.key).overlayedDocument);null!=_t&&ve.push(new ma(pt.key,_t,O_(_t.value.mapValue),Fn.exists(!0)))}return h.mutationQueue.addMutationBatch(k,_,ve,l)}).next(ae=>{x=ae;const ve=ae.applyToLocalDocumentSet(b,W);return h.documentOverlayCache.saveOverlays(k,ae.batchId,ve)})}).then(()=>({batchId:x.batchId,changes:nb(b)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,h){let _=a.hc[a.currentUser.toKey()];_||(_=new pr($t)),_=_.insert(l,h),a.hc[a.currentUser.toKey()]=_}(r,i.batchId,t),yield Ld(r,i.changes),yield _y(r.remoteStore)}catch(i){const a=vy(i,"Failed to persist write");t.reject(a)}}),KA.apply(this,arguments)}function dk(n,e){return ZA.apply(this,arguments)}function ZA(){return ZA=(0,pe.Z)(function*(n,e){const t=Ge(n);try{const r=yield ZN(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.cc.get(a);l&&(ht(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.nc=!0:i.modifiedDocuments.size>0?ht(l.nc):i.removedDocuments.size>0&&(ht(l.nc),l.nc=!1))}),yield Ld(t,r,e)}catch(r){yield kl(r)}}),ZA.apply(this,arguments)}function hk(n,e,t){const r=Ge(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ic.forEach((a,l)=>{const h=l.view.bu(e);h.snapshot&&i.push(h.snapshot)}),function(a,l){const h=Ge(a);h.onlineState=l;let _=!1;h.queries.forEach((w,b)=>{for(const x of b.listeners)x.bu(l)&&(_=!0)}),_&&$A(h)}(r.eventManager,e),i.length&&r.sc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function IV(n,e,t){return YA.apply(this,arguments)}function YA(){return YA=(0,pe.Z)(function*(n,e,t){const r=Ge(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.cc.get(e),a=i&&i.key;if(a){let l=new pr(qe.comparator);l=l.insert(a,On.newNoDocument(a,It.min()));const h=Kt().add(a),_=new Br(It.min(),new Map,new _n($t),l,h);yield dk(r,_),r.uc=r.uc.remove(a),r.cc.delete(e),rx(r)}else yield Wg(r.localStore,e,!1).then(()=>Iy(r,e,t)).catch(kl)}),YA.apply(this,arguments)}function CV(n,e){return QA.apply(this,arguments)}function QA(){return QA=(0,pe.Z)(function*(n,e){const t=Ge(n),r=e.batch.batchId;try{const i=yield fA(t.localStore,e);tx(t,r,null),ex(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ld(t,i)}catch(i){yield kl(i)}}),QA.apply(this,arguments)}function bV(n,e,t){return XA.apply(this,arguments)}function XA(){return XA=(0,pe.Z)(function*(n,e,t){const r=Ge(n);try{const i=yield function(a,l){const h=Ge(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let w;return h.mutationQueue.lookupMutationBatch(_,l).next(b=>(ht(null!==b),w=b.keys(),h.mutationQueue.removeMutationBatch(_,b))).next(()=>h.mutationQueue.performConsistencyCheck(_)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(_,w,l)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,w)).next(()=>h.localDocuments.getDocuments(_,w))})}(r.localStore,e);tx(r,e,t),ex(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ld(r,i)}catch(i){yield kl(i)}}),XA.apply(this,arguments)}function JA(){return JA=(0,pe.Z)(function*(n,e){const t=Ge(n);Fd(t.remoteStore)||ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=Ge(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>l.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.lc.get(r)||[];i.push(e),t.lc.set(r,i)}catch(r){const i=vy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),JA.apply(this,arguments)}function ex(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function tx(n,e,t){const r=Ge(n);let i=r.hc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function Iy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||fk(n,r)})}function fk(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(S0(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),rx(n))}function nx(n,e,t){for(const r of t)r instanceof uk?(n.ac.addReference(r.key,e),TV(n,r)):r instanceof lk?(ke("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||fk(n,r.key)):nt()}function TV(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(ke("SyncEngine","New document in limbo: "+t),n.oc.add(r),rx(n))}function rx(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new qe(dn.fromString(e)),r=n.fc.next();n.cc.set(r,new _V(t)),n.uc=n.uc.insert(t,r),Hb(n.remoteStore,new Ad(Gi(gf(t.path)),r,2,Ys.at))}}function Ld(n,e,t){return ix.apply(this,arguments)}function ix(){return ix=(0,pe.Z)(function*(n,e,t){const r=Ge(n),i=[],a=[],l=[];var h;r.ic.isEmpty()||(r.ic.forEach((h,_)=>{l.push(r._c(_,e,t).then(w=>{if((w||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,w?.fromCache?"not-current":"current"),w){i.push(w);const b=fy.Ci(_.targetId,w);a.push(b)}}))}),yield Promise.all(l),r.sc.Wo(i),yield(h=(0,pe.Z)(function*(_,w){const b=Ge(_);try{yield b.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>te.forEach(w,k=>te.forEach(k.Si,U=>b.persistence.referenceDelegate.addReference(x,k.targetId,U)).next(()=>te.forEach(k.Di,U=>b.persistence.referenceDelegate.removeReference(x,k.targetId,U)))))}catch(x){if(!mu(x))throw x;ke("LocalStore","Failed to update sequence numbers: "+x)}for(const x of w){const k=x.targetId;if(!x.fromCache){const U=b.qi.get(k),ae=U.withLastLimboFreeSnapshotVersion(U.snapshotVersion);b.qi=b.qi.insert(k,ae)}}}),function(_,w){return h.apply(this,arguments)})(r.localStore,a))}),ix.apply(this,arguments)}function SV(n,e){return sx.apply(this,arguments)}function sx(){return sx=(0,pe.Z)(function*(n,e){const t=Ge(n);if(!t.currentUser.isEqual(e)){ke("SyncEngine","User change. New user:",e.toKey());const r=yield gy(t.localStore,e);t.currentUser=e,(i=t).lc.forEach(l=>{l.forEach(h=>{h.reject(new Me(oe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ld(t,r.ji)}var i}),sx.apply(this,arguments)}function AV(n,e){const t=Ge(n),r=t.cc.get(e);if(r&&r.nc)return Kt().add(r.key);{let i=Kt();const a=t.rc.get(e);if(!a)return i;for(const l of a){const h=t.ic.get(l);i=i.unionWith(h.view.ju)}return i}}function xV(n,e){return ox.apply(this,arguments)}function ox(){return ox=(0,pe.Z)(function*(n,e){const t=Ge(n),r=yield D0(t.localStore,e.query,!0),i=e.view.tc(r);return t.isPrimaryClient&&nx(t,e.targetId,i.Xu),i}),ox.apply(this,arguments)}function RV(n,e){return ax.apply(this,arguments)}function ax(){return ax=(0,pe.Z)(function*(n,e){const t=Ge(n);return _A(t.localStore,e).then(r=>Ld(t,r))}),ax.apply(this,arguments)}function MV(n,e,t,r){return ux.apply(this,arguments)}function ux(){return ux=(0,pe.Z)(function*(n,e,t,r){const i=Ge(n),a=yield function(l,h){const _=Ge(l),w=Ge(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",b=>w.Tn(b,h).next(x=>x?_.localDocuments.getDocuments(b,x):te.resolve(null)))}(i.localStore,e);var h;null!==a?("pending"===t?yield _y(i.remoteStore):"acknowledged"===t||"rejected"===t?(tx(i,e,r||null),ex(i,e),h=e,Ge(Ge(i.localStore).mutationQueue).An(h)):nt(),yield Ld(i,a)):ke("SyncEngine","Cannot apply mutation batch with id: "+e)}),ux.apply(this,arguments)}function lx(){return lx=(0,pe.Z)(function*(n,e){const t=Ge(n);if(fx(t),px(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield pk(t,r.toArray());t.dc=!0,yield OA(t.remoteStore,!0);for(const a of i)Hb(t.remoteStore,a)}else if(!1===e&&!1!==t.dc){const r=[];let i=Promise.resolve();t.rc.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(Iy(t,l),Wg(t.localStore,l,!0))),S0(t.remoteStore,l)}),yield i,yield pk(t,r),function(a){const l=Ge(a);l.cc.forEach((h,_)=>{S0(l.remoteStore,_)}),l.ac.fs(),l.cc=new Map,l.uc=new pr(qe.comparator)}(t),t.dc=!1,yield OA(t.remoteStore,!1)}}),lx.apply(this,arguments)}function pk(n,e,t){return cx.apply(this,arguments)}function cx(){return cx=(0,pe.Z)(function*(n,e,t){const r=Ge(n),i=[],a=[];for(const l of e){let h;const _=r.rc.get(l);if(_&&0!==_.length){h=yield Rf(r.localStore,Gi(_[0]));for(const w of _){const b=r.ic.get(w),x=yield xV(r,b);x.snapshot&&a.push(x.snapshot)}}else{const w=yield mA(r.localStore,l);h=yield Rf(r.localStore,w),yield WA(r,gk(w),l,!1,h.resumeToken)}i.push(h)}return r.sc.Wo(a),i}),cx.apply(this,arguments)}function gk(n){return Ow(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function kV(n){const e=Ge(n);return Ge(Ge(e.localStore).persistence).vi()}function PV(n,e,t,r){return dx.apply(this,arguments)}function dx(){return dx=(0,pe.Z)(function*(n,e,t,r){const i=Ge(n);if(i.dc)return void ke("SyncEngine","Ignoring unexpected query state notification.");const a=i.rc.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=yield _A(i.localStore,GC(a[0])),h=Br.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Ur.EMPTY_BYTE_STRING);yield Ld(i,l,h);break}case"rejected":yield Wg(i.localStore,e,!0),Iy(i,e,r);break;default:nt()}}),dx.apply(this,arguments)}function OV(n,e,t){return hx.apply(this,arguments)}function hx(){return hx=(0,pe.Z)(function*(n,e,t){const r=fx(n);if(r.dc){for(const i of e){if(r.rc.has(i)){ke("SyncEngine","Adding an already active target "+i);continue}const a=yield mA(r.localStore,i),l=yield Rf(r.localStore,a);yield WA(r,gk(a),l.targetId,!1,l.resumeToken),Hb(r.remoteStore,l)}for(const i of t)r.rc.has(i)&&(yield Wg(r.localStore,i,!1).then(()=>{S0(r.remoteStore,i),Iy(r,i)}).catch(kl))}}),hx.apply(this,arguments)}function fx(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=dk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=AV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=IV.bind(null,e),e.sc.Wo=hV.bind(null,e.eventManager),e.sc.wc=fV.bind(null,e.eventManager),e}function px(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=CV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bV.bind(null,e),e}class mk{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,pe.Z)(function*(){t.yt=Oe(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return C0(this.persistence,new py,e.initialUser,this.yt)}yc(e){return new E0(ly.Bs,this.yt)}gc(e){return new I}terminate(){var e=this;return(0,pe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class _k extends mk{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,pe.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield px(r.Ac.syncEngine),yield _y(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return C0(this.persistence,new py,e.initialUser,this.yt)}Tc(e,t){return new uA(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new bN(t,this.persistence);return new FS(e.asyncQueue,r)}yc(e){const t=I0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?zi.withCacheSize(this.cacheSizeBytes):zi.DEFAULT;return new dy(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,X(),ye(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new I}}class LV extends _k{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,pe.Z)(function*(){yield t().call(r,e);const i=r.Ac.syncEngine;r.sharedClientState instanceof v&&(r.sharedClientState.syncEngine={Fr:MV.bind(null,i),$r:PV.bind(null,i),Br:OV.bind(null,i),vi:kV.bind(null,i),Mr:RV.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var a=(0,pe.Z)(function*(l){yield function NV(n,e){return lx.apply(this,arguments)}(r.Ac.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}gc(e){const t=X();if(!v.C(t))throw new Me(oe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=I0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new v(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class gx{initialize(e,t){var r=this;return(0,pe.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>hk(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=SV.bind(null,r.syncEngine),yield OA(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new dV}createDatastore(e){const t=Oe(e.databaseInfo.databaseId),r=new z(e.databaseInfo);return new Gt(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=h=>hk(this.syncEngine,h,0),l=S.C()?new S:new C,new eV(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,h,_,w){const b=new yV(r,i,a,l,h,_);return w&&(b.dc=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,pe.Z)(function*(t){const r=Ge(t);ke("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield my(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function mx(n,e,t){if(!t)throw new Me(oe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function yk(n,e,t,r){if(!0===e&&!0===r)throw new Me(oe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function vk(n){if(!qe.isDocumentKey(n))throw new Me(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function wk(n){if(qe.isDocumentKey(n))throw new Me(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Wb(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":nt()}function hn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Me(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Wb(n);throw new Me(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Ek(n,e){if(e<=0)throw new Me(oe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const Ik=new Map;class Ck{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Me(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Me(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,yk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class A0{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ck({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Me(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Me(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ck(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new ww;switch(t.type){case"gapi":return new IN(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Me(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Ik.get(e);t&&(ke("ComponentProvider","Removing Datastore"),Ik.delete(e),t.terminate())}(this),Promise.resolve()}}class ir{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ir(this.firestore,e,this._key)}}class qi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new qi(this.firestore,e,this._query)}}class Yl extends qi{constructor(e,t,r){super(e,t,gf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ir(this.firestore,null,new qe(e))}withConverter(e){return new Yl(this.firestore,e,this._path)}}function Dk(n,e,...t){if(n=(0,P.m9)(n),mx("collection","path",e),n instanceof A0){const r=dn.fromString(e,...t);return wk(r),new Yl(n,null,r)}{if(!(n instanceof ir||n instanceof Yl))throw new Me(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(dn.fromString(e,...t));return wk(r),new Yl(n.firestore,null,r)}}function zb(n,e,...t){if(n=(0,P.m9)(n),1===arguments.length&&(e=pd.R()),mx("doc","path",e),n instanceof A0){const r=dn.fromString(e,...t);return vk(r),new ir(n,null,new qe(r))}{if(!(n instanceof ir||n instanceof Yl))throw new Me(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(dn.fromString(e,...t));return vk(r),new ir(n.firestore,n instanceof Yl?n.converter:null,new qe(r))}}function Tk(n,e){return n=(0,P.m9)(n),e=(0,P.m9)(e),(n instanceof ir||n instanceof Yl)&&(e instanceof ir||e instanceof Yl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function _x(n,e){return n=(0,P.m9)(n),e=(0,P.m9)(e),n instanceof qi&&e instanceof qi&&n.firestore===e.firestore&&xg(n._query,e._query)&&n.converter===e.converter}function Sk(n,e=10240){let t=0;return{read:()=>(0,pe.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,pe.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class qb{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):fr("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class UV{constructor(e,t){this.Pc=e,this.yt=t,this.metadata=new zn,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,pe.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,pe.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,pe.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),i=Number(r);isNaN(i)&&e.Dc(`length string (${r}) is not valid number`);const a=yield e.Cc(i);return new pV(JSON.parse(a),t.length+i)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,pe.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,pe.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,pe.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class $V{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,pe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Me(oe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,pe.Z)(function*(a,l){const h=Ge(a),_=Og(h.yt)+"/documents",w={documents:l.map(U=>Wl(h.yt,U))},b=yield h._o("BatchGetDocuments",_,w,l.length),x=new Map;b.forEach(U=>{const W=function hb(n,e){return"found"in e?function(t,r){ht(!!r.found);const i=Xs(t,r.found.name),a=nr(r.found.updateTime),l=r.found.createTime?nr(r.found.createTime):It.min(),h=new Jr({mapValue:{fields:r.found.fields}});return On.newFoundDocument(i,a,l,h)}(n,e):"missing"in e?function(t,r){ht(!!r.missing),ht(!!r.readTime);const i=Xs(t,r.missing),a=nr(r.readTime);return On.newNoDocument(i,a)}(n,e):nt()}(h.yt,U);x.set(W.key.toString(),W)});const k=[];return l.forEach(U=>{const W=x.get(U.toString());ht(!!W),k.push(W)}),k}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Hl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,pe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=qe.fromPath(i);e.mutations.push(new kg(a,e.precondition(a)))}),yield(r=(0,pe.Z)(function*(i,a){const l=Ge(i),h=Og(l.yt)+"/documents",_={writes:a.map(w=>K_(l.yt,w))};yield l.ao("Commit",h,_)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw nt();t=It.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Me(oe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(It.min())?Fn.exists(!1):Fn.updateTime(t):Fn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(It.min()))throw new Me(oe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Fn.updateTime(t)}return Fn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class HV{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.kc=r.maxAttempts,this.xo=new Ze(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,pe.Z)(function*(){const t=new $V(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Fc(a)}))}).catch(i=>{e.Fc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!Dg(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!eb(t)}return!1}}class GV{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Qr.UNAUTHENTICATED,this.clientId=pd.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,pe.Z)(function*(h){ke("FirestoreClient","Received user=",h.uid),yield a.authCredentialListener(h),a.user=h});return function(h){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(ke("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,pe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Me(oe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new zn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,pe.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=vy(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function Ak(n,e){return yx.apply(this,arguments)}function yx(){return yx=(0,pe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ke("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,pe.Z)(function*(a){r.isEqual(a)||(yield gy(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),yx.apply(this,arguments)}function xk(n,e){return vx.apply(this,arguments)}function vx(){return vx=(0,pe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield wx(n);ke("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>ik(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>ik(e.remoteStore,a)),n.onlineComponents=e}),vx.apply(this,arguments)}function wx(n){return Ex.apply(this,arguments)}function Ex(){return Ex=(0,pe.Z)(function*(n){return n.offlineComponents||(ke("FirestoreClient","Using default OfflineComponentProvider"),yield Ak(n,new mk)),n.offlineComponents}),Ex.apply(this,arguments)}function Kb(n){return Ix.apply(this,arguments)}function Ix(){return Ix=(0,pe.Z)(function*(n){return n.onlineComponents||(ke("FirestoreClient","Using default OnlineComponentProvider"),yield xk(n,new gx)),n.onlineComponents}),Ix.apply(this,arguments)}function Rk(n){return wx(n).then(e=>e.persistence)}function Zb(n){return wx(n).then(e=>e.localStore)}function Cx(n){return Kb(n).then(e=>e.remoteStore)}function bx(n){return Kb(n).then(e=>e.syncEngine)}function Cy(n){return Dx.apply(this,arguments)}function Dx(){return Dx=(0,pe.Z)(function*(n){const e=yield Kb(n),t=e.eventManager;return t.onListen=vV.bind(null,e.syncEngine),t.onUnlisten=wV.bind(null,e.syncEngine),t}),Dx.apply(this,arguments)}function Nk(n,e,t={}){const r=new zn;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(i,a,l,h,_){const w=new qb({next:x=>{a.enqueueAndForget(()=>BA(i,b));const k=x.docs.has(l);!k&&x.fromCache?_.reject(new Me(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&x.fromCache&&h&&"server"===h.source?_.reject(new Me(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(x)},error:x=>_.reject(x)}),b=new HA(gf(l.path),w,{includeMetadataChanges:!0,Nu:!0});return VA(i,b)}(yield Cy(n),n.asyncQueue,e,t,r)})),r.promise}function kk(n,e,t={}){const r=new zn;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function(i,a,l,h,_){const w=new qb({next:x=>{a.enqueueAndForget(()=>BA(i,b)),x.fromCache&&"server"===h.source?_.reject(new Me(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(x)},error:x=>_.reject(x)}),b=new HA(l,w,{includeMetadataChanges:!0,Nu:!0});return VA(i,b)}(yield Cy(n),n.asyncQueue,e,t,r)})),r.promise}class XV{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new Ze(this,"async_queue_retry"),this.Wc=()=>{const t=ye();t&&ke("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=ye();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=ye();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new zn;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,pe.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!mu(t))throw t;ke("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,fr("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=LA.createAndSchedule(this,e,t,r,a=>this.Yc(a));return this.Uc.push(i),i}zc(){this.Kc&&nt()}verifyOperationInProgress(){}Xc(){var e=this;return(0,pe.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function Tx(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class JV{constructor(){this._progressObserver={},this._taskCompletionResolver=new zn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class sr extends A0{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new XV,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Pk(this),this._firestoreClient.terminate()}}function jr(n){return n._firestoreClient||Pk(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Pk(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new DN(n._databaseId,a,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var a,h;n._firestoreClient=new GV(n._authCredentials,n._appCheckCredentials,n._queue,r)}function Ok(n,e,t){const r=new zn;return n.asyncQueue.enqueue((0,pe.Z)(function*(){try{yield Ak(n,t),yield xk(n,e),r.resolve()}catch(i){const a=i;if(!("FirebaseError"===(l=a).name?l.code===oe.FAILED_PRECONDITION||l.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw a;Nl("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a)}var l})).then(()=>r.promise)}function Fk(n){if(n._initialized||n._terminated)throw new Me(oe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ql{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ql(Ur.fromBase64String(e))}catch(t){throw new Me(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ql(Ur.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Vd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Me(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class zg{constructor(e){this._methodName=e}}class Yb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Me(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Me(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return $t(this._lat,e._lat)||$t(this._long,e._long)}}const lU=/^__.*__$/;class cU{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new ma(e,this.data,this.fieldMask,t,this.fieldTransforms):new yf(e,this.data,t,this.fieldTransforms)}}class Lk{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ma(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Vk(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw nt()}}class Qb{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.yt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.na(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new Qb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return eD(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(Vk(this.sa)&&lU.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class dU{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=r||Oe(e)}da(e,t,r,i=!1){return new Qb({sa:e,methodName:t,fa:r,path:tr.emptyPath(),oa:!1,la:i},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function qg(n){const e=n._freezeSettings(),t=Oe(n._databaseId);return new dU(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Xb(n,e,t,r,i,a={}){const l=n.da(a.merge||a.mergeFields?2:0,e,t,i);Rx("Data must be an object, but it was:",l,r);const h=jk(r,l);let _,w;if(a.merge)_=new is(l.fieldMask),w=l.fieldTransforms;else if(a.mergeFields){const b=[];for(const x of a.mergeFields){const k=Mx(e,x,t);if(!l.contains(k))throw new Me(oe.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);Hk(b,k)||b.push(k)}_=new is(b),w=l.fieldTransforms.filter(x=>_.covers(x.field))}else _=null,w=l.fieldTransforms;return new cU(new Jr(h),_,w)}class x0 extends zg{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof x0}}function Uk(n,e,t){return new Qb({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.yt,e.ignoreUndefinedProperties)}class Sx extends zg{_toFieldTransform(e){return new Td(e.path,new Ng)}isEqual(e){return e instanceof Sx}}class hU extends zg{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=Uk(this,e,!0),r=this._a.map(a=>Kg(a,t)),i=new bd(r);return new Td(e.path,i)}isEqual(e){return this===e}}class fU extends zg{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=Uk(this,e,!0),r=this._a.map(a=>Kg(a,t)),i=new Dd(r);return new Td(e.path,i)}isEqual(e){return this===e}}class pU extends zg{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new mf(e.yt,$w(e.yt,this.wa));return new Td(e.path,t)}isEqual(e){return this===e}}function Ax(n,e,t,r){const i=n.da(1,e,t);Rx("Data must be an object, but it was:",i,r);const a=[],l=Jr.empty();fa(r,(_,w)=>{const b=Jb(e,_,t);w=(0,P.m9)(w);const x=i.ca(b);if(w instanceof x0)a.push(b);else{const k=Kg(w,x);null!=k&&(a.push(b),l.set(b,k))}});const h=new is(a);return new Lk(l,h,i.fieldTransforms)}function xx(n,e,t,r,i,a){const l=n.da(1,e,t),h=[Mx(e,r,t)],_=[i];if(a.length%2!=0)throw new Me(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let k=0;k<a.length;k+=2)h.push(Mx(e,a[k])),_.push(a[k+1]);const w=[],b=Jr.empty();for(let k=h.length-1;k>=0;--k)if(!Hk(w,h[k])){const U=h[k];let W=_[k];W=(0,P.m9)(W);const ae=l.ca(U);if(W instanceof x0)w.push(U);else{const ve=Kg(W,ae);null!=ve&&(w.push(U),b.set(U,ve))}}const x=new is(w);return new Lk(b,x,l.fieldTransforms)}function Bk(n,e,t,r=!1){return Kg(t,n.da(r?4:3,e))}function Kg(n,e){if($k(n=(0,P.m9)(n)))return Rx("Unsupported field value:",e,n),jk(n,e);if(n instanceof zg)return function(t,r){if(!Vk(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let h=Kg(l,r.aa(a));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,P.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return $w(r.yt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Ht.fromDate(t);return{timestampValue:Ef(r.yt,i)}}if(t instanceof Ht){const i=new Ht(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ef(r.yt,i)}}if(t instanceof Yb)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ql)return{bytesValue:lb(r.yt,t._byteString)};if(t instanceof ir){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.ha(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:q_(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${Wb(t)}`)}(n,e)}function jk(n,e){const t={};return EC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fa(n,(r,i)=>{const a=Kg(i,e.ra(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function $k(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Ht||n instanceof Yb||n instanceof Ql||n instanceof ir||n instanceof zg)}function Rx(n,e,t){if(!$k(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Wb(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function Mx(n,e,t){if((e=(0,P.m9)(e))instanceof Vd)return e._internalPath;if("string"==typeof e)return Jb(n,e);throw eD("Field path arguments must be of type string or ",n,!1,void 0,t)}const gU=new RegExp("[~\\*/\\[\\]]");function Jb(n,e,t){if(e.search(gU)>=0)throw eD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Vd(...e.split("."))._internalPath}catch{throw eD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function eD(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let _="";return(a||l)&&(_+=" (found",a&&(_+=` in field ${r}`),l&&(_+=` in document ${i}`),_+=")"),new Me(oe.INVALID_ARGUMENT,h+n+_)}function Hk(n,e){return n.some(t=>t.isEqual(e))}class R0{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new ir(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new mU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(tD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class mU extends R0{data(){return super.data()}}function tD(n,e){return"string"==typeof e?Jb(n,e):e instanceof Vd?e._internalPath:e._delegate._internalPath}function Gk(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Me(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Nx{}class M0 extends Nx{}function Nf(n,e,...t){let r=[];e instanceof Nx&&r.push(e),r=r.concat(t),function(i){const a=i.filter(h=>h instanceof by).length,l=i.filter(h=>h instanceof N0).length;if(a>1||a>0&&l>0)throw new Me(oe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class N0 extends M0{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new N0(e,t,r)}_apply(e){const t=this._parse(e);return Kk(e._query,t),new qi(e.firestore,e.converter,Lw(e._query,t))}_parse(e){const t=qg(e.firestore);return function(i,a,l,h,_,w,b){let x;if(_.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Me(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){qk(b,w);const k=[];for(const U of b)k.push(zk(h,i,U));x={arrayValue:{values:k}}}else x=zk(h,i,b)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||qk(b,w),x=Bk(l,"where",b,"in"===w||"not-in"===w);return un.create(_,w,x)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class by extends Nx{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new by(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:mn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let a=r;const l=i.getFlattenedFilters();for(const h of l)Kk(a,h),a=Lw(a,h)}(e._query,t),new qi(e.firestore,e.converter,Lw(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class kx extends M0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new kx(e,t)}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Me(oe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Me(oe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new So(i,a);return function(h,_){if(null===$C(h)){const w=U_(h);null!==w&&Zk(0,w,_.field)}}(r,l),l}(e._query,this._field,this._direction);return new qi(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new Bl(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class nD extends M0{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new nD(e,t,r)}_apply(e){return new qi(e.firestore,e.converter,B_(e._query,this._limit,this._limitType))}}class rD extends M0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new rD(e,t,r)}_apply(e){const t=Wk(e,this.type,this._docOrFields,this._inclusive);return new qi(e.firestore,e.converter,(i=t,new Bl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class iD extends M0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new iD(e,t,r)}_apply(e){const t=Wk(e,this.type,this._docOrFields,this._inclusive);return new qi(e.firestore,e.converter,(i=t,new Bl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function Wk(n,e,t,r){if(t[0]=(0,P.m9)(t[0]),t[0]instanceof R0)return function(i,a,l,h,_){if(!h)throw new Me(oe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const w=[];for(const b of Cd(i))if(b.field.isKeyField())w.push(wd(a,h.key));else{const x=h.data.field(b.field);if(x_(x))throw new Me(oe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===x){const k=b.field.canonicalString();throw new Me(oe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${k}' (used as the orderBy) does not exist.`)}w.push(x)}return new Ll(w,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=qg(n.firestore);return function(a,l,h,_,w,b){const x=a.explicitOrderBy;if(w.length>x.length)throw new Me(oe.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const k=[];for(let U=0;U<w.length;U++){const W=w[U];if(x[U].field.isKeyField()){if("string"!=typeof W)throw new Me(oe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof W}`);if(!Fw(a)&&-1!==W.indexOf("/"))throw new Me(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${W}' contains a slash.`);const ae=a.path.child(dn.fromString(W));if(!qe.isDocumentKey(ae))throw new Me(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${ae}' is not because it contains an odd number of segments.`);const ve=new qe(ae);k.push(wd(l,ve))}else{const ae=Bk(h,_,W);k.push(ae)}}return new Ll(k,b)}(n._query,n.firestore._databaseId,i,e,t,r)}}function zk(n,e,t){if("string"==typeof(t=(0,P.m9)(t))){if(""===t)throw new Me(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Fw(e)&&-1!==t.indexOf("/"))throw new Me(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(dn.fromString(t));if(!qe.isDocumentKey(r))throw new Me(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return wd(n,new qe(r))}if(t instanceof ir)return wd(n,t._key);throw new Me(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wb(t)}.`)}function qk(n,e){if(!Array.isArray(n)||0===n.length)throw new Me(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Me(oe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Kk(n,e){if(e.isInequality()){const r=U_(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Me(oe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const a=$C(n);null!==a&&Zk(0,i,a)}const t=function(r,i){for(const a of r)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Me(oe.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Zk(n,e,t){if(!t.isEqual(e))throw new Me(oe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Px{convertValue(e,t="none"){switch(Ol(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ir(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(vd(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw nt()}}convertObject(e,t){const r={};return fa(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new Yb(Ir(e.latitude),Ir(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=IC(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Tg(e));default:return null}}convertTimestamp(e){const t=Pl(e);return new Ht(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=dn.fromString(e);ht(n0(r));const i=new yd(r.get(1),r.get(3)),a=new qe(r.popFirst(5));return i.isEqual(t)||fr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function sD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class DU extends Px{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ql(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ir(this.firestore,null,t)}}class Zg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ud extends R0{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new k0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(tD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class k0 extends Ud{data(e={}){return super.data(e)}}class kf{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Zg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new k0(this._firestore,this._userDataWriter,r.key,r,new Zg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Me(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new k0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Zg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const h=new k0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Zg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,w=-1;return 0!==l.type&&(_=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),w=a.indexOf(l.doc.key)),{type:TU(l.type),doc:h,oldIndex:_,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function TU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return nt()}}function Qk(n,e){return n instanceof Ud&&e instanceof Ud?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof kf&&e instanceof kf&&n._firestore===e._firestore&&_x(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Pf extends Px{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ql(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ir(this.firestore,null,t)}}function Xk(n,e,t){n=hn(n,ir);const r=hn(n.firestore,sr),i=sD(n.converter,e,t);return Dy(r,[Xb(qg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Fn.none())])}function Jk(n,e,t,...r){n=hn(n,ir);const i=hn(n.firestore,sr),a=qg(i);let l;return l="string"==typeof(e=(0,P.m9)(e))||e instanceof Vd?xx(a,"updateDoc",n._key,e,t,r):Ax(a,"updateDoc",n._key,e),Dy(i,[l.toMutation(n._key,Fn.exists(!0))])}function eP(n,...e){var t,r,i;n=(0,P.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||Tx(e[l])||(a=e[l],l++);const h={includeMetadataChanges:a.includeMetadataChanges};if(Tx(e[l])){const x=e[l];e[l]=null===(t=x.next)||void 0===t?void 0:t.bind(x),e[l+1]=null===(r=x.error)||void 0===r?void 0:r.bind(x),e[l+2]=null===(i=x.complete)||void 0===i?void 0:i.bind(x)}let _,w,b;if(n instanceof ir)w=hn(n.firestore,sr),b=gf(n._key.path),_={next:x=>{e[l]&&e[l](Ox(w,n,x))},error:e[l+1],complete:e[l+2]};else{const x=hn(n,qi);w=hn(x.firestore,sr),b=x._query;const k=new Pf(w);_={next:U=>{e[l]&&e[l](new kf(w,k,x,U))},error:e[l+1],complete:e[l+2]},Gk(n._query)}return function(x,k,U,W){const ae=new qb(W),ve=new HA(k,ae,U);return x.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return VA(yield Cy(x),ve)})),()=>{ae.bc(),x.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return BA(yield Cy(x),ve)}))}}(jr(w),b,h,_)}function Dy(n,e){return function(t,r){const i=new zn;return t.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function EV(n,e,t){return KA.apply(this,arguments)}(yield bx(t),r,i)})),i.promise}(jr(n),e)}function Ox(n,e,t){const r=t.docs.get(e._key),i=new Pf(n);return new Ud(n,i,e._key,r,new Zg(t.hasPendingWrites,t.fromCache),e.converter)}const FU={maxAttempts:5};class tP{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=qg(e)}set(e,t,r){this._verifyNotCommitted();const i=Of(e,this._firestore),a=sD(i.converter,t,r),l=Xb(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,Fn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Of(e,this._firestore);let l;return l="string"==typeof(t=(0,P.m9)(t))||t instanceof Vd?xx(this._dataReader,"WriteBatch.update",a._key,t,r,i):Ax(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,Fn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Of(e,this._firestore);return this._mutations=this._mutations.concat(new Hl(t._key,Fn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Me(oe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Of(n,e){if((n=(0,P.m9)(n)).firestore!==e)throw new Me(oe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class LU extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=qg(e)}get(e){const t=Of(e,this._firestore),r=new DU(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return nt();const a=i[0];if(a.isFoundDocument())return new R0(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new R0(this._firestore,r,t._key,null,t.converter);throw nt()})}set(e,t,r){const i=Of(e,this._firestore),a=sD(i.converter,t,r),l=Xb(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=Of(e,this._firestore);let l;return l="string"==typeof(t=(0,P.m9)(t))||t instanceof Vd?xx(this._dataReader,"Transaction.update",a._key,t,r,i):Ax(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=Of(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Of(e,this._firestore),r=new Pf(this._firestore);return super.get(e).then(i=>new Ud(this._firestore,r,t._key,i._document,new Zg(!1,!1),t.converter))}}function Fx(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Me("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function rP(){if(typeof Uint8Array>"u")throw new Me("unimplemented","Uint8Arrays are not available in this environment.")}function iP(){if(!function LS(){return typeof atob<"u"}())throw new Me("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){fd=pi.SDK_VERSION,(0,pi._registerComponent)(new Ws.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),l=new sr(new mC(t.getProvider("auth-internal")),new MS(t.getProvider("app-check-internal")),function(h,_){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Me(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yd(h.options.projectId,_)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,pi.registerVersion)(fC,"3.8.1",n),(0,pi.registerVersion)(fC,"3.8.1","esm2017")}();class P0{constructor(e){this._delegate=e}static fromBase64String(e){return iP(),new P0(Ql.fromBase64String(e))}static fromUint8Array(e){return rP(),new P0(Ql.fromUint8Array(e))}toBase64(){return iP(),this._delegate.toBase64()}toUint8Array(){return rP(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Lx(n){return function zU(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class qU{enableIndexedDbPersistence(e,t){return function tU(n,e){Fk(n=hn(n,sr));const t=jr(n),r=n._freezeSettings(),i=new gx;return Ok(t,i,new _k(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function nU(n){Fk(n=hn(n,sr));const e=jr(n),t=n._freezeSettings(),r=new gx;return Ok(e,r,new LV(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function rU(n){if(n._initialized&&!n._terminated)throw new Me(oe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new zn;return n._queue.enqueueAndForgetEvenWhileRestricted((0,pe.Z)(function*(){try{yield(t=(0,pe.Z)(function*(r){if(!To.C())return Promise.resolve();const i=r+"main";yield To.delete(i)}),function(r){return t.apply(this,arguments)})(I0(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class sP{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof yd||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Nl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function bk(n,e,t,r={}){var i;const a=(n=hn(n,A0))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&Nl("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,h;if("string"==typeof r.mockUserToken)l=r.mockUserToken,h=Qr.MOCK_USER;else{l=(0,P.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Me(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Qr(_)}n._authCredentials=new EN(new RS(l,h))}}(this._delegate,e,t,r)}enableNetwork(){return function sU(n){return function WV(n){return n.asyncQueue.enqueue((0,pe.Z)(function*(){const e=yield Rk(n),t=yield Cx(n);return e.setNetworkEnabled(!0),function(r){const i=Ge(r);return i._u.delete(0),T0(i)}(t)}))}(jr(n=hn(n,sr)))}(this._delegate)}disableNetwork(){return function oU(n){return function zV(n){return n.asyncQueue.enqueue((0,pe.Z)(function*(){const e=yield Rk(n),t=yield Cx(n);return e.setNetworkEnabled(!1),(r=(0,pe.Z)(function*(i){const a=Ge(i);a._u.add(0),yield my(a),a.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(jr(n=hn(n,sr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,yk("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function iU(n){return function(e){const t=new zn;return e.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return function DV(n,e){return JA.apply(this,arguments)}(yield bx(e),t)})),t.promise}(jr(n=hn(n,sr)))}(this._delegate)}onSnapshotsInSync(e){return function OU(n,e){return function ZV(n,e){const t=new qb(e);return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return r=yield Cy(n),i=t,Ge(r).Ru.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return r=yield Cy(n),i=t,void Ge(r).Ru.delete(i);var r,i}))}}(jr(n=hn(n,sr)),Tx(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Me("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ty(this,Dk(this._delegate,e))}catch(t){throw As(t,"collection()","Firestore.collection()")}}doc(e){try{return new wa(this,zb(this._delegate,e))}catch(t){throw As(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new xs(this,function VV(n,e){if(n=hn(n,A0),mx("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Me(oe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new qi(n,null,(t=e,new Bl(dn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw As(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function VU(n,e,t){n=hn(n,sr);const r=Object.assign(Object.assign({},FU),t);return function(i){if(i.maxAttempts<1)throw new Me(oe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,l){const h=new zn;return i.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){const _=yield function Mk(n){return Kb(n).then(e=>e.datastore)}(i);new HV(i.asyncQueue,_,l,a,h).run()})),h.promise}(jr(n),i=>e(new LU(n,i)),r)}(this._delegate,t=>e(new oP(this,t)))}batch(){return jr(this._delegate),new aP(new tP(this._delegate,e=>Dy(this._delegate,e)))}loadBundle(e){return function aU(n,e){const t=jr(n=hn(n,sr)),r=new JV;return function YV(n,e,t,r){const i=function(a,l){let h;return h="string"==typeof a?(new TextEncoder).encode(a):a,_=function(_,w){if(_ instanceof Uint8Array)return Sk(_,w);if(_ instanceof ArrayBuffer)return Sk(new Uint8Array(_),w);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new UV(_,l);var _}(t,Oe(e));n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){!function FV(n,e,t){const r=Ge(n);var i;(i=(0,pe.Z)(function*(a,l,h){try{const _=yield l.getMetadata();if(yield function(k,U){const W=Ge(k),ae=nr(U.createTime);return W.persistence.runTransaction("hasNewerBundle","readonly",ve=>W.Ns.getBundleMetadata(ve,U.id)).then(ve=>!!ve&&ve.createTime.compareTo(ae)>=0)}(a.localStore,_))return yield l.close(),h._completeWith({taskState:"Success",documentsLoaded:(k=_).totalDocuments,bytesLoaded:k.totalBytes,totalDocuments:k.totalDocuments,totalBytes:k.totalBytes}),Promise.resolve(new Set);h._updateProgress(ak(_));const w=new gV(_,a.localStore,l.yt);let b=yield l.mc();for(;b;){const k=yield w.Fu(b);k&&h._updateProgress(k),b=yield l.mc()}const x=yield w.complete();return yield Ld(a,x.Lu,void 0),yield function(k,U){const W=Ge(k);return W.persistence.runTransaction("Save bundle","readwrite",ae=>W.Ns.saveBundleMetadata(ae,U))}(a.localStore,_),h._completeWith(x.progress),Promise.resolve(x.Bu)}catch(_){return Nl("SyncEngine",`Loading bundle failed with ${_}`),h._failWith(_),Promise.resolve(new Set)}var k}),function(a,l,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield bx(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function uU(n,e){return function QV(n,e){return n.asyncQueue.enqueue((0,pe.Z)(function*(){return function(t,r){const i=Ge(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Ns.getNamedQuery(a,r))}(yield Zb(n),e)}))}(jr(n=hn(n,sr)),e).then(t=>t?new qi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new xs(this,t):null)}}class oD extends Px{constructor(e){super(),this.firestore=e}convertBytes(e){return new P0(new Ql(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return wa.forKey(t,this.firestore,null)}}class oP{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new oD(e)}get(e){const t=Qg(e);return this._delegate.get(t).then(r=>new O0(this._firestore,new Ud(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Qg(e);return r?(Fx("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Qg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Qg(e);return this._delegate.delete(t),this}}class aP{constructor(e){this._delegate=e}set(e,t,r){const i=Qg(e);return r?(Fx("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Qg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Qg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Yg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new k0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new F0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Yg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Yg(e,new oD(e),t),i.set(t,a)),a}}Yg.INSTANCES=new WeakMap;class wa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new oD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Me("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new wa(t,new ir(t._delegate,r,new qe(e)))}static forKey(e,t,r){return new wa(t,new ir(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ty(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ty(this.firestore,Dk(this._delegate,e))}catch(t){throw As(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,P.m9)(e))instanceof ir&&Tk(this._delegate,e)}set(e,t){t=Fx("DocumentReference.set",t);try{return t?Xk(this._delegate,e,t):Xk(this._delegate,e)}catch(r){throw As(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?Jk(this._delegate,e):Jk(this._delegate,e,t,...r)}catch(i){throw As(i,"updateDoc()","DocumentReference.update()")}}delete(){return function kU(n){return Dy(hn(n.firestore,sr),[new Hl(n._key,Fn.none())])}(this._delegate)}onSnapshot(...e){const t=uP(e),r=lP(e,i=>new O0(this.firestore,new Ud(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return eP(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function AU(n){n=hn(n,ir);const e=hn(n.firestore,sr),t=jr(e),r=new Pf(e);return function qV(n,e){const t=new zn;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return(r=(0,pe.Z)(function*(i,a,l){try{const h=yield function(_,w){const b=Ge(_);return b.persistence.runTransaction("read document","readonly",x=>b.localDocuments.getDocument(x,w))}(i,a);h.isFoundDocument()?l.resolve(h):h.isNoDocument()?l.resolve(null):l.reject(new Me(oe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const _=vy(h,`Failed to get document '${a} from cache`);l.reject(_)}}),function(i,a,l){return r.apply(this,arguments)})(yield Zb(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Ud(e,r,n._key,i,new Zg(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function xU(n){n=hn(n,ir);const e=hn(n.firestore,sr);return Nk(jr(e),n._key,{source:"server"}).then(t=>Ox(e,n,t))}(this._delegate):function SU(n){n=hn(n,ir);const e=hn(n.firestore,sr);return Nk(jr(e),n._key).then(t=>Ox(e,n,t))}(this._delegate),t.then(r=>new O0(this.firestore,new Ud(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new wa(this.firestore,this._delegate.withConverter(e?Yg.getInstance(this.firestore,e):null))}}function As(n,e,t){return n.message=n.message.replace(e,t),n}function uP(n){for(const e of n)if("object"==typeof e&&!Lx(e))return e;return{}}function lP(n,e){var t,r;let i;return i=Lx(n[0])?n[0]:Lx(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class O0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new wa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Qk(this._delegate,e._delegate)}}class F0 extends O0{data(e){const t=this._delegate.data(e);return function gC(n,e){n||nt()}(void 0!==t),t}}class xs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new oD(e)}where(e,t,r){try{return new xs(this.firestore,Nf(this._delegate,function _U(n,e,t){const r=e,i=tD("where",n);return N0._create(i,r,t)}(e,t,r)))}catch(i){throw As(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new xs(this.firestore,Nf(this._delegate,function yU(n,e="asc"){const t=e,r=tD("orderBy",n);return kx._create(r,t)}(e,t)))}catch(r){throw As(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new xs(this.firestore,Nf(this._delegate,function vU(n){return Ek("limit",n),nD._create("limit",n,"F")}(e)))}catch(t){throw As(t,"limit()","Query.limit()")}}limitToLast(e){try{return new xs(this.firestore,Nf(this._delegate,function wU(n){return Ek("limitToLast",n),nD._create("limitToLast",n,"L")}(e)))}catch(t){throw As(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new xs(this.firestore,Nf(this._delegate,function EU(...n){return rD._create("startAt",n,!0)}(...e)))}catch(t){throw As(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new xs(this.firestore,Nf(this._delegate,function IU(...n){return rD._create("startAfter",n,!1)}(...e)))}catch(t){throw As(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new xs(this.firestore,Nf(this._delegate,function CU(...n){return iD._create("endBefore",n,!1)}(...e)))}catch(t){throw As(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new xs(this.firestore,Nf(this._delegate,function bU(...n){return iD._create("endAt",n,!0)}(...e)))}catch(t){throw As(t,"endAt()","Query.endAt()")}}isEqual(e){return _x(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function MU(n){n=hn(n,qi);const e=hn(n.firestore,sr),t=jr(e),r=new Pf(e);return function KV(n,e){const t=new zn;return n.asyncQueue.enqueueAndForget((0,pe.Z)(function*(){return(r=(0,pe.Z)(function*(i,a,l){try{const h=yield D0(i,a,!0),_=new ck(a,h.Hi),w=_.Wu(h.documents),b=_.applyChanges(w,!1);l.resolve(b.snapshot)}catch(h){const _=vy(h,`Failed to execute query '${a} against cache`);l.reject(_)}}),function(i,a,l){return r.apply(this,arguments)})(yield Zb(n),e,t);var r})),t.promise}(t,n._query).then(i=>new kf(e,r,n,i))}(this._delegate):"server"===e?.source?function NU(n){n=hn(n,qi);const e=hn(n.firestore,sr),t=jr(e),r=new Pf(e);return kk(t,n._query,{source:"server"}).then(i=>new kf(e,r,n,i))}(this._delegate):function RU(n){n=hn(n,qi);const e=hn(n.firestore,sr),t=jr(e),r=new Pf(e);return Gk(n._query),kk(t,n._query).then(i=>new kf(e,r,n,i))}(this._delegate),t.then(r=>new Vx(this.firestore,new kf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=uP(e),r=lP(e,i=>new Vx(this.firestore,new kf(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return eP(this._delegate,t,r)}withConverter(e){return new xs(this.firestore,this._delegate.withConverter(e?Yg.getInstance(this.firestore,e):null))}}class ZU{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new F0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Vx{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new xs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new F0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new ZU(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new F0(this._firestore,r))})}isEqual(e){return Qk(this._delegate,e._delegate)}}class Ty extends xs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new wa(this.firestore,e):null}doc(e){try{return new wa(this.firestore,void 0===e?zb(this._delegate):zb(this._delegate,e))}catch(t){throw As(t,"doc()","CollectionReference.doc()")}}add(e){return function PU(n,e){const t=hn(n.firestore,sr),r=zb(n),i=sD(n.converter,e);return Dy(t,[Xb(qg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Fn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new wa(this.firestore,t))}isEqual(e){return Tk(this._delegate,e._delegate)}withConverter(e){return new Ty(this.firestore,this._delegate.withConverter(e?Yg.getInstance(this.firestore,e):null))}}function Qg(n){return hn(n,ir)}class Ux{constructor(...e){this._delegate=new Vd(...e)}static documentId(){return new Ux(tr.keyField().canonicalString())}isEqual(e){return(e=(0,P.m9)(e))instanceof Vd&&this._delegate._internalPath.isEqual(e._internalPath)}}class Xg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function BU(){return new Sx("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Xg(e)}static delete(){const e=function UU(){return new x0("deleteField")}();return e._methodName="FieldValue.delete",new Xg(e)}static arrayUnion(...e){const t=function jU(...n){return new hU("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Xg(t)}static arrayRemove(...e){const t=function $U(...n){return new fU("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Xg(t)}static increment(e){const t=function HU(n){return new pU("increment",n)}(e);return t._methodName="FieldValue.increment",new Xg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const YU={Firestore:sP,GeoPoint:Yb,Timestamp:Ht,Blob:P0,Transaction:oP,WriteBatch:aP,DocumentReference:wa,DocumentSnapshot:O0,Query:xs,QueryDocumentSnapshot:F0,QuerySnapshot:Vx,CollectionReference:Ty,FieldPath:Ux,FieldValue:Xg,setLogLevel:function KU(n){!function pC(n){pu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function XU(n){(function QU(n,e){n.INTERNAL.registerComponent(new Ws.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},YU)))})(n,(e,t)=>new sP(e,t,new qU)),n.registerVersion("@firebase/firestore-compat","0.3.1")}(Xp.Z);var Bx=F(6451),aD=F(5363),JU=F(6063);class eB extends _s.x{constructor(e=1/0,t=1/0,r=JU.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let h=0;for(let _=1;_<r.length&&r[_]<=l;_+=2)h=_;h&&r.splice(0,h+1)}}}var cP=F(3099);function dP(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,cP.B)({connector:()=>new eB(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function hP(n,e){return(0,ci.m)(e)?Hn(()=>n,e):Hn(()=>n)}var jx=F(9468);F(259);const Hx=new Map,pP={activated:!1,tokenObservers:[]},sB={initialized:!1,enabled:!1};function Ki(n){return Hx.get(n)||Object.assign({},pP)}function lD(){return sB}class dB{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,pe.Z)(function*(){t.stop();try{t.pending=new P.BH,yield function hB(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new P.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Rs=new P.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function mP(n){if(!Ki(n).activated)throw Rs.create("use-before-activation",{appName:n.name})}function zx(n,e){return qx.apply(this,arguments)}function qx(){return qx=(0,pe.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const x=yield i.getHeartbeatsHeader();x&&(r["X-Firebase-Client"]=x)}const a={method:"POST",body:JSON.stringify(e),headers:r};let l,h;try{l=yield fetch(n,a)}catch(x){throw Rs.create("fetch-network-error",{originalErrorMessage:x?.message})}if(200!==l.status)throw Rs.create("fetch-status-error",{httpStatus:l.status});try{h=yield l.json()}catch(x){throw Rs.create("fetch-parse-error",{originalErrorMessage:x?.message})}const _=h.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw Rs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const w=1e3*Number(_[1]),b=Date.now();return{token:h.token,expireTimeMillis:b+w,issuedAtTimeMillis:b}}),qx.apply(this,arguments)}function mB(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const L0="firebase-app-check-store";let hD=null;function yP(){return hD||(hD=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Rs.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(L0,{keyPath:"compositeKey"})}}catch(t){e(Rs.create("storage-open",{originalErrorMessage:t?.message}))}}),hD)}function Kx(){return Kx=(0,pe.Z)(function*(n,e){const r=(yield yP()).transaction(L0,"readwrite"),a=r.objectStore(L0).put({compositeKey:n,value:e});return new Promise((l,h)=>{a.onsuccess=_=>{l()},r.onerror=_=>{var w;h(Rs.create("storage-set",{originalErrorMessage:null===(w=_.target.error)||void 0===w?void 0:w.message}))}})}),Kx.apply(this,arguments)}const V0=new Cs.Yd("@firebase/app-check");function Qx(n,e){return(0,P.hl)()?function wB(n,e){return function vP(n,e){return Kx.apply(this,arguments)}(function EP(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{V0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function IP(){return lD().enabled}function CP(){return Jx.apply(this,arguments)}function Jx(){return Jx=(0,pe.Z)(function*(){const n=lD();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),Jx.apply(this,arguments)}const TB={error:"UNKNOWN_ERROR"};function SB(n){return P.US.encodeString(JSON.stringify(n),!1)}function fD(n){return eR.apply(this,arguments)}function eR(){return eR=(0,pe.Z)(function*(n,e=!1){const t=n.app;mP(t);const r=Ki(t);let a,i=r.token;if(i&&!Sy(i)&&(r.token=void 0,i=void 0),!i){const _=yield r.cachedTokenPromise;_&&(Sy(_)?i=_:yield Qx(t,void 0))}if(!e&&i&&Sy(i))return{token:i.token};let h,l=!1;if(IP()){r.exchangeTokenPromise||(r.exchangeTokenPromise=zx(mB(t,yield CP()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const _=yield r.exchangeTokenPromise;return yield Qx(t,_),r.token=_,{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield Ki(t).exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?V0.warn(_.message):V0.error(_),a=_}return i?a?h=Sy(i)?{token:i.token,internalError:a}:TP(a):(h={token:i.token},r.token=i,yield Qx(t,i)):h=TP(a),l&&DP(t,h),h}),eR.apply(this,arguments)}function nR(n,e){const t=Ki(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function bP(n){const{app:e}=n,t=Ki(e);let r=t.tokenRefresher;r||(r=function AB(n){const{app:e}=n;return new dB((0,pe.Z)(function*(){let r;if(r=Ki(e).token?yield fD(n,!0):yield fD(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Ki(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function DP(n,e){const t=Ki(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function Sy(n){return n.expireTimeMillis-Date.now()>0}function TP(n){return{token:SB(TB),error:n}}class xB{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Ki(this.app);for(const t of e)nR(this.app,t.next);return Promise.resolve()}}const PP="app-check-internal";!function HB(){(0,pi._registerComponent)(new Ws.wA("app-check",n=>function RB(n,e){return new xB(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(PP).initialize()})),(0,pi._registerComponent)(new Ws.wA(PP,n=>function MB(n){return{getToken:e=>fD(n,e),addTokenListener:e=>function tR(n,e,t,r){const{app:i}=n,a=Ki(i);if(a.tokenObservers=[...a.tokenObservers,{next:t,error:r,type:e}],a.token&&Sy(a.token)){const h=a.token;Promise.resolve().then(()=>{t({token:h.token}),bP(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>bP(n))}(n,"INTERNAL",e),removeTokenListener:e=>nR(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,pi.registerVersion)("@firebase/app-check","0.6.1")}();class U0{constructor(){return(0,rn.vb)("app-check")}}typeof window<"u"&&window;var gD=F(9260);const aR=new p.OlP("angularfire2.auth.use-emulator"),uR=new p.OlP("angularfire2.auth.settings"),lR=new p.OlP("angularfire2.auth.tenant-id"),cR=new p.OlP("angularfire2.auth.langugage-code"),dR=new p.OlP("angularfire2.auth.use-device-language"),hR=new p.OlP("angularfire.auth.persistence"),fR=(n,e,t,r,i,a,l,h)=>(0,hr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,a&&_.useDeviceLanguage(),l)for(const[w,b]of Object.entries(l))_.settings[w]=b;return h&&_.setPersistence(h),_},[t,r,i,a,l,h]);let mD=(()=>{class n{constructor(t,r,i,a,l,h,_,w,b,x,k,U){const W=new _s.x,ae=rt(void 0).pipe((0,aD.Q)(l.outsideAngular),Hn(()=>a.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,750)))),(0,T.U)(()=>(0,hr.on)(t,a,r)),(0,T.U)(ve=>fR(ve,a,h,w,b,x,_,k)),dP({bufferSize:1,refCount:!1}));if(Du(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=rt(null);else{ae.pipe(sa()).subscribe();const pt=ae.pipe(Hn(dt=>dt.getRedirectResult().then(Mt=>Mt,()=>null)),rn.iC,dP({bufferSize:1,refCount:!1})),_t=ae.pipe(Hn(dt=>new Jn.y(Mt=>({unsubscribe:a.runOutsideAngular(()=>dt.onAuthStateChanged(Wt=>Mt.next(Wt),Wt=>Mt.error(Wt),()=>Mt.complete()))})))),st=ae.pipe(Hn(dt=>new Jn.y(Mt=>({unsubscribe:a.runOutsideAngular(()=>dt.onIdTokenChanged(Wt=>Mt.next(Wt),Wt=>Mt.error(Wt),()=>Mt.complete()))}))));this.authState=pt.pipe(hP(_t),(0,jx.R)(l.outsideAngular),(0,aD.Q)(l.insideAngular)),this.user=pt.pipe(hP(st),(0,jx.R)(l.outsideAngular),(0,aD.Q)(l.insideAngular)),this.idToken=this.user.pipe(Hn(dt=>dt?(0,nn.D)(dt.getIdToken()):rt(null))),this.idTokenResult=this.user.pipe(Hn(dt=>dt?(0,nn.D)(dt.getIdTokenResult()):rt(null))),this.credential=(0,Bx.T)(pt,W,this.authState.pipe(ws(dt=>!dt))).pipe((0,T.U)(dt=>dt?.user?dt:null),(0,jx.R)(l.outsideAngular),(0,aD.Q)(l.insideAngular))}return(0,hr.pX)(this,ae,a,{spy:{apply:(ve,pt,_t)=>{(ve.startsWith("signIn")||ve.startsWith("createUser"))&&_t.then(st=>W.next(st))}}})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(hr.Dh),p.LFG(hr.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(rn.HU),p.LFG(aR,8),p.LFG(uR,8),p.LFG(lR,8),p.LFG(cR,8),p.LFG(dR,8),p.LFG(hR,8),p.LFG(U0,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),ZB=(()=>{class n{constructor(){gD.Z.registerVersion("angularfire",rn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[mD]}),n})();function FP(n,e){return function YB(n,e=Vh.z){return new Jn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function pR(n,e){return FP(n,e).pipe((0,T.U)(t=>({payload:t,type:"query"})))}function _D(n,e){return pR(n,e).pipe(Bc(void 0),Qp(),(0,T.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,h)=>{const _=i.find(b=>b.doc.ref.isEqual(l.ref)),w=t?.payload.docs.find(b=>b.ref.isEqual(l.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(l.metadata)||!_&&w&&JSON.stringify(w.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:l}})}),a}))}function LP(n,e,t){return _D(n,t).pipe(vo((r,i)=>function XB(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function JB(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return gR(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return gR(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return gR(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),Uh(),(0,T.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function gR(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function VP(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class UP{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=_D(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,T.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Bc(void 0),Qp(),ws(([r,i])=>i.length>0||!r),(0,T.U)(([r,i])=>i),rn.iC)}auditTrail(e){return this.stateChanges(e).pipe(vo((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=VP(e);return LP(this.query,t,this.afs.schedulers.outsideAngular).pipe(rn.iC)}valueChanges(e={}){return pR(this.query,this.afs.schedulers.outsideAngular).pipe((0,T.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),rn.iC)}get(e){return(0,nn.D)(this.query.get(e)).pipe(rn.iC)}add(e){return this.ref.add(e)}doc(e){return new BP(this.ref.doc(e),this.afs)}}class BP{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=HP(r,t);return new UP(i,a,this.afs)}snapshotChanges(){return function QB(n,e){return FP(n,e).pipe(Bc(void 0),Qp(),(0,T.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(rn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,T.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,nn.D)(this.ref.get(e)).pipe(rn.iC)}}class e2{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?_D(this.query,this.afs.schedulers.outsideAngular).pipe((0,T.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ws(t=>t.length>0),rn.iC):_D(this.query,this.afs.schedulers.outsideAngular).pipe(rn.iC)}auditTrail(e){return this.stateChanges(e).pipe(vo((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=VP(e);return LP(this.query,t,this.afs.schedulers.outsideAngular).pipe(rn.iC)}valueChanges(e={}){return pR(this.query,this.afs.schedulers.outsideAngular).pipe((0,T.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),rn.iC)}get(e){return(0,nn.D)(this.query.get(e)).pipe(rn.iC)}}const jP=new p.OlP("angularfire2.enableFirestorePersistence"),$P=new p.OlP("angularfire2.firestore.persistenceSettings"),t2=new p.OlP("angularfire2.firestore.settings"),n2=new p.OlP("angularfire2.firestore.use-emulator");function HP(n,e=(t=>t)){return{query:e(n),ref:n}}let GP=(()=>{class n{constructor(t,r,i,a,l,h,_,w,b,x,k,U,W,ae,ve,pt,_t){this.schedulers=_;const st=(0,hr.on)(t,h,r),dt=b;x&&fR(st,h,k,W,ae,ve,U,pt),[this.firestore,this.persistenceEnabled$]=(0,hr.cc)(`${st.name}.firestore`,"AngularFirestore",st.name,()=>{const Mt=h.runOutsideAngular(()=>st.firestore());if(a&&Mt.settings(a),dt&&Mt.useEmulator(...dt),i&&!Du(l)){const Wt=()=>{try{return(0,nn.D)(Mt.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(Tr){return typeof console<"u"&&console.warn(Tr),rt(!1)}};return[Mt,h.runOutsideAngular(Wt)]}return[Mt,rt(!1)]},[a,dt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=HP(i,r),h=this.schedulers.ngZone.run(()=>a);return new UP(h,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new e2(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new BP(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(hr.Dh),p.LFG(hr.xv,8),p.LFG(jP,8),p.LFG(t2,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(rn.HU),p.LFG($P,8),p.LFG(n2,8),p.LFG(mD,8),p.LFG(aR,8),p.LFG(uR,8),p.LFG(lR,8),p.LFG(cR,8),p.LFG(dR,8),p.LFG(hR,8),p.LFG(U0,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),r2=(()=>{class n{constructor(){gD.Z.registerVersion("angularfire",rn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:jP,useValue:!0},{provide:$P,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[GP]}),n})();class Ff{constructor(e){this.angularFirestore=e}getStudentDoc(e){return this.angularFirestore.collection("student-collection").doc(e).valueChanges()}getStudentList(){return this.angularFirestore.collection("student-collection").snapshotChanges()}createStudent(e){return new Promise((t,r)=>{this.angularFirestore.collection("student-collection").add(e).then(i=>{console.log("success"+i)},i=>{r("error"+i)})})}deleteStudent(e){return this.angularFirestore.collection("student-collection").doc(e.id).delete()}updateStudent(e,t){return this.angularFirestore.collection("student-collection").doc(t).update({name:e.name,email:e.email,student_course:e.student_course,fees:e.fees})}}Ff.\u0275fac=function(e){return new(e||Ff)(p.LFG(GP))},Ff.\u0275prov=p.Yz7({token:Ff,factory:Ff.\u0275fac,providedIn:"root"});let WP=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Qsj),p.Y36(p.SBq))},n.\u0275dir=p.lG2({type:n}),n})(),Jg=(()=>{class n extends WP{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275dir=p.lG2({type:n,features:[p.qOj]}),n})();const Xl=new p.OlP("NgValueAccessor"),o2={provide:Xl,useExisting:(0,p.Gpc)(()=>B0),multi:!0},u2=new p.OlP("CompositionEventMode");let B0=(()=>{class n extends WP{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function a2(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(u2,8))},n.\u0275dir=p.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&p.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[p._Bn([o2]),p.qOj]}),n})();const ss=new p.OlP("NgValidators"),Vf=new p.OlP("NgAsyncValidators");function YP(n){return function Lf(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}(n.value)?{required:!0}:null}function yD(n){return null}function nO(n){return null!=n}function rO(n){return(0,p.QGY)(n)?(0,nn.D)(n):n}function iO(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function sO(n,e){return e.map(t=>t(n))}function oO(n){return n.map(e=>function d2(n){return!n.validate}(e)?e:t=>e.validate(t))}function mR(n){return null!=n?function aO(n){if(!n)return null;const e=n.filter(nO);return 0==e.length?null:function(t){return iO(sO(t,e))}}(oO(n)):null}function _R(n){return null!=n?function uO(n){if(!n)return null;const e=n.filter(nO);return 0==e.length?null:function(t){return function i2(...n){const e=(0,vr.jO)(n),{args:t,keys:r}=tl(n),i=new Jn.y(a=>{const{length:l}=t;if(!l)return void a.complete();const h=new Array(l);let _=l,w=l;for(let b=0;b<l;b++){let x=!1;(0,vs.Xf)(t[b]).subscribe((0,_e.x)(a,k=>{x||(x=!0,w--),h[b]=k},()=>_--,void 0,()=>{(!_||!x)&&(w||a.next(r?ee(r,h):h),a.complete())}))}});return e?i.pipe(Y(e)):i}(sO(t,e).map(rO)).pipe((0,T.U)(iO))}}(oO(n)):null}function lO(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function cO(n){return n._rawValidators}function dO(n){return n._rawAsyncValidators}function yR(n){return n?Array.isArray(n)?n:[n]:[]}function vD(n,e){return Array.isArray(n)?n.includes(e):n===e}function hO(n,e){const t=yR(e);return yR(n).forEach(i=>{vD(t,i)||t.push(i)}),t}function fO(n,e){return yR(e).filter(t=>!vD(n,t))}class pO{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=mR(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=_R(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ms extends pO{get formDirective(){return null}get path(){return null}}class Uf extends pO{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class gO{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let vR=(()=>{class n extends gO{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Uf,2))},n.\u0275dir=p.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&p.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[p.qOj]}),n})(),wD=(()=>{class n extends gO{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Ms,10))},n.\u0275dir=p.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&p.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[p.qOj]}),n})();const j0="VALID",ID="INVALID",Ay="PENDING",$0="DISABLED";function CR(n){return(CD(n)?n.validators:n)||null}function bR(n,e){return(CD(e)?e.asyncValidators:n)||null}function CD(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function _O(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new p.vHH(1e3,"");if(!r[t])throw new p.vHH(1001,"")}function yO(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new p.vHH(1002,"")})}class bD{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===j0}get invalid(){return this.status===ID}get pending(){return this.status==Ay}get disabled(){return this.status===$0}get enabled(){return this.status!==$0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(hO(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(hO(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(fO(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(fO(e,this._rawAsyncValidators))}hasValidator(e){return vD(this._rawValidators,e)}hasAsyncValidator(e){return vD(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ay,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=$0,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=j0,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===j0||this.status===Ay)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?$0:j0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ay,this._hasOwnPendingAsyncValidator=!0;const t=rO(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new p.vpe,this.statusChanges=new p.vpe}_calculateStatus(){return this._allControlsDisabled()?$0:this.errors?ID:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ay)?Ay:this._anyControlsHaveStatus(ID)?ID:j0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){CD(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function y2(n){return Array.isArray(n)?mR(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function v2(n){return Array.isArray(n)?_R(n):n||null}(this._rawAsyncValidators)}}class H0 extends bD{constructor(e,t,r){super(CR(t),bR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){yO(this,0,e),Object.keys(e).forEach(r=>{_O(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class vO extends H0{}const xy=new p.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>DD}),DD="always";function G0(n,e,t=DD){DR(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function E2(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&wO(n,e)})}(n,e),function C2(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function I2(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&wO(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function w2(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function SD(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),xD(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function AD(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function DR(n,e){const t=cO(n);null!==e.validator?n.setValidators(lO(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=dO(n);null!==e.asyncValidator?n.setAsyncValidators(lO(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();AD(e._rawValidators,i),AD(e._rawAsyncValidators,i)}function xD(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=cO(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(l=>l!==e.validator);a.length!==i.length&&(t=!0,n.setValidators(a))}}if(null!==e.asyncValidator){const i=dO(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(l=>l!==e.asyncValidator);a.length!==i.length&&(t=!0,n.setAsyncValidators(a))}}}const r=()=>{};return AD(e._rawValidators,r),AD(e._rawAsyncValidators,r),t}function wO(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function EO(n,e){DR(n,e)}function IO(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}const A2={provide:Ms,useExisting:(0,p.Gpc)(()=>RD)},W0=(()=>Promise.resolve())();let RD=(()=>{class n extends Ms{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new p.vpe,this.form=new H0({},mR(t),_R(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){W0.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),G0(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){W0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){W0.then(()=>{const r=this._findContainer(t.path),i=new H0({});EO(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){W0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){W0.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,IO(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(ss,10),p.Y36(Vf,10),p.Y36(xy,8))},n.\u0275dir=p.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&p.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([A2]),p.qOj]}),n})();function CO(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function bO(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const z0=class extends bD{constructor(e=null,t,r){super(CR(t),bR(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),CD(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=bO(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){CO(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){CO(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){bO(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let MD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=p.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const N2={provide:Xl,useExisting:(0,p.Gpc)(()=>ND),multi:!0};let ND=(()=>{class n extends Jg{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275dir=p.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&p.NdJ("input",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},features:[p._Bn([N2]),p.qOj]}),n})(),xO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();const xR=new p.OlP("NgModelWithFormControlWarning"),L2={provide:Ms,useExisting:(0,p.Gpc)(()=>q0)};let q0=(()=>{class n extends Ms{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new p.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(xD(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return G0(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){SD(t.control||null,t,!1),function S2(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,IO(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(SD(r||null,t),(n=>n instanceof z0)(i)&&(G0(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);EO(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function b2(n,e){return xD(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){DR(this.form,this),this._oldForm&&xD(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(ss,10),p.Y36(Vf,10),p.Y36(xy,8))},n.\u0275dir=p.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&p.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([L2]),p.qOj,p.TTD]}),n})();const B2={provide:Uf,useExisting:(0,p.Gpc)(()=>kD)};let kD=(()=>{class n extends Uf{set isDisabled(t){}constructor(t,r,i,a,l){super(),this._ngModelWarningConfig=l,this._added=!1,this.update=new p.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function AR(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===B0?t=a:function T2(n){return Object.getPrototypeOf(n.constructor)===Jg}(a)?r=a:i=a}),i||r||t||null}(0,a)}ngOnChanges(t){this._added||this._setUpControl(),function SR(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function TD(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(p.Y36(Ms,13),p.Y36(ss,10),p.Y36(Vf,10),p.Y36(Xl,10),p.Y36(xR,8))},n.\u0275dir=p.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[p._Bn([B2]),p.qOj,p.TTD]}),n})();const j2={provide:Xl,useExisting:(0,p.Gpc)(()=>K0),multi:!0};function PO(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let K0=(()=>{class n extends Jg{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=PO(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function $2(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275dir=p.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&p.NdJ("change",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([j2]),p.qOj]}),n})(),NR=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(PO(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(K0,9))},n.\u0275dir=p.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const H2={provide:Xl,useExisting:(0,p.Gpc)(()=>kR),multi:!0};function OO(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let kR=(()=>{class n extends Jg{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(a=>this._getOptionId(a));r=(a,l)=>{a._setSelected(i.indexOf(l.toString())>-1)}}else r=(i,a)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],a=r.selectedOptions;if(void 0!==a){const l=a;for(let h=0;h<l.length;h++){const w=this._getOptionValue(l[h].value);i.push(w)}}else{const l=r.options;for(let h=0;h<l.length;h++){const _=l[h];if(_.selected){const w=this._getOptionValue(_.value);i.push(w)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function G2(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275dir=p.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&p.NdJ("change",function(a){return r.onChange(a.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([H2]),p.qOj]}),n})(),PR=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(OO(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(OO(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(kR,9))},n.\u0275dir=p.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),em=(()=>{class n{constructor(){this._validator=yD}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):yD,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=p.lG2({type:n,features:[p.TTD]}),n})();const q2={provide:ss,useExisting:(0,p.Gpc)(()=>Z0),multi:!0};let Z0=(()=>{class n extends em{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=p.D6c,this.createValidator=t=>YP}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275dir=p.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&p.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[p._Bn([q2]),p.qOj]}),n})(),WO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[xO]}),n})();class zO extends bD{constructor(e,t,r){super(CR(t),bR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){yO(this,0,e),e.forEach((r,i)=>{_O(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function qO(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let KO=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let a={};return qO(r)?a=r:null!==r&&(a.validators=r.validator,a.asyncValidators=r.asyncValidator),new H0(i,a)}record(t,r=null){const i=this._reduceControls(t);return new vO(i,r)}control(t,r,i){let a={};return this.useNonNullable?(qO(r)?a=r:(a.validators=r,a.asyncValidators=i),new z0(t,{...a,nonNullable:!0})):new z0(t,r,i)}array(t,r,i){const a=t.map(l=>this._createControl(l));return new zO(a,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof z0||t instanceof bD?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),J2=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:xy,useValue:t.callSetDisabledState??DD}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[WO]}),n})(),ej=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:xR,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:xy,useValue:t.callSetDisabledState??DD}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[WO]}),n})();class Y0{constructor(e,t,r){this.studentService=e,this.formBuilder=t,this.router=r,this.studentForm=this.formBuilder.group({name:[""],email:[""],student_course:[""],fees:[""]})}ngOnInit(){}onSubmit(){this.studentService.createStudent(this.studentForm.value),this.router.navigate(["list-student"])}}Y0.\u0275fac=function(e){return new(e||Y0)(p.Y36(Ff),p.Y36(KO),p.Y36(Di))},Y0.\u0275cmp=p.Xpm({type:Y0,selectors:[["app-student-create"]],decls:30,vars:2,consts:[["novalidate","",3,"formGroup","ngSubmit"],[1,"mb-3"],["for",""],["type","text","name","","id","","formControlName","name","placeholder","Full Name","required","",1,"form-control"],["type","email","formControlName","email","placeholder","Email","required","",1,"form-control"],["name","","id","","formControlName","student_course","placeholder","","required","",1,"form-control","form-select-lg","mb-3"],["value","B-Tech"],["value","BCA"],["value","MCA"],["value","M-Tech"],["type","number","formControlName","fees","placeholder","Fees","required","",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","reset",1,"btn","btn-danger"]],template:function(e,t){1&e&&(p.TgZ(0,"form",0),p.NdJ("ngSubmit",function(){return t.onSubmit()}),p.TgZ(1,"div",1)(2,"label",2),p._uU(3,"Name"),p.qZA(),p._UZ(4,"input",3),p.qZA(),p.TgZ(5,"div",1)(6,"label",2),p._uU(7,"Email"),p.qZA(),p._UZ(8,"input",4),p.qZA(),p.TgZ(9,"div",1)(10,"label",2),p._uU(11,"Student Course"),p.qZA(),p.TgZ(12,"select",5)(13,"option",6),p._uU(14,"B-Tech"),p.qZA(),p.TgZ(15,"option",7),p._uU(16,"BCA"),p.qZA(),p.TgZ(17,"option",8),p._uU(18,"MCA"),p.qZA(),p.TgZ(19,"option",9),p._uU(20,"M-Tech"),p.qZA()()(),p.TgZ(21,"div",1)(22,"label",2),p._uU(23,"Fees"),p.qZA(),p._UZ(24,"input",10),p.qZA(),p.TgZ(25,"div",1)(26,"button",11),p._uU(27,"Create"),p.qZA(),p.TgZ(28,"button",12),p._uU(29,"Reset"),p.qZA()()()),2&e&&(p.Q6J("formGroup",t.studentForm),p.xp6(26),p.Q6J("disabled",!t.studentForm.valid))},dependencies:[MD,NR,PR,B0,ND,K0,vR,wD,Z0,q0,kD]});class Q0{constructor(e,t,r,i){this.studentService=e,this.formBuilder=t,this.act=r,this.router=i,this.editForm=this.formBuilder.group({name:[""],email:[""],student_course:[""],fees:[""]})}ngOnInit(){const e=this.act.snapshot.paramMap.get("id");this.studentService.getStudentDoc(e).subscribe(t=>{this.studentRef=t,this.editForm=this.formBuilder.group({name:[this.studentRef.name],email:[this.studentRef.email],student_course:[this.studentRef.student_course],fees:[this.studentRef.fees]})})}onSubmit(){const e=this.act.snapshot.paramMap.get("id");this.studentService.updateStudent(this.editForm.value,e),this.router.navigate(["list-student"])}}Q0.\u0275fac=function(e){return new(e||Q0)(p.Y36(Ff),p.Y36(KO),p.Y36(Xe),p.Y36(Di))},Q0.\u0275cmp=p.Xpm({type:Q0,selectors:[["app-edit-student"]],decls:30,vars:1,consts:[["novalidate","",3,"formGroup","ngSubmit"],[1,"mb-3"],["for",""],["type","text","name","","id","","formControlName","name","placeholder","Full Name","required","",1,"form-control"],["type","email","formControlName","email","placeholder","Email","required","",1,"form-control"],["name","","id","","formControlName","student_course","placeholder","","required","",1,"form-control","form-select-lg","mb-3"],["value","B-Tech"],["value","BCA"],["value","MCA"],["value","M-Tech"],["type","number","formControlName","fees","placeholder","Fees","required","",1,"form-control"],["type","submit",1,"btn","btn-primary"],["type","reset",1,"btn","btn-danger"]],template:function(e,t){1&e&&(p.TgZ(0,"form",0),p.NdJ("ngSubmit",function(){return t.onSubmit()}),p.TgZ(1,"div",1)(2,"label",2),p._uU(3,"Name"),p.qZA(),p._UZ(4,"input",3),p.qZA(),p.TgZ(5,"div",1)(6,"label",2),p._uU(7,"Email"),p.qZA(),p._UZ(8,"input",4),p.qZA(),p.TgZ(9,"div",1)(10,"label",2),p._uU(11,"Student Course"),p.qZA(),p.TgZ(12,"select",5)(13,"option",6),p._uU(14,"B-Tech"),p.qZA(),p.TgZ(15,"option",7),p._uU(16,"BCA"),p.qZA(),p.TgZ(17,"option",8),p._uU(18,"MCA"),p.qZA(),p.TgZ(19,"option",9),p._uU(20,"M-Tech"),p.qZA()()(),p.TgZ(21,"div",1)(22,"label",2),p._uU(23,"Fees"),p.qZA(),p._UZ(24,"input",10),p.qZA(),p.TgZ(25,"div",1)(26,"button",11),p._uU(27,"Create"),p.qZA(),p.TgZ(28,"button",12),p._uU(29,"Reset"),p.qZA()()()),2&e&&p.Q6J("formGroup",t.editForm)},dependencies:[MD,NR,PR,B0,ND,K0,vR,wD,Z0,q0,kD]});class tj{}function nj(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"tr")(1,"th",3),p._uU(2),p.qZA(),p.TgZ(3,"td"),p._uU(4),p.qZA(),p.TgZ(5,"td"),p._uU(6),p.qZA(),p.TgZ(7,"td"),p._uU(8),p.qZA(),p.TgZ(9,"td"),p._uU(10),p.qZA(),p.TgZ(11,"td")(12,"span",4),p.NdJ("click",function(){const a=p.CHM(t).$implicit,l=p.oxw();return p.KtG(l.removeStudent(a))}),p._uU(13,"Delete"),p.qZA(),p.TgZ(14,"span",5),p._uU(15,"Edit"),p.qZA()()()}if(2&n){const t=e.$implicit,r=e.index;p.xp6(2),p.Oqu(r+1),p.xp6(2),p.Oqu(t.name),p.xp6(2),p.Oqu(t.email),p.xp6(2),p.Oqu(t.student_course),p.xp6(2),p.Oqu(t.fees),p.xp6(4),p.MGl("routerLink","/edit-student/",t.id,"")}}class X0{constructor(e){this.studentService=e}ngOnInit(){this.studentService.getStudentList().subscribe(e=>{this.Student=e.map(t=>({id:t.payload.doc.id,...t.payload.doc.data()}))})}removeStudent(e){confirm("Are you sure to delete"+tj.name)&&this.studentService.deleteStudent(e)}}X0.\u0275fac=function(e){return new(e||X0)(p.Y36(Ff))},X0.\u0275cmp=p.Xpm({type:X0,selectors:[["app-student-list"]],decls:17,vars:1,consts:[[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-primary",3,"routerLink"]],template:function(e,t){1&e&&(p.TgZ(0,"table",0)(1,"thead")(2,"tr")(3,"th",1),p._uU(4,"#"),p.qZA(),p.TgZ(5,"th",1),p._uU(6,"Name"),p.qZA(),p.TgZ(7,"th",1),p._uU(8,"Email"),p.qZA(),p.TgZ(9,"th",1),p._uU(10,"Student Course"),p.qZA(),p.TgZ(11,"th",1),p._uU(12,"Fees"),p.qZA(),p.TgZ(13,"th",1),p._uU(14,"Action"),p.qZA()()(),p.TgZ(15,"tbody"),p.YNc(16,nj,16,6,"tr",2),p.qZA()()),2&e&&(p.xp6(16),p.Q6J("ngForOf",t.Student))},dependencies:[Oi,Sv]});const rj=[{path:"add-student",component:Y0},{path:"edit-student/:id",component:Q0},{path:"list-student",component:X0}];class tm{}tm.\u0275fac=function(e){return new(e||tm)},tm.\u0275mod=p.oAB({type:tm}),tm.\u0275inj=p.cJS({imports:[Gm.forRoot(rj),Gm]});class J0{constructor(e){this.router=e,this.title="student"}addStudent(){this.router.navigate(["add-student"])}listStudent(){this.router.navigate(["list-student"])}}J0.\u0275fac=function(e){return new(e||J0)(p.Y36(Di))},J0.\u0275cmp=p.Xpm({type:J0,selectors:[["app-root"]],decls:20,vars:0,consts:[[1,"navbar","navbar-expand-lg","bg-dark"],[1,"container-fluid"],["href","#",1,"navbar-brand",2,"color","#fff"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["aria-current","page",1,"nav-link","active",2,"color","#fff","cursor","pointer",3,"click"],[1,"nav-link",2,"color","#fff","cursor","pointer",3,"click"],["role","search",1,"d-flex"],["type","search","placeholder","Search","aria-label","Search",1,"form-control","me-2"],["type","submit",1,"btn","btn-outline-success"],[1,"container","mt-5"]],template:function(e,t){1&e&&(p.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),p._uU(3,"Navbar"),p.qZA(),p.TgZ(4,"button",3),p._UZ(5,"span",4),p.qZA(),p.TgZ(6,"div",5)(7,"ul",6)(8,"li",7)(9,"a",8),p.NdJ("click",function(){return t.addStudent()}),p._uU(10,"Add Student"),p.qZA()(),p.TgZ(11,"li",7)(12,"a",9),p.NdJ("click",function(){return t.listStudent()}),p._uU(13,"View Student"),p.qZA()()(),p.TgZ(14,"form",10),p._UZ(15,"input",11),p.TgZ(16,"button",12),p._uU(17,"Search"),p.qZA()()()()(),p.TgZ(18,"div",13),p._UZ(19,"router-outlet"),p.qZA())},dependencies:[ov,MD,wD,RD]});const ZO="firebasestorage.googleapis.com",YO="storageBucket";class br extends P.ZR{constructor(e,t,r=0){super(OR(e),`Firebase Storage: ${t} (${OR(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,br.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return OR(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function OR(n){return"storage/"+n}function FR(){return new br("unknown","An unknown error occurred, please check the error payload for server response.")}function QO(){return new br("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function XO(){return new br("canceled","User canceled the upload/download.")}function JO(){return new br("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Ry(n){return new br("invalid-argument",n)}function e1(){return new br("app-deleted","The Firebase app was deleted.")}function t1(n){return new br("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function eE(n,e){return new br("invalid-format","String does not match format '"+n+"': "+e)}function tE(n){throw new br("internal-error","Internal error: "+n)}class os{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=os.makeFromUrl(e,t)}catch{return new os(e,"")}if(""===r.path)return r;throw function pj(n){return new br("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function w(dt){dt.path_=decodeURIComponent(dt.path)}const x=t.replace(/[.]/g,"\\."),st=[{regex:h,indices:{bucket:1,path:3},postModify:function a(dt){"/"===dt.path.charAt(dt.path.length-1)&&(dt.path_=dt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${x}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:w},{regex:new RegExp(`^https?://${t===ZO?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:w}];for(let dt=0;dt<st.length;dt++){const Mt=st[dt],Wt=Mt.regex.exec(e);if(Wt){let Cu=Wt[Mt.indices.path];Cu||(Cu=""),r=new os(Wt[Mt.indices.bucket],Cu),Mt.postModify(r);break}}if(null==r)throw function fj(n){return new br("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class vj{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function PD(n){return"string"==typeof n||n instanceof String}function n1(n){return LR()&&n instanceof Blob}function LR(){return typeof Blob<"u"&&!(0,P.UG)()}function VR(n,e,t,r){if(r<e)throw Ry(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Ry(`Invalid value for '${n}'. Expected ${t} or less.`)}function Bd(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function r1(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Bf=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Bf||(Bf={})),Bf))();function i1(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),a=-1!==e.indexOf(n);return t||i||a}class Dj{constructor(e,t,r,i,a,l,h,_,w,b,x,k=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=h,this.errorCallback_=_,this.timeout_=w,this.progressCallback_=b,this.connectionFactory_=x,this.retry=k,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((U,W)=>{this.resolve_=U,this.reject_=W,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,l=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const _=this.callback_(h,h.getResponse());!function Ij(n){return void 0!==n}(_)?a():a(_)}catch(_){l(_)}else if(null!==h){const _=FR();_.serverResponse=h.getErrorText(),l(this.errorCallback_?this.errorCallback_(h,_):_)}else l(i.canceled?this.appDelete_?e1():XO():QO())};this.canceled_?t(0,new OD(!1,null,!0)):this.backoffId_=function wj(n,e,t){let r=1,i=null,a=null,l=!1,h=0;function _(){return 2===h}let w=!1;function b(...ve){w||(w=!0,e.apply(null,ve))}function x(ve){i=setTimeout(()=>{i=null,n(U,_())},ve)}function k(){a&&clearTimeout(a)}function U(ve,...pt){if(w)return void k();if(ve)return k(),void b.call(null,ve,...pt);if(_()||l)return k(),void b.call(null,ve,...pt);let st;r<64&&(r*=2),1===h?(h=2,st=0):st=1e3*(r+Math.random()),x(st)}let W=!1;function ae(ve){W||(W=!0,k(),!w&&(null!==i?(ve||(h=2),clearTimeout(i),x(0)):ve||(h=1)))}return x(0),a=setTimeout(()=>{l=!0,ae(!0)},t),ae}((r,i)=>{if(i)return void r(!1,new OD(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const l=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const h=a.getErrorCode()===Bf.NO_ERROR,_=a.getStatus();if(!h||i1(_,this.additionalRetryCodes_)&&this.retry){const b=a.getErrorCode()===Bf.ABORT;return void r(!1,new OD(!1,null,b))}const w=-1!==this.successCodes_.indexOf(_);r(!0,new OD(w,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function Ej(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class OD{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function Nj(...n){const e=function Mj(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(LR())return new Blob(n);throw new br("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Ro={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class UR{constructor(e,t){this.data=e,this.contentType=t||null}}function BR(n,e){switch(n){case Ro.RAW:return new UR(s1(e));case Ro.BASE64:case Ro.BASE64URL:return new UR(o1(n,e));case Ro.DATA_URL:return new UR(function Fj(n){const e=new a1(n);return e.base64?o1(Ro.BASE64,e.rest):function Oj(n){let e;try{e=decodeURIComponent(n)}catch{throw eE(Ro.DATA_URL,"Malformed data URL.")}return s1(e)}(e.rest)}(e),function Lj(n){return new a1(n).contentType}(e))}throw FR()}function s1(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function o1(n,e){switch(n){case Ro.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw eE(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Ro.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw eE(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function Pj(n){if(typeof atob>"u")throw function yj(n){return new br("unsupported-environment",`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:eE(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class a1{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw eE(Ro.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function Vj(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Jl{constructor(e,t){let r=0,i="";n1(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(n1(this.data_)){const i=function kj(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Jl(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Jl(r,!0)}}static getBlob(...e){if(LR()){const t=e.map(r=>r instanceof Jl?r.data_:r);return new Jl(Nj.apply(null,t))}{const t=e.map(l=>PD(l)?BR(Ro.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(l=>{for(let h=0;h<l.length;h++)i[a++]=l[h]}),new Jl(i,!0)}}uploadData(){return this.data_}}function jR(n){let e;try{e=JSON.parse(n)}catch{return null}return function bj(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function u1(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function jj(n,e){return e}class Ns{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||jj}}let FD=null;function nE(){if(FD)return FD;const n=[];n.push(new Ns("bucket")),n.push(new Ns("generation")),n.push(new Ns("metageneration")),n.push(new Ns("name","fullPath",!0));const t=new Ns("name");t.xform=function e(a,l){return function $j(n){return!PD(n)||n.length<2?n:u1(n)}(l)},n.push(t);const i=new Ns("size");return i.xform=function r(a,l){return void 0!==l?Number(l):l},n.push(i),n.push(new Ns("timeCreated")),n.push(new Ns("updated")),n.push(new Ns("md5Hash",null,!0)),n.push(new Ns("cacheControl",null,!0)),n.push(new Ns("contentDisposition",null,!0)),n.push(new Ns("contentEncoding",null,!0)),n.push(new Ns("contentLanguage",null,!0)),n.push(new Ns("contentType",null,!0)),n.push(new Ns("metadata","customMetadata",!0)),FD=n,FD}function l1(n,e,t){const r=jR(e);return null===r?null:function Gj(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const l=t[a];r[l.local]=l.xform(r,e[l.server])}return function Hj(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new os(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function $R(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const c1="prefixes";class ec{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function tc(n){if(!n)throw FR()}function LD(n,e){return function t(r,i){const a=l1(n,i,e);return tc(null!==a),a}}function My(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function dj(){return new br("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function cj(){return new br("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function lj(n){return new br("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function hj(n){return new br("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function rE(n){const e=My(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function uj(n){return new br("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function h1(n,e,t){const i=Bd(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new ec(i,"GET",LD(n,t),l);return h.errorHandler=rE(e),h}function Yj(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const h=Bd(e.bucketOnlyServerUrl(),n.host,n._protocol),w=n.maxOperationRetryTime,b=new ec(h,"GET",function Kj(n,e){return function t(r,i){const a=function qj(n,e,t){const r=jR(t);return null===r?null:function zj(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[c1])for(const i of t[c1]){const a=i.replace(/\/$/,""),l=n._makeStorageReference(new os(e,a));r.prefixes.push(l)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new os(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return tc(null!==a),a}}(n,e.bucket),w);return b.urlParams=a,b.errorHandler=My(e),b}function p1(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function e$(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class VD{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function HR(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{tc(!1)}return tc(!!t&&-1!==(e||["active"]).indexOf(t)),t}const i$={STATE_CHANGED:"state_changed"},ks={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function GR(n){switch(n){case"running":case"pausing":case"canceling":return ks.RUNNING;case"paused":return ks.PAUSED;case"success":return ks.SUCCESS;case"canceled":return ks.CANCELED;default:return ks.ERROR}}class s${constructor(e,t,r){if(function Cj(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function Ny(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class o${constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Bf.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Bf.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Bf.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw tE("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw tE("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw tE("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw tE("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw tE("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class a$ extends o${initXhr(){this.xhr_.responseType="text"}}function yu(){return new a$}class y1{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=nE(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const a=this.isExponentialBackoffExpired();if(i1(i.status,[])){if(!a)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=QO()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function t$(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l=p1(e,r,i),h={name:l.fullPath},_=Bd(a,n.host,n._protocol),b={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},x=$R(l,t),W=new ec(_,"POST",function U(ae){let ve;HR(ae);try{ve=ae.getResponseHeader("X-Goog-Upload-URL")}catch{tc(!1)}return tc(PD(ve)),ve},n.maxUploadRetryTime);return W.urlParams=h,W.headers=b,W.body=x,W.errorHandler=My(e),W}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,yu,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function n$(n,e,t,r){const _=new ec(t,"POST",function a(w){const b=HR(w,["active","final"]);let x=null;try{x=w.getResponseHeader("X-Goog-Upload-Size-Received")}catch{tc(!1)}x||tc(!1);const k=Number(x);return tc(!isNaN(k)),new VD(k,r.size(),"final"===b)},n.maxUploadRetryTime);return _.headers={"X-Goog-Upload-Command":"query"},_.errorHandler=My(e),_}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,yu,t,r);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new VD(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let l;try{l=function r$(n,e,t,r,i,a,l,h){const _=new VD(0,0);if(l?(_.current=l.current,_.total=l.total):(_.current=0,_.total=r.size()),r.size()!==_.total)throw function mj(){return new br("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const w=_.total-_.current;let b=w;i>0&&(b=Math.min(b,i));const x=_.current;let U="";U=0===b?"finalize":w===b?"upload, finalize":"upload";const W={"X-Goog-Upload-Command":U,"X-Goog-Upload-Offset":`${_.current}`},ae=r.slice(x,x+b);if(null===ae)throw JO();const st=new ec(t,"POST",function ve(dt,Mt){const Wt=HR(dt,["active","final"]),Tr=_.current+b,Cu=r.size();let tN;return tN="final"===Wt?LD(e,a)(dt,Mt):null,new VD(Tr,Cu,"final"===Wt,tN)},e.maxUploadRetryTime);return st.headers=W,st.body=ae.uploadData(),st.progressCallback=h||null,st.errorHandler=My(n),st}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(_){return this._error=_,void this._transition("error")}const h=this._ref.storage._makeRequest(l,yu,i,a,!1);this._request=h,h.getPromise().then(_=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_.current),_.finalized?(this._metadata=_.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=h1(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,yu,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function g1(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},_=function h(){let st="";for(let dt=0;dt<2;dt++)st+=Math.random().toString().slice(2);return st}();l["Content-Type"]="multipart/related; boundary="+_;const w=p1(e,r,i),b=$R(w,t),U=Jl.getBlob("--"+_+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+b+"\r\n--"+_+"\r\nContent-Type: "+w.contentType+"\r\n\r\n",r,"\r\n--"+_+"--");if(null===U)throw JO();const W={name:w.fullPath},ae=Bd(a,n.host,n._protocol),pt=n.maxUploadRetryTime,_t=new ec(ae,"POST",LD(n,t),pt);return _t.urlParams=W,_t.headers=l,_t.body=U.uploadData(),_t.errorHandler=My(e),_t}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,yu,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=XO(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=GR(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new s$(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(GR(this._state)){case ks.SUCCESS:Ny(this._resolve.bind(null,this.snapshot))();break;case ks.CANCELED:case ks.ERROR:Ny(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(GR(this._state)){case ks.RUNNING:case ks.PAUSED:e.next&&Ny(e.next.bind(e,this.snapshot))();break;case ks.SUCCESS:e.complete&&Ny(e.complete.bind(e))();break;default:e.error&&Ny(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class nm{constructor(e,t){this._service=e,this._location=t instanceof os?t:os.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new nm(e,t)}get root(){const e=new os(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return u1(this._location.path)}get storage(){return this._service}get parent(){const e=function Uj(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new os(this._location.bucket,e);return new nm(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw t1(e)}}function w1(n,e,t){return WR.apply(this,arguments)}function WR(){return WR=(0,pe.Z)(function*(n,e,t){const i=yield E1(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield w1(n,e,i.nextPageToken))}),WR.apply(this,arguments)}function E1(n,e){null!=e&&"number"==typeof e.maxResults&&VR("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=Yj(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,yu)}function v$(n){n._throwIfRoot("getDownloadURL");const e=function Qj(n,e,t){const i=Bd(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new ec(i,"GET",function Zj(n,e){return function t(r,i){const a=l1(n,i,e);return tc(null!==a),function Wj(n,e,t,r){const i=jR(e);if(null===i||!PD(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const l=encodeURIComponent;return a.split(",").map(w=>{const x=n.fullPath;return Bd("/b/"+l(n.bucket)+"/o/"+l(x),t,r)+r1({alt:"media",token:w})})[0]}(a,i,n.host,n._protocol)}}(n,t),l);return h.errorHandler=rE(e),h}(n.storage,n._location,nE());return n.storage.makeRequestWithTokens(e,yu).then(t=>{if(null===t)throw function _j(){return new br("no-download-url","The given file does not have any download URLs.")}();return t})}function I1(n,e){const t=function Bj(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new os(n._location.bucket,t);return new nm(n.storage,r)}function C1(n,e){if(n instanceof zR){const t=n;if(null==t._bucket)throw function gj(){return new br("no-default-bucket","No default bucket found. Did you set the '"+YO+"' property when initializing the app?")}();const r=new nm(t,t._bucket);return null!=e?C1(r,e):r}return void 0!==e?I1(n,e):n}function C$(n,e){if(e&&function E$(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof zR)return function I$(n,e){return new nm(n,e)}(n,e);throw Ry("To use ref(service, url), the first argument must be a Storage instance.")}return C1(n,e)}function b1(n,e){const t=e?.[YO];return null==t?null:os.makeFromBucketSpec(t,n)}class zR{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=ZO,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?os.makeFromBucketSpec(i,this._host):b1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?os.makeFromBucketSpec(this._url,e):b1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){VR("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){VR("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,pe.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,pe.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new nm(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new vj(e1());{const l=function Rj(n,e,t,r,i,a,l=!0){const h=r1(n.urlParams),_=n.url+h,w=Object.assign({},n.headers);return function Aj(n,e){e&&(n["X-Firebase-GMPID"]=e)}(w,e),function Tj(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(w,t),function Sj(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(w,a),function xj(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(w,r),new Dj(_,n.method,w,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}(e,this._appId,r,i,t,this._firebaseVersion,a);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,pe.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const D1="@firebase/storage";function A1(n,e){return C$(n=(0,P.m9)(n),e)}function k$(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new zR(t,r,i,e,pi.SDK_VERSION)}!function P$(){(0,pi._registerComponent)(new Ws.wA("storage",k$,"PUBLIC").setMultipleInstances(!0)),(0,pi.registerVersion)(D1,"0.10.1",""),(0,pi.registerVersion)(D1,"0.10.1","esm2017")}();class UD{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class R1{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new UD(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new UD(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?l=>t(new UD(l,this,this._ref)):{next:t.next?l=>t.next(new UD(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class M1{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new jd(e,this._service))}get items(){return this._delegate.items.map(e=>new jd(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class jd{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function N$(n,e){return I1(n,e)}(this._delegate,e);return new jd(t,this.storage)}get root(){return new jd(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new jd(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new R1(function D$(n,e,t){return function p$(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new y1(n,new Jl(e),t)}(n=(0,P.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Ro.RAW,r){this._throwIfRoot("putString");const i=BR(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new R1(new y1(this._delegate,new Jl(i.data,!0),a),this)}listAll(){return function x$(n){return function m$(n){const e={prefixes:[],items:[]};return w1(n,e).then(()=>e)}(n=(0,P.m9)(n))}(this._delegate).then(e=>new M1(e,this.storage))}list(e){return function A$(n,e){return E1(n=(0,P.m9)(n),e)}(this._delegate,e||void 0).then(t=>new M1(t,this.storage))}getMetadata(){return function T$(n){return function _$(n){n._throwIfRoot("getMetadata");const e=h1(n.storage,n._location,nE());return n.storage.makeRequestWithTokens(e,yu)}(n=(0,P.m9)(n))}(this._delegate)}updateMetadata(e){return function S$(n,e){return function y$(n,e){n._throwIfRoot("updateMetadata");const t=function Xj(n,e,t,r){const a=Bd(e.fullServerUrl(),n.host,n._protocol),h=$R(t,r),w=n.maxOperationRetryTime,b=new ec(a,"PATCH",LD(n,r),w);return b.headers={"Content-Type":"application/json; charset=utf-8"},b.body=h,b.errorHandler=rE(e),b}(n.storage,n._location,e,nE());return n.storage.makeRequestWithTokens(t,yu)}(n=(0,P.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function R$(n){return v$(n=(0,P.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function M$(n){return function w$(n){n._throwIfRoot("deleteObject");const e=function Jj(n,e){const r=Bd(e.fullServerUrl(),n.host,n._protocol),h=new ec(r,"DELETE",function l(_,w){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=rE(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,yu)}(n=(0,P.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw t1(e)}}class N1{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(k1(e))throw Ry("ref() expected a child path but got a URL, use refFromURL instead.");return new jd(A1(this._delegate,e),this)}refFromURL(e){if(!k1(e))throw Ry("refFromURL() expected a full URL but got a child path, use ref() instead.");try{os.makeFromUrl(e,this._delegate.host)}catch{throw Ry("refFromUrl() expected a valid full URL but got an invalid one.")}return new jd(A1(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function x1(n,e,t,r={}){!function b$(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,P.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function k1(n){return/^[A-Za-z]+:\/\//.test(n)}function V$(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new N1(t,r)}function P1(n){const e=function B$(n){return new Jn.y(e=>{const t=l=>e.next(l);t(n.snapshot);const a=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){a()}}).pipe(function ij(n,e=Vh.z){return(0,Rr.e)((t,r)=>{let i=null,a=null,l=null;const h=()=>{if(i){i.unsubscribe(),i=null;const w=a;a=null,r.next(w)}};function _(){const w=l+n,b=e.now();if(b<w)return i=this.schedule(void 0,w-b),void r.add(i);h()}t.subscribe((0,_e.x)(r,w=>{a=w,l=e.now(),i||(i=e.schedule(_,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,T.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function BD(n){return{getDownloadURL:()=>rt(void 0).pipe(rn.fc,Hn(()=>n.getDownloadURL()),rn.iC),getMetadata:()=>rt(void 0).pipe(rn.fc,Hn(()=>n.getMetadata()),rn.iC),delete:()=>(0,nn.D)(n.delete()),child:e=>BD(n.child(e)),updateMetadata:e=>(0,nn.D)(n.updateMetadata(e)),put:(e,t)=>P1(n.put(e,t)),putString:(e,t,r)=>P1(n.putString(e,t,r)),list:e=>(0,nn.D)(n.list(e)),listAll:()=>(0,nn.D)(n.listAll())}}!function U$(n){const e={TaskState:ks,TaskEvent:i$,StringFormat:Ro,Storage:N1,Reference:jd};n.INTERNAL.registerComponent(new Ws.wA("storage-compat",V$,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.2.1")}(Xp.Z);const j$=new p.OlP("angularfire2.storageBucket"),$$=new p.OlP("angularfire2.storage.maxUploadRetryTime"),H$=new p.OlP("angularfire2.storage.maxOperationRetryTime"),G$=new p.OlP("angularfire2.storage.use-emulator");let W$=(()=>{class n{constructor(t,r,i,a,l,h,_,w,b,x){const k=(0,hr.on)(t,l,r);this.storage=(0,hr.cc)(`${k.name}.storage.${i}`,"AngularFireStorage",k.name,()=>{const U=l.runOutsideAngular(()=>k.storage(i||void 0)),W=b;return W&&U.useEmulator(...W),_&&U.setMaxUploadRetryTime(_),w&&U.setMaxOperationRetryTime(w),U},[_,w])}ref(t){return BD(this.storage.ref(t))}refFromURL(t){return BD(this.storage.refFromURL(t))}upload(t,r,i){return BD(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(hr.Dh),p.LFG(hr.xv,8),p.LFG(j$,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(rn.HU),p.LFG($$,8),p.LFG(H$,8),p.LFG(G$,8),p.LFG(U0,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),z$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})(),q$=(()=>{class n{constructor(){gD.Z.registerVersion("angularfire",rn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[W$],imports:[z$]}),n})();var K$=F(5032);const O1="@firebase/database";let qR="";function L1(n){qR=n}class Q${constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,P.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,P.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class X${constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,P.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const V1=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Q$(e)}}catch{}return new X$},rm=V1("localStorage"),KR=V1("sessionStorage"),ky=new Cs.Yd("@firebase/database"),U1=function(){let n=1;return function(){return n++}}(),B1=function(n){const e=(0,P.dS)(n),t=new P.gQ;t.update(e);const r=t.digest();return P.US.encodeByteArray(r)},iE=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=iE.apply(null,r):e+="object"==typeof r?(0,P.Wl)(r):r,e+=" "}return e};let im=null,j1=!0;const $1=function(n,e){(0,P.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(ky.logLevel=Cs.in.VERBOSE,im=ky.log.bind(ky),e&&KR.set("logging_enabled",!0)):"function"==typeof n?im=n:(im=null,KR.remove("logging_enabled"))},Mi=function(...n){if(!0===j1&&(j1=!1,null===im&&!0===KR.get("logging_enabled")&&$1(!0)),im){const e=iE.apply(null,n);im(e)}},sE=function(n){return function(...e){Mi(n,...e)}},ZR=function(...n){const e="FIREBASE INTERNAL ERROR: "+iE(...n);ky.error(e)},nc=function(...n){const e=`FIREBASE FATAL ERROR: ${iE(...n)}`;throw ky.error(e),new Error(e)},as=function(...n){const e="FIREBASE WARNING: "+iE(...n);ky.warn(e)},jD=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},jf="[MIN_NAME]",$d="[MAX_NAME]",sm=function(n,e){if(n===e)return 0;if(n===jf||e===$d)return-1;if(e===jf||n===$d)return 1;{const t=W1(n),r=W1(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},tH=function(n,e){return n===e?0:n<e?-1:1},oE=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,P.Wl)(e))},YR=function(n){if("object"!=typeof n||null===n)return(0,P.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,P.Wl)(e[r]),t+=":",t+=YR(n[e[r]]);return t+="}",t},H1=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Ni(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const G1=function(n){(0,P.hu)(!jD(n),"Invalid JSON number");const r=1023;let i,a,l,h,_;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=h+r,l=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const w=[];for(_=52;_;_-=1)w.push(l%2?1:0),l=Math.floor(l/2);for(_=11;_;_-=1)w.push(a%2?1:0),a=Math.floor(a/2);w.push(i?1:0),w.reverse();const b=w.join("");let x="";for(_=0;_<64;_+=8){let k=parseInt(b.substr(_,8),2).toString(16);1===k.length&&(k="0"+k),x+=k}return x.toLowerCase()},sH=new RegExp("^-?(0*)\\d{1,10}$"),W1=function(n){if(sH.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Py=function(n){try{n()}catch(e){setTimeout(()=>{throw as("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},aE=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class lH{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){as(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class cH{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Mi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',as(e)}}let uE=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const Y1=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,J1="websocket",eF="long_polling";class XR{constructor(e,t,r,i,a=!1,l="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=rm.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&rm.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function tF(n,e,t){let r;if((0,P.hu)("string"==typeof e,"typeof type must == string"),(0,P.hu)("object"==typeof t,"typeof params must == object"),e===J1)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==eF)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function dH(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Ni(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class hH{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,P.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,P.p$)(this.counters_)}}const JR={},eM={};function tM(n){const e=n.toString();return JR[e]||(JR[e]=new hH),JR[e]}class pH{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Py(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class $f{constructor(e,t,r,i,a,l,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=sE(e),this.stats_=tM(t),this.urlFn=_=>(this.appCheckToken&&(_.ac=this.appCheckToken),tF(t,eF,_))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new pH(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,P.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new nM((...a)=>{const[l,h,_,w,b]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=h,this.password=_;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Y1.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){$f.forceAllow_=!0}static forceDisallow(){$f.forceDisallow_=!0}static isAvailable(){return!((0,P.Yr)()||!$f.forceAllow_&&($f.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,P.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,P.h$)(t),i=H1(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,P.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,P.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class nM{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,P.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=U1(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=nM.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(h){Mi("frame writing exception"),h.stack&&Mi(h.stack),Mi(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Mi("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,P.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Mi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let HD=null;typeof MozWebSocket<"u"?HD=MozWebSocket:typeof WebSocket<"u"&&(HD=WebSocket);let Oy=(()=>{class n{constructor(t,r,i,a,l,h,_){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=sE(this.connId),this.stats_=tM(r),this.connURL=n.connectionURL_(r,h,_,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,l){const h={v:"5"};return!(0,P.Yr)()&&typeof location<"u"&&location.hostname&&Y1.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),a&&(h.ac=a),l&&(h.p=l),tF(t,J1,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,rm.set("previous_websocket_failure",!0);try{let i;if((0,P.Yr)()){i={headers:{"User-Agent":`Firebase/5/${qR}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,h=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;h&&(i.proxy={origin:h})}this.mySock=new HD(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==HD&&!n.forceDisallow_}static previouslyFailed(){return rm.isInMemoryStorage||!0===rm.get("previous_websocket_failure")}markConnectionHealthy(){rm.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,P.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,P.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,P.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=H1(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),uF=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[$f,Oy]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Oy&&Oy.isAvailable();let i=r&&!Oy.previouslyFailed();if(t.webSocketOnly&&(r||as("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Oy];else{const a=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class gF{constructor(e,t,r,i,a,l,h,_,w,b){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=h,this.onDisconnect_=_,this.onKill_=w,this.lastSessionId=b,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=sE("c:"+this.id+":"),this.transportManager_=new uF(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=aE(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=oE("t",e),r=oE("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=oE("t",e),r=oE("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=oE("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?ZR("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ZR("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&as("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),aE(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):aE(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(rm.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class mF{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class _F{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,P.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,P.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class GD extends _F{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,P.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new GD}getInitialEvent(e){return(0,P.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class bn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function yn(){return new bn("")}function sn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Hf(n){return n.pieces_.length-n.pieceNum_}function Un(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new bn(n.pieces_,e)}function iM(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function lE(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function wF(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new bn(e,0)}function mr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof bn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new bn(t,0)}function on(n){return n.pieceNum_>=n.pieces_.length}function Ps(n,e){const t=sn(n),r=sn(e);if(null===t)return e;if(t===r)return Ps(Un(n),Un(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function FH(n,e){const t=lE(n,0),r=lE(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=sm(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function sM(n,e){if(Hf(n)!==Hf(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Ea(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Hf(n)>Hf(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class LH{constructor(e,t){this.errorPrefix_=t,this.parts_=lE(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,P.ug)(this.parts_[r]);EF(this)}}function EF(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+om(n))}function om(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class oM extends _F{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new oM}getInitialEvent(e){return(0,P.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const cE=1e3;let zD,am=(()=>{class n extends mF{constructor(t,r,i,a,l,h,_,w){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=h,this.appCheckTokenProvider_=_,this.authOverride_=w,this.id=n.nextPersistentConnectionId_++,this.log_=sE("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=cE,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,w&&!(0,P.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");oM.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&GD.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,P.Wl)(l)),(0,P.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new P.BH,a={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:h=>{const _=h.d;"ok"===h.s?r.resolve(_):r.reject(_)}};return this.outstandingGets_.push(a),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+l),this.listens.has(h)||this.listens.set(h,new Map),(0,P.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,P.hu)(!this.listens.get(h).has(l),"listen() called twice for same path/queryId.");const _={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(h).set(l,_),this.connected_&&this.sendListen_(_)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,_=>{const w=_.d,b=_.s;n.warnOnListenWarnings_(w,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",_),"ok"!==b&&this.removeListen_(i,a),t.onComplete&&t.onComplete(b,w))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,P.r3)(t,"w")){const i=(0,P.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();as(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,P.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,P.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,h=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,P.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,h=>{a&&setTimeout(()=>{a(h.s,h.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const h={p:r,d:i};void 0!==l&&(h.h=l),this.outstandingPuts_.push({action:t,request:h,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,P.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):ZR("Unrecognized action received from server: "+(0,P.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,P.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=cE,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=cE,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=cE),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,pe.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let _=!1,w=null;const b=function(){w?w.close():(_=!0,a())};t.realtime_={close:b,sendRequest:function(U){(0,P.hu)(w,"sendRequest call when we're not connected not allowed."),w.sendRequest(U)}};const k=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[U,W]=yield Promise.all([t.authTokenProvider_.getToken(k),t.appCheckTokenProvider_.getToken(k)]);_?Mi("getToken() completed but was canceled"):(Mi("getToken() completed. Creating connection."),t.authToken_=U&&U.accessToken,t.appCheckToken_=W&&W.token,w=new gF(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,ae=>{as(ae+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(U){t.log_("Failed to get token: "+U),_||(t.repoInfo_.nodeAdmin&&as(U),b())}}})()}interrupt(t){Mi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Mi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,P.xb)(this.interruptReasons_)&&(this.reconnectDelay_=cE,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>YR(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new bn(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Mi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Mi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,P.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+qR.replace(/\./g,"-")]=1,(0,P.uI)()?t["framework.cordova"]=1:(0,P.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=GD.getInstance().currentlyOnline();return(0,P.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class cn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new cn(e,t)}}class WD{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new cn(jf,e),i=new cn(jf,t);return 0!==this.compare(r,i)}minPost(){return cn.MIN}}class bF extends WD{static get __EMPTY_NODE(){return zD}static set __EMPTY_NODE(e){zD=e}compare(e,t){return sm(e.name,t.name)}isDefinedOn(e){throw(0,P.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return cn.MIN}maxPost(){return new cn($d,zD)}makePost(e,t){return(0,P.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new cn(e,zD)}toString(){return".key"}}const rc=new bF;class qD{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let uM,vu=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??Js.EMPTY_NODE,this.right=l??Js.EMPTY_NODE}copy(t,r,i,a,l){return new n(t??this.key,r??this.value,i??this.color,a??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return Js.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Js.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Js{constructor(e,t=Js.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Js(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,vu.BLACK,null,null))}remove(e){return new Js(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,vu.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new qD(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new qD(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new qD(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new qD(this.root_,null,this.comparator_,!0,e)}}function WH(n,e){return sm(n.name,e.name)}function aM(n,e){return sm(n,e)}Js.EMPTY_NODE=new class GH{copy(e,t,r,i,a){return this}insert(e,t,r){return new vu(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const DF=function(n){return"number"==typeof n?"number:"+G1(n):"string:"+n},TF=function(n){if(n.isLeafNode()){const e=n.val();(0,P.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,P.r3)(e,".sv"),"Priority must be a string or number.")}else(0,P.hu)(n===uM||n.isEmpty(),"priority of unexpected type.");(0,P.hu)(n===uM||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let SF,AF,xF,Fy=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,P.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),TF(this.priorityNode_)}static set __childrenNodeConstructor(t){SF=t}static get __childrenNodeConstructor(){return SF}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return on(t)?this:".priority"===sn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=sn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,P.hu)(".priority"!==i||1===Hf(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Un(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+DF(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?G1(this.value_):this.value_,this.lazyHash_=B1(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,P.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,P.hu)(a>=0,"Unknown leaf type: "+r),(0,P.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Kn=new class ZH extends WD{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?sm(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return cn.MIN}maxPost(){return new cn($d,new Fy("[PRIORITY-POST]",xF))}makePost(e,t){const r=AF(e);return new cn(t,new Fy("[PRIORITY-POST]",r))}toString(){return".priority"}},YH=Math.log(2);class QH{constructor(e){this.count=parseInt(Math.log(e+1)/YH,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const KD=function(n,e,t,r){n.sort(e);const i=function(_,w){const b=w-_;let x,k;if(0===b)return null;if(1===b)return x=n[_],k=t?t(x):x,new vu(k,x.node,vu.BLACK,null,null);{const U=parseInt(b/2,10)+_,W=i(_,U),ae=i(U+1,w);return x=n[U],k=t?t(x):x,new vu(k,x.node,vu.BLACK,W,ae)}},h=function(_){let w=null,b=null,x=n.length;const k=function(W,ae){const ve=x-W,pt=x;x-=W;const _t=i(ve+1,pt),st=n[ve],dt=t?t(st):st;U(new vu(dt,st.node,ae,null,_t))},U=function(W){w?(w.left=W,w=W):(b=W,w=W)};for(let W=0;W<_.count;++W){const ae=_.nextBitIsOne(),ve=Math.pow(2,_.count-(W+1));ae?k(ve,vu.BLACK):(k(ve,vu.BLACK),k(ve,vu.RED))}return b}(new QH(n.length));return new Js(r||e,h)};let lM;const Ly={};class Hd{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,P.hu)(Ly&&Kn,"ChildrenNode.ts has not been loaded"),lM=lM||new Hd({".priority":Ly},{".priority":Kn}),lM}get(e){const t=(0,P.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Js?t:null}hasIndex(e){return(0,P.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,P.hu)(e!==rc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(cn.Wrap);let h,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();h=i?KD(r,e.getCompare()):Ly;const _=e.toString(),w=Object.assign({},this.indexSet_);w[_]=e;const b=Object.assign({},this.indexes_);return b[_]=h,new Hd(b,w)}addToIndexes(e,t){const r=(0,P.UI)(this.indexes_,(i,a)=>{const l=(0,P.DV)(this.indexSet_,a);if((0,P.hu)(l,"Missing index implementation for "+a),i===Ly){if(l.isDefinedOn(e.node)){const h=[],_=t.getIterator(cn.Wrap);let w=_.getNext();for(;w;)w.name!==e.name&&h.push(w),w=_.getNext();return h.push(e),KD(h,l.getCompare())}return Ly}{const h=t.get(e.name);let _=i;return h&&(_=_.remove(new cn(e.name,h))),_.insert(e,e.node)}});return new Hd(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,P.UI)(this.indexes_,i=>{if(i===Ly)return i;{const a=t.get(e.name);return a?i.remove(new cn(e.name,a)):i}});return new Hd(r,this.indexSet_)}}let dE,Zt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&TF(this.priorityNode_),this.children_.isEmpty()&&(0,P.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return dE||(dE=new n(new Js(aM),null,Hd.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||dE}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?dE:r}}getChild(t){const r=sn(t);return null===r?this:this.getImmediateChild(r).getChild(Un(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,P.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new cn(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const h=a.isEmpty()?dE:this.priorityNode_;return new n(a,h,l)}}updateChild(t,r){const i=sn(t);if(null===i)return r;{(0,P.hu)(".priority"!==sn(t)||1===Hf(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Un(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(Kn,(h,_)=>{r[h]=_.val(t),i++,l&&n.INTEGER_REGEXP_.test(h)?a=Math.max(a,Number(h)):l=!1}),!t&&l&&a<2*i){const h=[];for(const _ in r)h[_]=r[_];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+DF(this.getPriority().val())+":"),this.forEachChild(Kn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":B1(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new cn(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new cn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new cn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,cn.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,cn.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===hE?-1:0}withIndex(t){if(t===rc||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===rc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Kn),a=r.getIterator(Kn);let l=i.getNext(),h=a.getNext();for(;l&&h;){if(l.name!==h.name||!l.node.equals(h.node))return!1;l=i.getNext(),h=a.getNext()}return null===l&&null===h}return!1}return!1}}resolveIndex_(t){return t===rc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const hE=new class XH extends Zt{constructor(){super(new Js(aM),Zt.EMPTY_NODE,Hd.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Zt.EMPTY_NODE}isEmpty(){return!1}};function Dr(n,e=null){if(null===n)return Zt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,P.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Fy(n,Dr(e));if(n instanceof Array){let t=Zt.EMPTY_NODE;return Ni(n,(r,i)=>{if((0,P.r3)(n,r)&&"."!==r.substring(0,1)){const a=Dr(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Dr(e))}{const t=[];let r=!1;if(Ni(n,(l,h)=>{if("."!==l.substring(0,1)){const _=Dr(h);_.isEmpty()||(r=r||!_.getPriority().isEmpty(),t.push(new cn(l,_)))}}),0===t.length)return Zt.EMPTY_NODE;const a=KD(t,WH,l=>l.name,aM);if(r){const l=KD(t,Kn.getCompare());return new Zt(a,Dr(e),new Hd({".priority":l},{".priority":Kn}))}return new Zt(a,Dr(e),Hd.Default)}}Object.defineProperties(cn,{MIN:{value:new cn(jf,Zt.EMPTY_NODE)},MAX:{value:new cn($d,hE)}}),bF.__EMPTY_NODE=Zt.EMPTY_NODE,Fy.__childrenNodeConstructor=Zt,function zH(n){uM=n}(hE),function KH(n){xF=n}(hE),function qH(n){AF=n}(Dr);class cM extends WD{constructor(e){super(),this.indexPath_=e,(0,P.hu)(!on(e)&&".priority"!==sn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?sm(e.name,t.name):a}makePost(e,t){const r=Dr(e),i=Zt.EMPTY_NODE.updateChild(this.indexPath_,r);return new cn(t,i)}maxPost(){const e=Zt.EMPTY_NODE.updateChild(this.indexPath_,hE);return new cn($d,e)}toString(){return lE(this.indexPath_,0).join("/")}}const dM=new class eG extends WD{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?sm(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return cn.MIN}maxPost(){return cn.MAX}makePost(e,t){const r=Dr(e);return new cn(t,r)}toString(){return".value"}};function RF(n){return{type:"value",snapshotNode:n}}function Vy(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function fE(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function pE(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class hM{constructor(e){this.index_=e}updateChild(e,t,r,i,a,l){(0,P.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(fE(t,h)):(0,P.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?l.trackChildChange(Vy(t,r)):l.trackChildChange(pE(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Kn,(i,a)=>{t.hasChild(i)||r.trackChildChange(fE(i,a))}),t.isLeafNode()||t.forEachChild(Kn,(i,a)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(a)||r.trackChildChange(pE(i,a,l))}else r.trackChildChange(Vy(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Zt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class gE{constructor(e){this.indexedFilter_=new hM(e.getIndex()),this.index_=e.getIndex(),this.startPost_=gE.getStartPost_(e),this.endPost_=gE.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,a,l){return this.matches(new cn(t,r))||(r=Zt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Zt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Zt.EMPTY_NODE);const a=this;return t.forEachChild(Kn,(l,h)=>{a.matches(new cn(l,h))||(i=i.updateImmediateChild(l,Zt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class nG{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new gE(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,a,l){return this.rangedFilter_.matches(new cn(t,r))||(r=Zt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,l):this.fullLimitUpdateChild_(e,t,r,a,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Zt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=Zt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const h=a.getNext();if(this.withinDirectionalStart(h)){if(!this.withinDirectionalEnd(h))break;i=i.updateImmediateChild(h.name,h.node),l++}}}else{let a;i=t.withIndex(this.index_),i=i.updatePriority(Zt.EMPTY_NODE),a=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let l=0;for(;a.hasNext();){const h=a.getNext();l<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?l++:i=i.updateImmediateChild(h.name,Zt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let l;if(this.reverse_){const x=this.index_.getCompare();l=(k,U)=>x(U,k)}else l=this.index_.getCompare();const h=e;(0,P.hu)(h.numChildren()===this.limit_,"");const _=new cn(t,r),w=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),b=this.rangedFilter_.matches(_);if(h.hasChild(t)){const x=h.getImmediateChild(t);let k=i.getChildAfterChild(this.index_,w,this.reverse_);for(;null!=k&&(k.name===t||h.hasChild(k.name));)k=i.getChildAfterChild(this.index_,k,this.reverse_);const U=null==k?1:l(k,_);if(b&&!r.isEmpty()&&U>=0)return a?.trackChildChange(pE(t,r,x)),h.updateImmediateChild(t,r);{a?.trackChildChange(fE(t,x));const ae=h.updateImmediateChild(t,Zt.EMPTY_NODE);return null!=k&&this.rangedFilter_.matches(k)?(a?.trackChildChange(Vy(k.name,k.node)),ae.updateImmediateChild(k.name,k.node)):ae}}return r.isEmpty()?e:b&&l(w,_)>=0?(null!=a&&(a.trackChildChange(fE(w.name,w.node)),a.trackChildChange(Vy(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(w.name,Zt.EMPTY_NODE)):e}}class ZD{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Kn}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,P.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,P.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:jf}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,P.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,P.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:$d}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,P.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Kn}copy(){const e=new ZD;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function fM(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function pM(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function YD(n,e){const t=n.copy();return t.index_=e,t}function MF(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Kn?t="$priority":n.index_===dM?t="$value":n.index_===rc?t="$key":((0,P.hu)(n.index_ instanceof cM,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,P.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,P.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,P.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,P.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,P.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function NF(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Kn&&(e.i=n.index_.toString()),e}class QD extends mF{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=sE("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,P.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=QD.getListenId_(e,r),h={};this.listens_[l]=h;const _=MF(e._queryParams);this.restRequest_(a+".json",_,(w,b)=>{let x=b;if(404===w&&(x=null,w=null),null===w&&this.onDataUpdate_(a,x,!1,r),(0,P.DV)(this.listens_,l)===h){let k;k=w?401===w?"permission_denied":"rest_error:"+w:"ok",i(k,null)}})}unlisten(e,t){const r=QD.getListenId_(e,t);delete this.listens_[r]}get(e){const t=MF(e._queryParams),r=e._path.toString(),i=new P.BH;return this.restRequest_(r+".json",t,(a,l)=>{let h=l;404===a&&(h=null,a=null),null===a?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,P.xO)(t);this.log_("Sending REST request for "+l);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);let _=null;if(h.status>=200&&h.status<300){try{_=(0,P.cI)(h.responseText)}catch{as("Failed to parse JSON response for "+l+": "+h.responseText)}r(null,_)}else 401!==h.status&&404!==h.status&&as("Got unsuccessful REST response for "+l+" Status: "+h.status),r(h.status);r=null}},h.open("GET",l,!0),h.send()})}}class uG{constructor(){this.rootNode_=Zt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function XD(){return{value:null,children:new Map}}function Uy(n,e,t){if(on(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=sn(e);n.children.has(r)||n.children.set(r,XD()),Uy(n.children.get(r),e=Un(e),t)}}function gM(n,e){if(on(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Kn,(r,i)=>{Uy(n,new bn(r),i)}),gM(n,e)}}if(n.children.size>0){const t=sn(e);return e=Un(e),n.children.has(t)&&gM(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function mM(n,e,t){null!==n.value?t(e,n.value):function lG(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{mM(i,new bn(e.toString()+"/"+r),t)})}class cG{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Ni(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class fG{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new cG(e);const r=1e4+2e4*Math.random();aE(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Ni(e,(i,a)=>{a>0&&(0,P.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),aE(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ia=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Ia||(Ia={})),Ia))();function vM(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class JD{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Ia.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(on(this.path)){if(null!=this.affectedTree.value)return(0,P.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new bn(e));return new JD(yn(),t,this.revert)}}return(0,P.hu)(sn(this.path)===e,"operationForChild called for unrelated child."),new JD(Un(this.path),this.affectedTree,this.revert)}}class mE{constructor(e,t){this.source=e,this.path=t,this.type=Ia.LISTEN_COMPLETE}operationForChild(e){return on(this.path)?new mE(this.source,yn()):new mE(this.source,Un(this.path))}}class um{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Ia.OVERWRITE}operationForChild(e){return on(this.path)?new um(this.source,yn(),this.snap.getImmediateChild(e)):new um(this.source,Un(this.path),this.snap)}}class By{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Ia.MERGE}operationForChild(e){if(on(this.path)){const t=this.children.subtree(new bn(e));return t.isEmpty()?null:t.value?new um(this.source,yn(),t.value):new By(this.source,yn(),t)}return(0,P.hu)(sn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new By(this.source,Un(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Gf{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(on(e))return this.isFullyInitialized()&&!this.filtered_;const t=sn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class pG{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function _E(n,e,t,r,i,a){const l=r.filter(h=>h.type===t);l.sort((h,_)=>function _G(n,e,t){if(null==e.childName||null==t.childName)throw(0,P.g5)("Should only compare child_ events.");const r=new cn(e.childName,e.snapshotNode),i=new cn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,_)),l.forEach(h=>{const _=function mG(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,a);i.forEach(w=>{w.respondsTo(h.type)&&e.push(w.createEvent(_,n.query_))})})}function eT(n,e){return{eventCache:n,serverCache:e}}function yE(n,e,t,r){return eT(new Gf(e,t,r),n.serverCache)}function PF(n,e,t,r){return eT(n.eventCache,new Gf(e,t,r))}function tT(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function lm(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let wM;class Zn{constructor(e,t=(()=>(wM||(wM=new Js(tH)),wM))()){this.value=e,this.children=t}static fromObject(e){let t=new Zn(null);return Ni(e,(r,i)=>{t=t.set(new bn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:yn(),value:this.value};if(on(e))return null;{const r=sn(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Un(e),t);return null!=a?{path:mr(new bn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(on(e))return this;{const t=sn(e),r=this.children.get(t);return null!==r?r.subtree(Un(e)):new Zn(null)}}set(e,t){if(on(e))return new Zn(t,this.children);{const r=sn(e),a=(this.children.get(r)||new Zn(null)).set(Un(e),t),l=this.children.insert(r,a);return new Zn(this.value,l)}}remove(e){if(on(e))return this.children.isEmpty()?new Zn(null):new Zn(null,this.children);{const t=sn(e),r=this.children.get(t);if(r){const i=r.remove(Un(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new Zn(null):new Zn(this.value,a)}return this}}get(e){if(on(e))return this.value;{const t=sn(e),r=this.children.get(t);return r?r.get(Un(e)):null}}setTree(e,t){if(on(e))return t;{const r=sn(e),a=(this.children.get(r)||new Zn(null)).setTree(Un(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new Zn(this.value,l)}}fold(e){return this.fold_(yn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(mr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,yn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(on(e))return null;{const a=sn(e),l=this.children.get(a);return l?l.findOnPath_(Un(e),mr(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,yn(),t)}foreachOnPath_(e,t,r){if(on(e))return this;{this.value&&r(t,this.value);const i=sn(e),a=this.children.get(i);return a?a.foreachOnPath_(Un(e),mr(t,i),r):new Zn(null)}}foreach(e){this.foreach_(yn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(mr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class wu{constructor(e){this.writeTree_=e}static empty(){return new wu(new Zn(null))}}function vE(n,e,t){if(on(e))return new wu(new Zn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=Ps(i,e);return a=a.updateChild(l,t),new wu(n.writeTree_.set(i,a))}{const i=new Zn(t),a=n.writeTree_.setTree(e,i);return new wu(a)}}}function EM(n,e,t){let r=n;return Ni(t,(i,a)=>{r=vE(r,mr(e,i),a)}),r}function OF(n,e){if(on(e))return wu.empty();{const t=n.writeTree_.setTree(e,new Zn(null));return new wu(t)}}function IM(n,e){return null!=cm(n,e)}function cm(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Ps(t.path,e)):null}function FF(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Kn,(r,i)=>{e.push(new cn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new cn(r,i.value))}),e}function Wf(n,e){if(on(e))return n;{const t=cm(n,e);return new wu(null!=t?new Zn(t):n.writeTree_.subtree(e))}}function CM(n){return n.writeTree_.isEmpty()}function jy(n,e){return LF(yn(),n.writeTree_,e)}function LF(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,P.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=LF(mr(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(mr(n,".priority"),r)),t}}function nT(n,e){return $F(e,n)}function CG(n,e){if(n.snap)return Ea(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Ea(mr(n.path,t),e))return!0;return!1}function DG(n){return n.visible}function VF(n,e,t){let r=wu.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let h;if(a.snap)Ea(t,l)?(h=Ps(t,l),r=vE(r,h,a.snap)):Ea(l,t)&&(h=Ps(l,t),r=vE(r,yn(),a.snap.getChild(h)));else{if(!a.children)throw(0,P.g5)("WriteRecord should have .snap or .children");if(Ea(t,l))h=Ps(t,l),r=EM(r,h,a.children);else if(Ea(l,t))if(h=Ps(l,t),on(h))r=EM(r,yn(),a.children);else{const _=(0,P.DV)(a.children,sn(h));if(_){const w=_.getChild(Un(h));r=vE(r,yn(),w)}}}}}return r}function UF(n,e,t,r,i){if(r||i){const a=Wf(n.visibleWrites,e);return!i&&CM(a)?t:i||null!=t||IM(a,yn())?jy(VF(n.allWrites,function(w){return(w.visible||i)&&(!r||!~r.indexOf(w.writeId))&&(Ea(w.path,e)||Ea(e,w.path))},e),t||Zt.EMPTY_NODE):null}{const a=cm(n.visibleWrites,e);if(null!=a)return a;{const l=Wf(n.visibleWrites,e);return CM(l)?t:null!=t||IM(l,yn())?jy(l,t||Zt.EMPTY_NODE):null}}}function rT(n,e,t,r){return UF(n.writeTree,n.treePath,e,t,r)}function bM(n,e){return function TG(n,e,t){let r=Zt.EMPTY_NODE;const i=cm(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Kn,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=Wf(n.visibleWrites,e);return t.forEachChild(Kn,(l,h)=>{const _=jy(Wf(a,new bn(l)),h);r=r.updateImmediateChild(l,_)}),FF(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return FF(Wf(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function BF(n,e,t,r){return function SG(n,e,t,r,i){(0,P.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=mr(e,t);if(IM(n.visibleWrites,a))return null;{const l=Wf(n.visibleWrites,a);return CM(l)?i.getChild(t):jy(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function iT(n,e){return function xG(n,e){return cm(n.visibleWrites,e)}(n.writeTree,mr(n.treePath,e))}function DM(n,e,t){return function AG(n,e,t,r){const i=mr(e,t),a=cm(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?jy(Wf(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function jF(n,e){return $F(mr(n.treePath,e),n.writeTree)}function $F(n,e){return{treePath:n,writeTree:e}}class kG{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,P.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,P.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,pE(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,fE(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,Vy(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,P.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,pE(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const HF=new class PG{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class TM{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Gf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return DM(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:lm(this.viewCache_),a=function NG(n,e,t,r,i,a){return function RG(n,e,t,r,i,a,l){let h;const _=Wf(n.visibleWrites,e),w=cm(_,yn());if(null!=w)h=w;else{if(null==t)return[];h=jy(_,t)}if(h=h.withIndex(l),h.isEmpty()||h.isLeafNode())return[];{const b=[],x=l.getCompare(),k=a?h.getReverseIteratorFrom(r,l):h.getIteratorFrom(r,l);let U=k.getNext();for(;U&&b.length<i;)0!==x(U,r)&&b.push(U),U=k.getNext();return b}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function GF(n,e,t,r,i,a){const l=e.eventCache;if(null!=iT(r,t))return e;{let h,_;if(on(t))if((0,P.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const w=lm(e),x=bM(r,w instanceof Zt?w:Zt.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),x,a)}else{const w=rT(r,lm(e));h=n.filter.updateFullNode(e.eventCache.getNode(),w,a)}else{const w=sn(t);if(".priority"===w){(0,P.hu)(1===Hf(t),"Can't have a priority with additional path components");const b=l.getNode();_=e.serverCache.getNode();const x=BF(r,t,b,_);h=null!=x?n.filter.updatePriority(b,x):l.getNode()}else{const b=Un(t);let x;if(l.isCompleteForChild(w)){_=e.serverCache.getNode();const k=BF(r,t,l.getNode(),_);x=null!=k?l.getNode().getImmediateChild(w).updateChild(b,k):l.getNode().getImmediateChild(w)}else x=DM(r,w,e.serverCache);h=null!=x?n.filter.updateChild(l.getNode(),w,x,b,i,a):l.getNode()}}return yE(e,h,l.isFullyInitialized()||on(t),n.filter.filtersNodes())}}function sT(n,e,t,r,i,a,l,h){const _=e.serverCache;let w;const b=l?n.filter:n.filter.getIndexedFilter();if(on(t))w=b.updateFullNode(_.getNode(),r,null);else if(b.filtersNodes()&&!_.isFiltered()){const U=_.getNode().updateChild(t,r);w=b.updateFullNode(_.getNode(),U,null)}else{const U=sn(t);if(!_.isCompleteForPath(t)&&Hf(t)>1)return e;const W=Un(t),ve=_.getNode().getImmediateChild(U).updateChild(W,r);w=".priority"===U?b.updatePriority(_.getNode(),ve):b.updateChild(_.getNode(),U,ve,W,HF,null)}const x=PF(e,w,_.isFullyInitialized()||on(t),b.filtersNodes());return GF(n,x,t,i,new TM(i,x,a),h)}function SM(n,e,t,r,i,a,l){const h=e.eventCache;let _,w;const b=new TM(i,e,a);if(on(t))w=n.filter.updateFullNode(e.eventCache.getNode(),r,l),_=yE(e,w,!0,n.filter.filtersNodes());else{const x=sn(t);if(".priority"===x)w=n.filter.updatePriority(e.eventCache.getNode(),r),_=yE(e,w,h.isFullyInitialized(),h.isFiltered());else{const k=Un(t),U=h.getNode().getImmediateChild(x);let W;if(on(k))W=r;else{const ae=b.getCompleteChild(x);W=null!=ae?".priority"===iM(k)&&ae.getChild(wF(k)).isEmpty()?ae:ae.updateChild(k,r):Zt.EMPTY_NODE}_=U.equals(W)?e:yE(e,n.filter.updateChild(h.getNode(),x,W,k,b,l),h.isFullyInitialized(),n.filter.filtersNodes())}}return _}function WF(n,e){return n.eventCache.isCompleteForChild(e)}function zF(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function AM(n,e,t,r,i,a,l,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let w,_=e;w=on(t)?r:new Zn(null).setTree(t,r);const b=e.serverCache.getNode();return w.children.inorderTraversal((x,k)=>{if(b.hasChild(x)){const W=zF(0,e.serverCache.getNode().getImmediateChild(x),k);_=sT(n,_,new bn(x),W,i,a,l,h)}}),w.children.inorderTraversal((x,k)=>{const U=!e.serverCache.isCompleteForChild(x)&&null===k.value;if(!b.hasChild(x)&&!U){const ae=zF(0,e.serverCache.getNode().getImmediateChild(x),k);_=sT(n,_,new bn(x),ae,i,a,l,h)}}),_}class HG{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new hM(r.getIndex()),a=function rG(n){return n.loadsAllData()?new hM(n.getIndex()):n.hasLimit()?new nG(n):new gE(n)}(r);this.processor_=function OG(n){return{filter:n}}(a);const l=t.serverCache,h=t.eventCache,_=i.updateFullNode(Zt.EMPTY_NODE,l.getNode(),null),w=a.updateFullNode(Zt.EMPTY_NODE,h.getNode(),null),b=new Gf(_,l.isFullyInitialized(),i.filtersNodes()),x=new Gf(w,h.isFullyInitialized(),a.filtersNodes());this.viewCache_=eT(x,b),this.eventGenerator_=new pG(this.query_)}get query(){return this.query_}}function zG(n,e){const t=lm(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!on(e)&&!t.getImmediateChild(sn(e)).isEmpty())?t.getChild(e):null}function qF(n){return 0===n.eventRegistrations_.length}function KF(n,e,t){const r=[];if(t){(0,P.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const l=n.eventRegistrations_[a];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function ZF(n,e,t,r){e.type===Ia.MERGE&&null!==e.source.queryId&&((0,P.hu)(lm(n.viewCache_),"We should always have a full cache before handling merges"),(0,P.hu)(tT(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function LG(n,e,t,r,i){const a=new kG;let l,h;if(t.type===Ia.OVERWRITE){const w=t;w.source.fromUser?l=SM(n,e,w.path,w.snap,r,i,a):((0,P.hu)(w.source.fromServer,"Unknown source."),h=w.source.tagged||e.serverCache.isFiltered()&&!on(w.path),l=sT(n,e,w.path,w.snap,r,i,h,a))}else if(t.type===Ia.MERGE){const w=t;w.source.fromUser?l=function UG(n,e,t,r,i,a,l){let h=e;return r.foreach((_,w)=>{const b=mr(t,_);WF(e,sn(b))&&(h=SM(n,h,b,w,i,a,l))}),r.foreach((_,w)=>{const b=mr(t,_);WF(e,sn(b))||(h=SM(n,h,b,w,i,a,l))}),h}(n,e,w.path,w.children,r,i,a):((0,P.hu)(w.source.fromServer,"Unknown source."),h=w.source.tagged||e.serverCache.isFiltered(),l=AM(n,e,w.path,w.children,r,i,h,a))}else if(t.type===Ia.ACK_USER_WRITE){const w=t;l=w.revert?function $G(n,e,t,r,i,a){let l;if(null!=iT(r,t))return e;{const h=new TM(r,e,i),_=e.eventCache.getNode();let w;if(on(t)||".priority"===sn(t)){let b;if(e.serverCache.isFullyInitialized())b=rT(r,lm(e));else{const x=e.serverCache.getNode();(0,P.hu)(x instanceof Zt,"serverChildren would be complete if leaf node"),b=bM(r,x)}w=n.filter.updateFullNode(_,b,a)}else{const b=sn(t);let x=DM(r,b,e.serverCache);null==x&&e.serverCache.isCompleteForChild(b)&&(x=_.getImmediateChild(b)),w=null!=x?n.filter.updateChild(_,b,x,Un(t),h,a):e.eventCache.getNode().hasChild(b)?n.filter.updateChild(_,b,Zt.EMPTY_NODE,Un(t),h,a):_,w.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=rT(r,lm(e)),l.isLeafNode()&&(w=n.filter.updateFullNode(w,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=iT(r,yn()),yE(e,w,l,n.filter.filtersNodes())}}(n,e,w.path,r,i,a):function BG(n,e,t,r,i,a,l){if(null!=iT(i,t))return e;const h=e.serverCache.isFiltered(),_=e.serverCache;if(null!=r.value){if(on(t)&&_.isFullyInitialized()||_.isCompleteForPath(t))return sT(n,e,t,_.getNode().getChild(t),i,a,h,l);if(on(t)){let w=new Zn(null);return _.getNode().forEachChild(rc,(b,x)=>{w=w.set(new bn(b),x)}),AM(n,e,t,w,i,a,h,l)}return e}{let w=new Zn(null);return r.foreach((b,x)=>{const k=mr(t,b);_.isCompleteForPath(k)&&(w=w.set(b,_.getNode().getChild(k)))}),AM(n,e,t,w,i,a,h,l)}}(n,e,w.path,w.affectedTree,r,i,a)}else{if(t.type!==Ia.LISTEN_COMPLETE)throw(0,P.g5)("Unknown operation type: "+t.type);l=function jG(n,e,t,r,i){const a=e.serverCache;return GF(n,PF(e,a.getNode(),a.isFullyInitialized()||on(t),a.isFiltered()),t,r,HF,i)}(n,e,t.path,r,a)}const _=a.getChanges();return function VG(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=tT(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(RF(tT(e)))}}(e,l,_),{viewCache:l,changes:_}}(n.processor_,i,e,t,r);return function FG(n,e){(0,P.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,P.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,P.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,YF(n,a.changes,a.viewCache.eventCache.getNode(),null)}function YF(n,e,t,r){return function gG(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function tG(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),_E(n,i,"child_removed",e,r,t),_E(n,i,"child_added",e,r,t),_E(n,i,"child_moved",a,r,t),_E(n,i,"child_changed",e,r,t),_E(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let oT,uT;class QF{constructor(){this.views=new Map}}function xM(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,P.hu)(null!=a,"SyncTree gave us an op for an invalid query."),ZF(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat(ZF(l,e,t,r));return a}}function XF(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let h=rT(t,i?r:null),_=!1;h?_=!0:r instanceof Zt?(h=bM(t,r),_=!1):(h=Zt.EMPTY_NODE,_=!1);const w=eT(new Gf(h,_,!1),new Gf(r,i,!1));return new HG(e,w)}return l}function JF(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function zf(n,e){let t=null;for(const r of n.views.values())t=t||zG(r,e);return t}function eL(n,e){return e._queryParams.loadsAllData()?aT(n):n.views.get(e._queryIdentifier)}function tL(n,e){return null!=eL(n,e)}function qf(n){return null!=aT(n)}function aT(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let nW=1;class nL{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Zn(null),this.pendingWriteTree_=function MG(){return{visibleWrites:wu.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function RM(n,e,t,r,i){return function vG(n,e,t,r,i){(0,P.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=vE(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?$y(n,new um({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Kf(n,e,t=!1){const r=function EG(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function IG(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,P.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const h=n.allWrites[l];h.visible&&(l>=t&&CG(h,r.path)?i=!1:Ea(r.path,h.path)&&(a=!0)),l--}return!!i&&(a?(function bG(n){n.visibleWrites=VF(n.allWrites,DG,yn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=OF(n.visibleWrites,r.path):Ni(r.children,_=>{n.visibleWrites=OF(n.visibleWrites,mr(r.path,_))}),!0))}(n.pendingWriteTree_,e)){let a=new Zn(null);return null!=r.snap?a=a.set(yn(),!0):Ni(r.children,l=>{a=a.set(new bn(l),!0)}),$y(n,new JD(r.path,a,t))}return[]}function wE(n,e,t){return $y(n,new um({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function lT(n,e,t,r,i=!1){const a=e._path,l=n.syncPointTree_.get(a);let h=[];if(l&&("default"===e._queryIdentifier||tL(l,e))){const _=function JG(n,e,t,r){const i=e._queryIdentifier,a=[];let l=[];const h=qf(n);if("default"===i)for(const[_,w]of n.views.entries())l=l.concat(KF(w,t,r)),qF(w)&&(n.views.delete(_),w.query._queryParams.loadsAllData()||a.push(w.query));else{const _=n.views.get(i);_&&(l=l.concat(KF(_,t,r)),qF(_)&&(n.views.delete(i),_.query._queryParams.loadsAllData()||a.push(_.query)))}return h&&!qf(n)&&a.push(new(function YG(){return(0,P.hu)(oT,"Reference.ts has not been loaded"),oT}())(e._repo,e._path)),{removed:a,events:l}}(l,e,t,r);(function QG(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const w=_.removed;if(h=_.events,!i){const b=-1!==w.findIndex(k=>k._queryParams.loadsAllData()),x=n.syncPointTree_.findOnPath(a,(k,U)=>qf(U));if(b&&!x){const k=n.syncPointTree_.subtree(a);if(!k.isEmpty()){const U=function lW(n){return n.fold((e,t,r)=>{if(t&&qf(t))return[aT(t)];{let i=[];return t&&(i=JF(t)),Ni(r,(a,l)=>{i=i.concat(l)}),i}})}(k);for(let W=0;W<U.length;++W){const ae=U[W],ve=ae.query,pt=oL(n,ae);n.listenProvider_.startListening(IE(ve),EE(n,ve),pt.hashFn,pt.onComplete)}}}!x&&w.length>0&&!r&&(b?n.listenProvider_.stopListening(IE(e),null):w.forEach(k=>{const U=n.queryToTagMap.get(dT(k));n.listenProvider_.stopListening(IE(k),U)}))}!function cW(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=dT(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,w)}return h}function rL(n,e,t,r){const i=NM(n,r);if(null!=i){const a=kM(i),l=a.path,h=a.queryId,_=Ps(l,e);return PM(n,l,new um(vM(h),_,t))}return[]}function MM(n,e,t,r=!1){const i=e._path;let a=null,l=!1;n.syncPointTree_.foreachOnPath(i,(k,U)=>{const W=Ps(k,i);a=a||zf(U,W),l=l||qf(U)});let _,h=n.syncPointTree_.get(i);h?(l=l||qf(h),a=a||zf(h,yn())):(h=new QF,n.syncPointTree_=n.syncPointTree_.set(i,h)),null!=a?_=!0:(_=!1,a=Zt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((U,W)=>{const ae=zf(W,yn());ae&&(a=a.updateImmediateChild(U,ae))}));const w=tL(h,e);if(!w&&!e._queryParams.loadsAllData()){const k=dT(e);(0,P.hu)(!n.queryToTagMap.has(k),"View does not exist, but we have a tag");const U=function dW(){return nW++}();n.queryToTagMap.set(k,U),n.tagToQueryMap.set(U,k)}let x=function XG(n,e,t,r,i,a){const l=XF(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function qG(n,e){n.eventRegistrations_.push(e)}(l,t),function KG(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Kn,(a,l)=>{r.push(Vy(a,l))}),t.isFullyInitialized()&&r.push(RF(t.getNode())),YF(n,r,t.getNode(),e)}(l,t)}(h,e,t,nT(n.pendingWriteTree_,i),a,_);if(!w&&!l&&!r){const k=eL(h,e);x=x.concat(function hW(n,e,t){const r=e._path,i=EE(n,e),a=oL(n,t),l=n.listenProvider_.startListening(IE(e),i,a.hashFn,a.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,P.hu)(!qf(h.value),"If we're adding a query, it shouldn't be shadowed");else{const _=h.fold((w,b,x)=>{if(!on(w)&&b&&qf(b))return[aT(b).query];{let k=[];return b&&(k=k.concat(JF(b).map(U=>U.query))),Ni(x,(U,W)=>{k=k.concat(W)}),k}});for(let w=0;w<_.length;++w){const b=_[w];n.listenProvider_.stopListening(IE(b),EE(n,b))}}return l}(n,e,k))}return x}function cT(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,h)=>{const w=zf(h,Ps(l,e));if(w)return w});return UF(i,e,a,t,!0)}function $y(n,e){return iL(e,n.syncPointTree_,null,nT(n.pendingWriteTree_,yn()))}function iL(n,e,t,r){if(on(n.path))return sL(n,e,t,r);{const i=e.get(yn());null==t&&null!=i&&(t=zf(i,yn()));let a=[];const l=sn(n.path),h=n.operationForChild(l),_=e.children.get(l);if(_&&h){const w=t?t.getImmediateChild(l):null,b=jF(r,l);a=a.concat(iL(h,_,w,b))}return i&&(a=a.concat(xM(i,n,r,t))),a}}function sL(n,e,t,r){const i=e.get(yn());null==t&&null!=i&&(t=zf(i,yn()));let a=[];return e.children.inorderTraversal((l,h)=>{const _=t?t.getImmediateChild(l):null,w=jF(r,l),b=n.operationForChild(l);b&&(a=a.concat(sL(b,h,_,w)))}),i&&(a=a.concat(xM(i,n,r,t))),a}function oL(n,e){const t=e.query,r=EE(n,t);return{hashFn:()=>(function GG(n){return n.viewCache_.serverCache.getNode()}(e)||Zt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function oW(n,e,t){const r=NM(n,t);if(r){const i=kM(r),a=i.path,l=i.queryId,h=Ps(a,e);return PM(n,a,new mE(vM(l),h))}return[]}(n,t._path,r):function sW(n,e){return $y(n,new mE({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function iH(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return lT(n,t,null,a)}}}}function EE(n,e){const t=dT(e);return n.queryToTagMap.get(t)}function dT(n){return n._path.toString()+"$"+n._queryIdentifier}function NM(n,e){return n.tagToQueryMap.get(e)}function kM(n){const e=n.indexOf("$");return(0,P.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new bn(n.substr(0,e))}}function PM(n,e,t){const r=n.syncPointTree_.get(e);return(0,P.hu)(r,"Missing sync point for query tag that we're tracking"),xM(r,t,nT(n.pendingWriteTree_,e),null)}function IE(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function tW(){return(0,P.hu)(uT,"Reference.ts has not been loaded"),uT}())(n._repo,n._path):n}class OM{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new OM(t)}node(){return this.node_}}class FM{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=mr(this.path_,e);return new FM(this.syncTree_,t)}node(){return cT(this.syncTree_,this.path_)}}const aL=function(n,e,t){return n&&"object"==typeof n?((0,P.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?pW(n[".sv"],e,t):"object"==typeof n[".sv"]?gW(n[".sv"],e):void(0,P.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},pW=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,P.hu)(!1,"Unexpected server value: "+n)},gW=function(n,e,t){n.hasOwnProperty("increment")||(0,P.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,P.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,P.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},uL=function(n,e,t,r){return VM(e,new FM(t,n),r)},LM=function(n,e,t){return VM(n,new OM(e),t)};function VM(n,e,t){const r=n.getPriority().val(),i=aL(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,h=aL(l.getValue(),e,t);return h!==l.getValue()||i!==l.getPriority().val()?new Fy(h,Dr(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new Fy(i))),l.forEachChild(Kn,(h,_)=>{const w=VM(_,e.getImmediateChild(h),t);w!==_&&(a=a.updateImmediateChild(h,w))}),a}}class UM{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function hT(n,e){let t=e instanceof bn?e:new bn(e),r=n,i=sn(t);for(;null!==i;){const a=(0,P.DV)(r.node.children,i)||{children:{},childCount:0};r=new UM(i,r,a),t=Un(t),i=sn(t)}return r}function dm(n){return n.node.value}function BM(n,e){n.node.value=e,jM(n)}function lL(n){return n.node.childCount>0}function fT(n,e){Ni(n.node.children,(t,r)=>{e(new UM(t,n,r))})}function cL(n,e,t,r){t&&!r&&e(n),fT(n,i=>{cL(i,e,!0,r)}),t&&r&&e(n)}function CE(n){return new bn(null===n.parent?n.name:CE(n.parent)+"/"+n.name)}function jM(n){null!==n.parent&&function yW(n,e,t){const r=function mW(n){return void 0===dm(n)&&!lL(n)}(t),i=(0,P.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,jM(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,jM(n))}(n.parent,n.name,n)}const vW=/[\[\].#$\/\u0000-\u001F\u007F]/,wW=/[\[\].#$\u0000-\u001F\u007F]/,$M=10485760,pT=function(n){return"string"==typeof n&&0!==n.length&&!vW.test(n)},dL=function(n){return"string"==typeof n&&0!==n.length&&!wW.test(n)},bE=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!jD(n)||n&&"object"==typeof n&&(0,P.r3)(n,".sv")},ic=function(n,e,t,r){r&&void 0===e||DE((0,P.gK)(n,"value"),e,t)},DE=function(n,e,t){const r=t instanceof bn?new LH(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+om(r));if("function"==typeof e)throw new Error(n+"contains a function "+om(r)+" with contents = "+e.toString());if(jD(e))throw new Error(n+"contains "+e.toString()+" "+om(r));if("string"==typeof e&&e.length>$M/3&&(0,P.ug)(e)>$M)throw new Error(n+"contains a string greater than "+$M+" utf8 bytes "+om(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Ni(e,(l,h)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!pT(l)))throw new Error(n+" contains an invalid key ("+l+") "+om(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function VH(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,P.ug)(e),EF(n)})(r,l),DE(n,h,r),function UH(n){const e=n.parts_.pop();n.byteLength_-=(0,P.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+om(r)+" in addition to actual children.")}},hL=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,P.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];Ni(e,(l,h)=>{const _=new bn(l);if(DE(i,h,mr(t,_)),".priority"===iM(_)&&!bE(h))throw new Error(i+"contains an invalid value for '"+_.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(_)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=lE(r);for(let l=0;l<a.length;l++)if((".priority"!==a[l]||l!==a.length-1)&&!pT(a[l]))throw new Error(n+"contains an invalid key ("+a[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(FH);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Ea(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},HM=function(n,e,t){if(!t||void 0!==e){if(jD(e))throw new Error((0,P.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!bE(e))throw new Error((0,P.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},TE=function(n,e,t,r){if(!(r&&void 0===t||pT(t)))throw new Error((0,P.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},SE=function(n,e,t,r){if(!(r&&void 0===t||dL(t)))throw new Error((0,P.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ca=function(n,e){if(".info"===sn(e))throw new Error(n+" failed = Can't modify data under /.info/")},fL=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!pT(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),dL(n)}(t))throw new Error((0,P.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class bW{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function gT(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!sM(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function pL(n,e,t){gT(n,t),gL(n,r=>sM(r,e))}function Mo(n,e,t){gT(n,t),gL(n,r=>Ea(r,e)||Ea(e,r))}function gL(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(DW(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function DW(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();im&&Mi("event: "+t.toString()),Py(r)}}}const mL="repo_interrupt";class SW{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new bW,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=XD(),this.transactionQueueTree_=new UM,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function _L(n){const t=n.infoData_.getNode(new bn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function AE(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:_L(n)})}function yL(n,e,t,r,i){n.dataUpdateCount++;const a=new bn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const _=(0,P.UI)(t,w=>Dr(w));l=function aW(n,e,t,r){const i=NM(n,r);if(i){const a=kM(i),l=a.path,h=a.queryId,_=Ps(l,e),w=Zn.fromObject(t);return PM(n,l,new By(vM(h),_,w))}return[]}(n.serverSyncTree_,a,_,i)}else{const _=Dr(t);l=rL(n.serverSyncTree_,a,_,i)}else if(r){const _=(0,P.UI)(t,w=>Dr(w));l=function iW(n,e,t){const r=Zn.fromObject(t);return $y(n,new By({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,_)}else{const _=Dr(t);l=wE(n.serverSyncTree_,a,_)}let h=a;l.length>0&&(h=Gy(n,a)),Mo(n.eventQueue_,h,l)}function vL(n,e){GM(n,"connected",e),!1===e&&function NW(n){Hy(n,"onDisconnectEvents");const e=AE(n),t=XD();mM(n.onDisconnect_,yn(),(i,a)=>{const l=uL(i,a,n.serverSyncTree_,e);Uy(t,i,l)});let r=[];mM(t,yn(),(i,a)=>{r=r.concat(wE(n.serverSyncTree_,i,a));const l=KM(n,i);Gy(n,l)}),n.onDisconnect_=XD(),Mo(n.eventQueue_,yn(),r)}(n)}function GM(n,e,t){const r=new bn("/.info/"+e),i=Dr(t);n.infoData_.updateSnapshot(r,i);const a=wE(n.infoSyncTree_,r,i);Mo(n.eventQueue_,r,a)}function mT(n){return n.nextWriteId_++}function WM(n,e,t,r,i){Hy(n,"set",{path:e.toString(),value:t,priority:r});const a=AE(n),l=Dr(t,r),h=cT(n.serverSyncTree_,e),_=LM(l,h,a),w=mT(n),b=RM(n.serverSyncTree_,e,_,w,!0);gT(n.eventQueue_,b),n.server_.put(e.toString(),l.val(!0),(k,U)=>{const W="ok"===k;W||as("set at "+e+" failed: "+k);const ae=Kf(n.serverSyncTree_,w,!W);Mo(n.eventQueue_,e,ae),Zf(0,i,k,U)});const x=KM(n,e);Gy(n,x),Mo(n.eventQueue_,x,[])}function kW(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&gM(n.onDisconnect_,e),Zf(0,t,r,i)})}function wL(n,e,t,r){const i=Dr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,l)=>{"ok"===a&&Uy(n.onDisconnect_,e,i),Zf(0,r,a,l)})}function zM(n,e,t){let r;r=".info"===sn(e._path)?lT(n.infoSyncTree_,e,t):lT(n.serverSyncTree_,e,t),pL(n.eventQueue_,e._path,r)}function EL(n){n.persistentConnection_&&n.persistentConnection_.interrupt(mL)}function Hy(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Mi(t,...e)}function Zf(n,e,t,r){e&&Py(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const l=new Error(a);l.code=i,e(l)}})}function qM(n,e,t){return cT(n.serverSyncTree_,e,t)||Zt.EMPTY_NODE}function _T(n,e=n.transactionQueueTree_){if(e||yT(n,e),dm(e)){const t=CL(n,e);(0,P.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function UW(n,e,t){const r=t.map(w=>w.currentWriteId),i=qM(n,e,r);let a=i;const l=i.hash();for(let w=0;w<t.length;w++){const b=t[w];(0,P.hu)(0===b.status,"tryToSendTransactionQueue_: items in queue should all be run."),b.status=1,b.retryCount++;const x=Ps(e,b.path);a=a.updateChild(x,b.currentOutputSnapshotRaw)}const h=a.val(!0),_=e;n.server_.put(_.toString(),h,w=>{Hy(n,"transaction put response",{path:_.toString(),status:w});let b=[];if("ok"===w){const x=[];for(let k=0;k<t.length;k++)t[k].status=2,b=b.concat(Kf(n.serverSyncTree_,t[k].currentWriteId)),t[k].onComplete&&x.push(()=>t[k].onComplete(null,!0,t[k].currentOutputSnapshotResolved)),t[k].unwatcher();yT(n,hT(n.transactionQueueTree_,e)),_T(n,n.transactionQueueTree_),Mo(n.eventQueue_,e,b);for(let k=0;k<x.length;k++)Py(x[k])}else{if("datastale"===w)for(let x=0;x<t.length;x++)t[x].status=3===t[x].status?4:0;else{as("transaction at "+_.toString()+" failed: "+w);for(let x=0;x<t.length;x++)t[x].status=4,t[x].abortReason=w}Gy(n,e)}},l)}(n,CE(e),t)}else lL(e)&&fT(e,t=>{_T(n,t)})}function Gy(n,e){const t=IL(n,e),r=CE(t);return function BW(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const _=e[h],w=Ps(t,_.path);let x,b=!1;if((0,P.hu)(null!==w,"rerunTransactionsUnderNode_: relativePath should not be null."),4===_.status)b=!0,x=_.abortReason,i=i.concat(Kf(n.serverSyncTree_,_.currentWriteId,!0));else if(0===_.status)if(_.retryCount>=25)b=!0,x="maxretry",i=i.concat(Kf(n.serverSyncTree_,_.currentWriteId,!0));else{const k=qM(n,_.path,l);_.currentInputSnapshot=k;const U=e[h].update(k.val());if(void 0!==U){DE("transaction failed: Data returned ",U,_.path);let W=Dr(U);"object"==typeof U&&null!=U&&(0,P.r3)(U,".priority")||(W=W.updatePriority(k.getPriority()));const ve=_.currentWriteId,pt=AE(n),_t=LM(W,k,pt);_.currentOutputSnapshotRaw=W,_.currentOutputSnapshotResolved=_t,_.currentWriteId=mT(n),l.splice(l.indexOf(ve),1),i=i.concat(RM(n.serverSyncTree_,_.path,_t,_.currentWriteId,_.applyLocally)),i=i.concat(Kf(n.serverSyncTree_,ve,!0))}else b=!0,x="nodata",i=i.concat(Kf(n.serverSyncTree_,_.currentWriteId,!0))}Mo(n.eventQueue_,t,i),i=[],b&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===x?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(x),!1,null)))}yT(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)Py(r[h]);_T(n,n.transactionQueueTree_)}(n,CL(n,t),r),r}function IL(n,e){let t,r=n.transactionQueueTree_;for(t=sn(e);null!==t&&void 0===dm(r);)r=hT(r,t),t=sn(e=Un(e));return r}function CL(n,e){const t=[];return bL(n,e,t),t.sort((r,i)=>r.order-i.order),t}function bL(n,e,t){const r=dm(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);fT(e,i=>{bL(n,i,t)})}function yT(n,e){const t=dm(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,BM(e,t.length>0?t:void 0)}fT(e,r=>{yT(n,r)})}function KM(n,e){const t=CE(IL(n,e)),r=hT(n.transactionQueueTree_,e);return function _W(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{ZM(n,i)}),ZM(n,r),cL(r,i=>{ZM(n,i)}),t}function ZM(n,e){const t=dm(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,P.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,P.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(Kf(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?BM(e,void 0):t.length=a+1,Mo(n.eventQueue_,CE(e),i);for(let l=0;l<r.length;l++)Py(r[l])}}const YM=function(n,e){const t=HW(n),r=t.namespace;return"firebase.com"===t.domain&&nc(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&nc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&as("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new XR(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new bn(t.pathString)}},HW=function(n){let e="",t="",r="",i="",a="",l=!0,h="https",_=443;if("string"==typeof n){let w=n.indexOf("//");w>=0&&(h=n.substring(0,w-1),n=n.substring(w+2));let b=n.indexOf("/");-1===b&&(b=n.length);let x=n.indexOf("?");-1===x&&(x=n.length),e=n.substring(0,Math.min(b,x)),b<x&&(i=function jW(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(b,x)));const k=function $W(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):as(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,x)));w=e.indexOf(":"),w>=0?(l="https"===h||"wss"===h,_=parseInt(e.substring(w+1),10)):w=e.length;const U=e.slice(0,w);if("localhost"===U.toLowerCase())t="localhost";else if(U.split(".").length<=2)t=U;else{const W=e.indexOf(".");r=e.substring(0,W).toLowerCase(),t=e.substring(W+1),a=r}"ns"in k&&(a=k.ns)}return{host:e,port:_,domain:t,subdomain:r,secure:l,scheme:h,pathString:i,namespace:a}},DL="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",GW=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=DL.charAt(t%64),t=Math.floor(t/64);(0,P.hu)(0===t,"Cannot push at time == 0");let l=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=DL.charAt(e[i]);return(0,P.hu)(20===l.length,"nextPushId: Length should be 20."),l}}();class TL{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,P.Wl)(this.snapshot.exportVal())}}class SL{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class QM{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,P.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class AL{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new P.BH;return kW(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Ca("OnDisconnect.remove",this._path);const e=new P.BH;return wL(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Ca("OnDisconnect.set",this._path),ic("OnDisconnect.set",e,this._path,!1);const t=new P.BH;return wL(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Ca("OnDisconnect.setWithPriority",this._path),ic("OnDisconnect.setWithPriority",e,this._path,!1),HM("OnDisconnect.setWithPriority",t,!1);const r=new P.BH;return function PW(n,e,t,r,i){const a=Dr(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(l,h)=>{"ok"===l&&Uy(n.onDisconnect_,e,a),Zf(0,i,l,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Ca("OnDisconnect.update",this._path),hL("OnDisconnect.update",e,this._path,!1);const t=new P.BH;return function OW(n,e,t,r){if((0,P.xb)(t))return Mi("onDisconnect().update() called with empty data.  Don't do anything."),void Zf(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&Ni(t,(l,h)=>{const _=Dr(h);Uy(n.onDisconnect_,mr(e,l),_)}),Zf(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class eo{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return on(this._path)?null:iM(this._path)}get ref(){return new ba(this._repo,this._path)}get _queryIdentifier(){const e=NF(this._queryParams),t=YR(e);return"{}"===t?"default":t}get _queryObject(){return NF(this._queryParams)}isEqual(e){if(!((e=(0,P.m9)(e))instanceof eo))return!1;const t=this._repo===e._repo,r=sM(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function OH(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function vT(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Yf(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===rc){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==jf)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==$d)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Kn){if(null!=e&&!bE(e)||null!=t&&!bE(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,P.hu)(n.getIndex()instanceof cM||n.getIndex()===dM,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function wT(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class ba extends eo{constructor(e,t){super(e,t,new ZD,!1)}get parent(){const e=wF(this._path);return null===e?null:new ba(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class hm{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new bn(e),r=fm(this.ref,e);return new hm(this._node.getChild(t),r,Kn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new hm(i,fm(this.ref,r),Kn)))}hasChild(e){const t=new bn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function xL(n,e){return(n=(0,P.m9)(n))._checkNotDeleted("ref"),void 0!==e?fm(n._root,e):n._root}function RL(n,e){(n=(0,P.m9)(n))._checkNotDeleted("refFromURL");const t=YM(e,n._repo.repoInfo_.nodeAdmin);fL("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&nc("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),xL(n,t.path.toString())}function fm(n,e){return null===sn((n=(0,P.m9)(n))._path)?((t=e)&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),SE("child","path",t,!1)):SE("child","path",e,!1),new ba(n._repo,mr(n._path,e));var t}function XM(n,e){n=(0,P.m9)(n),Ca("set",n._path),ic("set",e,n._path,!1);const t=new P.BH;return WM(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function ZW(n,e){hL("update",e,n._path,!1);const t=new P.BH;return function MW(n,e,t,r){Hy(n,"update",{path:e.toString(),value:t});let i=!0;const a=AE(n),l={};if(Ni(t,(h,_)=>{i=!1,l[h]=uL(mr(e,h),Dr(_),n.serverSyncTree_,a)}),i)Mi("update() called with empty data.  Don't do anything."),Zf(0,r,"ok",void 0);else{const h=mT(n),_=function rW(n,e,t,r){!function wG(n,e,t,r){(0,P.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=EM(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Zn.fromObject(t);return $y(n,new By({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,h);gT(n.eventQueue_,_),n.server_.merge(e.toString(),t,(w,b)=>{const x="ok"===w;x||as("update at "+e+" failed: "+w);const k=Kf(n.serverSyncTree_,h,!x),U=k.length>0?Gy(n,e):e;Mo(n.eventQueue_,U,k),Zf(0,r,w,b)}),Ni(t,w=>{const b=KM(n,mr(e,w));Gy(n,b)}),Mo(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function YW(n){n=(0,P.m9)(n);const e=new QM(()=>{}),t=new xE(e);return function RW(n,e,t){const r=function uW(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(w,b)=>{const x=Ps(w,t);r=r||zf(b,x)});let i=n.syncPointTree_.get(t);i?r=r||zf(i,yn()):(i=new QF,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,l=a?new Gf(r,!0,!1):null;return function WG(n){return tT(n.viewCache_)}(XF(i,e,nT(n.pendingWriteTree_,e._path),a?l.getNode():Zt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const a=Dr(i).withIndex(e._queryParams.getIndex());let l;if(MM(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())l=wE(n.serverSyncTree_,e._path,a);else{const h=EE(n.serverSyncTree_,e);l=rL(n.serverSyncTree_,e._path,a,h)}return Mo(n.eventQueue_,e._path,l),lT(n.serverSyncTree_,e,t,null,!0),a},i=>(Hy(n,"get for query "+(0,P.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new hm(r,new ba(n._repo,n._path),n._queryParams.getIndex()))}class xE{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new TL("value",this,new hm(e.snapshotNode,new ba(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new SL(this,e,t):null}matches(e){return e instanceof xE&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class ET{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new SL(this,e,t):null}createEvent(e,t){(0,P.hu)(null!=e.childName,"Child events should have a childName.");const r=fm(new ba(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new TL(e.type,this,new hm(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof ET&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function RE(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const _=t,w=(b,x)=>{zM(n._repo,n,h),_(b,x)};w.userCallback=t.userCallback,w.context=t.context,t=w}const l=new QM(t,a||void 0),h="value"===e?new xE(l):new ET(e,l);return function FW(n,e,t){let r;r=".info"===sn(e._path)?MM(n.infoSyncTree_,e,t):MM(n.serverSyncTree_,e,t),pL(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>zM(n._repo,n,h)}function JM(n,e,t,r){return RE(n,"value",e,t,r)}function ML(n,e,t,r){return RE(n,"child_added",e,t,r)}function NL(n,e,t,r){return RE(n,"child_changed",e,t,r)}function kL(n,e,t,r){return RE(n,"child_moved",e,t,r)}function PL(n,e,t,r){return RE(n,"child_removed",e,t,r)}function OL(n,e,t){let r=null;const i=t?new QM(t):null;"value"===e?r=new xE(i):e&&(r=new ET(e,i)),zM(n._repo,n,r)}class Eu{}class FL extends Eu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ic("endAt",this._value,e._path,!0);const t=pM(e._queryParams,this._value,this._key);if(wT(t),Yf(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new eo(e._repo,e._path,t,e._orderByCalled)}}class XW extends Eu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ic("endBefore",this._value,e._path,!1);const t=function aG(n,e,t){let r;return r=pM(n,e,n.index_===rc||t?t:jf),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(wT(t),Yf(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new eo(e._repo,e._path,t,e._orderByCalled)}}class LL extends Eu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ic("startAt",this._value,e._path,!0);const t=fM(e._queryParams,this._value,this._key);if(wT(t),Yf(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new eo(e._repo,e._path,t,e._orderByCalled)}}class tz extends Eu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ic("startAfter",this._value,e._path,!1);const t=function oG(n,e,t){let r;return r=fM(n,e,n.index_===rc||t?t:$d),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(wT(t),Yf(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new eo(e._repo,e._path,t,e._orderByCalled)}}class rz extends Eu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new eo(e._repo,e._path,function iG(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class sz extends Eu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new eo(e._repo,e._path,function sG(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class az extends Eu{constructor(e){super(),this._path=e}_apply(e){vT(e,"orderByChild");const t=new bn(this._path);if(on(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new cM(t),i=YD(e._queryParams,r);return Yf(i),new eo(e._repo,e._path,i,!0)}}class lz extends Eu{_apply(e){vT(e,"orderByKey");const t=YD(e._queryParams,rc);return Yf(t),new eo(e._repo,e._path,t,!0)}}class dz extends Eu{_apply(e){vT(e,"orderByPriority");const t=YD(e._queryParams,Kn);return Yf(t),new eo(e._repo,e._path,t,!0)}}class fz extends Eu{_apply(e){vT(e,"orderByValue");const t=YD(e._queryParams,dM);return Yf(t),new eo(e._repo,e._path,t,!0)}}class gz extends Eu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(ic("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new FL(this._value,this._key)._apply(new LL(this._value,this._key)._apply(e))}}function Iu(n,...e){let t=(0,P.m9)(n);for(const r of e)t=r._apply(t);return t}(function ZG(n){(0,P.hu)(!oT,"__referenceConstructor has already been defined"),oT=n})(ba),function eW(n){(0,P.hu)(!uT,"__referenceConstructor has already been defined"),uT=n}(ba);const eN={};function UL(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||nc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Mi("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let _,w,l=YM(a,i),h=l.repoInfo;typeof process<"u"&&process.env&&(w=process.env.FIREBASE_DATABASE_EMULATOR_HOST),w?(_=!0,a=`http://${w}?ns=${h.namespace}`,l=YM(a,i),h=l.repoInfo):_=!l.repoInfo.secure;const b=i&&_?new uE(uE.OWNER):new cH(n.name,n.options,e);fL("Invalid Firebase Database URL",l),on(l.path)||nc("Database URL must point to the root of a Firebase Database (not including a child path).");const x=function wz(n,e,t,r){let i=eN[e.name];i||(i={},eN[e.name]=i);let a=i[n.toURLString()];return a&&nc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new SW(n,false,t,r),i[n.toURLString()]=a,a}(h,n,b,new lH(n.name,t));return new Iz(x,n)}class Iz{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function AW(n,e,t){if(n.stats_=tM(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new QD(n.repoInfo_,(r,i,a,l)=>{yL(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>vL(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,P.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new am(n.repoInfo_,e,(r,i,a,l)=>{yL(n,r,i,a,l)},r=>{vL(n,r)},r=>{!function xW(n,e){Ni(e,(t,r)=>{GM(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function fH(n,e){const t=n.toString();return eM[t]||(eM[t]=e()),eM[t]}(n.repoInfo_,()=>new fG(n.stats_,n.server_)),n.infoData_=new uG,n.infoSyncTree_=new nL({startListening:(r,i,a,l)=>{let h=[];const _=n.infoData_.getNode(r._path);return _.isEmpty()||(h=wE(n.infoSyncTree_,r._path,_),setTimeout(()=>{l("ok")},0)),h},stopListening:()=>{}}),GM(n,"connected",!1),n.serverSyncTree_=new nL({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(h,_)=>{const w=l(h,_);Mo(n.eventQueue_,r._path,w)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ba(this._repo,yn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function vz(n,e){const t=eN[e];(!t||t[n.key]!==n)&&nc(`Database ${e}(${n.repoInfo_}) has already been deleted.`),EL(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&nc("Cannot call "+e+" on a deleted database.")}}function BL(){uF.IS_TRANSPORT_INITIALIZED&&as("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Cz(){BL(),$f.forceDisallow()}function bz(){BL(),Oy.forceDisallow(),$f.forceAllow()}function Sz(n,e){$1(n,e)}const xz={".sv":"timestamp"};class Nz{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}am.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},am.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function Az(n){L1(pi.SDK_VERSION),(0,pi._registerComponent)(new Ws.wA("database",(e,{instanceIdentifier:t})=>UL(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,pi.registerVersion)(O1,"0.14.1",n),(0,pi.registerVersion)(O1,"0.14.1","esm2017")}();const Fz=new Cs.Yd("@firebase/database-compat"),$L=function(n){Fz.warn("FIREBASE WARNING: "+n)};class Uz{constructor(e){this._delegate=e}cancel(e){(0,P.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,P.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,P.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,P.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,P.Dv)("OnDisconnect.set",1,2,arguments.length),(0,P.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,P.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,P.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,P.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,$L("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,P.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class Bz{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,P.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Qf{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,P.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,P.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,P.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,P.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,P.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),SE("DataSnapshot.child","path",e,!1),new Qf(this._database,this._delegate.child(e))}hasChild(e){return(0,P.Dv)("DataSnapshot.hasChild",1,1,arguments.length),SE("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,P.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,P.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,P.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Qf(this._database,t)))}hasChildren(){return(0,P.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,P.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,P.Dv)("DataSnapshot.ref",0,0,arguments.length),new No(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Zi{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,P.Dv)("Query.on",2,4,arguments.length),(0,P.Wj)("Query.on","callback",t,!1);const l=Zi.getCancelAndContextArgs_("Query.on",r,i),h=(w,b)=>{t.call(l.context,new Qf(this.database,w),b)};h.userCallback=t,h.context=l.context;const _=null===(a=l.cancel)||void 0===a?void 0:a.bind(l.context);switch(e){case"value":return JM(this._delegate,h,_),t;case"child_added":return ML(this._delegate,h,_),t;case"child_removed":return PL(this._delegate,h,_),t;case"child_changed":return NL(this._delegate,h,_),t;case"child_moved":return kL(this._delegate,h,_),t;default:throw new Error((0,P.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,P.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,P.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,P.Wj)("Query.off","callback",t,!0),(0,P.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,OL(this._delegate,e,i)}else OL(this._delegate,e)}get(){return YW(this._delegate).then(e=>new Qf(this.database,e))}once(e,t,r,i){(0,P.Dv)("Query.once",1,4,arguments.length),(0,P.Wj)("Query.once","callback",t,!0);const a=Zi.getCancelAndContextArgs_("Query.once",r,i),l=new P.BH,h=(w,b)=>{const x=new Qf(this.database,w);t&&t.call(a.context,x,b),l.resolve(x)};h.userCallback=t,h.context=a.context;const _=w=>{a.cancel&&a.cancel.call(a.context,w),l.reject(w)};switch(e){case"value":JM(this._delegate,h,_,{onlyOnce:!0});break;case"child_added":ML(this._delegate,h,_,{onlyOnce:!0});break;case"child_removed":PL(this._delegate,h,_,{onlyOnce:!0});break;case"child_changed":NL(this._delegate,h,_,{onlyOnce:!0});break;case"child_moved":kL(this._delegate,h,_,{onlyOnce:!0});break;default:throw new Error((0,P.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,P.Dv)("Query.limitToFirst",1,1,arguments.length),new Zi(this.database,Iu(this._delegate,function iz(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new rz(n)}(e)))}limitToLast(e){return(0,P.Dv)("Query.limitToLast",1,1,arguments.length),new Zi(this.database,Iu(this._delegate,function oz(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new sz(n)}(e)))}orderByChild(e){return(0,P.Dv)("Query.orderByChild",1,1,arguments.length),new Zi(this.database,Iu(this._delegate,function uz(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return SE("orderByChild","path",n,!1),new az(n)}(e)))}orderByKey(){return(0,P.Dv)("Query.orderByKey",0,0,arguments.length),new Zi(this.database,Iu(this._delegate,function cz(){return new lz}()))}orderByPriority(){return(0,P.Dv)("Query.orderByPriority",0,0,arguments.length),new Zi(this.database,Iu(this._delegate,function hz(){return new dz}()))}orderByValue(){return(0,P.Dv)("Query.orderByValue",0,0,arguments.length),new Zi(this.database,Iu(this._delegate,function pz(){return new fz}()))}startAt(e=null,t){return(0,P.Dv)("Query.startAt",0,2,arguments.length),new Zi(this.database,Iu(this._delegate,function ez(n=null,e){return TE("startAt","key",e,!0),new LL(n,e)}(e,t)))}startAfter(e=null,t){return(0,P.Dv)("Query.startAfter",0,2,arguments.length),new Zi(this.database,Iu(this._delegate,function nz(n,e){return TE("startAfter","key",e,!0),new tz(n,e)}(e,t)))}endAt(e=null,t){return(0,P.Dv)("Query.endAt",0,2,arguments.length),new Zi(this.database,Iu(this._delegate,function QW(n,e){return TE("endAt","key",e,!0),new FL(n,e)}(e,t)))}endBefore(e=null,t){return(0,P.Dv)("Query.endBefore",0,2,arguments.length),new Zi(this.database,Iu(this._delegate,function JW(n,e){return TE("endBefore","key",e,!0),new XW(n,e)}(e,t)))}equalTo(e,t){return(0,P.Dv)("Query.equalTo",1,2,arguments.length),new Zi(this.database,Iu(this._delegate,function mz(n,e){return TE("equalTo","key",e,!0),new gz(n,e)}(e,t)))}toString(){return(0,P.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,P.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,P.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Zi))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,P.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,P.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,P.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new No(this.database,new ba(this._delegate._repo,this._delegate._path))}}class No extends Zi{constructor(e,t){super(e,new eo(t._repo,t._path,new ZD,!1)),this.database=e,this._delegate=t}getKey(){return(0,P.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,P.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new No(this.database,fm(this._delegate,e))}getParent(){(0,P.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new No(this.database,e):null}getRoot(){return(0,P.Dv)("Reference.root",0,0,arguments.length),new No(this.database,this._delegate.root)}set(e,t){(0,P.Dv)("Reference.set",1,2,arguments.length),(0,P.Wj)("Reference.set","onComplete",t,!0);const r=XM(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,P.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,$L("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ca("Reference.update",this._delegate._path),(0,P.Wj)("Reference.update","onComplete",t,!0);const r=ZW(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,P.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,P.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function KW(n,e,t){if(Ca("setWithPriority",n._path),ic("setWithPriority",e,n._path,!1),HM("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new P.BH;return WM(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,P.Dv)("Reference.remove",0,1,arguments.length),(0,P.Wj)("Reference.remove","onComplete",e,!0);const t=function zW(n){return Ca("remove",n._path),XM(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,P.Dv)("Reference.transaction",1,3,arguments.length),(0,P.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,P.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,P.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function kz(n,e,t){var r;if(n=(0,P.m9)(n),Ca("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,a=new P.BH,h=JM(n,()=>{});return function VW(n,e,t,r,i,a){Hy(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:U1(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=qM(n,e,void 0);l.currentInputSnapshot=h;const _=l.update(h.val());if(void 0===_)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{DE("transaction failed: Data returned ",_,l.path),l.status=0;const w=hT(n.transactionQueueTree_,e),b=dm(w)||[];let x;b.push(l),BM(w,b),"object"==typeof _&&null!==_&&(0,P.r3)(_,".priority")?(x=(0,P.DV)(_,".priority"),(0,P.hu)(bE(x),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):x=(cT(n.serverSyncTree_,e)||Zt.EMPTY_NODE).getPriority().val();const k=AE(n),U=Dr(_,x),W=LM(U,h,k);l.currentOutputSnapshotRaw=U,l.currentOutputSnapshotResolved=W,l.currentWriteId=mT(n);const ae=RM(n.serverSyncTree_,e,W,l.currentWriteId,l.applyLocally);Mo(n.eventQueue_,e,ae),_T(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(_,w,b)=>{let x=null;_?a.reject(_):(x=new hm(b,new ba(n._repo,n._path),Kn),a.resolve(new Nz(w,x)))},h,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new Bz(a.committed,new Qf(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,P.Dv)("Reference.setPriority",1,2,arguments.length),(0,P.Wj)("Reference.setPriority","onComplete",t,!0);const r=function qW(n,e){n=(0,P.m9)(n),Ca("setPriority",n._path),HM("setPriority",e,!1);const t=new P.BH;return WM(n._repo,mr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,P.Dv)("Reference.push",0,2,arguments.length),(0,P.Wj)("Reference.push","onComplete",t,!0);const r=function WW(n,e){n=(0,P.m9)(n),Ca("push",n._path),ic("push",e,n._path,!0);const t=_L(n._repo),r=GW(t),i=fm(n,r),a=fm(n,r);let l;return l=null!=e?XM(a,e).then(()=>a):Promise.resolve(a),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new No(this.database,l));t&&i.then(()=>t(null),l=>t(l));const a=new No(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return Ca("Reference.onDisconnect",this._delegate._path),new Uz(new AL(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class ME{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Cz,forceLongPolling:bz}}useEmulator(e,t,r={}){!function jL(n,e,t,r={}){(n=(0,P.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&nc("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&nc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new uE(uE.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,P.Sg)(r.mockUserToken,n.app.options.projectId);a=new uE(l)}!function yz(n,e,t,r){n.repoInfo_=new XR(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,P.Dv)("database.ref",0,1,arguments.length),e instanceof No){const t=RL(this._delegate,e.toString());return new No(this,t)}{const t=xL(this._delegate,e);return new No(this,t)}}refFromURL(e){(0,P.Dv)("database.refFromURL",1,1,arguments.length);const r=RL(this._delegate,e);return new No(this,r)}goOffline(){return(0,P.Dv)("database.goOffline",0,0,arguments.length),function Dz(n){(n=(0,P.m9)(n))._checkNotDeleted("goOffline"),EL(n._repo)}(this._delegate)}goOnline(){return(0,P.Dv)("database.goOnline",0,0,arguments.length),function Tz(n){(n=(0,P.m9)(n))._checkNotDeleted("goOnline"),function LW(n){n.persistentConnection_&&n.persistentConnection_.resume(mL)}(n._repo)}(this._delegate)}}ME.ServerValue={TIMESTAMP:function Rz(){return xz}(),increment:n=>function Mz(n){return{".sv":{increment:n}}}(n)};var $z=Object.freeze({__proto__:null,initStandalone:function jz({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){L1(t);const l=new Ws.zt("auth-internal",new Ws.H0("database-standalone"));return l.setComponent(new Ws.wA("auth-internal",()=>r,"PRIVATE")),{instance:new ME(UL(n,l,void 0,e,a),n),namespace:i}}});const Hz=ME.ServerValue;function HL(n){return null==n}function GL(n){return"function"==typeof n.set}function WL(n,e){return GL(e)?e:n.ref(e)}function zL(n,e){if(function Wz(n){return"string"==typeof n}(n))return e.stringCase();if(GL(n))return e.firebaseCase();if(function zz(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function NE(n,e,t="on",r=Vh.z){return new Jn.y(i=>{let a=null;return a=n[t](e,(l,h)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,T.U)(i=>{const{snapshot:a,prevKey:l}=i;let h=null;return a.exists()&&(h=a.key),{type:e,payload:a,prevKey:l,key:h}}),(0,cP.B)())}function qL(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function Zz(n,e){const{payload:t,prevKey:r,key:i}=e,a=qL(n,i),l=function Kz(n,e){if(HL(e))return 0;{const t=qL(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(_=>{const w={payload:_,type:"value",prevKey:h,key:_.key};return h=_.key,n=[...n,w],!1})}return n;case"child_added":if(a>-1){const h=n[a-1];(h&&h.key||null)!==r&&(n=n.filter(_=>_.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(a>-1){const h=n.splice(a,1)[0];return(n=n.slice()).splice(l,0,h),n}return n;default:return n}}function KL(n){return(HL(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function ZL(n,e,t){return function qz(n,e,t){return NE(n,"value","once",t).pipe(Hn(r=>{const i=[rt(r)];return e.forEach(a=>i.push(NE(n,a,"on",t))),(0,Bx.T)(...i).pipe(vo(Zz,[]))}),Uh())}(n,e=KL(e),t)}function YL(n,e,t){const r=(e=KL(e)).map(i=>NE(n,i,"on",t));return(0,Bx.T)(...r)}function QL(n,e){return function(r,i){return zL(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function Jz(n){return function(t){return t?zL(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function XL(n,e){return function(){return NE(n,"value","on",e)}}!function Gz(n){n.INTERNAL.registerComponent(new Ws.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new ME(i,r)},"PUBLIC").setServiceProps({Reference:No,Query:Zi,Database:ME,DataSnapshot:Qf,enableLogging:Sz,INTERNAL:$z,ServerValue:Hz}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.1")}(Xp.Z);const nq=new p.OlP("angularfire2.realtimeDatabaseURL"),rq=new p.OlP("angularfire2.database.use-emulator");let iq=(()=>{class n{constructor(t,r,i,a,l,h,_,w,b,x,k,U,W,ae,ve){this.schedulers=h;const pt=_,_t=(0,hr.on)(t,l,r);w&&fR(_t,l,b,k,U,W,x,ae),this.database=(0,hr.cc)(`${_t.name}.database.${i}`,"AngularFireDatabase",_t.name,()=>{const st=l.runOutsideAngular(()=>_t.database(i||void 0));return pt&&st.useEmulator(...pt),st},[pt])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>WL(this.database,t));let a=i;return r&&(a=r(i)),function eq(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:QL(r,"update"),set:QL(r,"set"),push:i=>r.push(i),remove:Jz(r),snapshotChanges:i=>ZL(n,i,t).pipe(rn.iC),stateChanges:i=>YL(n,i,t).pipe(rn.iC),auditTrail:i=>function Yz(n,e,t){return function Xz(n,e,t){return function Qz(n,e){return NE(n,"value","on",e).pipe((0,T.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function Z$(...n){const e=(0,vr.jO)(n);return(0,Rr.e)((t,r)=>{const i=n.length,a=new Array(i);let l=n.map(()=>!1),h=!1;for(let _=0;_<i;_++)(0,vs.Xf)(n[_]).subscribe((0,_e.x)(r,w=>{a[_]=w,!h&&!l[_]&&(l[_]=!0,(h=l.every(D.y))&&(l=null))},K$.Z));t.subscribe((0,_e.x)(r,_=>{if(h){const w=[_,...a];r.next(e?e(...w):w)}}))})}(e),(0,T.U)(([i,a])=>{const l=i.lastKeyToLoad,h=a.map(_=>_.key);return{actions:a,lastKeyToLoad:l,loadedKeys:h}}),function Y$(n){return(0,Rr.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,_e.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,T.U)(i=>i.actions))}(n,YL(n,e).pipe(vo((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(rn.iC),valueChanges:(i,a)=>ZL(n,i,t).pipe((0,T.U)(h=>h.map(_=>a&&a.idField?Object.assign(Object.assign({},_.payload.val()),{[a.idField]:_.key}):_.payload.val())),rn.iC)}}(a,this)}object(t){return function tq(n,e){return{query:n,snapshotChanges:()=>XL(n,e.schedulers.outsideAngular)().pipe(rn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>XL(n,e.schedulers.outsideAngular)().pipe(rn.iC,(0,T.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>WL(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(hr.Dh),p.LFG(hr.xv,8),p.LFG(nq,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(rn.HU),p.LFG(rq,8),p.LFG(mD,8),p.LFG(aR,8),p.LFG(uR,8),p.LFG(lR,8),p.LFG(cR,8),p.LFG(dR,8),p.LFG(hR,8),p.LFG(U0,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),sq=(()=>{class n{constructor(){gD.Z.registerVersion("angularfire",rn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[iq]}),n})();class Wy{}Wy.\u0275fac=function(e){return new(e||Wy)},Wy.\u0275mod=p.oAB({type:Wy,bootstrap:[J0]}),Wy.\u0275inj=p.cJS({imports:[oh,tm,J2,ej,tm,hr.hO.initializeApp({apiKey:"AIzaSyCIQmWtTde9zdcVhz6But6zn5bMDsZx29o",authDomain:"intrainship-2023.firebaseapp.com",projectId:"intrainship-2023",storageBucket:"intrainship-2023.appspot.com",messagingSenderId:"606940185625",appId:"1:606940185625:web:bf0202a55cacfeb44ed688"}),ZB,r2,q$,sq]}),$i().bootstrapModule(Wy).catch(n=>console.error(n))},9751:(ft,be,F)=>{F.d(be,{y:()=>le});var p=F(930),Q=F(727),O=F(8822),re=F(9635),ne=F(2416),ie=F(576),fe=F(2806);let le=(()=>{class Z{constructor(Te){Te&&(this._subscribe=Te)}lift(Te){const We=new Z;return We.source=this,We.operator=Te,We}subscribe(Te,We,ut){const he=function G(Z){return Z&&Z instanceof p.Lv||function H(Z){return Z&&(0,ie.m)(Z.next)&&(0,ie.m)(Z.error)&&(0,ie.m)(Z.complete)}(Z)&&(0,Q.Nn)(Z)}(Te)?Te:new p.Hp(Te,We,ut);return(0,fe.x)(()=>{const{operator:Ae,source:Se}=this;he.add(Ae?Ae.call(he,Se):Se?this._subscribe(he):this._trySubscribe(he))}),he}_trySubscribe(Te){try{return this._subscribe(Te)}catch(We){Te.error(We)}}forEach(Te,We){return new(We=ue(We))((ut,he)=>{const Ae=new p.Hp({next:Se=>{try{Te(Se)}catch(Le){he(Le),Ae.unsubscribe()}},error:he,complete:ut});this.subscribe(Ae)})}_subscribe(Te){var We;return null===(We=this.source)||void 0===We?void 0:We.subscribe(Te)}[O.L](){return this}pipe(...Te){return(0,re.U)(Te)(this)}toPromise(Te){return new(Te=ue(Te))((We,ut)=>{let he;this.subscribe(Ae=>he=Ae,Ae=>ut(Ae),()=>We(he))})}}return Z.create=Be=>new Z(Be),Z})();function ue(Z){var Be;return null!==(Be=Z??ne.v.Promise)&&void 0!==Be?Be:Promise}},7579:(ft,be,F)=>{F.d(be,{x:()=>fe});var p=F(9751),Q=F(727);const re=(0,F(3888).d)(ue=>function(){ue(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ne=F(8737),ie=F(2806);let fe=(()=>{class ue extends p.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const Z=new le(this,this);return Z.operator=G,Z}_throwIfClosed(){if(this.closed)throw new re}next(G){(0,ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Z of this.currentObservers)Z.next(G)}})}error(G){(0,ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:Z}=this;for(;Z.length;)Z.shift().error(G)}})}complete(){(0,ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:Z,isStopped:Be,observers:Te}=this;return Z||Be?Q.Lc:(this.currentObservers=null,Te.push(G),new Q.w0(()=>{this.currentObservers=null,(0,ne.P)(Te,G)}))}_checkFinalizedStatuses(G){const{hasError:Z,thrownError:Be,isStopped:Te}=this;Z?G.error(Be):Te&&G.complete()}asObservable(){const G=new p.y;return G.source=this,G}}return ue.create=(H,G)=>new le(H,G),ue})();class le extends fe{constructor(H,G){super(),this.destination=H,this.source=G}next(H){var G,Z;null===(Z=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===Z||Z.call(G,H)}error(H){var G,Z;null===(Z=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===Z||Z.call(G,H)}complete(){var H,G;null===(G=null===(H=this.destination)||void 0===H?void 0:H.complete)||void 0===G||G.call(H)}_subscribe(H){var G,Z;return null!==(Z=null===(G=this.source)||void 0===G?void 0:G.subscribe(H))&&void 0!==Z?Z:Q.Lc}}},930:(ft,be,F)=>{F.d(be,{Hp:()=>ut,Lv:()=>Z});var p=F(576),Q=F(727),O=F(2416),re=F(7849),ne=F(5032);const ie=ue("C",void 0,void 0);function ue(De,Ie,xe){return{kind:De,value:Ie,error:xe}}var H=F(3410),G=F(2806);class Z extends Q.w0{constructor(Ie){super(),this.isStopped=!1,Ie?(this.destination=Ie,(0,Q.Nn)(Ie)&&Ie.add(this)):this.destination=Le}static create(Ie,xe,Fe){return new ut(Ie,xe,Fe)}next(Ie){this.isStopped?Se(function le(De){return ue("N",De,void 0)}(Ie),this):this._next(Ie)}error(Ie){this.isStopped?Se(function fe(De){return ue("E",void 0,De)}(Ie),this):(this.isStopped=!0,this._error(Ie))}complete(){this.isStopped?Se(ie,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ie){this.destination.next(Ie)}_error(Ie){try{this.destination.error(Ie)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Be=Function.prototype.bind;function Te(De,Ie){return Be.call(De,Ie)}class We{constructor(Ie){this.partialObserver=Ie}next(Ie){const{partialObserver:xe}=this;if(xe.next)try{xe.next(Ie)}catch(Fe){he(Fe)}}error(Ie){const{partialObserver:xe}=this;if(xe.error)try{xe.error(Ie)}catch(Fe){he(Fe)}else he(Ie)}complete(){const{partialObserver:Ie}=this;if(Ie.complete)try{Ie.complete()}catch(xe){he(xe)}}}class ut extends Z{constructor(Ie,xe,Fe){let Pe;if(super(),(0,p.m)(Ie)||!Ie)Pe={next:Ie??void 0,error:xe??void 0,complete:Fe??void 0};else{let j;this&&O.v.useDeprecatedNextContext?(j=Object.create(Ie),j.unsubscribe=()=>this.unsubscribe(),Pe={next:Ie.next&&Te(Ie.next,j),error:Ie.error&&Te(Ie.error,j),complete:Ie.complete&&Te(Ie.complete,j)}):Pe=Ie}this.destination=new We(Pe)}}function he(De){O.v.useDeprecatedSynchronousErrorHandling?(0,G.O)(De):(0,re.h)(De)}function Se(De,Ie){const{onStoppedNotification:xe}=O.v;xe&&H.z.setTimeout(()=>xe(De,Ie))}const Le={closed:!0,next:ne.Z,error:function Ae(De){throw De},complete:ne.Z}},727:(ft,be,F)=>{F.d(be,{Lc:()=>ie,w0:()=>ne,Nn:()=>fe});var p=F(576);const O=(0,F(3888).d)(ue=>function(G){ue(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((Z,Be)=>`${Be+1}) ${Z.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var re=F(8737);class ne{constructor(H){this.initialTeardown=H,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let H;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const Te of G)Te.remove(this);else G.remove(this);const{initialTeardown:Z}=this;if((0,p.m)(Z))try{Z()}catch(Te){H=Te instanceof O?Te.errors:[Te]}const{_finalizers:Be}=this;if(Be){this._finalizers=null;for(const Te of Be)try{le(Te)}catch(We){H=H??[],We instanceof O?H=[...H,...We.errors]:H.push(We)}}if(H)throw new O(H)}}add(H){var G;if(H&&H!==this)if(this.closed)le(H);else{if(H instanceof ne){if(H.closed||H._hasParent(this))return;H._addParent(this)}(this._finalizers=null!==(G=this._finalizers)&&void 0!==G?G:[]).push(H)}}_hasParent(H){const{_parentage:G}=this;return G===H||Array.isArray(G)&&G.includes(H)}_addParent(H){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push(H),G):G?[G,H]:H}_removeParent(H){const{_parentage:G}=this;G===H?this._parentage=null:Array.isArray(G)&&(0,re.P)(G,H)}remove(H){const{_finalizers:G}=this;G&&(0,re.P)(G,H),H instanceof ne&&H._removeParent(this)}}ne.EMPTY=(()=>{const ue=new ne;return ue.closed=!0,ue})();const ie=ne.EMPTY;function fe(ue){return ue instanceof ne||ue&&"closed"in ue&&(0,p.m)(ue.remove)&&(0,p.m)(ue.add)&&(0,p.m)(ue.unsubscribe)}function le(ue){(0,p.m)(ue)?ue():ue.unsubscribe()}},2416:(ft,be,F)=>{F.d(be,{v:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ft,be,F)=>{F.d(be,{E:()=>Q});const Q=new(F(9751).y)(ne=>ne.complete())},8996:(ft,be,F)=>{F.d(be,{D:()=>Ie});var p=F(8421),Q=F(5363),O=F(9468),ie=F(9751),le=F(2202),ue=F(576),H=F(9672);function Z(xe,Fe){if(!xe)throw new Error("Iterable cannot be null");return new ie.y(Pe=>{(0,H.f)(Pe,Fe,()=>{const j=xe[Symbol.asyncIterator]();(0,H.f)(Pe,Fe,()=>{j.next().then(Ee=>{Ee.done?Pe.complete():Pe.next(Ee.value)})},0,!0)})})}var Be=F(3670),Te=F(8239),We=F(1144),ut=F(6495),he=F(2206),Ae=F(4532),Se=F(3260);function Ie(xe,Fe){return Fe?function De(xe,Fe){if(null!=xe){if((0,Be.c)(xe))return function re(xe,Fe){return(0,p.Xf)(xe).pipe((0,O.R)(Fe),(0,Q.Q)(Fe))}(xe,Fe);if((0,We.z)(xe))return function fe(xe,Fe){return new ie.y(Pe=>{let j=0;return Fe.schedule(function(){j===xe.length?Pe.complete():(Pe.next(xe[j++]),Pe.closed||this.schedule())})})}(xe,Fe);if((0,Te.t)(xe))return function ne(xe,Fe){return(0,p.Xf)(xe).pipe((0,O.R)(Fe),(0,Q.Q)(Fe))}(xe,Fe);if((0,he.D)(xe))return Z(xe,Fe);if((0,ut.T)(xe))return function G(xe,Fe){return new ie.y(Pe=>{let j;return(0,H.f)(Pe,Fe,()=>{j=xe[le.h](),(0,H.f)(Pe,Fe,()=>{let Ee,Ue;try{({value:Ee,done:Ue}=j.next())}catch(Ke){return void Pe.error(Ke)}Ue?Pe.complete():Pe.next(Ee)},0,!0)}),()=>(0,ue.m)(j?.return)&&j.return()})}(xe,Fe);if((0,Se.L)(xe))return function Le(xe,Fe){return Z((0,Se.Q)(xe),Fe)}(xe,Fe)}throw(0,Ae.z)(xe)}(xe,Fe):(0,p.Xf)(xe)}},8421:(ft,be,F)=>{F.d(be,{Xf:()=>Be});var p=F(655),Q=F(1144),O=F(8239),re=F(9751),ne=F(3670),ie=F(2206),fe=F(4532),le=F(6495),ue=F(3260),H=F(576),G=F(7849),Z=F(8822);function Be(De){if(De instanceof re.y)return De;if(null!=De){if((0,ne.c)(De))return function Te(De){return new re.y(Ie=>{const xe=De[Z.L]();if((0,H.m)(xe.subscribe))return xe.subscribe(Ie);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(De);if((0,Q.z)(De))return function We(De){return new re.y(Ie=>{for(let xe=0;xe<De.length&&!Ie.closed;xe++)Ie.next(De[xe]);Ie.complete()})}(De);if((0,O.t)(De))return function ut(De){return new re.y(Ie=>{De.then(xe=>{Ie.closed||(Ie.next(xe),Ie.complete())},xe=>Ie.error(xe)).then(null,G.h)})}(De);if((0,ie.D)(De))return Ae(De);if((0,le.T)(De))return function he(De){return new re.y(Ie=>{for(const xe of De)if(Ie.next(xe),Ie.closed)return;Ie.complete()})}(De);if((0,ue.L)(De))return function Se(De){return Ae((0,ue.Q)(De))}(De)}throw(0,fe.z)(De)}function Ae(De){return new re.y(Ie=>{(function Le(De,Ie){var xe,Fe,Pe,j;return(0,p.mG)(this,void 0,void 0,function*(){try{for(xe=(0,p.KL)(De);!(Fe=yield xe.next()).done;)if(Ie.next(Fe.value),Ie.closed)return}catch(Ee){Pe={error:Ee}}finally{try{Fe&&!Fe.done&&(j=xe.return)&&(yield j.call(xe))}finally{if(Pe)throw Pe.error}}Ie.complete()})})(De,Ie).catch(xe=>Ie.error(xe))})}},6451:(ft,be,F)=>{F.d(be,{T:()=>ie});var p=F(8189),Q=F(8421),O=F(515),re=F(7669),ne=F(8996);function ie(...fe){const le=(0,re.yG)(fe),ue=(0,re._6)(fe,1/0),H=fe;return H.length?1===H.length?(0,Q.Xf)(H[0]):(0,p.J)(ue)((0,ne.D)(H,le)):O.E}},5403:(ft,be,F)=>{F.d(be,{x:()=>Q});var p=F(930);function Q(re,ne,ie,fe,le){return new O(re,ne,ie,fe,le)}class O extends p.Lv{constructor(ne,ie,fe,le,ue,H){super(ne),this.onFinalize=ue,this.shouldUnsubscribe=H,this._next=ie?function(G){try{ie(G)}catch(Z){ne.error(Z)}}:super._next,this._error=le?function(G){try{le(G)}catch(Z){ne.error(Z)}finally{this.unsubscribe()}}:super._error,this._complete=fe?function(){try{fe()}catch(G){ne.error(G)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ne;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ie}=this;super.unsubscribe(),!ie&&(null===(ne=this.onFinalize)||void 0===ne||ne.call(this))}}}},4004:(ft,be,F)=>{F.d(be,{U:()=>O});var p=F(4482),Q=F(5403);function O(re,ne){return(0,p.e)((ie,fe)=>{let le=0;ie.subscribe((0,Q.x)(fe,ue=>{fe.next(re.call(ne,ue,le++))}))})}},8189:(ft,be,F)=>{F.d(be,{J:()=>O});var p=F(5577),Q=F(4671);function O(re=1/0){return(0,p.z)(Q.y,re)}},5577:(ft,be,F)=>{F.d(be,{z:()=>le});var p=F(4004),Q=F(8421),O=F(4482),re=F(9672),ne=F(5403),fe=F(576);function le(ue,H,G=1/0){return(0,fe.m)(H)?le((Z,Be)=>(0,p.U)((Te,We)=>H(Z,Te,Be,We))((0,Q.Xf)(ue(Z,Be))),G):("number"==typeof H&&(G=H),(0,O.e)((Z,Be)=>function ie(ue,H,G,Z,Be,Te,We,ut){const he=[];let Ae=0,Se=0,Le=!1;const De=()=>{Le&&!he.length&&!Ae&&H.complete()},Ie=Fe=>Ae<Z?xe(Fe):he.push(Fe),xe=Fe=>{Te&&H.next(Fe),Ae++;let Pe=!1;(0,Q.Xf)(G(Fe,Se++)).subscribe((0,ne.x)(H,j=>{Be?.(j),Te?Ie(j):H.next(j)},()=>{Pe=!0},void 0,()=>{if(Pe)try{for(Ae--;he.length&&Ae<Z;){const j=he.shift();We?(0,re.f)(H,We,()=>xe(j)):xe(j)}De()}catch(j){H.error(j)}}))};return ue.subscribe((0,ne.x)(H,Ie,()=>{Le=!0,De()})),()=>{ut?.()}}(Z,Be,ue,G)))}},5363:(ft,be,F)=>{F.d(be,{Q:()=>re});var p=F(9672),Q=F(4482),O=F(5403);function re(ne,ie=0){return(0,Q.e)((fe,le)=>{fe.subscribe((0,O.x)(le,ue=>(0,p.f)(le,ne,()=>le.next(ue),ie),()=>(0,p.f)(le,ne,()=>le.complete(),ie),ue=>(0,p.f)(le,ne,()=>le.error(ue),ie)))})}},3099:(ft,be,F)=>{F.d(be,{B:()=>ne});var p=F(8421),Q=F(7579),O=F(930),re=F(4482);function ne(fe={}){const{connector:le=(()=>new Q.x),resetOnError:ue=!0,resetOnComplete:H=!0,resetOnRefCountZero:G=!0}=fe;return Z=>{let Be,Te,We,ut=0,he=!1,Ae=!1;const Se=()=>{Te?.unsubscribe(),Te=void 0},Le=()=>{Se(),Be=We=void 0,he=Ae=!1},De=()=>{const Ie=Be;Le(),Ie?.unsubscribe()};return(0,re.e)((Ie,xe)=>{ut++,!Ae&&!he&&Se();const Fe=We=We??le();xe.add(()=>{ut--,0===ut&&!Ae&&!he&&(Te=ie(De,G))}),Fe.subscribe(xe),!Be&&ut>0&&(Be=new O.Hp({next:Pe=>Fe.next(Pe),error:Pe=>{Ae=!0,Se(),Te=ie(Le,ue,Pe),Fe.error(Pe)},complete:()=>{he=!0,Se(),Te=ie(Le,H),Fe.complete()}}),(0,p.Xf)(Ie).subscribe(Be))})(Z)}}function ie(fe,le,...ue){if(!0===le)return void fe();if(!1===le)return;const H=new O.Hp({next:()=>{H.unsubscribe(),fe()}});return le(...ue).subscribe(H)}},9468:(ft,be,F)=>{F.d(be,{R:()=>Q});var p=F(4482);function Q(O,re=0){return(0,p.e)((ne,ie)=>{ie.add(O.schedule(()=>ne.subscribe(ie),re))})}},8505:(ft,be,F)=>{F.d(be,{b:()=>ne});var p=F(576),Q=F(4482),O=F(5403),re=F(4671);function ne(ie,fe,le){const ue=(0,p.m)(ie)||fe||le?{next:ie,error:fe,complete:le}:ie;return ue?(0,Q.e)((H,G)=>{var Z;null===(Z=ue.subscribe)||void 0===Z||Z.call(ue);let Be=!0;H.subscribe((0,O.x)(G,Te=>{var We;null===(We=ue.next)||void 0===We||We.call(ue,Te),G.next(Te)},()=>{var Te;Be=!1,null===(Te=ue.complete)||void 0===Te||Te.call(ue),G.complete()},Te=>{var We;Be=!1,null===(We=ue.error)||void 0===We||We.call(ue,Te),G.error(Te)},()=>{var Te,We;Be&&(null===(Te=ue.unsubscribe)||void 0===Te||Te.call(ue)),null===(We=ue.finalize)||void 0===We||We.call(ue)}))}):re.y}},4408:(ft,be,F)=>{F.d(be,{o:()=>ne});var p=F(727);class Q extends p.w0{constructor(fe,le){super()}schedule(fe,le=0){return this}}const O={setInterval(ie,fe,...le){const{delegate:ue}=O;return ue?.setInterval?ue.setInterval(ie,fe,...le):setInterval(ie,fe,...le)},clearInterval(ie){const{delegate:fe}=O;return(fe?.clearInterval||clearInterval)(ie)},delegate:void 0};var re=F(8737);class ne extends Q{constructor(fe,le){super(fe,le),this.scheduler=fe,this.work=le,this.pending=!1}schedule(fe,le=0){var ue;if(this.closed)return this;this.state=fe;const H=this.id,G=this.scheduler;return null!=H&&(this.id=this.recycleAsyncId(G,H,le)),this.pending=!0,this.delay=le,this.id=null!==(ue=this.id)&&void 0!==ue?ue:this.requestAsyncId(G,this.id,le),this}requestAsyncId(fe,le,ue=0){return O.setInterval(fe.flush.bind(fe,this),ue)}recycleAsyncId(fe,le,ue=0){if(null!=ue&&this.delay===ue&&!1===this.pending)return le;null!=le&&O.clearInterval(le)}execute(fe,le){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ue=this._execute(fe,le);if(ue)return ue;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(fe,le){let H,ue=!1;try{this.work(fe)}catch(G){ue=!0,H=G||new Error("Scheduled action threw falsy error")}if(ue)return this.unsubscribe(),H}unsubscribe(){if(!this.closed){const{id:fe,scheduler:le}=this,{actions:ue}=le;this.work=this.state=this.scheduler=null,this.pending=!1,(0,re.P)(ue,this),null!=fe&&(this.id=this.recycleAsyncId(le,fe,null)),this.delay=null,super.unsubscribe()}}}},7565:(ft,be,F)=>{F.d(be,{v:()=>O});var p=F(6063);class Q{constructor(ne,ie=Q.now){this.schedulerActionCtor=ne,this.now=ie}schedule(ne,ie=0,fe){return new this.schedulerActionCtor(this,ne).schedule(fe,ie)}}Q.now=p.l.now;class O extends Q{constructor(ne,ie=Q.now){super(ne,ie),this.actions=[],this._active=!1}flush(ne){const{actions:ie}=this;if(this._active)return void ie.push(ne);let fe;this._active=!0;do{if(fe=ne.execute(ne.state,ne.delay))break}while(ne=ie.shift());if(this._active=!1,fe){for(;ne=ie.shift();)ne.unsubscribe();throw fe}}}},4986:(ft,be,F)=>{F.d(be,{z:()=>O});var p=F(4408);const O=new(F(7565).v)(p.o)},6063:(ft,be,F)=>{F.d(be,{l:()=>p});const p={now:()=>(p.delegate||Date).now(),delegate:void 0}},3410:(ft,be,F)=>{F.d(be,{z:()=>p});const p={setTimeout(Q,O,...re){const{delegate:ne}=p;return ne?.setTimeout?ne.setTimeout(Q,O,...re):setTimeout(Q,O,...re)},clearTimeout(Q){const{delegate:O}=p;return(O?.clearTimeout||clearTimeout)(Q)},delegate:void 0}},2202:(ft,be,F)=>{F.d(be,{h:()=>Q});const Q=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ft,be,F)=>{F.d(be,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ft,be,F)=>{F.d(be,{_6:()=>ie,jO:()=>re,yG:()=>ne});var p=F(576);function O(fe){return fe[fe.length-1]}function re(fe){return(0,p.m)(O(fe))?fe.pop():void 0}function ne(fe){return function Q(fe){return fe&&(0,p.m)(fe.schedule)}(O(fe))?fe.pop():void 0}function ie(fe,le){return"number"==typeof O(fe)?fe.pop():le}},8737:(ft,be,F)=>{function p(Q,O){if(Q){const re=Q.indexOf(O);0<=re&&Q.splice(re,1)}}F.d(be,{P:()=>p})},3888:(ft,be,F)=>{function p(Q){const re=Q(ne=>{Error.call(ne),ne.stack=(new Error).stack});return re.prototype=Object.create(Error.prototype),re.prototype.constructor=re,re}F.d(be,{d:()=>p})},2806:(ft,be,F)=>{F.d(be,{O:()=>re,x:()=>O});var p=F(2416);let Q=null;function O(ne){if(p.v.useDeprecatedSynchronousErrorHandling){const ie=!Q;if(ie&&(Q={errorThrown:!1,error:null}),ne(),ie){const{errorThrown:fe,error:le}=Q;if(Q=null,fe)throw le}}else ne()}function re(ne){p.v.useDeprecatedSynchronousErrorHandling&&Q&&(Q.errorThrown=!0,Q.error=ne)}},9672:(ft,be,F)=>{function p(Q,O,re,ne=0,ie=!1){const fe=O.schedule(function(){re(),ie?Q.add(this.schedule(null,ne)):this.unsubscribe()},ne);if(Q.add(fe),!ie)return fe}F.d(be,{f:()=>p})},4671:(ft,be,F)=>{function p(Q){return Q}F.d(be,{y:()=>p})},1144:(ft,be,F)=>{F.d(be,{z:()=>p});const p=Q=>Q&&"number"==typeof Q.length&&"function"!=typeof Q},2206:(ft,be,F)=>{F.d(be,{D:()=>Q});var p=F(576);function Q(O){return Symbol.asyncIterator&&(0,p.m)(O?.[Symbol.asyncIterator])}},576:(ft,be,F)=>{function p(Q){return"function"==typeof Q}F.d(be,{m:()=>p})},3670:(ft,be,F)=>{F.d(be,{c:()=>O});var p=F(8822),Q=F(576);function O(re){return(0,Q.m)(re[p.L])}},6495:(ft,be,F)=>{F.d(be,{T:()=>O});var p=F(2202),Q=F(576);function O(re){return(0,Q.m)(re?.[p.h])}},8239:(ft,be,F)=>{F.d(be,{t:()=>Q});var p=F(576);function Q(O){return(0,p.m)(O?.then)}},3260:(ft,be,F)=>{F.d(be,{L:()=>re,Q:()=>O});var p=F(655),Q=F(576);function O(ne){return(0,p.FC)(this,arguments,function*(){const fe=ne.getReader();try{for(;;){const{value:le,done:ue}=yield(0,p.qq)(fe.read());if(ue)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(le)}}finally{fe.releaseLock()}})}function re(ne){return(0,Q.m)(ne?.getReader)}},4482:(ft,be,F)=>{F.d(be,{A:()=>Q,e:()=>O});var p=F(576);function Q(re){return(0,p.m)(re?.lift)}function O(re){return ne=>{if(Q(ne))return ne.lift(function(ie){try{return re(ie,this)}catch(fe){this.error(fe)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(ft,be,F)=>{function p(){}F.d(be,{Z:()=>p})},9635:(ft,be,F)=>{F.d(be,{U:()=>O,z:()=>Q});var p=F(4671);function Q(...re){return O(re)}function O(re){return 0===re.length?p.y:1===re.length?re[0]:function(ie){return re.reduce((fe,le)=>le(fe),ie)}}},7849:(ft,be,F)=>{F.d(be,{h:()=>O});var p=F(2416),Q=F(3410);function O(re){Q.z.setTimeout(()=>{const{onUnhandledError:ne}=p.v;if(!ne)throw re;ne(re)})}},4532:(ft,be,F)=>{function p(Q){return new TypeError(`You provided ${null!==Q&&"object"==typeof Q?"an invalid object":`'${Q}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(be,{z:()=>p})},655:(ft,be,F)=>{function re(se,de){var we={};for(var Re in se)Object.prototype.hasOwnProperty.call(se,Re)&&de.indexOf(Re)<0&&(we[Re]=se[Re]);if(null!=se&&"function"==typeof Object.getOwnPropertySymbols){var Ve=0;for(Re=Object.getOwnPropertySymbols(se);Ve<Re.length;Ve++)de.indexOf(Re[Ve])<0&&Object.prototype.propertyIsEnumerable.call(se,Re[Ve])&&(we[Re[Ve]]=se[Re[Ve]])}return we}function Z(se,de,we,Re){return new(we||(we=Promise))(function(je,Ye){function ze(an){try{Ct(Re.next(an))}catch(et){Ye(et)}}function pn(an){try{Ct(Re.throw(an))}catch(et){Ye(et)}}function Ct(an){an.done?je(an.value):function Ve(je){return je instanceof we?je:new we(function(Ye){Ye(je)})}(an.value).then(ze,pn)}Ct((Re=Re.apply(se,de||[])).next())})}function De(se){return this instanceof De?(this.v=se,this):new De(se)}function Ie(se,de,we){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ve,Re=we.apply(se,de||[]),je=[];return Ve={},Ye("next"),Ye("throw"),Ye("return"),Ve[Symbol.asyncIterator]=function(){return this},Ve;function Ye(Ot){Re[Ot]&&(Ve[Ot]=function(Dn){return new Promise(function(xn,Tn){je.push([Ot,Dn,xn,Tn])>1||ze(Ot,Dn)})})}function ze(Ot,Dn){try{!function pn(Ot){Ot.value instanceof De?Promise.resolve(Ot.value.v).then(Ct,an):et(je[0][2],Ot)}(Re[Ot](Dn))}catch(xn){et(je[0][3],xn)}}function Ct(Ot){ze("next",Ot)}function an(Ot){ze("throw",Ot)}function et(Ot,Dn){Ot(Dn),je.shift(),je.length&&ze(je[0][0],je[0][1])}}function Fe(se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var we,de=se[Symbol.asyncIterator];return de?de.call(se):(se=function ut(se){var de="function"==typeof Symbol&&Symbol.iterator,we=de&&se[de],Re=0;if(we)return we.call(se);if(se&&"number"==typeof se.length)return{next:function(){return se&&Re>=se.length&&(se=void 0),{value:se&&se[Re++],done:!se}}};throw new TypeError(de?"Object is not iterable.":"Symbol.iterator is not defined.")}(se),we={},Re("next"),Re("throw"),Re("return"),we[Symbol.asyncIterator]=function(){return this},we);function Re(je){we[je]=se[je]&&function(Ye){return new Promise(function(ze,pn){!function Ve(je,Ye,ze,pn){Promise.resolve(pn).then(function(Ct){je({value:Ct,done:ze})},Ye)}(ze,pn,(Ye=se[je](Ye)).done,Ye.value)})}}}F.d(be,{FC:()=>Ie,KL:()=>Fe,_T:()=>re,mG:()=>Z,qq:()=>De})},4650:(ft,be,F)=>{F.d(be,{$8M:()=>Oc,$WT:()=>Yn,$Z:()=>wI,AFp:()=>Eb,AaK:()=>le,CHM:()=>vc,CRH:()=>Ww,CZH:()=>Y_,CqO:()=>dg,D6c:()=>Rf,EJc:()=>l0,EpF:()=>HI,F4k:()=>iw,FYo:()=>Ev,FiY:()=>nl,GfV:()=>ZE,Gpc:()=>G,JOm:()=>bt,KtG:()=>Qd,LFG:()=>$e,Lbi:()=>bb,Lck:()=>pr,MGl:()=>hd,MMx:()=>Vl,NdJ:()=>cd,OlP:()=>Xt,Oqu:()=>v_,P3R:()=>BE,PXZ:()=>iy,Q6J:()=>Xh,QGY:()=>ld,Qsj:()=>OT,R0b:()=>Ss,RDi:()=>Io,Rgc:()=>jl,SBq:()=>Oh,Sil:()=>X_,Suo:()=>Ao,TTD:()=>Tu,TgZ:()=>o_,X6Q:()=>Pd,XFs:()=>yt,Xpm:()=>Ta,Xts:()=>dv,Y36:()=>Lh,YKP:()=>LC,YNc:()=>s_,Yjl:()=>Aa,Yz7:()=>et,Z0I:()=>Tn,ZZ4:()=>py,_Bn:()=>FC,_UZ:()=>ef,_Vd:()=>Ph,_c5:()=>Vb,_uU:()=>fw,aQg:()=>gy,c2e:()=>ei,cJS:()=>Dn,cg1:()=>ww,dDg:()=>ql,dqk:()=>Pt,eFA:()=>p0,ekj:()=>Wn,eoX:()=>d0,f3M:()=>tt,g9A:()=>Cb,h0i:()=>So,hGG:()=>gA,iGM:()=>vf,ifc:()=>Qt,ip1:()=>wb,jDz:()=>Jr,kL8:()=>mC,lG2:()=>Sa,lqb:()=>rd,lri:()=>Sf,n5z:()=>Pc,oAB:()=>kn,oxw:()=>aw,q4F:()=>YE,qLn:()=>Gp,qOj:()=>t_,qZA:()=>Jh,rWj:()=>zl,sBO:()=>Pb,s_b:()=>$_,soG:()=>bf,tb:()=>a0,tp0:()=>T,uIk:()=>Wh,vHH:()=>he,vpe:()=>ga,wAp:()=>At,xp6:()=>zp,z2F:()=>$g,zSh:()=>El,zs3:()=>Il});var p=F(7579),Q=F(727),O=F(9751),re=F(6451),ne=F(3099);function ie(s){for(let o in s)if(s[o]===ie)return o;throw Error("Could not find renamed property on target object.")}function fe(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function le(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(le).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function ue(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const H=ie({__forward_ref__:ie});function G(s){return s.__forward_ref__=G,s.toString=function(){return le(this())},s}function Z(s){return Be(s)?s():s}function Be(s){return"function"==typeof s&&s.hasOwnProperty(H)&&s.__forward_ref__===G}function Te(s){return s&&!!s.\u0275providers}const ut="https://g.co/ng/security#xss";class he extends Error{constructor(o,u){super(function Ae(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,u)),this.code=o}}function Se(s){return"string"==typeof s?s:null==s?"":String(s)}function Fe(s,o){throw new he(-201,!1)}function Ye(s,o){null==s&&function ze(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function et(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Dn(s){return{providers:s.providers||[],imports:s.imports||[]}}function xn(s){return Sn(s,$r)||Sn(s,vn)}function Tn(s){return null!==xn(s)}function Sn(s,o){return s.hasOwnProperty(o)?s[o]:null}function yi(s){return s&&(s.hasOwnProperty(Fs)||s.hasOwnProperty(ni))?s[Fs]:null}const $r=ie({\u0275prov:ie}),Fs=ie({\u0275inj:ie}),vn=ie({ngInjectableDef:ie}),ni=ie({ngInjectorDef:ie});var yt=(()=>((yt=yt||{})[yt.Default=0]="Default",yt[yt.Host=1]="Host",yt[yt.Self=2]="Self",yt[yt.SkipSelf=4]="SkipSelf",yt[yt.Optional=8]="Optional",yt))();let us;function Rn(s){const o=us;return us=s,o}function Nr(s,o,u){const c=xn(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&yt.Optional?null:void 0!==o?o:void Fe(le(s))}const Pt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Mn={},An="__NG_DI_FLAG__",Pi="ngTempTokenPath",ko=/\n/gm,Yi="__source";let Jt;function kr(s){const o=Jt;return Jt=s,o}function Qi(s,o=yt.Default){if(void 0===Jt)throw new he(-203,!1);return null===Jt?Nr(s,void 0,o):Jt.get(s,o&yt.Optional?null:void 0,o)}function $e(s,o=yt.Default){return(function ki(){return us}()||Qi)(Z(s),o)}function tt(s,o=yt.Default){return $e(s,xt(o))}function xt(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function Nt(s){const o=[];for(let u=0;u<s.length;u++){const c=Z(s[u]);if(Array.isArray(c)){if(0===c.length)throw new he(900,!1);let d,g=yt.Default;for(let v=0;v<c.length;v++){const I=c[v],C=$(I);"number"==typeof C?-1===C?d=I.token:g|=C:d=I}o.push($e(d,g))}else o.push($e(c))}return o}function Ut(s,o){return s[An]=o,s.prototype[An]=o,s}function $(s){return s[An]}function ge(s){return{toString:s}.toString()}var J=(()=>((J=J||{})[J.OnPush=0]="OnPush",J[J.Default=1]="Default",J))(),Qt=(()=>{return(s=Qt||(Qt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Qt;var s})();const Nn={},Et=[],_r=ie({\u0275cmp:ie}),qt=ie({\u0275dir:ie}),or=ie({\u0275pipe:ie}),Po=ie({\u0275mod:ie}),Pr=ie({\u0275fac:ie}),Da=ie({__NG_ELEMENT_ID__:ie});let Xf=0;function Ta(s){return ge(()=>{const u=!0===s.standalone,c={},d={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===J.OnPush,directiveDefs:null,pipeDefs:null,standalone:u,dependencies:u&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||Et,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Qt.Emulated,id:"c"+Xf++,styles:s.styles||Et,_:null,setInput:null,schemas:s.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},g=s.dependencies,v=s.features;return d.inputs=oc(s.inputs,c),d.outputs=oc(s.outputs),v&&v.forEach(I=>I(d)),d.directiveDefs=g?()=>("function"==typeof g?g():g).map(sc).filter(Gd):null,d.pipeDefs=g?()=>("function"==typeof g?g():g).map(Bn).filter(Gd):null,d})}function sc(s){return en(s)||ar(s)}function Gd(s){return null!==s}function kn(s){return ge(()=>({type:s.type,bootstrap:s.bootstrap||Et,declarations:s.declarations||Et,imports:s.imports||Et,exports:s.exports||Et,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function oc(s,o){if(null==s)return Nn;const u={};for(const c in s)if(s.hasOwnProperty(c)){let d=s[c],g=d;Array.isArray(d)&&(g=d[1],d=d[0]),u[d]=c,o&&(o[d]=g)}return u}const Sa=Ta;function Aa(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function en(s){return s[_r]||null}function ar(s){return s[qt]||null}function Bn(s){return s[or]||null}function Yn(s){const o=en(s)||ar(s)||Bn(s);return null!==o&&o.standalone}function Or(s,o){const u=s[Po]||null;if(!u&&!0===o)throw new Error(`Type ${le(s)} does not have '\u0275mod' property.`);return u}function ri(s){return Array.isArray(s)&&"object"==typeof s[1]}function Vi(s){return Array.isArray(s)&&!0===s[1]}function xa(s){return 0!=(4&s.flags)}function Ui(s){return s.componentOffset>-1}function lc(s){return 1==(1&s.flags)}function ii(s){return null!==s.template}function Ra(s){return 0!=(256&s[2])}function io(s,o){return s.hasOwnProperty(Pr)?s[Pr]:null}class so{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function Tu(){return jo}function jo(s){return s.type.prototype.ngOnChanges&&(s.setInput=$o),Su}function Su(){const s=Na(this),o=s?.current;if(o){const u=s.previous;if(u===Nn)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function $o(s,o,u,c){const d=this.declaredInputs[u],g=Na(s)||function Zd(s,o){return s[oo]=o}(s,{previous:Nn,current:null}),v=g.current||(g.current={}),I=g.previous,C=I[d];v[d]=new so(C&&C.currentValue,o,I===Nn),s[c]=o}Tu.ngInherit=!0;const oo="__ngSimpleChanges__";function Na(s){return s[oo]||null}function jn(s){for(;Array.isArray(s);)s=s[0];return s}function ao(s,o){return jn(o[s])}function Xn(s,o){return jn(o[s.index])}function Wo(s,o){return s.data[o]}function yr(s,o){const u=o[s];return ri(u)?u:u[0]}function zo(s){return 64==(64&s[2])}function fs(s,o){return null==o?null:s[o]}function Pa(s){s[18]=0}function Oa(s,o){s[5]+=o;let u=s,c=s[3];for(;null!==c&&(1===o&&1===u[5]||-1===o&&0===u[5]);)c[5]+=o,u=c,c=c[3]}const kt={lFrame:zy(null),bindingsEnabled:!0};function ku(){return kt.bindingsEnabled}function me(){return kt.lFrame.lView}function tn(){return kt.lFrame.tView}function vc(s){return kt.lFrame.contextLView=s,s[8]}function Qd(s){return kt.lFrame.contextLView=null,s}function Ar(){let s=Fa();for(;null!==s&&64===s.type;)s=s.parent;return s}function Fa(){return kt.lFrame.currentTNode}function oi(s,o){const u=kt.lFrame;u.currentTNode=s,u.isParent=o}function Ou(){return kt.lFrame.isParent}function lo(){return kt.lFrame.bindingIndex++}function eh(s,o){const u=kt.lFrame;u.bindingIndex=u.bindingRootIndex=s,Ic(o)}function Ic(s){kt.lFrame.currentDirectiveIndex=s}function th(){return kt.lFrame.currentQueryIndex}function Cc(s){kt.lFrame.currentQueryIndex=s}function nh(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function ip(s,o,u){if(u&yt.SkipSelf){let d=o,g=s;for(;!(d=d.parent,null!==d||u&yt.Host||(d=nh(g),null===d||(g=g[15],10&d.type))););if(null===d)return!1;o=d,s=g}const c=kt.lFrame=sp();return c.currentTNode=o,c.lView=s,!0}function Vu(s){const o=sp(),u=s[1];kt.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function sp(){const s=kt.lFrame,o=null===s?null:s.child;return null===o?zy(s):o}function zy(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function mm(){const s=kt.lFrame;return kt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const bc=mm;function _m(){const s=mm();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function zr(){return kt.lFrame.selectedIndex}function qo(s){kt.lFrame.selectedIndex=s}function Cn(){const s=kt.lFrame;return Wo(s.tView,s.selectedIndex)}function Va(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const g=s.data[u].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:I,ngAfterViewInit:C,ngAfterViewChecked:S,ngOnDestroy:M}=g;v&&(s.contentHooks||(s.contentHooks=[])).push(-u,v),I&&((s.contentHooks||(s.contentHooks=[])).push(u,I),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,I)),C&&(s.viewHooks||(s.viewHooks=[])).push(-u,C),S&&((s.viewHooks||(s.viewHooks=[])).push(u,S),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,S)),null!=M&&(s.destroyHooks||(s.destroyHooks=[])).push(u,M)}}function js(s,o,u){Tc(s,o,3,u)}function Zo(s,o,u,c){(3&s[2])===u&&Tc(s,o,u,c)}function Ei(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function Tc(s,o,u,c){const g=c??-1,v=o.length-1;let I=0;for(let C=void 0!==c?65535&s[18]:0;C<v;C++)if("number"==typeof o[C+1]){if(I=o[C],null!=c&&I>=c)break}else o[C]<0&&(s[18]+=65536),(I<g||-1==g)&&(Uu(s,u,o,C),s[18]=(4294901760&s[18])+C+2),C++}function Uu(s,o,u,c){const d=u[c]<0,g=u[c+1],I=s[d?-u[c]:u[c]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{g.call(I)}finally{}}}else try{g.call(I)}finally{}}class Qo{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function wn(s,o,u){let c=0;for(;c<u.length;){const d=u[c];if("number"==typeof d){if(0!==d)break;c++;const g=u[c++],v=u[c++],I=u[c++];s.setAttribute(o,v,I,g)}else{const g=d,v=u[++c];ho(g)?s.setProperty(o,g,v):s.setAttribute(o,g,v),c++}}return c}function ja(s){return 3===s||4===s||6===s}function ho(s){return 64===s.charCodeAt(0)}function gs(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?u=d:0===u||$a(s,u,d,null,-1===u||2===u?o[++c]:null)}}return s}function $a(s,o,u,c,d){let g=0,v=s.length;if(-1===o)v=-1;else for(;g<s.length;){const I=s[g++];if("number"==typeof I){if(I===o){v=-1;break}if(I>o){v=g-1;break}}}for(;g<s.length;){const I=s[g];if("number"==typeof I)break;if(I===u){if(null===c)return void(null!==d&&(s[g+1]=d));if(c===s[g+1])return void(s[g+2]=d)}g++,null!==c&&g++,null!==d&&g++}-1!==v&&(s.splice(v,0,o),g=v+1),s.splice(g++,0,u),null!==c&&s.splice(g++,0,c),null!==d&&s.splice(g++,0,d)}function xc(s){return-1!==s}function ju(s){return 32767&s}function Hu(s,o){let u=function $u(s){return s>>16}(s),c=o;for(;u>0;)c=c[15],u--;return c}let $s=!0;function fo(s){const o=$s;return $s=s,o}let Rc=0;const qr={};function Jo(s,o){const u=Wu(s,o);if(-1!==u)return u;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,mo(c.data,s),mo(o,null),mo(c.blueprint,null));const d=Ha(s,o),g=s.injectorIndex;if(xc(d)){const v=ju(d),I=Hu(d,o),C=I[1].data;for(let S=0;S<8;S++)o[g+S]=I[v+S]|C[v+S]}return o[g+8]=d,g}function mo(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Wu(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Ha(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,d=o;for(;null!==d;){if(c=lp(d),null===c)return-1;if(u++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function Mc(s,o,u){!function Gu(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(Da)&&(c=u[Da]),null==c&&(c=u[Da]=Rc++);const d=255&c;o.data[s+(d>>5)]|=1<<d}(s,o,u)}function _o(s,o,u){if(u&yt.Optional||void 0!==s)return s;Fe()}function ea(s,o,u,c){if(u&yt.Optional&&void 0===c&&(c=null),!(u&(yt.Self|yt.Host))){const d=s[9],g=Rn(void 0);try{return d?d.get(o,c,u&yt.Optional):Nr(o,c,u&yt.Optional)}finally{Rn(g)}}return _o(c,0,u)}function ap(s,o,u,c=yt.Default,d){if(null!==s){if(1024&o[2]){const v=function oh(s,o,u,c,d){let g=s,v=o;for(;null!==g&&null!==v&&1024&v[2]&&!(256&v[2]);){const I=ms(g,v,u,c|yt.Self,qr);if(I!==qr)return I;let C=g.parent;if(!C){const S=v[21];if(S){const M=S.get(u,qr,c);if(M!==qr)return M}C=lp(v),v=v[15]}g=C}return d}(s,o,u,c,qr);if(v!==qr)return v}const g=ms(s,o,u,c,qr);if(g!==qr)return g}return ea(o,u,c,d)}function ms(s,o,u,c,d){const g=function Nc(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Da)?s[Da]:void 0;return"number"==typeof o?o>=0?255&o:up:o}(u);if("function"==typeof g){if(!ip(o,s,c))return c&yt.Host?_o(d,0,c):ea(o,u,c,d);try{const v=g(c);if(null!=v||c&yt.Optional)return v;Fe()}finally{bc()}}else if("number"==typeof g){let v=null,I=Wu(s,o),C=-1,S=c&yt.Host?o[16][6]:null;for((-1===I||c&yt.SkipSelf)&&(C=-1===I?Ha(s,o):o[I+8],-1!==C&&ji(c,!1)?(v=o[1],I=ju(C),o=Hu(C,o)):I=-1);-1!==I;){const M=o[1];if(kc(g,I,M.data)){const L=Ga(I,o,u,v,c,S);if(L!==qr)return L}C=o[I+8],-1!==C&&ji(c,o[1].data[I+8]===S)&&kc(g,I,o)?(v=M,I=ju(C),o=Hu(C,o)):I=-1}}return d}function Ga(s,o,u,c,d,g){const v=o[1],I=v.data[s+8],M=zu(I,v,u,null==c?Ui(I)&&$s:c!=v&&0!=(3&I.type),d&yt.Host&&g===I);return null!==M?Bi(o,v,M,I):qr}function zu(s,o,u,c,d){const g=s.providerIndexes,v=o.data,I=1048575&g,C=s.directiveStart,M=g>>20,z=d?I+M:s.directiveEnd;for(let X=c?I:I+M;X<z;X++){const ye=v[X];if(X<C&&u===ye||X>=C&&ye.type===u)return X}if(d){const X=v[C];if(X&&ii(X)&&X.type===u)return C}return null}function Bi(s,o,u,c){let d=s[u];const g=o.data;if(function Ii(s){return s instanceof Qo}(d)){const v=d;v.resolving&&function De(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new he(-200,`Circular dependency in DI detected for ${s}${u}`)}(function Le(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Se(s)}(g[u]));const I=fo(v.canSeeViewProviders);v.resolving=!0;const C=v.injectImpl?Rn(v.injectImpl):null;ip(s,c,yt.Default);try{d=s[u]=v.factory(void 0,g,s,c),o.firstCreatePass&&u>=c.directiveStart&&function vm(s,o,u){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:g}=o.type.prototype;if(c){const v=jo(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,v),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,v)}d&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,d),g&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,g),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,g))}(u,g[u],o)}finally{null!==C&&Rn(C),fo(I),v.resolving=!1,bc()}}return d}function kc(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function ji(s,o){return!(s&yt.Self||s&yt.Host&&o)}class $i{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return ap(this._tNode,this._lView,o,xt(c),u)}}function up(){return new $i(Ar(),me())}function Pc(s){return ge(()=>{const o=s.prototype.constructor,u=o[Pr]||qu(o),c=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==c;){const g=d[Pr]||qu(d);if(g&&g!==u)return g;d=Object.getPrototypeOf(d)}return g=>new g})}function qu(s){return Be(s)?()=>{const o=qu(Z(s));return o&&o()}:io(s)}function lp(s){const o=s[1],u=o.type;return 2===u?o.declTNode:1===u?s[6]:null}function Oc(s){return function sh(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let d=0;for(;d<c;){const g=u[d];if(ja(g))break;if(0===g)d+=2;else if("number"==typeof g)for(d++;d<c&&"string"==typeof u[d];)d++;else{if(g===o)return u[d+1];d+=2}}}return null}(Ar(),s)}const Wa="__parameters__";function Ku(s,o,u){return ge(()=>{const c=function uh(s){return function(...u){if(s){const c=s(...u);for(const d in c)this[d]=c[d]}}}(o);function d(...g){if(this instanceof d)return c.apply(this,g),this;const v=new d(...g);return I.annotation=v,I;function I(C,S,M){const L=C.hasOwnProperty(Wa)?C[Wa]:Object.defineProperty(C,Wa,{value:[]})[Wa];for(;L.length<=M;)L.push(null);return(L[M]=L[M]||[]).push(v),C}}return u&&(d.prototype=Object.create(u.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class Xt{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=et({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function ts(s,o){s.forEach(u=>Array.isArray(u)?ts(u,o):o(u))}function Ju(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function za(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Kr(s,o,u){let c=vr(s,o);return c>=0?s[1|c]=u:(c=~c,function pp(s,o,u,c){let d=s.length;if(d==o)s.push(u,c);else if(1===d)s.push(c,s[0]),s[0]=u;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=u,s[o+1]=c}}(s,c,o,u)),c}function nn(s,o){const u=vr(s,o);if(u>=0)return s[1|u]}function vr(s,o){return function _s(s,o,u){let c=0,d=s.length>>u;for(;d!==c;){const g=c+(d-c>>1),v=s[g<<u];if(o===v)return g<<u;v>o?d=g:c=g+1}return~(d<<u)}(s,o,1)}const nl=Ut(Ku("Optional"),8),T=Ut(Ku("SkipSelf"),4);var bt=(()=>((bt=bt||{})[bt.Important=1]="Important",bt[bt.DashCase=2]="DashCase",bt))();const $c=new Map;let Hs=0;const yh="__ngContext__";function Vr(s,o){ri(o)?(s[yh]=o[20],function bm(s){$c.set(s[20],s)}(o)):s[yh]=o}function Xa(s,o){return undefined(s,o)}function Ja(s){const o=s[3];return Vi(o)?o[3]:o}function al(s){return Tm(s[13])}function ul(s){return Tm(s[4])}function Tm(s){for(;null!==s&&!Vi(s);)s=s[4];return s}function oa(s,o,u,c,d){if(null!=c){let g,v=!1;Vi(c)?g=c:ri(c)&&(v=!0,c=c[0]);const I=jn(c);0===s&&null!==u?null==d?hl(o,u,I):tu(o,u,I,d||null,!0):1===s&&null!==u?tu(o,u,I,d||null,!0):2===s?function nu(s,o,u){const c=wo(s,o);c&&function fl(s,o,u,c){s.removeChild(o,u,c)}(s,c,o,u)}(o,I,v):3===s&&o.destroyNode(I),null!=g&&function Xc(s,o,u,c,d){const g=u[7];g!==jn(u)&&oa(o,s,c,g,d);for(let I=10;I<u.length;I++){const C=u[I];Yc(C[1],C,s,o,c,g)}}(o,s,g,u,d)}}function zc(s,o,u){return s.createElement(o,u)}function qc(s,o){const u=s[9],c=u.indexOf(o),d=o[3];512&o[2]&&(o[2]&=-513,Oa(d,-1)),u.splice(c,1)}function Rp(s,o){if(s.length<=10)return;const u=10+o,c=s[u];if(c){const d=c[17];null!==d&&d!==s&&qc(d,c),o>0&&(s[u-1][4]=c[4]);const g=za(s,10+o);!function Xy(s,o){Yc(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const v=g[19];null!==v&&v.detachView(g[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function wh(s,o){if(!(128&o[2])){const u=o[11];u.destroyNode&&Yc(s,o,u,3,null,null),function xp(s){let o=s[13];if(!o)return dl(s[1],s);for(;o;){let u=null;if(ri(o))u=o[13];else{const c=o[10];c&&(u=c)}if(!u){for(;o&&!o[4]&&o!==s;)ri(o)&&dl(o[1],o),o=o[3];null===o&&(o=s),ri(o)&&dl(o[1],o),u=o&&o[4]}o=u}}(o)}}function dl(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function eu(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const d=o[u[c]];if(!(d instanceof Qo)){const g=u[c+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const I=d[g[v]],C=g[v+1];try{C.call(I)}finally{}}else try{g.call(d)}finally{}}}}(s,o),function Sm(s,o){const u=s.cleanup,c=o[7];let d=-1;if(null!==u)for(let g=0;g<u.length-1;g+=2)if("string"==typeof u[g]){const v=u[g+3];v>=0?c[d=v]():c[d=-v].unsubscribe(),g+=2}else{const v=c[d=u[g+1]];u[g].call(v)}if(null!==c){for(let g=d+1;g<c.length;g++)(0,c[g])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const u=o[17];if(null!==u&&Vi(o[3])){u!==o[3]&&qc(u,o);const c=o[19];null!==c&&c.detachView(s)}!function OE(s){$c.delete(s[20])}(o)}}function Eh(s,o,u){return function nv(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[0];{const{componentOffset:d}=c;if(d>-1){const{encapsulation:g}=s.data[c.directiveStart+d];if(g===Qt.None||g===Qt.Emulated)return null}return Xn(c,u)}}(s,o.parent,u)}function tu(s,o,u,c,d){s.insertBefore(o,u,c,d)}function hl(s,o,u){s.appendChild(o,u)}function Am(s,o,u,c,d){null!==c?tu(s,o,u,c,d):hl(s,o,u)}function wo(s,o){return s.parentNode(o)}let Op,ed,Eo=function Ch(s,o,u){return 40&s.type?Xn(s,u):null};function Zc(s,o,u,c){const d=Eh(s,c,o),g=o[11],I=function Mp(s,o,u){return Eo(s,o,u)}(c.parent||o[6],c,o);if(null!=d)if(Array.isArray(u))for(let C=0;C<u.length;C++)Am(g,d,u[C],I,!1);else Am(g,d,u,I,!1)}function pl(s,o){if(null!==o){const u=o.type;if(3&u)return Xn(o,s);if(4&u)return cr(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return pl(s,c);{const d=s[o.index];return Vi(d)?cr(-1,d):jn(d)}}if(32&u)return Xa(o,s)()||jn(s[o.index]);{const c=bh(s,o);return null!==c?Array.isArray(c)?c[0]:pl(Ja(s[16]),c):pl(s,o.next)}}return null}function bh(s,o){return null!==o?s[16][6].projection[o.projection]:null}function cr(s,o){const u=10+s+1;if(u<o.length){const c=o[u],d=c[1].firstChild;if(null!==d)return pl(c,d)}return o[7]}function gl(s,o,u,c,d,g,v){for(;null!=u;){const I=c[u.index],C=u.type;if(v&&0===o&&(I&&Vr(jn(I),c),u.flags|=2),32!=(32&u.flags))if(8&C)gl(s,o,u.child,c,d,g,!1),oa(o,s,d,I,g);else if(32&C){const S=Xa(u,c);let M;for(;M=S();)oa(o,s,d,M,g);oa(o,s,d,I,g)}else 16&C?Qc(s,o,c,u,d,g):oa(o,s,d,I,g);u=v?u.projectionNext:u.next}}function Yc(s,o,u,c,d,g){gl(u,c,s.firstChild,o,d,g,!1)}function Qc(s,o,u,c,d,g){const v=u[16],C=v[6].projection[c.projection];if(Array.isArray(C))for(let S=0;S<C.length;S++)oa(o,s,d,C[S],g);else gl(s,o,C,v[3],d,g,!0)}function fi(s,o,u){""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u)}function ml(s,o,u){const{mergedAttrs:c,classes:d,styles:g}=u;null!==c&&wn(s,o,c),null!==d&&fi(s,o,d),null!==g&&function kp(s,o,u){s.setAttribute(o,"style",u)}(s,o,g)}function Io(s){Op=s}function km(s){return function Sh(){if(void 0===ed&&(ed=null,Pt.trustedTypes))try{ed=Pt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return ed}()?.createScriptURL(s)||s}class rv{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ut})`}}function E(s){return s instanceof rv?s.changingThisBreaksApplicationSecurity:s}function A(s,o){const u=function N(s){return s instanceof rv&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see ${ut})`)}return u===o}const Fp=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var dr=(()=>((dr=dr||{})[dr.NONE=0]="NONE",dr[dr.HTML=1]="HTML",dr[dr.STYLE=2]="STYLE",dr[dr.SCRIPT=3]="SCRIPT",dr[dr.URL=4]="URL",dr[dr.RESOURCE_URL=5]="RESOURCE_URL",dr))();function VE(s){const o=jp();return o?o.sanitize(dr.URL,s)||"":A(s,"URL")?E(s):function iu(s){return(s=String(s)).match(Fp)?s:"unsafe:"+s}(Se(s))}function Fm(s){const o=jp();if(o)return km(o.sanitize(dr.RESOURCE_URL,s)||"");if(A(s,"ResourceURL"))return km(E(s));throw new he(904,!1)}function BE(s,o,u){return function TT(s,o){return"src"===o&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===o&&("base"===s||"link"===s)?Fm:VE}(o,u)(s)}function jp(){const s=me();return s&&s[12]}const dv=new Xt("ENVIRONMENT_INITIALIZER"),nd=new Xt("INJECTOR",-1),Rh=new Xt("INJECTOR_DEF_TYPES");class jE{get(o,u=Mn){if(u===Mn){const c=new Error(`NullInjectorError: No provider for ${le(o)}!`);throw c.name="NullInjectorError",c}return u}}function $p(...s){return{\u0275providers:Mh(0,s),\u0275fromNgModule:!0}}function Mh(s,...o){const u=[],c=new Set;let d;return ts(o,g=>{const v=g;hv(v,u,[],c)&&(d||(d=[]),d.push(v))}),void 0!==d&&$E(d,u),u}function $E(s,o){for(let u=0;u<s.length;u++){const{providers:d}=s[u];fv(d,g=>{o.push(g)})}}function hv(s,o,u,c){if(!(s=Z(s)))return!1;let d=null,g=yi(s);const v=!g&&en(s);if(g||v){if(v&&!v.standalone)return!1;d=s}else{const C=s.ngModule;if(g=yi(C),!g)return!1;d=C}const I=c.has(d);if(v){if(I)return!1;if(c.add(d),v.dependencies){const C="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const S of C)hv(S,o,u,c)}}else{if(!g)return!1;{if(null!=g.imports&&!I){let S;c.add(d);try{ts(g.imports,M=>{hv(M,o,u,c)&&(S||(S=[]),S.push(M))})}finally{}void 0!==S&&$E(S,o)}if(!I){const S=io(d)||(()=>new d);o.push({provide:d,useFactory:S,deps:Et},{provide:Rh,useValue:d,multi:!0},{provide:dv,useValue:()=>$e(d),multi:!0})}const C=g.providers;null==C||I||fv(C,M=>{o.push(M)})}}return d!==s&&void 0!==s.providers}function fv(s,o){for(let u of s)Te(u)&&(u=u.\u0275providers),Array.isArray(u)?fv(u,o):o(u)}const AT=ie({provide:String,useValue:ie});function pv(s){return null!==s&&"object"==typeof s&&AT in s}function su(s){return"function"==typeof s}const El=new Xt("Set Injector scope."),Vm={},RT={};let gv;function Um(){return void 0===gv&&(gv=new jE),gv}class rd{}class GE extends rd{get destroyed(){return this._destroyed}constructor(o,u,c,d){super(),this.parent=u,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,kh(o,v=>this.processProvider(v)),this.records.set(nd,Nh(void 0,this)),d.has("environment")&&this.records.set(rd,Nh(void 0,this));const g=this.records.get(El);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(Rh.multi,Et,yt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const u=kr(this),c=Rn(void 0);try{return o()}finally{kr(u),Rn(c)}}get(o,u=Mn,c=yt.Default){this.assertNotDestroyed(),c=xt(c);const d=kr(this),g=Rn(void 0);try{if(!(c&yt.SkipSelf)){let I=this.records.get(o);if(void 0===I){const C=function vv(s){return"function"==typeof s||"object"==typeof s&&s instanceof Xt}(o)&&xn(o);I=C&&this.injectableDefInScope(C)?Nh(mv(o),Vm):null,this.records.set(o,I)}if(null!=I)return this.hydrate(o,I)}return(c&yt.Self?Um():this.parent).get(o,u=c&yt.Optional&&u===Mn?null:u)}catch(v){if("NullInjectorError"===v.name){if((v[Pi]=v[Pi]||[]).unshift(le(o)),d)throw v;return function B(s,o,u,c){const d=s[Pi];throw o[Yi]&&d.unshift(o[Yi]),s.message=function K(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let d=le(o);if(Array.isArray(o))d=o.map(le).join(" -> ");else if("object"==typeof o){let g=[];for(let v in o)if(o.hasOwnProperty(v)){let I=o[v];g.push(v+":"+("string"==typeof I?JSON.stringify(I):le(I)))}d=`{${g.join(", ")}}`}return`${u}${c?"("+c+")":""}[${d}]: ${s.replace(ko,"\n  ")}`}("\n"+s.message,d,u,c),s.ngTokenPath=d,s[Pi]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{Rn(g),kr(d)}}resolveInjectorInitializers(){const o=kr(this),u=Rn(void 0);try{const c=this.get(dv.multi,Et,yt.Self);for(const d of c)d()}finally{kr(o),Rn(u)}}toString(){const o=[],u=this.records;for(const c of u.keys())o.push(le(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new he(205,!1)}processProvider(o){let u=su(o=Z(o))?o:Z(o&&o.provide);const c=function NT(s){return pv(s)?Nh(void 0,s.useValue):Nh(_v(s),Vm)}(o);if(su(o)||!0!==o.multi)this.records.get(u);else{let d=this.records.get(u);d||(d=Nh(void 0,Vm,!0),d.factory=()=>Nt(d.multi),this.records.set(u,d)),u=o,d.multi.push(o)}this.records.set(u,c)}hydrate(o,u){return u.value===Vm&&(u.value=RT,u.value=u.factory()),"object"==typeof u.value&&u.value&&function WE(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=Z(o.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function mv(s){const o=xn(s),u=null!==o?o.factory:io(s);if(null!==u)return u;if(s instanceof Xt)throw new he(204,!1);if(s instanceof Function)return function MT(s){const o=s.length;if(o>0)throw function na(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}(o,"?"),new he(204,!1);const u=function ti(s){const o=s&&(s[$r]||s[vn]);if(o){const u=function Os(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new he(204,!1)}function _v(s,o,u){let c;if(su(s)){const d=Z(s);return io(d)||mv(d)}if(pv(s))c=()=>Z(s.useValue);else if(function HE(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...Nt(s.deps||[]));else if(function xT(s){return!(!s||!s.useExisting)}(s))c=()=>$e(Z(s.useExisting));else{const d=Z(s&&(s.useClass||s.provide));if(!function yv(s){return!!s.deps}(s))return io(d)||mv(d);c=()=>new d(...Nt(s.deps))}return c}function Nh(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function kh(s,o){for(const u of s)Array.isArray(u)?kh(u,o):u&&Te(u)?kh(u.\u0275providers,o):o(u)}class kT{}class zE{}class KE{resolveComponentFactory(o){throw function PT(s){const o=Error(`No component factory found for ${le(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Ph=(()=>{class s{}return s.NULL=new KE,s})();function Bm(){return ou(Ar(),me())}function ou(s,o){return new Oh(Xn(s,o))}let Oh=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=Bm,s})();function Hp(s){return s instanceof Oh?s.nativeElement:s}class Ev{}let OT=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function FT(){const s=me(),u=yr(Ar().index,s);return(ri(u)?u:s)[11]}(),s})(),LT=(()=>{class s{}return s.\u0275prov=et({token:s,providedIn:"root",factory:()=>null}),s})();class ZE{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const YE=new ZE("15.1.2"),jm={};function Cv(s){return s.ngOriginalError}class Gp{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o);this._console.error("ERROR",o),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&Cv(o);for(;u&&Cv(u);)u=Cv(u);return u||null}}function ua(s){return s instanceof Function?s():s}function nI(s,o,u){let c=s.length;for(;;){const d=s.indexOf(o,u);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const g=o.length;if(d+g===c||s.charCodeAt(d+g)<=32)return d}u=d+1}}const bv="ng-template";function Dv(s,o,u){let c=0;for(;c<s.length;){let d=s[c++];if(u&&"class"===d){if(d=s[c],-1!==nI(d.toLowerCase(),o,0))return!0}else if(1===d){for(;c<s.length&&"string"==typeof(d=s[c++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function rI(s){return 4===s.type&&s.value!==bv}function iI(s,o,u){return o===(4!==s.type||u?s.value:bv)}function Fh(s,o,u){let c=4;const d=s.attrs||[],g=function Hm(s){for(let o=0;o<s.length;o++)if(ja(s[o]))return o;return s.length}(d);let v=!1;for(let I=0;I<o.length;I++){const C=o[I];if("number"!=typeof C){if(!v)if(4&c){if(c=2|1&c,""!==C&&!iI(s,C,u)||""===C&&1===o.length){if(Is(c))return!1;v=!0}}else{const S=8&c?C:o[++I];if(8&c&&null!==s.attrs){if(!Dv(s.attrs,S,u)){if(Is(c))return!1;v=!0}continue}const L=GT(8&c?"class":C,d,rI(s),u);if(-1===L){if(Is(c))return!1;v=!0;continue}if(""!==S){let z;z=L>g?"":d[L+1].toLowerCase();const X=8&c?z:null;if(X&&-1!==nI(X,S,0)||2&c&&S!==z){if(Is(c))return!1;v=!0}}}}else{if(!v&&!Is(c)&&!Is(C))return!1;if(v&&Is(C))continue;v=!1,c=C|1&c}}return Is(c)||v}function Is(s){return 0==(1&s)}function GT(s,o,u,c){if(null===o)return-1;let d=0;if(c||!u){let g=!1;for(;d<o.length;){const v=o[d];if(v===s)return d;if(3===v||6===v)g=!0;else{if(1===v||2===v){let I=o[++d];for(;"string"==typeof I;)I=o[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=g?1:2}return-1}return function sI(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function Tv(s,o,u=!1){for(let c=0;c<o.length;c++)if(Fh(s,o[c],u))return!0;return!1}function aI(s,o){return s?":not("+o.trim()+")":o}function WT(s){let o=s[0],u=1,c=2,d="",g=!1;for(;u<s.length;){let v=s[u];if("string"==typeof v)if(2&c){const I=s[++u];d+="["+v+(I.length>0?'="'+I+'"':"")+"]"}else 8&c?d+="."+v:4&c&&(d+=" "+v);else""!==d&&!Is(v)&&(o+=aI(g,d),d=""),c=v,g=g||!Is(c);u++}return""!==d&&(o+=aI(g,d)),o}const zt={};function zp(s){uI(tn(),me(),zr()+s,!1)}function uI(s,o,u,c){if(!c)if(3==(3&o[2])){const g=s.preOrderCheckHooks;null!==g&&js(o,g,u)}else{const g=s.preOrderHooks;null!==g&&Zo(o,g,0,u)}qo(u)}function fI(s,o=null,u=null,c){const d=pI(s,o,u,c);return d.resolveInjectorInitializers(),d}function pI(s,o=null,u=null,c,d=new Set){const g=[u||Et,$p(s)];return c=c||("object"==typeof s?void 0:le(s)),new GE(g,o||Um(),c||null,d)}let Il=(()=>{class s{static create(u,c){if(Array.isArray(u))return fI({name:""},c,u,"");{const d=u.name??"";return fI({name:d},u.parent,u.providers,d)}}}return s.THROW_IF_NOT_FOUND=Mn,s.NULL=new jE,s.\u0275prov=et({token:s,providedIn:"any",factory:()=>$e(nd)}),s.__NG_ELEMENT_ID__=-1,s})();function Lh(s,o=yt.Default){const u=me();return null===u?$e(s,o):ap(Ar(),u,Z(s),o)}function wI(){throw new Error("invalid")}function Pv(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const g=u[c+1];if(-1!==g){const v=s.data[g];Cc(u[c]),v.contentQueries(2,o[g],g)}}}function Vh(s,o,u,c,d,g,v,I,C,S,M){const L=o.blueprint.slice();return L[0]=d,L[2]=76|c,(null!==M||s&&1024&s[2])&&(L[2]|=1024),Pa(L),L[3]=L[15]=s,L[8]=u,L[10]=v||s&&s[10],L[11]=I||s&&s[11],L[12]=C||s&&s[12]||null,L[9]=S||s&&s[9]||null,L[6]=g,L[20]=function mh(){return Hs++}(),L[21]=M,L[16]=2==o.type?s[16]:L,L}function rn(s,o,u,c,d){let g=s.data[o];if(null===g)g=function Qp(s,o,u,c,d){const g=Fa(),v=Ou(),C=s.data[o]=function mt(s,o,u,c,d,g){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,u,o,c,d);return null===s.firstChild&&(s.firstChild=C),null!==g&&(v?null==g.child&&null!==C.parent&&(g.child=C):null===g.next&&(g.next=C)),C}(s,o,u,c,d),function Jd(){return kt.lFrame.inI18n}()&&(g.flags|=32);else if(64&g.type){g.type=u,g.value=c,g.attrs=d;const v=function Pu(){const s=kt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return oi(g,!0),g}function Uh(s,o,u,c){if(0===u)return-1;const d=o.length;for(let g=0;g<u;g++)o.push(c),s.blueprint.push(c),s.data.push(null);return d}function Ov(s,o,u){Vu(o);try{const c=s.viewQuery;null!==c&&ng(1,c,u);const d=s.template;null!==d&&aS(s,o,d,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Pv(s,o),s.staticViewQueries&&ng(2,s.viewQuery,u);const g=s.components;null!==g&&function gN(s,o){for(let u=0;u<o.length;u++)AI(s,o[u])}(o,g)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,_m()}}function hr(s,o,u,c){const d=o[2];if(128!=(128&d)){Vu(o);try{Pa(o),function Bs(s){return kt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&aS(s,o,u,2,c);const v=3==(3&d);if(v){const S=s.preOrderCheckHooks;null!==S&&js(o,S,null)}else{const S=s.preOrderHooks;null!==S&&Zo(o,S,0,null),Ei(o,0)}if(function jh(s){for(let o=al(s);null!==o;o=ul(o)){if(!o[2])continue;const u=o[9];for(let c=0;c<u.length;c++){const d=u[c];512&d[2]||Oa(d[3],1),d[2]|=512}}}(o),function dS(s){for(let o=al(s);null!==o;o=ul(o))for(let u=10;u<o.length;u++){const c=o[u],d=c[1];zo(c)&&hr(d,c,d.template,c[8])}}(o),null!==s.contentQueries&&Pv(s,o),v){const S=s.contentCheckHooks;null!==S&&js(o,S)}else{const S=s.contentHooks;null!==S&&Zo(o,S,1),Ei(o,1)}!function sS(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const d=u[c];if(d<0)qo(~d);else{const g=d,v=u[++c],I=u[++c];eh(v,g),I(2,o[g])}}}finally{qo(-1)}}(s,o);const I=s.components;null!==I&&function oS(s,o){for(let u=0;u<o.length;u++)SI(s,o[u])}(o,I);const C=s.viewQuery;if(null!==C&&ng(2,C,c),v){const S=s.viewCheckHooks;null!==S&&js(o,S)}else{const S=s.viewHooks;null!==S&&Zo(o,S,2),Ei(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,Oa(o[3],-1))}finally{_m()}}}function aS(s,o,u,c,d){const g=zr(),v=2&c;try{qo(-1),v&&o.length>22&&uI(s,o,22,!1),u(c,d)}finally{qo(g)}}function Xp(s,o,u){if(xa(o)){const d=o.directiveEnd;for(let g=o.directiveStart;g<d;g++){const v=s.data[g];v.contentQueries&&v.contentQueries(1,u[g],g)}}}function pe(s,o,u){ku()&&(function mi(s,o,u,c){const d=u.directiveStart,g=u.directiveEnd;Ui(u)&&function DI(s,o,u){const c=Xn(o,s),d=Ws(u),g=s[10],v=tg(s,Vh(s,d,null,u.onPush?32:16,c,o,g,g.createRenderer(c,u),null,null,null));s[o.index]=v}(o,u,s.data[d+u.componentOffset]),s.firstCreatePass||Jo(u,o),Vr(c,o);const v=u.initialInputs;for(let I=d;I<g;I++){const C=s.data[I],S=Bi(o,s,I,u);Vr(S,o),null!==v&&ca(0,I-d,S,C,0,v),ii(C)&&(yr(u.index,o)[8]=Bi(o,s,I,u))}}(s,o,u,Xn(u,o)),64==(64&u.flags)&&au(s,o,u))}function pi(s,o,u=Xn){const c=o.localNames;if(null!==c){let d=o.index+1;for(let g=0;g<c.length;g+=2){const v=c[g+1],I=-1===v?u(o,s):s[v];s[d++]=I}}}function Ws(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Cs(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Cs(s,o,u,c,d,g,v,I,C,S){const M=22+c,L=M+d,z=function P(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:zt);return u}(M,L),X="function"==typeof S?S():S;return z[1]={type:s,blueprint:z,template:u,queries:null,viewQuery:I,declTNode:o,data:z.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:L,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:C,consts:X,incompleteFirstPass:!1}}function la(s,o,u,c){const d=RI(o);null===u?d.push(c):(d.push(u),s.firstCreatePass&&Ym(s).push(c,d.length-1))}function Wm(s,o,u,c){for(let d in s)if(s.hasOwnProperty(d)){u=null===u?{}:u;const g=s[d];null===c?Vt(u,o,d,g):c.hasOwnProperty(d)&&Vt(u,o,c[d],g)}return u}function Vt(s,o,u,c){s.hasOwnProperty(u)?s[u].push(o,c):s[u]=[o,c]}function gi(s,o,u,c,d,g,v,I){const C=Xn(o,u);let M,S=o.inputs;!I&&null!=S&&(M=S[c])?(id(s,u,M,c,d),Ui(o)&&EI(u,o.index)):3&o.type&&(c=function qm(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),d=null!=v?v(d,o.value||"",c):d,g.setProperty(C,c,d))}function EI(s,o){const u=yr(o,s);16&u[2]||(u[2]|=32)}function Lv(s,o,u,c){let d=!1;if(ku()){const g=null===c?null:{"":-1},v=function CI(s,o){const u=s.directiveRegistry;let c=null,d=null;if(u)for(let g=0;g<u.length;g++){const v=u[g];if(Tv(o,v.selectors,!1))if(c||(c=[]),ii(v))if(null!==v.findHostDirectiveDefs){const I=[];d=d||new Map,v.findHostDirectiveDefs(v,I,d),c.unshift(...I,v),Jp(s,o,I.length)}else c.unshift(v),Jp(s,o,0);else d=d||new Map,v.findHostDirectiveDefs?.(v,c,d),c.push(v)}return null===c?null:[c,d]}(s,u);let I,C;null===v?I=C=null:[I,C]=v,null!==I&&(d=!0,II(s,o,u,I,g,C)),g&&function bI(s,o,u){if(o){const c=s.localNames=[];for(let d=0;d<o.length;d+=2){const g=u[o[d+1]];if(null==g)throw new he(-301,!1);c.push(o[d],g)}}}(u,c,g)}return u.mergedAttrs=gs(u.mergedAttrs,u.attrs),d}function II(s,o,u,c,d,g){for(let S=0;S<c.length;S++)Mc(Jo(u,o),s,c[S].type);!function cS(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}(u,s.data.length,c.length);for(let S=0;S<c.length;S++){const M=c[S];M.providersResolver&&M.providersResolver(M)}let v=!1,I=!1,C=Uh(s,o,c.length,null);for(let S=0;S<c.length;S++){const M=c[S];u.mergedAttrs=gs(u.mergedAttrs,M.hostAttrs),Zm(s,u,o,C,M),Si(C,M,d),null!==M.contentQueries&&(u.flags|=4),(null!==M.hostBindings||null!==M.hostAttrs||0!==M.hostVars)&&(u.flags|=64);const L=M.type.prototype;!v&&(L.ngOnChanges||L.ngOnInit||L.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),v=!0),!I&&(L.ngOnChanges||L.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),I=!0),C++}!function zm(s,o,u){const d=o.directiveEnd,g=s.data,v=o.attrs,I=[];let C=null,S=null;for(let M=o.directiveStart;M<d;M++){const L=g[M],z=u?u.get(L):null,ye=z?z.outputs:null;C=Wm(L.inputs,M,C,z?z.inputs:null),S=Wm(L.outputs,M,S,ye);const Oe=null===C||null===v||rI(o)?null:Vv(C,M,v);I.push(Oe)}null!==C&&(C.hasOwnProperty("class")&&(o.flags|=8),C.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=I,o.inputs=C,o.outputs=S}(s,u,g)}function au(s,o,u){const c=u.directiveStart,d=u.directiveEnd,g=u.index,v=function Ec(){return kt.lFrame.currentDirectiveIndex}();try{qo(g);for(let I=c;I<d;I++){const C=s.data[I],S=o[I];Ic(I),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&lS(C,S)}}finally{qo(-1),Ic(v)}}function lS(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Jp(s,o,u){o.componentOffset=u,(s.components||(s.components=[])).push(o.index)}function Si(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;ii(o)&&(u[""]=s)}}function Zm(s,o,u,c,d){s.data[c]=d;const g=d.factory||(d.factory=io(d.type)),v=new Qo(g,ii(d),Lh);s.blueprint[c]=v,u[c]=v,function Ti(s,o,u,c,d){const g=d.hostBindings;if(g){let v=s.hostBindingOpCodes;null===v&&(v=s.hostBindingOpCodes=[]);const I=~o.index;(function Km(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(v)!=I&&v.push(I),v.push(u,c,g)}}(s,o,c,Uh(s,u,d.hostVars,zt),d)}function zs(s,o,u,c,d,g){const v=Xn(s,o);!function Bh(s,o,u,c,d,g,v){if(null==g)s.removeAttribute(o,d,u);else{const I=null==v?Se(g):v(g,c||"",d);s.setAttribute(o,d,I,u)}}(o[11],v,g,s.value,u,c,d)}function ca(s,o,u,c,d,g){const v=g[o];if(null!==v){const I=c.setInput;for(let C=0;C<v.length;){const S=v[C++],M=v[C++],L=v[C++];null!==I?c.setInput(u,L,S,M):u[M]=L}}}function Vv(s,o,u){let c=null,d=0;for(;d<u.length;){const g=u[d];if(0!==g)if(5!==g){if("number"==typeof g)break;if(s.hasOwnProperty(g)){null===c&&(c=[]);const v=s[g];for(let I=0;I<v.length;I+=2)if(v[I]===o){c.push(g,v[I+1],u[d+1]);break}}d+=2}else d+=2;else d+=4}return c}function TI(s,o,u,c){return[s,!0,!1,o,null,0,c,u,null,null]}function SI(s,o){const u=yr(o,s);if(zo(u)){const c=u[1];48&u[2]?hr(c,u,c.template,u[8]):u[5]>0&&eg(u)}}function eg(s){for(let c=al(s);null!==c;c=ul(c))for(let d=10;d<c.length;d++){const g=c[d];if(zo(g))if(512&g[2]){const v=g[1];hr(v,g,v.template,g[8])}else g[5]>0&&eg(g)}const u=s[1].components;if(null!==u)for(let c=0;c<u.length;c++){const d=yr(u[c],s);zo(d)&&d[5]>0&&eg(d)}}function AI(s,o){const u=yr(o,s),c=u[1];(function hS(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),Ov(c,u,u[8])}function tg(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function $h(s){for(;s;){s[2]|=32;const o=Ja(s);if(Ra(s)&&!o)return s;s=o}return null}function Hh(s,o,u,c=!0){const d=o[10];d.begin&&d.begin();try{hr(s,o,s.template,u)}catch(v){throw c&&MI(o,v),v}finally{d.end&&d.end()}}function ng(s,o,u){Cc(0),o(s,u)}function RI(s){return s[7]||(s[7]=[])}function Ym(s){return s.cleanup||(s.cleanup=[])}function MI(s,o){const u=s[9],c=u?u.get(Gp,null):null;c&&c.handleError(o)}function id(s,o,u,c,d){for(let g=0;g<u.length;){const v=u[g++],I=u[g++],C=o[v],S=s.data[v];null!==S.setInput?S.setInput(C,d,c,I):C[I]=d}}function bl(s,o,u){let c=u?s.styles:null,d=u?s.classes:null,g=0;if(null!==o)for(let v=0;v<o.length;v++){const I=o[v];"number"==typeof I?g=I:1==g?d=ue(d,I):2==g&&(c=ue(c,I+": "+o[++v]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=d:s.classesWithoutHost=d}function Qm(s,o,u,c,d=!1){for(;null!==u;){const g=o[u.index];if(null!==g&&c.push(jn(g)),Vi(g))for(let I=10;I<g.length;I++){const C=g[I],S=C[1].firstChild;null!==S&&Qm(C[1],C,S,c)}const v=u.type;if(8&v)Qm(s,o,u.child,c);else if(32&v){const I=Xa(u,o);let C;for(;C=I();)c.push(C)}else if(16&v){const I=bh(o,u);if(Array.isArray(I))c.push(...I);else{const C=Ja(o[16]);Qm(C[1],C,I,c,!0)}}u=d?u.projectionNext:u.next}return c}class rg{get rootNodes(){const o=this._lView,u=o[1];return Qm(u,o,u.firstChild,[])}constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Vi(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&(Rp(o,c),za(u,c))}this._attachedToViewContainer=!1}wh(this._lView[1],this._lView)}onDestroy(o){la(this._lView[1],this._lView,null,o)}markForCheck(){$h(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Hh(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new he(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function cl(s,o){Yc(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new he(902,!1);this._appRef=o}}class Xm extends rg{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;Hh(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class Jm extends Ph{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=en(o);return new Dl(u,this.ngModule)}}function Bv(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class kI{constructor(o,u){this.injector=o,this.parentInjector=u}get(o,u,c){c=xt(c);const d=this.injector.get(o,jm,c);return d!==jm||u===jm?d:this.parentInjector.get(o,u,c)}}class Dl extends zE{get inputs(){return Bv(this.componentDef.inputs)}get outputs(){return Bv(this.componentDef.outputs)}constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function zT(s){return s.map(WT).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}create(o,u,c,d){let g=(d=d||this.ngModule)instanceof rd?d:d?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const v=g?new kI(o,g):o,I=v.get(Ev,null);if(null===I)throw new he(407,!1);const C=v.get(LT,null),S=I.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",L=c?function uS(s,o,u){return s.selectRootElement(o,u===Qt.ShadowDom)}(S,c,this.componentDef.encapsulation):zc(S,M,function NI(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(M)),z=this.componentDef.onPush?288:272,X=Cs(0,null,null,1,0,null,null,null,null,null),ye=Vh(null,X,null,z,null,null,I,S,C,v,null);let Oe,Ze;Vu(ye);try{const at=this.componentDef;let Rt,Ne=null;at.findHostDirectiveDefs?(Rt=[],Ne=new Map,at.findHostDirectiveDefs(at,Rt,Ne),Rt.push(at)):Rt=[at];const Gt=function $v(s,o){const u=s[1];return s[22]=o,rn(u,22,2,"#host",null)}(ye,L),qn=function Hv(s,o,u,c,d,g,v,I){const C=d[1];!function OI(s,o,u,c){for(const d of s)o.mergedAttrs=gs(o.mergedAttrs,d.hostAttrs);null!==o.mergedAttrs&&(bl(o,o.mergedAttrs,!0),null!==u&&ml(c,u,o))}(c,s,o,v);const S=g.createRenderer(o,u),M=Vh(d,Ws(u),null,u.onPush?32:16,d[s.index],s,g,S,I||null,null,null);return C.firstCreatePass&&Jp(C,s,c.length-1),tg(d,M),d[s.index]=M}(Gt,L,at,Rt,ye,I,S);Ze=Wo(X,22),L&&function fS(s,o,u,c){if(c)wn(s,u,["ng-version",YE.full]);else{const{attrs:d,classes:g}=function qT(s){const o=[],u=[];let c=1,d=2;for(;c<s.length;){let g=s[c];if("string"==typeof g)2===d?""!==g&&o.push(g,s[++c]):8===d&&u.push(g);else{if(!Is(d))break;d=g}c++}return{attrs:o,classes:u}}(o.selectors[0]);d&&wn(s,u,d),g&&g.length>0&&fi(s,u,g.join(" "))}}(S,at,L,c),void 0!==u&&function LI(s,o,u){const c=s.projection=[];for(let d=0;d<o.length;d++){const g=u[d];c.push(null!=g?Array.from(g):null)}}(Ze,this.ngContentSelectors,u),Oe=function FI(s,o,u,c,d,g){const v=Ar(),I=d[1],C=Xn(v,d);II(I,d,v,u,null,c);for(let M=0;M<u.length;M++)Vr(Bi(d,I,v.directiveStart+M,v),d);au(I,d,v),C&&Vr(C,d);const S=Bi(d,I,v.directiveStart+v.componentOffset,v);if(s[8]=d[8]=S,null!==g)for(const M of g)M(S,o);return Xp(I,v,s),S}(qn,at,Rt,Ne,ye,[VI]),Ov(X,ye,null)}finally{_m()}return new jv(this.componentType,Oe,ou(Ze,ye),ye,Ze)}}class jv extends kT{constructor(o,u,c,d,g){super(),this.location=c,this._rootLView=d,this._tNode=g,this.instance=u,this.hostView=this.changeDetectorRef=new Xm(d),this.componentType=o}setInput(o,u){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[o])){const g=this._rootLView;id(g[1],g,d,o,u),EI(g,this._tNode.index)}}get injector(){return new $i(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function VI(){const s=Ar();Va(me()[1],s)}function t_(s){let o=function e_(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const c=[s];for(;o;){let d;if(ii(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new he(903,!1);d=o.\u0275dir}if(d){if(u){c.push(d);const v=s;v.inputs=ig(s.inputs),v.declaredInputs=ig(s.declaredInputs),v.outputs=ig(s.outputs);const I=d.hostBindings;I&&Yr(s,I);const C=d.viewQuery,S=d.contentQueries;if(C&&Gv(s,C),S&&Wv(s,S),fe(s.inputs,d.inputs),fe(s.declaredInputs,d.declaredInputs),fe(s.outputs,d.outputs),ii(d)&&d.data.animation){const M=s.data;M.animation=(M.animation||[]).concat(d.data.animation)}}const g=d.features;if(g)for(let v=0;v<g.length;v++){const I=g[v];I&&I.ngInherit&&I(s),I===t_&&(u=!1)}}o=Object.getPrototypeOf(o)}!function pS(s){let o=0,u=null;for(let c=s.length-1;c>=0;c--){const d=s[c];d.hostVars=o+=d.hostVars,d.hostAttrs=gs(d.hostAttrs,u=gs(u,d.hostAttrs))}}(c)}function ig(s){return s===Nn?{}:s===Et?[]:s}function Gv(s,o){const u=s.viewQuery;s.viewQuery=u?(c,d)=>{o(c,d),u(c,d)}:o}function Wv(s,o){const u=s.contentQueries;s.contentQueries=u?(c,d,g)=>{o(c,d,g),u(c,d,g)}:o}function Yr(s,o){const u=s.hostBindings;s.hostBindings=u?(c,d)=>{o(c,d),u(c,d)}:o}let Gh=null;function sd(){if(!Gh){const s=Pt.Symbol;if(s&&s.iterator)Gh=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const c=o[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Gh=c)}}}return Gh}function sg(s){return!!og(s)&&(Array.isArray(s)||!(s instanceof Map)&&sd()in s)}function og(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Mr(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function Wh(s,o,u,c){const d=me();return Mr(d,lo(),o)&&(tn(),zs(Cn(),d,s,o,u,c)),Wh}function qh(s,o,u,c){return Mr(s,lo(),u)?o+Se(u)+c:zt}function s_(s,o,u,c,d,g,v,I){const C=me(),S=tn(),M=s+22,L=S.firstCreatePass?function cg(s,o,u,c,d,g,v,I,C){const S=o.consts,M=rn(o,s,4,v||null,fs(S,I));Lv(o,u,M,fs(S,C)),Va(o,M);const L=M.tViews=Cs(2,M,c,d,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,S);return null!==o.queries&&(o.queries.template(o,M),L.queries=o.queries.embeddedTView(M)),M}(M,S,C,o,u,c,d,g,v):S.data[M];oi(L,!1);const z=C[11].createComment("");Zc(S,C,z,L),Vr(z,C),tg(C,C[M]=TI(z,C,z,L)),lc(L)&&pe(S,C,L),null!=v&&pi(C,L,I)}function Xh(s,o,u){const c=me();return Mr(c,lo(),o)&&gi(tn(),Cn(),c,s,o,c[11],u,!1),Xh}function ud(s,o,u,c,d){const v=d?"class":"style";id(s,u,o.inputs[v],v,c)}function o_(s,o,u,c){const d=me(),g=tn(),v=22+s,I=d[11],C=d[v]=zc(I,o,function ym(){return kt.lFrame.currentNamespace}()),S=g.firstCreatePass?function $I(s,o,u,c,d,g,v){const I=o.consts,S=rn(o,s,2,d,fs(I,g));return Lv(o,u,S,fs(I,v)),null!==S.attrs&&bl(S,S.attrs,!1),null!==S.mergedAttrs&&bl(S,S.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,S),S}(v,g,d,0,o,u,c):g.data[v];return oi(S,!0),ml(I,C,S),32!=(32&S.flags)&&Zc(g,d,C,S),0===function Nu(){return kt.lFrame.elementDepthCount}()&&Vr(C,d),function mc(){kt.lFrame.elementDepthCount++}(),lc(S)&&(pe(g,d,S),Xp(g,S,d)),null!==c&&pi(d,S),o_}function Jh(){let s=Ar();Ou()?function Fu(){kt.lFrame.isParent=!1}():(s=s.parent,oi(s,!1));const o=s;!function _c(){kt.lFrame.elementDepthCount--}();const u=tn();return u.firstCreatePass&&(Va(u,s),xa(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Ua(s){return 0!=(8&s.flags)}(o)&&ud(u,o,me(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Bu(s){return 0!=(16&s.flags)}(o)&&ud(u,o,me(),o.stylesWithoutHost,!1),Jh}function ef(s,o,u,c){return o_(s,o,u,c),Jh(),ef}function HI(){return me()}function ld(s){return!!s&&"function"==typeof s.then}function iw(s){return!!s&&"function"==typeof s.subscribe}const dg=iw;function cd(s,o,u,c){const d=me(),g=tn(),v=Ar();return function GI(s,o,u,c,d,g,v){const I=lc(c),S=s.firstCreatePass&&Ym(s),M=o[8],L=RI(o);let z=!0;if(3&c.type||v){const Oe=Xn(c,o),Ze=v?v(Oe):Oe,at=L.length,Rt=v?Gt=>v(jn(Gt[c.index])):c.index;let Ne=null;if(!v&&I&&(Ne=function sw(s,o,u,c){const d=s.cleanup;if(null!=d)for(let g=0;g<d.length-1;g+=2){const v=d[g];if(v===u&&d[g+1]===c){const I=o[7],C=d[g+2];return I.length>C?I[C]:null}"string"==typeof v&&(g+=2)}return null}(s,o,d,c.index)),null!==Ne)(Ne.__ngLastListenerFn__||Ne).__ngNextListenerFn__=g,Ne.__ngLastListenerFn__=g,z=!1;else{g=ow(c,o,M,g,!1);const Gt=u.listen(Ze,d,g);L.push(g,Gt),S&&S.push(d,Rt,at,at+1)}}else g=ow(c,o,M,g,!1);const X=c.outputs;let ye;if(z&&null!==X&&(ye=X[d])){const Oe=ye.length;if(Oe)for(let Ze=0;Ze<Oe;Ze+=2){const qn=o[ye[Ze]][ye[Ze+1]].subscribe(g),rr=L.length;L.push(g,qn),S&&S.push(d,c.index,rr,-(rr+1))}}}(g,d,d[11],v,s,o,c),cd}function WI(s,o,u,c){try{return!1!==u(c)}catch(d){return MI(s,d),!1}}function ow(s,o,u,c,d){return function g(v){if(v===Function)return c;$h(s.componentOffset>-1?yr(s.index,o):o);let C=WI(o,0,c,v),S=g.__ngNextListenerFn__;for(;S;)C=WI(o,0,S,v)&&C,S=S.__ngNextListenerFn__;return d&&!1===C&&(v.preventDefault(),v.returnValue=!1),C}}function aw(s=1){return function qy(s){return(kt.lFrame.contextLView=function rh(s,o){for(;s>0;)o=o[15],s--;return o}(s,kt.lFrame.contextLView))[8]}(s)}function hd(s,o,u,c,d){const g=me(),v=qh(g,o,u,c);return v!==zt&&gi(tn(),Cn(),g,s,v,g[11],d,!1),hd}function l_(s,o){return s<<17|o<<2}function Al(s){return s>>17&32767}function da(s){return 2|s}function xl(s){return(131068&s)>>2}function c_(s,o){return-131069&s|o<<2}function Rl(s){return 1|s}function cw(s,o,u,c,d){const g=s[u+1],v=null===o;let I=c?Al(g):xl(g),C=!1;for(;0!==I&&(!1===C||v);){const M=s[I+1];YI(s[I],o)&&(C=!0,s[I+1]=c?Rl(M):da(M)),I=c?Al(M):xl(M)}C&&(s[u+1]=c?da(g):Rl(g))}function YI(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&vr(s,o)>=0}function Wn(s,o){return function Ks(s,o,u,c){const d=me(),g=tn(),v=function es(s){const o=kt.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}(2);g.firstUpdatePass&&function mg(s,o,u,c){const d=s.data;if(null===d[u+1]){const g=d[zr()],v=function dw(s,o){return o>=s.expandoStartIndex}(s,u);(function sf(s,o){return 0!=(s.flags&(o?8:16))})(g,c)&&null===o&&!v&&(o=!1),o=function rC(s,o,u,c){const d=function ps(s){const o=kt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let g=c?o.residualClasses:o.residualStyles;if(null===d)0===(c?o.classBindings:o.styleBindings)&&(u=fu(u=_g(null,s,o,u,c),o.attrs,c),g=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==d)if(u=_g(d,s,o,u,c),null===g){let C=function hu(s,o,u){const c=u?o.classBindings:o.styleBindings;if(0!==xl(c))return s[Al(c)]}(s,o,c);void 0!==C&&Array.isArray(C)&&(C=_g(null,s,o,C[1],c),C=fu(C,o.attrs,c),function iC(s,o,u,c){s[Al(u?o.classBindings:o.styleBindings)]=c}(s,o,c,C))}else g=function sC(s,o,u){let c;const d=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<d;g++)c=fu(c,s[g].hostAttrs,u);return fu(c,o.attrs,u)}(s,o,c)}return void 0!==g&&(c?o.residualClasses=g:o.residualStyles=g),u}(d,g,o,c),function ZI(s,o,u,c,d,g){let v=g?o.classBindings:o.styleBindings,I=Al(v),C=xl(v);s[c]=u;let M,S=!1;if(Array.isArray(u)?(M=u[1],(null===M||vr(u,M)>0)&&(S=!0)):M=u,d)if(0!==C){const z=Al(s[I+1]);s[c+1]=l_(z,I),0!==z&&(s[z+1]=c_(s[z+1],c)),s[I+1]=function pg(s,o){return 131071&s|o<<17}(s[I+1],c)}else s[c+1]=l_(I,0),0!==I&&(s[I+1]=c_(s[I+1],c)),I=c;else s[c+1]=l_(C,0),0===I?I=c:s[C+1]=c_(s[C+1],c),C=c;S&&(s[c+1]=da(s[c+1])),cw(s,M,c,!0),cw(s,M,c,!1),function wS(s,o,u,c,d){const g=d?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof o&&vr(g,o)>=0&&(u[c+1]=Rl(u[c+1]))}(o,M,s,c,g),v=l_(I,C),g?o.classBindings=v:o.styleBindings=v}(d,g,o,u,v,c)}}(g,s,v,c),o!==zt&&Mr(d,v,o)&&function hw(s,o,u,c,d,g,v,I){if(!(3&o.type))return;const C=s.data,S=C[I+1],M=function KI(s){return 1==(1&s)}(S)?yg(C,o,u,d,xl(S),v):void 0;y_(M)||(y_(g)||function vS(s){return 2==(2&s)}(S)&&(g=yg(C,null,u,d,I,v)),function Es(s,o,u,c,d){if(o)d?s.addClass(u,c):s.removeClass(u,c);else{let g=-1===c.indexOf("-")?void 0:bt.DashCase;null==d?s.removeStyle(u,c,g):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),g|=bt.Important),s.setStyle(u,c,d,g))}}(c,v,ao(zr(),u),d,g))}(g,g.data[zr()],d,d[11],s,d[v+1]=function aC(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=le(E(s)))),s}(o,u),c,v)}(s,o,null,!0),Wn}function _g(s,o,u,c,d){let g=null;const v=u.directiveEnd;let I=u.directiveStylingLast;for(-1===I?I=u.directiveStart:I++;I<v&&(g=o[I],c=fu(c,g.hostAttrs,d),g!==s);)I++;return null!==s&&(u.directiveStylingLast=I),c}function fu(s,o,u){const c=u?1:2;let d=-1;if(null!==o)for(let g=0;g<o.length;g++){const v=o[g];"number"==typeof v?d=v:d===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Kr(s,v,!!u||o[++g]))}return void 0===s?null:s}function yg(s,o,u,c,d,g){const v=null===o;let I;for(;d>0;){const C=s[d],S=Array.isArray(C),M=S?C[1]:C,L=null===M;let z=u[d+1];z===zt&&(z=L?Et:void 0);let X=L?nn(z,c):M===c?z:void 0;if(S&&!y_(X)&&(X=nn(C,c)),y_(X)&&(I=X,v))return I;const ye=s[d+1];d=v?Al(ye):xl(ye)}if(null!==o){let C=g?o.residualClasses:o.residualStyles;null!=C&&(I=nn(C,c))}return I}function y_(s){return void 0!==s}function fw(s,o=""){const u=me(),c=tn(),d=s+22,g=c.firstCreatePass?rn(c,d,1,o,null):c.data[d],v=u[d]=function ll(s,o){return s.createText(o)}(u[11],o);Zc(c,u,v,g),oi(g,!1)}function v_(s){return vg("",s,""),v_}function vg(s,o,u){const c=me(),d=qh(c,s,o,u);return d!==zt&&function uu(s,o,u){const c=ao(o,s);!function Sp(s,o,u){s.setValue(o,u)}(s[11],c,u)}(c,zr(),d),vg}const Ge=void 0;var Me=["en",[["a","p"],["AM","PM"],Ge],[["AM","PM"],Ge,Ge],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ge,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ge,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ge,"{1} 'at' {0}",Ge],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function oe(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let zn={};function ww(s){const o=function MS(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=_C(o);if(u)return u;const c=o.split("-")[0];if(u=_C(c),u)return u;if("en"===c)return Me;throw new he(701,!1)}function mC(s){return ww(s)[At.PluralCase]}function _C(s){return s in zn||(zn[s]=Pt.ng&&Pt.ng.common&&Pt.ng.common.locales&&Pt.ng.common.locales[s]),zn[s]}var At=(()=>((At=At||{})[At.LocaleId=0]="LocaleId",At[At.DayPeriodsFormat=1]="DayPeriodsFormat",At[At.DayPeriodsStandalone=2]="DayPeriodsStandalone",At[At.DaysFormat=3]="DaysFormat",At[At.DaysStandalone=4]="DaysStandalone",At[At.MonthsFormat=5]="MonthsFormat",At[At.MonthsStandalone=6]="MonthsStandalone",At[At.Eras=7]="Eras",At[At.FirstDayOfWeek=8]="FirstDayOfWeek",At[At.WeekendRange=9]="WeekendRange",At[At.DateFormat=10]="DateFormat",At[At.TimeFormat=11]="TimeFormat",At[At.DateTimeFormat=12]="DateTimeFormat",At[At.NumberSymbols=13]="NumberSymbols",At[At.NumberFormats=14]="NumberFormats",At[At.CurrencyCode=15]="CurrencyCode",At[At.CurrencySymbol=16]="CurrencySymbol",At[At.CurrencyName=17]="CurrencyName",At[At.Currencies=18]="Currencies",At[At.Directionality=19]="Directionality",At[At.PluralCase=20]="PluralCase",At[At.ExtraData=21]="ExtraData",At))();const pd="en-US";let uf=pd;function k_(s,o,u,c,d){if(s=Z(s),Array.isArray(s))for(let g=0;g<s.length;g++)k_(s[g],o,u,c,d);else{const g=tn(),v=me();let I=su(s)?s:Z(s.provide),C=_v(s);const S=Ar(),M=1048575&S.providerIndexes,L=S.directiveStart,z=S.providerIndexes>>20;if(su(s)||!s.multi){const X=new Qo(C,d,Lh),ye=Nw(I,o,d?M:M+z,L);-1===ye?(Mc(Jo(S,v),g,I),Mw(g,s,o.length),o.push(I),S.directiveStart++,S.directiveEnd++,d&&(S.providerIndexes+=1048576),u.push(X),v.push(X)):(u[ye]=X,v[ye]=X)}else{const X=Nw(I,o,M+z,L),ye=Nw(I,o,M,M+z),Ze=ye>=0&&u[ye];if(d&&!Ze||!d&&!(X>=0&&u[X])){Mc(Jo(S,v),g,I);const at=function jS(s,o,u,c,d){const g=new Qo(s,u,Lh);return g.multi=[],g.index=o,g.componentProviders=0,PC(g,d,c&&!u),g}(d?BS:OC,u.length,d,c,C);!d&&Ze&&(u[ye].providerFactory=at),Mw(g,s,o.length,0),o.push(I),S.directiveStart++,S.directiveEnd++,d&&(S.providerIndexes+=1048576),u.push(at),v.push(at)}else Mw(g,s,X>-1?X:ye,PC(u[d?ye:X],C,!d&&c));!d&&c&&Ze&&u[ye].componentProviders++}}}function Mw(s,o,u,c){const d=su(o),g=function Lm(s){return!!s.useClass}(o);if(d||g){const C=(g?Z(o.useClass):o).prototype.ngOnDestroy;if(C){const S=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const M=S.indexOf(u);-1===M?S.push(u,[c,C]):S[M+1].push(c,C)}else S.push(u,C)}}}function PC(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function Nw(s,o,u,c){for(let d=u;d<c;d++)if(o[d]===s)return d;return-1}function OC(s,o,u,c){return P_(this.multi,[])}function BS(s,o,u,c){const d=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,I=Bi(u,u[1],this.providerFactory.index,c);g=I.slice(0,v),P_(d,g);for(let C=v;C<I.length;C++)g.push(I[C])}else g=[],P_(d,g);return g}function P_(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function FC(s,o=[]){return u=>{u.providersResolver=(c,d)=>function kC(s,o,u){const c=tn();if(c.firstCreatePass){const d=ii(s);k_(u,c.data,c.blueprint,d,!0),k_(o,c.data,c.blueprint,d,!1)}}(c,d?d(s):s,o)}}class So{}class LC{}function pr(s,o){return new Xr(s,o??null)}class Xr extends So{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Jm(this);const c=Or(o);this._bootstrapComponents=ua(c.bootstrap),this._r3Injector=pI(o,u,[{provide:So,useValue:this},{provide:Ph,useValue:this.componentFactoryResolver}],le(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class _n extends LC{constructor(o){super(),this.moduleType=o}create(o){return new Xr(this.moduleType,o)}}class VC extends So{constructor(o,u,c){super(),this.componentFactoryResolver=new Jm(this),this.instance=null;const d=new GE([...o,{provide:So,useValue:this},{provide:Ph,useValue:this.componentFactoryResolver}],u||Um(),c,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function Vl(s,o,u=null){return new VC(s,o,u).injector}let is=(()=>{class s{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const c=Mh(0,u.type),d=c.length>0?Vl([c],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,d)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=et({token:s,providedIn:"environment",factory:()=>new s($e(rd))}),s})();function Jr(s){s.getStandaloneInjector=o=>o.get(is).getOrCreateStandaloneInjector(s)}function Td(s){return o=>{setTimeout(s,void 0,o)}}const ga=class YC extends p.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){let d=o,g=u||(()=>null),v=c;if(o&&"object"==typeof o){const C=o;d=C.next?.bind(C),g=C.error?.bind(C),v=C.complete?.bind(C)}this.__isAsync&&(g=Td(g),d&&(d=Td(d)),v&&(v=Td(v)));const I=super.subscribe({next:d,error:g,complete:v});return o instanceof Q.w0&&o.add(I),I}};function HS(){return this._results[sd()]()}class Fn{get changes(){return this._changes||(this._changes=new ga)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=sd(),c=Fn.prototype;c[u]||(c[u]=HS)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const d=function ui(s){return s.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function Uc(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let d=s[c],g=o[c];if(u&&(d=u(d),g=u(g)),g!==d)return!1}return!0}(c._results,d,u))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let jl=(()=>{class s{}return s.__NG_ELEMENT_ID__=GS,s})();const j_=jl,QC=class extends j_{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o,u){const c=this._declarationTContainer.tViews,d=Vh(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,u||null);d[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(d[19]=v.createEmbeddedView(c)),Ov(c,d,o),new rg(d)}};function GS(){return $l(Ar(),me())}function $l(s,o){return 4&s.type?new QC(o,s,ou(s,o)):null}let $_=(()=>{class s{}return s.__NG_ELEMENT_ID__=XC,s})();function XC(){return Gw(Ar(),me())}const yf=$_,ma=class extends yf{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return ou(this._hostTNode,this._hostLView)}get injector(){return new $i(this._hostTNode,this._hostLView)}get parentInjector(){const o=Ha(this._hostTNode,this._hostLView);if(xc(o)){const u=Hu(o,this._hostLView),c=ju(o);return new $i(u[1].data[c+8],u)}return new $i(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=Hw(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,c){let d,g;"number"==typeof c?d=c:null!=c&&(d=c.index,g=c.injector);const v=o.createEmbeddedView(u||{},g);return this.insert(v,d),v}createComponent(o,u,c,d,g){const v=o&&!function Xu(s){return"function"==typeof s}(o);let I;if(v)I=u;else{const L=u||{};I=L.index,c=L.injector,d=L.projectableNodes,g=L.environmentInjector||L.ngModuleRef}const C=v?o:new Dl(en(o)),S=c||this.parentInjector;if(!g&&null==C.ngModule){const z=(v?S:this.parentInjector).get(rd,null);z&&(g=z)}const M=C.create(S,d,void 0,g);return this.insert(M.hostView,I),M}insert(o,u){const c=o._lView,d=c[1];if(function Ru(s){return Vi(s[3])}(c)){const M=this.indexOf(o);if(-1!==M)this.detach(M);else{const L=c[3],z=new ma(L,L[6],L[3]);z.detach(z.indexOf(o))}}const g=this._adjustIndex(u),v=this._lContainer;!function ev(s,o,u,c){const d=10+c,g=u.length;c>0&&(u[d-1][4]=o),c<g-10?(o[4]=u[d],Ju(u,10+c,o)):(u.push(o),o[4]=null),o[3]=u;const v=o[17];null!==v&&u!==v&&function tv(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(v,o);const I=o[19];null!==I&&I.insertView(s),o[2]|=64}(d,c,v,g);const I=cr(g,v),C=c[11],S=wo(C,v[7]);return null!==S&&function Jy(s,o,u,c,d,g){c[0]=d,c[6]=o,Yc(s,c,u,1,d,g)}(d,v[6],C,c,S,I),o.attachToViewContainerRef(),Ju(H_(v),g,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=Hw(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=Rp(this._lContainer,u);c&&(za(H_(this._lContainer),u),wh(c[1],c))}detach(o){const u=this._adjustIndex(o,-1),c=Rp(this._lContainer,u);return c&&null!=za(H_(this._lContainer),u)?new rg(c):null}_adjustIndex(o,u=0){return o??this.length+u}};function Hw(s){return s[8]}function H_(s){return s[8]||(s[8]=[])}function Gw(s,o){let u;const c=o[s.index];if(Vi(c))u=c;else{let d;if(8&s.type)d=jn(c);else{const g=o[11];d=g.createComment("");const v=Xn(s,o);tu(g,wo(g,v),d,function xm(s,o){return s.nextSibling(o)}(g,v),!1)}o[s.index]=u=TI(c,o,d,s),tg(o,u)}return new ma(u,s,o)}class Hl{constructor(o){this.queryList=o,this.matches=null}clone(){return new Hl(this.queryList)}setDirty(){this.queryList.setDirty()}}class kg{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,d=[];for(let g=0;g<c;g++){const v=u.getByIndex(g);d.push(this.queries[v.indexInDeclarationView].clone())}return new kg(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==sb(o,u).matches&&this.queries[u].setDirty()}}class JC{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class gr{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const d=null!==u?u.length:0,g=this.getByIndex(c).embeddedTView(o,d);g&&(g.indexInDeclarationView=c,null!==u?u.push(g):u=[g])}return null!==u?new gr(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class ln{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new ln(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const g=c[d];this.matchTNodeWithReadOption(o,u,eb(u,g)),this.matchTNodeWithReadOption(o,u,zu(u,o,g,!1,!1))}else c===jl?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,zu(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===Oh||d===$_||d===jl&&4&u.type)this.addMatch(u.index,-2);else{const g=zu(u,o,d,!1,!1);null!==g&&this.addMatch(u.index,g)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function eb(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function Gl(s,o,u,c){return-1===u?function tb(s,o){return 11&s.type?ou(s,o):4&s.type?$l(s,o):null}(o,s):-2===u?function WS(s,o,u){return u===Oh?ou(o,s):u===jl?$l(o,s):u===$_?Gw(o,s):void 0}(s,o,c):Bi(s,s[1],u,o)}function Wi(s,o,u,c){const d=o[19].queries[c];if(null===d.matches){const g=s.data,v=u.matches,I=[];for(let C=0;C<v.length;C+=2){const S=v[C];I.push(S<0?null:Gl(o,g[S],v[C+1],u.metadata.read))}d.matches=I}return d.matches}function G_(s,o,u,c){const d=s.queries.getByIndex(u),g=d.matches;if(null!==g){const v=Wi(s,o,d,u);for(let I=0;I<g.length;I+=2){const C=g[I];if(C>0)c.push(v[I/2]);else{const S=g[I+1],M=o[-C];for(let L=10;L<M.length;L++){const z=M[L];z[17]===z[3]&&G_(z[1],z,S,c)}if(null!==M[9]){const L=M[9];for(let z=0;z<L.length;z++){const X=L[z];G_(X[1],X,S,c)}}}}}return c}function vf(s){const o=me(),u=tn(),c=th();Cc(c+1);const d=sb(u,c);if(s.dirty&&function ka(s){return 4==(4&s[2])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const g=d.crossesNgTemplate?G_(u,o,c,[]):Wi(u,o,d,c);s.reset(g,Hp),s.notifyOnChanges()}return!0}return!1}function Ao(s,o,u,c){const d=tn();if(d.firstCreatePass){const g=Ar();(function ib(s,o,u){null===s.queries&&(s.queries=new gr),s.queries.track(new ln(o,u))})(d,new JC(o,u,c),g.index),function Kt(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(d,s),2==(2&u)&&(d.staticContentQueries=!0)}!function rb(s,o,u){const c=new Fn(4==(4&u));la(s,o,c,c.destroy),null===o[19]&&(o[19]=new kg),o[19].queries.push(new Hl(c))}(d,me(),u)}function Ww(){return function Pg(s,o){return s[19].queries[o].queryList}(me(),th())}function sb(s,o){return s.queries.getByIndex(o)}function Z_(...s){}const wb=new Xt("Application Initializer");let Y_=(()=>{class s{constructor(u){this.appInits=u,this.resolve=Z_,this.reject=Z_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const g=this.appInits[d]();if(ld(g))u.push(g);else if(dg(g)){const v=new Promise((I,C)=>{g.subscribe({complete:I,error:C})});u.push(v)}}Promise.all(u).then(()=>{c()}).catch(d=>{this.reject(d)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)($e(wb,8))},s.\u0275prov=et({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Eb=new Xt("AppId",{providedIn:"root",factory:function Ib(){return`${Q_()}${Q_()}${Q_()}`}});function Q_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Cb=new Xt("Platform Initializer"),bb=new Xt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),a0=new Xt("appBootstrapListener");let ei=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=et({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const bf=new Xt("LocaleId",{providedIn:"root",factory:()=>tt(bf,yt.Optional|yt.SkipSelf)||function u0(){return typeof $localize<"u"&&$localize.locale||pd}()}),l0=new Xt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Tb{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let X_=(()=>{class s{compileModuleSync(u){return new _n(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),g=ua(Or(u).declarations).reduce((v,I)=>{const C=en(I);return C&&v.push(new Dl(C)),v},[]);return new Tb(c,g)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=et({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Ab=(()=>Promise.resolve(0))();function J_(s){typeof Zone>"u"?Ab.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Ss{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ga(!1),this.onMicrotaskEmpty=new ga(!1),this.onStable=new ga(!1),this.onError=new ga(!1),typeof Zone>"u")throw new he(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&u,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function eA(){let s=Pt.requestAnimationFrame,o=Pt.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function nA(s){const o=()=>{!function Nd(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Pt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,ty(s),s.isCheckStableRunning=!0,Md(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),ty(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,d,g,v,I)=>{try{return xb(s),u.invokeTask(d,g,v,I)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),Rb(s)}},onInvoke:(u,c,d,g,v,I,C)=>{try{return xb(s),u.invoke(d,g,v,I,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),Rb(s)}},onHasTask:(u,c,d,g)=>{u.hasTask(d,g),c===d&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,ty(s),Md(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(u,c,d,g)=>(u.handleError(d,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ss.isInAngularZone())throw new he(909,!1)}static assertNotInAngularZone(){if(Ss.isInAngularZone())throw new he(909,!1)}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,d){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+d,o,ey,Z_,Z_);try{return g.runTask(v,u,c)}finally{g.cancelTask(v)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const ey={};function Md(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function ty(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function xb(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Rb(s){s._nesting--,Md(s)}class rA{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ga,this.onMicrotaskEmpty=new ga,this.onStable=new ga,this.onError=new ga}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,d){return o.apply(u,c)}}const Sf=new Xt(""),zl=new Xt("");let ny,ql=(()=>{class s{constructor(u,c,d){this._ngZone=u,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,ny||(function iA(s){ny=s}(d),d.addToWindow(c)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ss.assertNotInAngularZone(),J_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())J_(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,d){let g=-1;c&&c>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:g,updateCb:d})}whenStable(u,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,c,d){return[]}}return s.\u0275fac=function(u){return new(u||s)($e(Ss),$e(d0),$e(zl))},s.\u0275prov=et({token:s,factory:s.\u0275fac}),s})(),d0=(()=>{class s{constructor(){this._applications=new Map}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return ny?.findTestabilityInTree(this,u,c)??null}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=et({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),Kl=null;const ry=new Xt("AllowMultipleToken"),Fg=new Xt("PlatformDestroyListeners");class iy{constructor(o,u){this.name=o,this.token=u}}function p0(s,o,u=[]){const c=`Platform: ${o}`,d=new Xt(c);return(g=[])=>{let v=oy();if(!v||v.injector.get(ry,!1)){const I=[...u,...g,{provide:d,useValue:!0}];s?s(I):function sA(s){if(Kl&&!Kl.get(ry,!1))throw new he(400,!1);Kl=s;const o=s.get(g0);(function Lg(s){const o=s.get(Cb,null);o&&o.forEach(u=>u())})(s)}(function Ug(s=[],o){return Il.create({name:o,providers:[{provide:El,useValue:"platform"},{provide:Fg,useValue:new Set([()=>Kl=null])},...s]})}(I,c))}return function Vg(s){const o=oy();if(!o)throw new he(401,!1);return o}()}}function oy(){return Kl?.get(g0)??null}let g0=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const d=function m0(s,o){let u;return u="noop"===s?new rA:("zone.js"===s?void 0:s)||new Ss(o),u}(c?.ngZone,function zi(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(c)),g=[{provide:Ss,useValue:d}];return d.run(()=>{const v=Il.create({providers:g,parent:this.injector,name:u.moduleType.name}),I=u.create(v),C=I.injector.get(Gp,null);if(!C)throw new he(402,!1);return d.runOutsideAngular(()=>{const S=d.onError.subscribe({next:M=>{C.handleError(M)}});I.onDestroy(()=>{xo(this._modules,I),S.unsubscribe()})}),function Bg(s,o,u){try{const c=u();return ld(c)?c.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(C,d,()=>{const S=I.injector.get(Y_);return S.runInitializers(),S.donePromise.then(()=>(function dn(s){Ye(s,"Expected localeId to be defined"),"string"==typeof s&&(uf=s.toLowerCase().replace(/_/g,"-"))}(I.injector.get(bf,pd)||pd),this._moduleDoBootstrap(I),I))})})}bootstrapModule(u,c=[]){const d=jg({},c);return function h0(s,o,u){const c=new _n(u);return Promise.resolve(c)}(0,0,u).then(g=>this.bootstrapModuleFactory(g,d))}_moduleDoBootstrap(u){const c=u.injector.get($g);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!u.instance.ngDoBootstrap)throw new he(-403,!1);u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new he(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const u=this._injector.get(Fg,null);u&&(u.forEach(c=>c()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)($e(Il))},s.\u0275prov=et({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function jg(s,o){return Array.isArray(o)?o.reduce(jg,s):{...s,...o}}let $g=(()=>{class s{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(u,c,d){this._zone=u,this._injector=c,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new O.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),v=new O.y(I=>{let C;this._zone.runOutsideAngular(()=>{C=this._zone.onStable.subscribe(()=>{Ss.assertNotInAngularZone(),J_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{Ss.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{C.unsubscribe(),S.unsubscribe()}});this.isStable=(0,re.T)(g,v.pipe((0,ne.B)()))}bootstrap(u,c){const d=u instanceof zE;if(!this._injector.get(Y_).done)throw!d&&Yn(u),new he(405,false);let v;v=d?u:this._injector.get(Ph).resolveComponentFactory(u),this.componentTypes.push(v.componentType);const I=function Nb(s){return s.isBoundToModule}(v)?void 0:this._injector.get(So),S=v.create(Il.NULL,[],c||v.selector,I),M=S.location.nativeElement,L=S.injector.get(Sf,null);return L?.registerApplication(M),S.onDestroy(()=>{this.detachView(S.hostView),xo(this.components,S),L?.unregisterApplication(M)}),this._loadComponent(S),S}tick(){if(this._runningTick)throw new he(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;xo(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u);const c=this._injector.get(a0,[]);c.push(...this._bootstrapListeners),c.forEach(d=>d(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>xo(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new he(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(u){return new(u||s)($e(Ss),$e(rd),$e(Gp))},s.\u0275prov=et({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function xo(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}function Pd(){return!1}let Pb=(()=>{class s{}return s.__NG_ELEMENT_ID__=aA,s})();function aA(s){return function uA(s,o,u){if(Ui(s)&&!u){const c=yr(s.index,o);return new rg(c,c)}return 47&s.type?new rg(o[16],o):null}(Ar(),me(),16==(16&s))}class E0{constructor(){}supports(o){return sg(o)}create(o){return new ly(o)}}const dA=(s,o)=>o;class ly{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||dA}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,d=0,g=null;for(;u||c;){const v=!c||u&&u.currentIndex<dy(c,d,g)?u:c,I=dy(v,d,g),C=v.currentIndex;if(v===c)d--,c=c._nextRemoved;else if(u=u._next,null==v.previousIndex)d++;else{g||(g=[]);const S=I-d,M=C-d;if(S!=M){for(let z=0;z<S;z++){const X=z<g.length?g[z]:g[z]=0,ye=X+z;M<=ye&&ye<S&&(g[z]=X+1)}g[v.previousIndex]=M-S}}I!==C&&o(v,I,C)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!sg(o))throw new he(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,g,v,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let I=0;I<this.length;I++)g=o[I],v=this._trackByFn(I,g),null!==u&&Object.is(u.trackById,v)?(c&&(u=this._verifyReinsertion(u,g,v,I)),Object.is(u.item,g)||this._addIdentityChange(u,g)):(u=this._mismatch(u,g,v,I),c=!0),u=u._next}else d=0,function r_(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[sd()]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,I=>{v=this._trackByFn(d,I),null!==u&&Object.is(u.trackById,v)?(c&&(u=this._verifyReinsertion(u,I,v,d)),Object.is(u.item,I)||this._addIdentityChange(u,I)):(u=this._mismatch(u,I,v,d),c=!0),u=u._next,d++}),this.length=d;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,d){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,g,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,g,d)):o=this._addAfter(new hA(u,c),g,d),o}_verifyReinsertion(o,u,c,d){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==g?o=this._reinsertAfter(g,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,g=o._nextRemoved;return null===d?this._removalsHead=g:d._nextRemoved=g,null===g?this._removalsTail=d:g._prevRemoved=d,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const d=null===u?this._itHead:u._next;return o._next=d,o._prev=u,null===d?this._itTail=o:d._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new cy),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new cy),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class hA{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Lb{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class cy{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new Lb,this.map.set(u,c)),c.add(o)}get(o,u){const d=this.map.get(o);return d?d.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function dy(s,o,u){const c=s.previousIndex;if(null===c)return c;let d=0;return u&&c<u.length&&(d=u[c]),c+o+d}class xf{constructor(){}supports(o){return o instanceof Map||og(o)}create(){return new hy}}class hy{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||og(o)))throw new he(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(u&&u.key===d)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const g=this._getOrCreateRecordForKey(d,c);u=this._insertBeforeOrAppend(u,g)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,u);const g=d._prev,v=d._next;return g&&(g._next=v),v&&(v._prev=g),d._next=null,d._prev=null,d}const c=new I0(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class I0{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function fy(){return new py([new E0])}let py=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||fy()),deps:[[s,new T,new nl]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(null!=c)return c;throw new he(901,!1)}}return s.\u0275prov=et({token:s,providedIn:"root",factory:fy}),s})();function C0(){return new gy([new xf])}let gy=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||C0()),deps:[[s,new T,new nl]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(c)return c;throw new he(901,!1)}}return s.\u0275prov=et({token:s,providedIn:"root",factory:C0}),s})();const Vb=p0(null,"core",[]);let gA=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)($e($g))},s.\u0275mod=kn({type:s}),s.\u0275inj=Dn({}),s})();function Rf(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(ft,be,F)=>{F.d(be,{Z:()=>We});var p=F(2090),Q=F(4859),O=F(9681),re=F(1877);class ne{constructor(he,Ae){this._delegate=he,this.firebase=Ae,(0,O._addComponent)(he,new Q.wA("app-compat",()=>this,"PUBLIC")),this.container=he.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(he){this._delegate.automaticDataCollectionEnabled=he}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(he=>{this._delegate.checkDestroyed(),he()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(he,Ae=O._DEFAULT_ENTRY_NAME){var Se;this._delegate.checkDestroyed();const Le=this._delegate.container.getProvider(he);return!Le.isInitialized()&&"EXPLICIT"===(null===(Se=Le.getComponent())||void 0===Se?void 0:Se.instantiationMode)&&Le.initialize(),Le.getImmediate({identifier:Ae})}_removeServiceInstance(he,Ae=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(he).clearInstance(Ae)}_addComponent(he){(0,O._addComponent)(this._delegate,he)}_addOrOverwriteComponent(he){(0,O._addOrOverwriteComponent)(this._delegate,he)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const fe=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),H=function ue(){const ut=function le(ut){const he={},Ae={__esModule:!0,initializeApp:function De(Pe,j={}){const Ee=O.initializeApp(Pe,j);if((0,p.r3)(he,Ee.name))return he[Ee.name];const Ue=new ut(Ee,Ae);return he[Ee.name]=Ue,Ue},app:Le,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function xe(Pe){const j=Pe.name,Ee=j.replace("-compat","");if(O._registerComponent(Pe)&&"PUBLIC"===Pe.type){const Ue=(Ke=Le())=>{if("function"!=typeof Ke[Ee])throw fe.create("invalid-app-argument",{appName:j});return Ke[Ee]()};void 0!==Pe.serviceProps&&(0,p.ZB)(Ue,Pe.serviceProps),Ae[Ee]=Ue,ut.prototype[Ee]=function(...Ke){return this._getService.bind(this,j).apply(this,Pe.multipleInstances?Ke:[])}}return"PUBLIC"===Pe.type?Ae[Ee]:null},removeApp:function Se(Pe){delete he[Pe]},useAsService:function Fe(Pe,j){return"serverAuth"===j?null:j},modularAPIs:O}};function Le(Pe){if(!(0,p.r3)(he,Pe=Pe||O._DEFAULT_ENTRY_NAME))throw fe.create("no-app",{appName:Pe});return he[Pe]}return Ae.default=Ae,Object.defineProperty(Ae,"apps",{get:function Ie(){return Object.keys(he).map(Pe=>he[Pe])}}),Le.App=ut,Ae}(ne);return ut.INTERNAL=Object.assign(Object.assign({},ut.INTERNAL),{createFirebaseNamespace:ue,extendNamespace:function he(Ae){(0,p.ZB)(ut,Ae)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),ut}(),G=new re.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ut=self.firebase.SDK_VERSION;ut&&ut.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const We=H;!function Te(ut){(0,O.registerVersion)("@firebase/app-compat","0.2.1",ut)}()},9681:(ft,be,F)=>{F.r(be),F.d(be,{FirebaseError:()=>re.ZR,SDK_VERSION:()=>ti,_DEFAULT_ENTRY_NAME:()=>Ve,_addComponent:()=>pn,_addOrOverwriteComponent:()=>Ct,_apps:()=>Ye,_clearComponents:()=>Dn,_components:()=>ze,_getProvider:()=>et,_registerComponent:()=>an,_removeServiceInstance:()=>Ot,deleteApp:()=>Fs,getApp:()=>yi,getApps:()=>$r,initializeApp:()=>Os,onLog:()=>yt,registerVersion:()=>ni,setLogLevel:()=>us});var p=F(5861),Q=F(4859),O=F(1877),re=F(2090),ne=F(8766);class ie{constructor(Ce){this.container=Ce}getPlatformInfoString(){return this.container.getProviders().map(tt=>{if(function fe($e){return"VERSION"===$e.getComponent()?.type}(tt)){const xt=tt.getImmediate();return`${xt.library}/${xt.version}`}return null}).filter(tt=>tt).join(" ")}}const le="@firebase/app",H=new O.Yd("@firebase/app"),Ve="[DEFAULT]",je={[le]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ye=new Map,ze=new Map;function pn($e,Ce){try{$e.container.addComponent(Ce)}catch(tt){H.debug(`Component ${Ce.name} failed to register with FirebaseApp ${$e.name}`,tt)}}function Ct($e,Ce){$e.container.addOrOverwriteComponent(Ce)}function an($e){const Ce=$e.name;if(ze.has(Ce))return H.debug(`There were multiple attempts to register component ${Ce}.`),!1;ze.set(Ce,$e);for(const tt of Ye.values())pn(tt,$e);return!0}function et($e,Ce){const tt=$e.container.getProvider("heartbeat").getImmediate({optional:!0});return tt&&tt.triggerHeartbeat(),$e.container.getProvider(Ce)}function Ot($e,Ce,tt=Ve){et($e,Ce).clearInstance(tt)}function Dn(){ze.clear()}const Tn=new re.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Sn{constructor(Ce,tt,xt){this._isDeleted=!1,this._options=Object.assign({},Ce),this._config=Object.assign({},tt),this._name=tt.name,this._automaticDataCollectionEnabled=tt.automaticDataCollectionEnabled,this._container=xt,this.container.addComponent(new Q.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ce){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ce}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ce){this._isDeleted=Ce}checkDestroyed(){if(this.isDeleted)throw Tn.create("app-deleted",{appName:this._name})}}const ti="9.16.0";function Os($e,Ce={}){let tt=$e;"object"!=typeof Ce&&(Ce={name:Ce});const xt=Object.assign({name:Ve,automaticDataCollectionEnabled:!1},Ce),Nt=xt.name;if("string"!=typeof Nt||!Nt)throw Tn.create("bad-app-name",{appName:String(Nt)});if(tt||(tt=(0,re.aH)()),!tt)throw Tn.create("no-options");const Ut=Ye.get(Nt);if(Ut){if((0,re.vZ)(tt,Ut.options)&&(0,re.vZ)(xt,Ut.config))return Ut;throw Tn.create("duplicate-app",{appName:Nt})}const $=new Q.H0(Nt);for(const K of ze.values())$.addComponent(K);const B=new Sn(tt,xt,$);return Ye.set(Nt,B),B}function yi($e=Ve){const Ce=Ye.get($e);if(!Ce&&$e===Ve)return Os();if(!Ce)throw Tn.create("no-app",{appName:$e});return Ce}function $r(){return Array.from(Ye.values())}function Fs($e){return vn.apply(this,arguments)}function vn(){return(vn=(0,p.Z)(function*($e){const Ce=$e.name;Ye.has(Ce)&&(Ye.delete(Ce),yield Promise.all($e.container.getProviders().map(tt=>tt.delete())),$e.isDeleted=!0)})).apply(this,arguments)}function ni($e,Ce,tt){var xt;let Nt=null!==(xt=je[$e])&&void 0!==xt?xt:$e;tt&&(Nt+=`-${tt}`);const Ut=Nt.match(/\s|\//),$=Ce.match(/\s|\//);if(Ut||$){const B=[`Unable to register library "${Nt}" with version "${Ce}":`];return Ut&&B.push(`library name "${Nt}" contains illegal characters (whitespace or "/")`),Ut&&$&&B.push("and"),$&&B.push(`version name "${Ce}" contains illegal characters (whitespace or "/")`),void H.warn(B.join(" "))}an(new Q.wA(`${Nt}-version`,()=>({library:Nt,version:Ce}),"VERSION"))}function yt($e,Ce){if(null!==$e&&"function"!=typeof $e)throw Tn.create("invalid-log-argument");(0,O.Am)($e,Ce)}function us($e){(0,O.Ub)($e)}const Nr="firebase-heartbeat-store";let Ls=null;function Pt(){return Ls||(Ls=(0,ne.X3)("firebase-heartbeat-database",1,{upgrade:($e,Ce)=>{0===Ce&&$e.createObjectStore(Nr)}}).catch($e=>{throw Tn.create("idb-open",{originalErrorMessage:$e.message})})),Ls}function Tt(){return(Tt=(0,p.Z)(function*($e){try{return(yield Pt()).transaction(Nr).objectStore(Nr).get(An($e))}catch(Ce){if(Ce instanceof re.ZR)H.warn(Ce.message);else{const tt=Tn.create("idb-get",{originalErrorMessage:Ce?.message});H.warn(tt.message)}}})).apply(this,arguments)}function ls($e,Ce){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,p.Z)(function*($e,Ce){try{const xt=(yield Pt()).transaction(Nr,"readwrite");return yield xt.objectStore(Nr).put(Ce,An($e)),xt.done}catch(tt){if(tt instanceof re.ZR)H.warn(tt.message);else{const xt=Tn.create("idb-set",{originalErrorMessage:tt?.message});H.warn(xt.message)}}})).apply(this,arguments)}function An($e){return`${$e.name}!${$e.options.appId}`}class ko{constructor(Ce){this.container=Ce,this._heartbeatsCache=null;const tt=this.container.getProvider("app").getImmediate();this._storage=new Jt(tt),this._heartbeatsCachePromise=this._storage.read().then(xt=>(this._heartbeatsCache=xt,xt))}triggerHeartbeat(){var Ce=this;return(0,p.Z)(function*(){const xt=Ce.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Nt=fn();if(null===Ce._heartbeatsCache&&(Ce._heartbeatsCache=yield Ce._heartbeatsCachePromise),Ce._heartbeatsCache.lastSentHeartbeatDate!==Nt&&!Ce._heartbeatsCache.heartbeats.some(Ut=>Ut.date===Nt))return Ce._heartbeatsCache.heartbeats.push({date:Nt,agent:xt}),Ce._heartbeatsCache.heartbeats=Ce._heartbeatsCache.heartbeats.filter(Ut=>{const $=new Date(Ut.date).valueOf();return Date.now()-$<=2592e6}),Ce._storage.overwrite(Ce._heartbeatsCache)})()}getHeartbeatsHeader(){var Ce=this;return(0,p.Z)(function*(){if(null===Ce._heartbeatsCache&&(yield Ce._heartbeatsCachePromise),null===Ce._heartbeatsCache||0===Ce._heartbeatsCache.heartbeats.length)return"";const tt=fn(),{heartbeatsToSend:xt,unsentEntries:Nt}=function Yi($e,Ce=1024){const tt=[];let xt=$e.slice();for(const Nt of $e){const Ut=tt.find($=>$.agent===Nt.agent);if(Ut){if(Ut.dates.push(Nt.date),kr(tt)>Ce){Ut.dates.pop();break}}else if(tt.push({agent:Nt.agent,dates:[Nt.date]}),kr(tt)>Ce){tt.pop();break}xt=xt.slice(1)}return{heartbeatsToSend:tt,unsentEntries:xt}}(Ce._heartbeatsCache.heartbeats),Ut=(0,re.L)(JSON.stringify({version:2,heartbeats:xt}));return Ce._heartbeatsCache.lastSentHeartbeatDate=tt,Nt.length>0?(Ce._heartbeatsCache.heartbeats=Nt,yield Ce._storage.overwrite(Ce._heartbeatsCache)):(Ce._heartbeatsCache.heartbeats=[],Ce._storage.overwrite(Ce._heartbeatsCache)),Ut})()}}function fn(){return(new Date).toISOString().substring(0,10)}class Jt{constructor(Ce){this.app=Ce,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,re.hl)()&&(0,re.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ce=this;return(0,p.Z)(function*(){return(yield Ce._canUseIndexedDBPromise)&&(yield function wt($e){return Tt.apply(this,arguments)}(Ce.app))||{heartbeats:[]}})()}overwrite(Ce){var tt=this;return(0,p.Z)(function*(){var xt;if(yield tt._canUseIndexedDBPromise){const Ut=yield tt.read();return ls(tt.app,{lastSentHeartbeatDate:null!==(xt=Ce.lastSentHeartbeatDate)&&void 0!==xt?xt:Ut.lastSentHeartbeatDate,heartbeats:Ce.heartbeats})}})()}add(Ce){var tt=this;return(0,p.Z)(function*(){var xt;if(yield tt._canUseIndexedDBPromise){const Ut=yield tt.read();return ls(tt.app,{lastSentHeartbeatDate:null!==(xt=Ce.lastSentHeartbeatDate)&&void 0!==xt?xt:Ut.lastSentHeartbeatDate,heartbeats:[...Ut.heartbeats,...Ce.heartbeats]})}})()}}function kr($e){return(0,re.L)(JSON.stringify({version:2,heartbeats:$e})).length}!function Qi($e){an(new Q.wA("platform-logger",Ce=>new ie(Ce),"PRIVATE")),an(new Q.wA("heartbeat",Ce=>new ko(Ce),"PRIVATE")),ni(le,"0.9.1",$e),ni(le,"0.9.1","esm2017"),ni("fire-js","")}("")},4859:(ft,be,F)=>{F.d(be,{H0:()=>le,wA:()=>O,zt:()=>ne});var p=F(5861),Q=F(2090);class O{constructor(H,G,Z){this.name=H,this.instanceFactory=G,this.type=Z,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(H){return this.instantiationMode=H,this}setMultipleInstances(H){return this.multipleInstances=H,this}setServiceProps(H){return this.serviceProps=H,this}setInstanceCreatedCallback(H){return this.onInstanceCreated=H,this}}const re="[DEFAULT]";class ne{constructor(H,G){this.name=H,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(H){const G=this.normalizeInstanceIdentifier(H);if(!this.instancesDeferred.has(G)){const Z=new Q.BH;if(this.instancesDeferred.set(G,Z),this.isInitialized(G)||this.shouldAutoInitialize())try{const Be=this.getOrInitializeService({instanceIdentifier:G});Be&&Z.resolve(Be)}catch{}}return this.instancesDeferred.get(G).promise}getImmediate(H){var G;const Z=this.normalizeInstanceIdentifier(H?.identifier),Be=null!==(G=H?.optional)&&void 0!==G&&G;if(!this.isInitialized(Z)&&!this.shouldAutoInitialize()){if(Be)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Z})}catch(Te){if(Be)return null;throw Te}}getComponent(){return this.component}setComponent(H){if(H.name!==this.name)throw Error(`Mismatching Component ${H.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=H,this.shouldAutoInitialize()){if(function fe(ue){return"EAGER"===ue.instantiationMode}(H))try{this.getOrInitializeService({instanceIdentifier:re})}catch{}for(const[G,Z]of this.instancesDeferred.entries()){const Be=this.normalizeInstanceIdentifier(G);try{const Te=this.getOrInitializeService({instanceIdentifier:Be});Z.resolve(Te)}catch{}}}}clearInstance(H=re){this.instancesDeferred.delete(H),this.instancesOptions.delete(H),this.instances.delete(H)}delete(){var H=this;return(0,p.Z)(function*(){const G=Array.from(H.instances.values());yield Promise.all([...G.filter(Z=>"INTERNAL"in Z).map(Z=>Z.INTERNAL.delete()),...G.filter(Z=>"_delete"in Z).map(Z=>Z._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(H=re){return this.instances.has(H)}getOptions(H=re){return this.instancesOptions.get(H)||{}}initialize(H={}){const{options:G={}}=H,Z=this.normalizeInstanceIdentifier(H.instanceIdentifier);if(this.isInitialized(Z))throw Error(`${this.name}(${Z}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Be=this.getOrInitializeService({instanceIdentifier:Z,options:G});for(const[Te,We]of this.instancesDeferred.entries())Z===this.normalizeInstanceIdentifier(Te)&&We.resolve(Be);return Be}onInit(H,G){var Z;const Be=this.normalizeInstanceIdentifier(G),Te=null!==(Z=this.onInitCallbacks.get(Be))&&void 0!==Z?Z:new Set;Te.add(H),this.onInitCallbacks.set(Be,Te);const We=this.instances.get(Be);return We&&H(We,Be),()=>{Te.delete(H)}}invokeOnInitCallbacks(H,G){const Z=this.onInitCallbacks.get(G);if(Z)for(const Be of Z)try{Be(H,G)}catch{}}getOrInitializeService({instanceIdentifier:H,options:G={}}){let Z=this.instances.get(H);if(!Z&&this.component&&(Z=this.component.instanceFactory(this.container,{instanceIdentifier:(ue=H,ue===re?void 0:ue),options:G}),this.instances.set(H,Z),this.instancesOptions.set(H,G),this.invokeOnInitCallbacks(Z,H),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,H,Z)}catch{}var ue;return Z||null}normalizeInstanceIdentifier(H=re){return this.component?this.component.multipleInstances?H:re:H}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class le{constructor(H){this.name=H,this.providers=new Map}addComponent(H){const G=this.getProvider(H.name);if(G.isComponentSet())throw new Error(`Component ${H.name} has already been registered with ${this.name}`);G.setComponent(H)}addOrOverwriteComponent(H){this.getProvider(H.name).isComponentSet()&&this.providers.delete(H.name),this.addComponent(H)}getProvider(H){if(this.providers.has(H))return this.providers.get(H);const G=new ne(H,this);return this.providers.set(H,G),G}getProviders(){return Array.from(this.providers.values())}}},1877:(ft,be,F)=>{F.d(be,{Am:()=>ue,Ub:()=>le,Yd:()=>fe,in:()=>Q});const p=[];var Q=(()=>{return(H=Q||(Q={}))[H.DEBUG=0]="DEBUG",H[H.VERBOSE=1]="VERBOSE",H[H.INFO=2]="INFO",H[H.WARN=3]="WARN",H[H.ERROR=4]="ERROR",H[H.SILENT=5]="SILENT",Q;var H})();const O={debug:Q.DEBUG,verbose:Q.VERBOSE,info:Q.INFO,warn:Q.WARN,error:Q.ERROR,silent:Q.SILENT},re=Q.INFO,ne={[Q.DEBUG]:"log",[Q.VERBOSE]:"log",[Q.INFO]:"info",[Q.WARN]:"warn",[Q.ERROR]:"error"},ie=(H,G,...Z)=>{if(G<H.logLevel)return;const Be=(new Date).toISOString(),Te=ne[G];if(!Te)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[Te](`[${Be}]  ${H.name}:`,...Z)};class fe{constructor(G){this.name=G,this._logLevel=re,this._logHandler=ie,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in Q))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?O[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,Q.DEBUG,...G),this._logHandler(this,Q.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,Q.VERBOSE,...G),this._logHandler(this,Q.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,Q.INFO,...G),this._logHandler(this,Q.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,Q.WARN,...G),this._logHandler(this,Q.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,Q.ERROR,...G),this._logHandler(this,Q.ERROR,...G)}}function le(H){p.forEach(G=>{G.setLogLevel(H)})}function ue(H,G){for(const Z of p){let Be=null;G&&G.level&&(Be=O[G.level]),Z.userLogHandler=null===H?null:(Te,We,...ut)=>{const he=ut.map(Ae=>{if(null==Ae)return null;if("string"==typeof Ae)return Ae;if("number"==typeof Ae||"boolean"==typeof Ae)return Ae.toString();if(Ae instanceof Error)return Ae.message;try{return JSON.stringify(Ae)}catch{return null}}).filter(Ae=>Ae).join(" ");We>=(Be??Te.logLevel)&&H({level:Q[We].toLowerCase(),message:he,args:ut,type:Te.name})}}}},259:(ft,be,F)=>{F.d(be,{C6:()=>p.getApps,Mq:()=>p.getApp});var p=F(9681);(0,p.registerVersion)("firebase","9.16.0","app")},9260:(ft,be,F)=>{F.d(be,{Z:()=>p.Z});var p=F(3942);p.Z.registerVersion("firebase","9.16.0","app-compat")},750:(ft,be,F)=>{F.r(be);var p=F(5861),Q=F(3942),O=F(2090),re=F(9681),ne=F(1877),ie=F(655),fe=F(4859);const We=function Be(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ut=function Te(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},he=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Se=new ne.Yd("@firebase/auth");function Le(y,...f){Se.logLevel<=ne.in.ERROR&&Se.error(`Auth (${re.SDK_VERSION}): ${y}`,...f)}function De(y,...f){throw Pe(y,...f)}function Ie(y,...f){return Pe(y,...f)}function xe(y,f,m){const E=Object.assign(Object.assign({},ut()),{[f]:m});return new O.LL("auth","Firebase",E).create(f,{appName:y.name})}function Fe(y,f,m){if(!(f instanceof m))throw m.name!==f.constructor.name&&De(y,"argument-error"),xe(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Pe(y,...f){if("string"!=typeof y){const m=f[0],E=[...f.slice(1)];return E[0]&&(E[0].appName=y.name),y._errorFactory.create(m,...E)}return he.create(y,...f)}function j(y,f,...m){if(!y)throw Pe(f,...m)}function Ee(y){const f="INTERNAL ASSERTION FAILED: "+y;throw Le(f),new Error(f)}function Ue(y,f){y||Ee(f)}const Ke=new Map;function gt(y){Ue(y instanceof Function,"Expected a class definition");let f=Ke.get(y);return f?(Ue(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,Ke.set(y,f),f)}function de(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function we(){return"http:"===Re()||"https:"===Re()}function Re(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Ye{constructor(f,m){this.shortDelay=f,this.longDelay=m,Ue(m>f,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function Ve(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(we()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ze(y,f){Ue(y.emulator,"Emulator should always be set here");const{url:m}=y.emulator;return f?`${m}${f.startsWith("/")?f.slice(1):f}`:m}class pn{static initialize(f,m,E){this.fetchImpl=f,m&&(this.headersImpl=m),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ee("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ee("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ee("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ct={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},an=new Ye(3e4,6e4);function et(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function Ot(y,f,m,E){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,p.Z)(function*(y,f,m,E,A={}){return xn(y,A,(0,p.Z)(function*(){let N={},q={};E&&("GET"===f?q=E:N={body:JSON.stringify(E)});const ce=(0,O.xO)(Object.assign({key:y.config.apiKey},q)).slice(1),He=yield y._getAdditionalHeaders();return He["Content-Type"]="application/json",y.languageCode&&(He["X-Firebase-Locale"]=y.languageCode),pn.fetch()(Os(y,y.config.apiHost,m,ce),Object.assign({method:f,headers:He,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function xn(y,f,m){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,p.Z)(function*(y,f,m){y._canInitEmulator=!1;const E=Object.assign(Object.assign({},Ct),f);try{const A=new yi(y),N=yield Promise.race([m(),A.promise]);A.clearNetworkTimeout();const q=yield N.json();if("needConfirmation"in q)throw $r(y,"account-exists-with-different-credential",q);if(N.ok&&!("errorMessage"in q))return q;{const ce=N.ok?q.errorMessage:q.error.message,[He,Xe]=ce.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===He)throw $r(y,"credential-already-in-use",q);if("EMAIL_EXISTS"===He)throw $r(y,"email-already-in-use",q);if("USER_DISABLED"===He)throw $r(y,"user-disabled",q);const St=E[He]||He.toLowerCase().replace(/[_\s]+/g,"-");if(Xe)throw xe(y,St,Xe);De(y,St)}}catch(A){if(A instanceof O.ZR)throw A;De(y,"network-request-failed")}})).apply(this,arguments)}function Sn(y,f,m,E){return ti.apply(this,arguments)}function ti(){return(ti=(0,p.Z)(function*(y,f,m,E,A={}){const N=yield Ot(y,f,m,E,A);return"mfaPendingCredential"in N&&De(y,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function Os(y,f,m,E){const A=`${f}${m}?${E}`;return y.config.emulator?ze(y.config,A):`${y.config.apiScheme}://${A}`}class yi{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((m,E)=>{this.timer=setTimeout(()=>E(Ie(this.auth,"network-request-failed")),an.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function $r(y,f,m){const E={appName:y.name};m.email&&(E.email=m.email),m.phoneNumber&&(E.phoneNumber=m.phoneNumber);const A=Ie(y,f,E);return A.customData._tokenResponse=m,A}function vn(){return(vn=(0,p.Z)(function*(y,f){return Ot(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function ni(y,f){return yt.apply(this,arguments)}function yt(){return(yt=(0,p.Z)(function*(y,f){return Ot(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function us(y,f){return ki.apply(this,arguments)}function ki(){return(ki=(0,p.Z)(function*(y,f){return Ot(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function Rn(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function Pt(){return(Pt=(0,p.Z)(function*(y,f=!1){const m=(0,O.m9)(y),E=yield m.getIdToken(f),A=Tt(E);j(A&&A.exp&&A.auth_time&&A.iat,m.auth,"internal-error");const N="object"==typeof A.firebase?A.firebase:void 0,q=N?.sign_in_provider;return{claims:A,token:E,authTime:Rn(wt(A.auth_time)),issuedAtTime:Rn(wt(A.iat)),expirationTime:Rn(wt(A.exp)),signInProvider:q||null,signInSecondFactor:N?.sign_in_second_factor||null}})).apply(this,arguments)}function wt(y){return 1e3*Number(y)}function Tt(y){const[f,m,E]=y.split(".");if(void 0===f||void 0===m||void 0===E)return Le("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,O.tV)(m);return A?JSON.parse(A):(Le("Failed to decode base64 JWT payload"),null)}catch(A){return Le("Caught error parsing JWT payload as JSON",A?.toString()),null}}function Mn(y,f){return An.apply(this,arguments)}function An(){return(An=(0,p.Z)(function*(y,f,m=!1){if(m)return f;try{return yield f}catch(E){throw E instanceof O.ZR&&Pi(E)&&y.auth.currentUser===y&&(yield y.auth.signOut()),E}})).apply(this,arguments)}function Pi({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Sr{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var m;if(f){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const A=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(f=!1){var m=this;if(!this.isRunning)return;const E=this.getInterval(f);this.timerId=setTimeout((0,p.Z)(function*(){yield m.iteration()}),E)}iteration(){var f=this;return(0,p.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m?.code&&f.schedule(!0))}f.schedule()})()}}class ko{constructor(f,m){this.createdAt=f,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=Rn(this.lastLoginAt),this.creationTime=Rn(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function fn(y){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,p.Z)(function*(y){var f;const m=y.auth,E=yield y.getIdToken(),A=yield Mn(y,us(m,{idToken:E}));j(A?.users.length,m,"internal-error");const N=A.users[0];y._notifyReloadListener(N);const q=null!==(f=N.providerUserInfo)&&void 0!==f&&f.length?$e(N.providerUserInfo):[],ce=Qi(y.providerData,q),St=!!y.isAnonymous&&!(y.email&&N.passwordHash||ce?.length),vt={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:ce,metadata:new ko(N.createdAt,N.lastLoginAt),isAnonymous:St};Object.assign(y,vt)})).apply(this,arguments)}function kr(){return(kr=(0,p.Z)(function*(y){const f=(0,O.m9)(y);yield fn(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Qi(y,f){return[...y.filter(E=>!f.some(A=>A.providerId===E.providerId)),...f]}function $e(y){return y.map(f=>{var{providerId:m}=f,E=(0,ie._T)(f,["providerId"]);return{providerId:m,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function tt(){return(tt=(0,p.Z)(function*(y,f){const m=yield xn(y,{},(0,p.Z)(function*(){const E=(0,O.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:A,apiKey:N}=y.config,q=Os(y,A,"/v1/token",`key=${N}`),ce=yield y._getAdditionalHeaders();return ce["Content-Type"]="application/x-www-form-urlencoded",pn.fetch()(q,{method:"POST",headers:ce,body:E})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class xt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){j(f.idToken,"internal-error"),j(typeof f.idToken<"u","internal-error"),j(typeof f.refreshToken<"u","internal-error");const m="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function ls(y){const f=Tt(y);return j(f,"internal-error"),j(typeof f.exp<"u","internal-error"),j(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,m)}getToken(f,m=!1){var E=this;return(0,p.Z)(function*(){return j(!E.accessToken||E.refreshToken,f,"user-token-expired"),m||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(f,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,m){var E=this;return(0,p.Z)(function*(){const{accessToken:A,refreshToken:N,expiresIn:q}=yield function Ce(y,f){return tt.apply(this,arguments)}(f,m);E.updateTokensAndExpiration(A,N,Number(q))})()}updateTokensAndExpiration(f,m,E){this.refreshToken=m||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(f,m){const{refreshToken:E,accessToken:A,expirationTime:N}=m,q=new xt;return E&&(j("string"==typeof E,"internal-error",{appName:f}),q.refreshToken=E),A&&(j("string"==typeof A,"internal-error",{appName:f}),q.accessToken=A),N&&(j("number"==typeof N,"internal-error",{appName:f}),q.expirationTime=N),q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new xt,this.toJSON())}_performRefresh(){return Ee("not implemented")}}function Nt(y,f){j("string"==typeof y||typeof y>"u","internal-error",{appName:f})}class Ut{constructor(f){var{uid:m,auth:E,stsTokenManager:A}=f,N=(0,ie._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Sr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=E,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new ko(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(f){var m=this;return(0,p.Z)(function*(){const E=yield Mn(m,m.stsTokenManager.getToken(m.auth,f));return j(E,m.auth,"internal-error"),m.accessToken!==E&&(m.accessToken=E,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),E})()}getIdTokenResult(f){return function Ls(y){return Pt.apply(this,arguments)}(this,f)}reload(){return function Jt(y){return kr.apply(this,arguments)}(this)}_assign(f){this!==f&&(j(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(m=>Object.assign({},m)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new Ut(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){j(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,m=!1){var E=this;return(0,p.Z)(function*(){let A=!1;f.idToken&&f.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(f),A=!0),m&&(yield fn(E)),yield E.auth._persistUserIfCurrent(E),A&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var f=this;return(0,p.Z)(function*(){const m=yield f.getIdToken();return yield Mn(f,function Fs(y,f){return vn.apply(this,arguments)}(f.auth,{idToken:m})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,m){var E,A,N,q,ce,He,Xe,St;const vt=null!==(E=m.displayName)&&void 0!==E?E:void 0,Gn=null!==(A=m.email)&&void 0!==A?A:void 0,ns=null!==(N=m.phoneNumber)&&void 0!==N?N:void 0,yl=null!==(q=m.photoURL)&&void 0!==q?q:void 0,Fp=null!==(ce=m.tenantId)&&void 0!==ce?ce:void 0,iu=null!==(He=m._redirectEventId)&&void 0!==He?He:void 0,rs=null!==(Xe=m.createdAt)&&void 0!==Xe?Xe:void 0,vl=null!==(St=m.lastLoginAt)&&void 0!==St?St:void 0,{uid:aa,emailVerified:Lp,isAnonymous:Vp,providerData:Ah,stsTokenManager:Pm}=m;j(aa&&Pm,f,"internal-error");const sv=xt.fromJSON(this.name,Pm);j("string"==typeof aa,f,"internal-error"),Nt(vt,f.name),Nt(Gn,f.name),j("boolean"==typeof Lp,f,"internal-error"),j("boolean"==typeof Vp,f,"internal-error"),Nt(ns,f.name),Nt(yl,f.name),Nt(Fp,f.name),Nt(iu,f.name),Nt(rs,f.name),Nt(vl,f.name);const wl=new Ut({uid:aa,auth:f,email:Gn,emailVerified:Lp,displayName:vt,isAnonymous:Vp,photoURL:yl,phoneNumber:ns,tenantId:Fp,stsTokenManager:sv,createdAt:rs,lastLoginAt:vl});return Ah&&Array.isArray(Ah)&&(wl.providerData=Ah.map(xh=>Object.assign({},xh))),iu&&(wl._redirectEventId=iu),wl}static _fromIdTokenResponse(f,m,E=!1){return(0,p.Z)(function*(){const A=new xt;A.updateFromServerResponse(m);const N=new Ut({uid:m.localId,auth:f,stsTokenManager:A,isAnonymous:E});return yield fn(N),N})()}}const B=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(m,E){var A=this;return(0,p.Z)(function*(){A.storage[m]=E})()}_get(m){var E=this;return(0,p.Z)(function*(){const A=E.storage[m];return void 0===A?null:A})()}_remove(m){var E=this;return(0,p.Z)(function*(){delete E.storage[m]})()}_addListener(m,E){}_removeListener(m,E){}}return y.type="NONE",y})();function K(y,f,m){return`firebase:${y}:${f}:${m}`}class ge{constructor(f,m,E){this.persistence=f,this.auth=m,this.userKey=E;const{config:A,name:N}=this.auth;this.fullUserKey=K(this.userKey,A.apiKey,N),this.fullPersistenceKey=K("persistence",A.apiKey,N),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,p.Z)(function*(){const m=yield f.persistence._get(f.fullUserKey);return m?Ut._fromJSON(f.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var m=this;return(0,p.Z)(function*(){if(m.persistence===f)return;const E=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=f,E?m.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,m,E="authUser"){return(0,p.Z)(function*(){if(!m.length)return new ge(gt(B),f,E);const A=(yield Promise.all(m.map(function(){var Xe=(0,p.Z)(function*(St){if(yield St._isAvailable())return St});return function(St){return Xe.apply(this,arguments)}}()))).filter(Xe=>Xe);let N=A[0]||gt(B);const q=K(E,f.config.apiKey,f.name);let ce=null;for(const Xe of m)try{const St=yield Xe._get(q);if(St){const vt=Ut._fromJSON(f,St);Xe!==N&&(ce=vt),N=Xe;break}}catch{}const He=A.filter(Xe=>Xe._shouldAllowMigration);return N._shouldAllowMigration&&He.length?(N=He[0],ce&&(yield N._set(q,ce.toJSON())),yield Promise.all(m.map(function(){var Xe=(0,p.Z)(function*(St){if(St!==N)try{yield St._remove(q)}catch{}});return function(St){return Xe.apply(this,arguments)}}())),new ge(N,f,E)):new ge(N,f,E)})()}}function J(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(Nn(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(ot(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(_r(f))return"Blackberry";if(qt(f))return"Webos";if(Bt(f))return"Safari";if((f.includes("chrome/")||Qt(f))&&!f.includes("edge/"))return"Chrome";if(Et(f))return"Android";{const E=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function ot(y=(0,O.z$)()){return/firefox\//i.test(y)}function Bt(y=(0,O.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Qt(y=(0,O.z$)()){return/crios\//i.test(y)}function Nn(y=(0,O.z$)()){return/iemobile/i.test(y)}function Et(y=(0,O.z$)()){return/android/i.test(y)}function _r(y=(0,O.z$)()){return/blackberry/i.test(y)}function qt(y=(0,O.z$)()){return/webos/i.test(y)}function or(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function Xf(y=(0,O.z$)()){return or(y)||Et(y)||qt(y)||_r(y)||/windows phone/i.test(y)||Nn(y)}function bu(y,f=[]){let m;switch(y){case"Browser":m=J((0,O.z$)());break;case"Worker":m=`${J((0,O.z$)())}-${y}`;break;default:m=y}const E=f.length?f.join(","):"FirebaseCore-web";return`${m}/JsCore/${re.SDK_VERSION}/${E}`}class sc{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,m){const E=N=>new Promise((q,ce)=>{try{q(f(N))}catch(He){ce(He)}});E.onAbort=m,this.queue.push(E);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(f){var m=this;return(0,p.Z)(function*(){if(m.auth.currentUser===f)return;const E=[];try{for(const A of m.queue)yield A(f),A.onAbort&&E.push(A.onAbort)}catch(A){E.reverse();for(const N of E)try{N()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:A?.message})}})()}}class Gd{constructor(f,m,E){this.app=f,this.heartbeatServiceProvider=m,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wd(this),this.idTokenSubscription=new Wd(this),this.beforeStateQueue=new sc(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=he,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(f,m){var E=this;return m&&(this._popupRedirectResolver=gt(m)),this._initializationPromise=this.queue((0,p.Z)(function*(){var A,N;if(!E._deleted&&(E.persistenceManager=yield ge.create(E,f),!E._deleted)){if(null!==(A=E._popupRedirectResolver)&&void 0!==A&&A._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(m),E.lastNotifiedUid=(null===(N=E.currentUser)||void 0===N?void 0:N.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,p.Z)(function*(){if(f._deleted)return;const m=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||m){if(f.currentUser&&m&&f.currentUser.uid===m.uid)return f._currentUser._assign(m),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(m,!0)}})()}initializeCurrentUser(f){var m=this;return(0,p.Z)(function*(){var E;const A=yield m.assertedPersistence.getCurrentUser();let N=A,q=!1;if(f&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const ce=null===(E=m.redirectUser)||void 0===E?void 0:E._redirectEventId,He=N?._redirectEventId,Xe=yield m.tryRedirectSignIn(f);(!ce||ce===He)&&Xe?.user&&(N=Xe.user,q=!0)}if(!N)return m.directlySetCurrentUser(null);if(!N._redirectEventId){if(q)try{yield m.beforeStateQueue.runMiddleware(N)}catch(ce){N=A,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(ce))}return N?m.reloadAndSetCurrentUserOrClear(N):m.directlySetCurrentUser(null)}return j(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===N._redirectEventId?m.directlySetCurrentUser(N):m.reloadAndSetCurrentUserOrClear(N)})()}tryRedirectSignIn(f){var m=this;return(0,p.Z)(function*(){let E=null;try{E=yield m._popupRedirectResolver._completeRedirectFn(m,f,!0)}catch{yield m._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(f){var m=this;return(0,p.Z)(function*(){try{yield fn(f)}catch(E){if("auth/network-request-failed"!==E?.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function je(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,p.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var m=this;return(0,p.Z)(function*(){const E=f?(0,O.m9)(f):null;return E&&j(E.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(E&&E._clone(m))})()}_updateCurrentUser(f,m=!1){var E=this;return(0,p.Z)(function*(){if(!E._deleted)return f&&j(E.tenantId===f.tenantId,E,"tenant-id-mismatch"),m||(yield E.beforeStateQueue.runMiddleware(f)),E.queue((0,p.Z)(function*(){yield E.directlySetCurrentUser(f),E.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,p.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var m=this;return this.queue((0,p.Z)(function*(){yield m.assertedPersistence.setPersistence(gt(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new O.LL("auth","Firebase",f())}onAuthStateChanged(f,m,E){return this.registerStateListener(this.authStateSubscription,f,m,E)}beforeAuthStateChanged(f,m){return this.beforeStateQueue.pushCallback(f,m)}onIdTokenChanged(f,m,E){return this.registerStateListener(this.idTokenSubscription,f,m,E)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,m){var E=this;return(0,p.Z)(function*(){const A=yield E.getOrInitRedirectPersistenceManager(m);return null===f?A.removeCurrentUser():A.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var m=this;return(0,p.Z)(function*(){if(!m.redirectPersistenceManager){const E=f&&gt(f)||m._popupRedirectResolver;j(E,m,"argument-error"),m.redirectPersistenceManager=yield ge.create(m,[gt(E._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(f){var m=this;return(0,p.Z)(function*(){var E,A;return m._isInitialized&&(yield m.queue((0,p.Z)(function*(){}))),(null===(E=m._currentUser)||void 0===E?void 0:E._redirectEventId)===f?m._currentUser:(null===(A=m.redirectUser)||void 0===A?void 0:A._redirectEventId)===f?m.redirectUser:null})()}_persistUserIfCurrent(f){var m=this;return(0,p.Z)(function*(){if(f===m.currentUser)return m.queue((0,p.Z)(function*(){return m.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(m=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,m,E,A){if(this._deleted)return()=>{};const N="function"==typeof m?m:m.next.bind(m),q=this._isInitialized?Promise.resolve():this._initializationPromise;return j(q,this,"internal-error"),q.then(()=>N(this.currentUser)),"function"==typeof m?f.addObserver(m,E,A):f.addObserver(m)}directlySetCurrentUser(f){var m=this;return(0,p.Z)(function*(){m.currentUser&&m.currentUser!==f&&m._currentUser._stopProactiveRefresh(),f&&m.isProactiveRefreshEnabled&&f._startProactiveRefresh(),m.currentUser=f,f?yield m.assertedPersistence.setCurrentUser(f):yield m.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return j(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=bu(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,p.Z)(function*(){var m;const E={"X-Client-Version":f.clientVersion};f.app.options.appId&&(E["X-Firebase-gmpid"]=f.app.options.appId);const A=yield null===(m=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return A&&(E["X-Firebase-Client"]=A),E})()}}function kn(y){return(0,O.m9)(y)}class Wd{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,O.ne)(m=>this.observer=m)}get next(){return j(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Sa(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function en(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class Bn{constructor(f,m){this.providerId=f,this.signInMethod=m}toJSON(){return Ee("not implemented")}_getIdTokenResponse(f){return Ee("not implemented")}_linkToIdToken(f,m){return Ee("not implemented")}_getReauthenticationResolver(f){return Ee("not implemented")}}function Yn(y,f){return Or.apply(this,arguments)}function Or(){return(Or=(0,p.Z)(function*(y,f){return Ot(y,"POST","/v1/accounts:resetPassword",et(y,f))})).apply(this,arguments)}function vi(y,f){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,p.Z)(function*(y,f){return Ot(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Lt(y,f){return In.apply(this,arguments)}function In(){return(In=(0,p.Z)(function*(y,f){return Ot(y,"POST","/v1/accounts:update",et(y,f))})).apply(this,arguments)}function cs(){return(cs=(0,p.Z)(function*(y,f){return Sn(y,"POST","/v1/accounts:signInWithPassword",et(y,f))})).apply(this,arguments)}function Qn(y,f){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,p.Z)(function*(y,f){return Ot(y,"POST","/v1/accounts:sendOobCode",et(y,f))})).apply(this,arguments)}function Pn(y,f){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,p.Z)(function*(y,f){return Qn(y,f)})).apply(this,arguments)}function Fo(y,f){return jt.apply(this,arguments)}function jt(){return(jt=(0,p.Z)(function*(y,f){return Qn(y,f)})).apply(this,arguments)}function ac(y,f){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,p.Z)(function*(y,f){return Qn(y,f)})).apply(this,arguments)}function uc(y,f){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,p.Z)(function*(y,f){return Qn(y,f)})).apply(this,arguments)}function Lo(){return(Lo=(0,p.Z)(function*(y,f){return Sn(y,"POST","/v1/accounts:signInWithEmailLink",et(y,f))})).apply(this,arguments)}function Li(){return(Li=(0,p.Z)(function*(y,f){return Sn(y,"POST","/v1/accounts:signInWithEmailLink",et(y,f))})).apply(this,arguments)}class Us extends Bn{constructor(f,m,E,A=null){super("password",E),this._email=f,this._password=m,this._tenantId=A}static _fromEmailAndPassword(f,m){return new Us(f,m,"password")}static _fromEmailAndCode(f,m,E=null){return new Us(f,m,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(f){var m=this;return(0,p.Z)(function*(){switch(m.signInMethod){case"password":return function Hr(y,f){return cs.apply(this,arguments)}(f,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function Fr(y,f){return Lo.apply(this,arguments)}(f,{email:m._email,oobCode:m._password});default:De(f,"internal-error")}})()}_linkToIdToken(f,m){var E=this;return(0,p.Z)(function*(){switch(E.signInMethod){case"password":return vi(f,{idToken:m,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function to(y,f){return Li.apply(this,arguments)}(f,{idToken:m,email:E._email,oobCode:E._password});default:De(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function ds(y,f){return gn.apply(this,arguments)}function gn(){return(gn=(0,p.Z)(function*(y,f){return Sn(y,"POST","/v1/accounts:signInWithIdp",et(y,f))})).apply(this,arguments)}class wi extends Bn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const m=new wi(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(m.idToken=f.idToken),f.accessToken&&(m.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(m.nonce=f.nonce),f.pendingToken&&(m.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(m.accessToken=f.oauthToken,m.secret=f.oauthTokenSecret):De("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:A}=m,N=(0,ie._T)(m,["providerId","signInMethod"]);if(!E||!A)return null;const q=new wi(E,A);return q.idToken=N.idToken||void 0,q.accessToken=N.accessToken||void 0,q.secret=N.secret,q.nonce=N.nonce,q.pendingToken=N.pendingToken||null,q}_getIdTokenResponse(f){return ds(f,this.buildRequest())}_linkToIdToken(f,m){const E=this.buildRequest();return E.idToken=m,ds(f,E)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,ds(f,m)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),f.postBody=(0,O.xO)(m)}return f}}function zd(y,f){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,p.Z)(function*(y,f){return Ot(y,"POST","/v1/accounts:sendVerificationCode",et(y,f))})).apply(this,arguments)}function Gr(){return(Gr=(0,p.Z)(function*(y,f){return Sn(y,"POST","/v1/accounts:signInWithPhoneNumber",et(y,f))})).apply(this,arguments)}function qd(){return(qd=(0,p.Z)(function*(y,f){const m=yield Sn(y,"POST","/v1/accounts:signInWithPhoneNumber",et(y,f));if(m.temporaryProof)throw $r(y,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const ri={USER_NOT_FOUND:"user-not-found"};function xa(){return(xa=(0,p.Z)(function*(y,f){return Sn(y,"POST","/v1/accounts:signInWithPhoneNumber",et(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),ri)})).apply(this,arguments)}class Ui extends Bn{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,m){return new Ui({verificationId:f,verificationCode:m})}static _fromTokenResponse(f,m){return new Ui({phoneNumber:f,temporaryProof:m})}_getIdTokenResponse(f){return function no(y,f){return Gr.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,m){return function Lr(y,f){return qd.apply(this,arguments)}(f,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Vi(y,f){return xa.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:m,verificationId:E,verificationCode:A}=this.params;return f&&m?{temporaryProof:f,phoneNumber:m}:{sessionInfo:E,code:A}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:m,verificationCode:E,phoneNumber:A,temporaryProof:N}=f;return E||m||A||N?new Ui({verificationId:m,verificationCode:E,phoneNumber:A,temporaryProof:N}):null}}class Ra{constructor(f){var m,E,A,N,q,ce;const He=(0,O.zd)((0,O.pd)(f)),Xe=null!==(m=He.apiKey)&&void 0!==m?m:null,St=null!==(E=He.oobCode)&&void 0!==E?E:null,vt=function lc(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=He.mode)&&void 0!==A?A:null);j(Xe&&St&&vt,"argument-error"),this.apiKey=Xe,this.operation=vt,this.code=St,this.continueUrl=null!==(N=He.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(q=He.languageCode)&&void 0!==q?q:null,this.tenantId=null!==(ce=He.tenantId)&&void 0!==ce?ce:null}static parseLink(f){const m=function ii(y){const f=(0,O.zd)((0,O.pd)(y)).link,m=f?(0,O.zd)((0,O.pd)(f)).deep_link_id:null,E=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(E?(0,O.zd)((0,O.pd)(E)).link:null)||E||m||f||y}(f);try{return new Ra(m)}catch{return null}}}let cc=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(m,E){return Us._fromEmailAndPassword(m,E)}static credentialWithLink(m,E){const A=Ra.parseLink(E);return j(A,"argument-error"),Us._fromEmailAndCode(m,A.code,A.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class hs{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class Uo extends hs{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Ma extends Uo{static credentialFromJSON(f){const m="string"==typeof f?JSON.parse(f):f;return j("providerId"in m&&"signInMethod"in m,"argument-error"),wi._fromParams(m)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return j(f.idToken||f.accessToken,"argument-error"),wi._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Ma.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Ma.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:m,oauthAccessToken:E,oauthTokenSecret:A,pendingToken:N,nonce:q,providerId:ce}=f;if(!E&&!A&&!m&&!N||!ce)return null;try{return new Ma(ce)._credential({idToken:m,accessToken:E,nonce:q,pendingToken:N})}catch{return null}}}let dc=(()=>{class y extends Uo{constructor(){super("facebook.com")}static credential(m){return wi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return y.credential(m.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),ep=(()=>{class y extends Uo{constructor(){super("google.com"),this.addScope("profile")}static credential(m,E){return wi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:E})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:E,oauthAccessToken:A}=m;if(!E&&!A)return null;try{return y.credential(E,A)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),tp=(()=>{class y extends Uo{constructor(){super("github.com")}static credential(m){return wi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return y.credential(m.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Bo extends Bn{constructor(f,m){super(f,f),this.pendingToken=m}_getIdTokenResponse(f){return ds(f,this.buildRequest())}_linkToIdToken(f,m){const E=this.buildRequest();return E.idToken=m,ds(f,E)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,ds(f,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:A,pendingToken:N}=m;return E&&A&&N&&E===A?new Bo(E,N):null}static _create(f,m){return new Bo(f,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ji extends hs{constructor(f){j(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Ji.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Ji.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const m=Bo.fromJSON(f);return j(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:m,providerId:E}=f;if(!m||!E)return null;try{return Bo._create(E,m)}catch{return null}}}let gm=(()=>{class y extends Uo{constructor(){super("twitter.com")}static credential(m,E){return wi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:E})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:E,oauthTokenSecret:A}=m;if(!E||!A)return null;try{return y.credential(E,A)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function hc(y,f){return fc.apply(this,arguments)}function fc(){return(fc=(0,p.Z)(function*(y,f){return Sn(y,"POST","/v1/accounts:signUp",et(y,f))})).apply(this,arguments)}class Wr{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,m,E,A=!1){return(0,p.Z)(function*(){const N=yield Ut._fromIdTokenResponse(f,E,A),q=pc(E);return new Wr({user:N,providerId:q,_tokenResponse:E,operationType:m})})()}static _forOperation(f,m,E){return(0,p.Z)(function*(){yield f._updateTokensIfNecessary(E,!0);const A=pc(E);return new Wr({user:f,providerId:A,_tokenResponse:E,operationType:m})})()}}function pc(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function np(){return(np=(0,p.Z)(function*(y){var f;const m=kn(y);if(yield m._initializationPromise,null!==(f=m.currentUser)&&void 0!==f&&f.isAnonymous)return new Wr({user:m.currentUser,providerId:null,operationType:"signIn"});const E=yield hc(m,{returnSecureToken:!0}),A=yield Wr._fromIdTokenResponse(m,"signIn",E,!0);return yield m._updateCurrentUser(A.user),A})).apply(this,arguments)}class Du extends O.ZR{constructor(f,m,E,A){var N;super(m.code,m.message),this.operationType=E,this.user=A,Object.setPrototypeOf(this,Du.prototype),this.customData={appName:f.name,tenantId:null!==(N=f.tenantId)&&void 0!==N?N:void 0,_serverResponse:m.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(f,m,E,A){return new Du(f,m,E,A)}}function io(y,f,m,E){return("reauthenticate"===f?m._getReauthenticationResolver(y):m._getIdTokenResponse(y)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?Du._fromErrorAndOperation(y,N,f,E):N})}function so(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function jo(){return(jo=(0,p.Z)(function*(y,f){const m=(0,O.m9)(y);yield oo(!0,m,f);const{providerUserInfo:E}=yield ni(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[f]}),A=so(E||[]);return m.providerData=m.providerData.filter(N=>A.has(N.providerId)),A.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function Su(y,f){return $o.apply(this,arguments)}function $o(){return($o=(0,p.Z)(function*(y,f,m=!1){const E=yield Mn(y,f._linkToIdToken(y.auth,yield y.getIdToken()),m);return Wr._forOperation(y,"link",E)})).apply(this,arguments)}function oo(y,f,m){return Na.apply(this,arguments)}function Na(){return(Na=(0,p.Z)(function*(y,f,m){yield fn(f);const A=!1===y?"provider-already-linked":"no-such-provider";j(so(f.providerData).has(m)===y,f.auth,A)})).apply(this,arguments)}function Zd(y,f){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,p.Z)(function*(y,f,m=!1){const{auth:E}=y,A="reauthenticate";try{const N=yield Mn(y,io(E,A,f,y),m);j(N.idToken,E,"internal-error");const q=Tt(N.idToken);j(q,E,"internal-error");const{sub:ce}=q;return j(y.uid===ce,E,"user-mismatch"),Wr._forOperation(y,A,N)}catch(N){throw"auth/user-not-found"===N?.code&&De(E,"user-mismatch"),N}})).apply(this,arguments)}function Go(y,f){return si.apply(this,arguments)}function si(){return(si=(0,p.Z)(function*(y,f,m=!1){const E="signIn",A=yield io(y,E,f),N=yield Wr._fromIdTokenResponse(y,E,A);return m||(yield y._updateCurrentUser(N.user)),N})).apply(this,arguments)}function Ln(y,f){return Au.apply(this,arguments)}function Au(){return(Au=(0,p.Z)(function*(y,f){return Go(kn(y),f)})).apply(this,arguments)}function jn(y,f){return xu.apply(this,arguments)}function xu(){return(xu=(0,p.Z)(function*(y,f){const m=(0,O.m9)(y);return yield oo(!1,m,f.providerId),Su(m,f)})).apply(this,arguments)}function ao(y,f){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,p.Z)(function*(y,f){return Zd((0,O.m9)(y),f)})).apply(this,arguments)}function gc(y,f){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,p.Z)(function*(y,f){return Sn(y,"POST","/v1/accounts:signInWithCustomToken",et(y,f))})).apply(this,arguments)}function yr(){return(yr=(0,p.Z)(function*(y,f){const m=kn(y),E=yield gc(m,{token:f,returnSecureToken:!0}),A=yield Wr._fromIdTokenResponse(m,"signIn",E);return yield m._updateCurrentUser(A.user),A})).apply(this,arguments)}class ka{constructor(f,m){this.factorId=f,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(f,m){return"phoneInfo"in m?zo._fromServerResponse(f,m):De(f,"internal-error")}}class zo extends ka{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,m){return new zo(m)}}function Ru(y,f,m){var E;j((null===(E=m.url)||void 0===E?void 0:E.length)>0,y,"invalid-continue-uri"),j(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=m.url,f.dynamicLinkDomain=m.dynamicLinkDomain,f.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(j(m.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=m.iOS.bundleId),m.android&&(j(m.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=m.android.installApp,f.androidMinimumVersionCode=m.android.minimumVersion,f.androidPackageName=m.android.packageName)}function Pa(){return(Pa=(0,p.Z)(function*(y,f,m){const E=(0,O.m9)(y),A={requestType:"PASSWORD_RESET",email:f};m&&Ru(E,A,m),yield Fo(E,A)})).apply(this,arguments)}function kt(){return(kt=(0,p.Z)(function*(y,f,m){yield Yn((0,O.m9)(y),{oobCode:f,newPassword:m})})).apply(this,arguments)}function Yd(){return(Yd=(0,p.Z)(function*(y,f){yield Lt((0,O.m9)(y),{oobCode:f})})).apply(this,arguments)}function Nu(y,f){return mc.apply(this,arguments)}function mc(){return(mc=(0,p.Z)(function*(y,f){const m=(0,O.m9)(y),E=yield Yn(m,{oobCode:f}),A=E.requestType;switch(j(A,m,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":j(E.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":j(E.mfaInfo,m,"internal-error");default:j(E.email,m,"internal-error")}let N=null;return E.mfaInfo&&(N=ka._fromServerResponse(kn(m),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:N},operation:A}})).apply(this,arguments)}function ku(){return(ku=(0,p.Z)(function*(y,f){const{data:m}=yield Nu((0,O.m9)(y),f);return m.email})).apply(this,arguments)}function yc(){return(yc=(0,p.Z)(function*(y,f,m){const E=kn(y),A=yield hc(E,{returnSecureToken:!0,email:f,password:m}),N=yield Wr._fromIdTokenResponse(E,"signIn",A);return yield E._updateCurrentUser(N.user),N})).apply(this,arguments)}function vc(){return(vc=(0,p.Z)(function*(y,f,m){const E=(0,O.m9)(y),A={requestType:"EMAIL_SIGNIN",email:f};j(m.handleCodeInApp,E,"argument-error"),m&&Ru(E,A,m),yield ac(E,A)})).apply(this,arguments)}function Fa(){return(Fa=(0,p.Z)(function*(y,f,m){const E=(0,O.m9)(y),A=cc.credentialWithLink(f,m||de());return j(A._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Ln(E,A)})).apply(this,arguments)}function Pu(y,f){return oi.apply(this,arguments)}function oi(){return(oi=(0,p.Z)(function*(y,f){return Ot(y,"POST","/v1/accounts:createAuthUri",et(y,f))})).apply(this,arguments)}function Fu(){return(Fu=(0,p.Z)(function*(y,f){const E={identifier:f,continueUri:we()?de():"http://localhost"},{signinMethods:A}=yield Pu((0,O.m9)(y),E);return A||[]})).apply(this,arguments)}function wc(){return(wc=(0,p.Z)(function*(y,f){const m=(0,O.m9)(y),A={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&Ru(m.auth,A,f);const{email:N}=yield Pn(m.auth,A);N!==y.email&&(yield y.reload())})).apply(this,arguments)}function ur(){return(ur=(0,p.Z)(function*(y,f,m){const E=(0,O.m9)(y),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};m&&Ru(E.auth,N,m);const{email:q}=yield uc(E.auth,N);q!==y.email&&(yield y.reload())})).apply(this,arguments)}function ai(y,f){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,p.Z)(function*(y,f){return Ot(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function es(){return(es=(0,p.Z)(function*(y,{displayName:f,photoURL:m}){if(void 0===f&&void 0===m)return;const E=(0,O.m9)(y),N={idToken:yield E.getIdToken(),displayName:f,photoUrl:m,returnSecureToken:!0},q=yield Mn(E,ai(E.auth,N));E.displayName=q.displayName||null,E.photoURL=q.photoUrl||null;const ce=E.providerData.find(({providerId:He})=>"password"===He);ce&&(ce.displayName=E.displayName,ce.photoURL=E.photoURL),yield E._updateTokensIfNecessary(q)})).apply(this,arguments)}function eh(y,f,m){return Ec.apply(this,arguments)}function Ec(){return(Ec=(0,p.Z)(function*(y,f,m){const{auth:E}=y,N={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(N.email=f),m&&(N.password=m);const q=yield Mn(y,vi(E,N));yield y._updateTokensIfNecessary(q,!0)})).apply(this,arguments)}class ps{constructor(f,m,E={}){this.isNewUser=f,this.providerId=m,this.profile=E}}class th extends ps{constructor(f,m,E,A){super(f,m,E),this.username=A}}class Cc extends ps{constructor(f,m){super(f,"facebook.com",m)}}class nh extends th{constructor(f,m){super(f,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class ip extends ps{constructor(f,m){super(f,"google.com",m)}}class Vu extends th{constructor(f,m,E){super(f,"twitter.com",m,E)}}function sp(y){const{user:f,_tokenResponse:m}=y;return f.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function Ic(y){var f,m;if(!y)return null;const{providerId:E}=y,A=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},N=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!E&&y?.idToken){const q=null===(m=null===(f=Tt(y.idToken))||void 0===f?void 0:f.firebase)||void 0===m?void 0:m.sign_in_provider;if(q)return new ps(N,"anonymous"!==q&&"custom"!==q?q:null)}if(!E)return null;switch(E){case"facebook.com":return new Cc(N,A);case"github.com":return new nh(N,A);case"google.com":return new ip(N,A);case"twitter.com":return new Vu(N,A,y.screenName||null);case"custom":case"anonymous":return new ps(N,null);default:return new ps(N,E,A)}}(m)}class Ko{constructor(f,m,E){this.type=f,this.credential=m,this.auth=E}static _fromIdtoken(f,m){return new Ko("enroll",f,m)}static _fromMfaPendingCredential(f){return new Ko("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var m,E;if(f?.multiFactorSession){if(null!==(m=f.multiFactorSession)&&void 0!==m&&m.pendingCredential)return Ko._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(E=f.multiFactorSession)&&void 0!==E&&E.idToken)return Ko._fromIdtoken(f.multiFactorSession.idToken)}return null}}class Dc{constructor(f,m,E){this.session=f,this.hints=m,this.signInResolver=E}static _fromError(f,m){const E=kn(f),A=m.customData._serverResponse,N=(A.mfaInfo||[]).map(ce=>ka._fromServerResponse(E,ce));j(A.mfaPendingCredential,E,"internal-error");const q=Ko._fromMfaPendingCredential(A.mfaPendingCredential);return new Dc(q,N,function(){var ce=(0,p.Z)(function*(He){const Xe=yield He._process(E,q);delete A.mfaInfo,delete A.mfaPendingCredential;const St=Object.assign(Object.assign({},A),{idToken:Xe.idToken,refreshToken:Xe.refreshToken});switch(m.operationType){case"signIn":const vt=yield Wr._fromIdTokenResponse(E,m.operationType,St);return yield E._updateCurrentUser(vt.user),vt;case"reauthenticate":return j(m.user,E,"internal-error"),Wr._forOperation(m.user,m.operationType,St);default:De(E,"internal-error")}});return function(He){return ce.apply(this,arguments)}}())}resolveSignIn(f){var m=this;return(0,p.Z)(function*(){return m.signInResolver(f)})()}}function op(y,f){return Ot(y,"POST","/v2/accounts/mfaEnrollment:start",et(y,f))}class Va{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(E=>ka._fromServerResponse(f.auth,E)))})}static _fromUser(f){return new Va(f)}getSession(){var f=this;return(0,p.Z)(function*(){return Ko._fromIdtoken(yield f.user.getIdToken(),f.user.auth)})()}enroll(f,m){var E=this;return(0,p.Z)(function*(){const A=f,N=yield E.getSession(),q=yield Mn(E.user,A._process(E.user.auth,N,m));return yield E.user._updateTokensIfNecessary(q),E.user.reload()})()}unenroll(f){var m=this;return(0,p.Z)(function*(){const E="string"==typeof f?f:f.uid,A=yield m.user.getIdToken(),N=yield Mn(m.user,function vm(y,f){return Ot(y,"POST","/v2/accounts/mfaEnrollment:withdraw",et(y,f))}(m.user.auth,{idToken:A,mfaEnrollmentId:E}));m.enrolledFactors=m.enrolledFactors.filter(({uid:q})=>q!==E),yield m.user._updateTokensIfNecessary(N);try{yield m.user.reload()}catch(q){if("auth/user-token-expired"!==q?.code)throw q}})()}}const js=new WeakMap,Ei="__sak";class Tc{constructor(f,m){this.storageRetriever=f,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Ei,"1"),this.storage.removeItem(Ei),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,m){return this.storage.setItem(f,JSON.stringify(m)),Promise.resolve()}_get(f){const m=this.storage.getItem(f);return Promise.resolve(m?JSON.parse(m):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Sc=(()=>{class y extends Tc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,E)=>this.onStorageEvent(m,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Uu(){const y=(0,O.z$)();return Bt(y)||or(y)}()&&function Ta(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Xf(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const E of Object.keys(this.listeners)){const A=this.storage.getItem(E),N=this.localCache[E];A!==N&&m(E,N,A)}}onStorageEvent(m,E=!1){if(!m.key)return void this.forAllChangedKeys((ce,He,Xe)=>{this.notifyListeners(ce,Xe)});const A=m.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ce=this.storage.getItem(A);if(m.newValue!==ce)null!==m.newValue?this.storage.setItem(A,m.newValue):this.storage.removeItem(A);else if(this.localCache[A]===m.newValue&&!E)return}const N=()=>{const ce=this.storage.getItem(A);!E&&this.localCache[A]===ce||this.notifyListeners(A,ce)},q=this.storage.getItem(A);!function Da(){return(0,O.w1)()&&10===document.documentMode}()||q===m.newValue||m.newValue===m.oldValue?N():setTimeout(N,10)}notifyListeners(m,E){this.localCache[m]=E;const A=this.listeners[m];if(A)for(const N of Array.from(A))N(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,E,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:E,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,E){var A=()=>super._set,N=this;return(0,p.Z)(function*(){yield A().call(N,m,E),N.localCache[m]=JSON.stringify(E)})()}_get(m){var E=()=>super._get,A=this;return(0,p.Z)(function*(){const N=yield E().call(A,m);return A.localCache[m]=JSON.stringify(N),N})()}_remove(m){var E=()=>super._remove,A=this;return(0,p.Z)(function*(){yield E().call(A,m),delete A.localCache[m]})()}}return y.type="LOCAL",y})(),co=(()=>{class y extends Tc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,E){}_removeListener(m,E){}}return y.type="SESSION",y})();let Bu=(()=>{class y{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const E=this.receivers.find(N=>N.isListeningto(m));if(E)return E;const A=new y(m);return this.receivers.push(A),A}isListeningto(m){return this.eventTarget===m}handleEvent(m){var E=this;return(0,p.Z)(function*(){const A=m,{eventId:N,eventType:q,data:ce}=A.data,He=E.handlersMap[q];if(!He?.size)return;A.ports[0].postMessage({status:"ack",eventId:N,eventType:q});const Xe=Array.from(He).map(function(){var vt=(0,p.Z)(function*(Gn){return Gn(A.origin,ce)});return function(Gn){return vt.apply(this,arguments)}}()),St=yield function Ua(y){return Promise.all(y.map(function(){var f=(0,p.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(E){return{fulfilled:!1,reason:E}}});return function(m){return f.apply(this,arguments)}}()))}(Xe);A.ports[0].postMessage({status:"done",eventId:N,eventType:q,response:St})})()}_subscribe(m,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(E)}_unsubscribe(m,E){this.handlersMap[m]&&E&&this.handlersMap[m].delete(E),(!E||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Ba(y="",f=10){let m="";for(let E=0;E<f;E++)m+=Math.floor(10*Math.random());return y+m}class Ac{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,m,E=50){var A=this;return(0,p.Z)(function*(){const N=typeof MessageChannel<"u"?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let q,ce;return new Promise((He,Xe)=>{const St=Ba("",20);N.port1.start();const vt=setTimeout(()=>{Xe(new Error("unsupported_event"))},E);ce={messageChannel:N,onMessage(Gn){const ns=Gn;if(ns.data.eventId===St)switch(ns.data.status){case"ack":clearTimeout(vt),q=setTimeout(()=>{Xe(new Error("timeout"))},3e3);break;case"done":clearTimeout(q),He(ns.data.response);break;default:clearTimeout(vt),clearTimeout(q),Xe(new Error("invalid_response"))}}},A.handlers.add(ce),N.port1.addEventListener("message",ce.onMessage),A.target.postMessage({eventType:f,eventId:St,data:m},[N.port2])}).finally(()=>{ce&&A.removeMessageHandler(ce)})})()}}function wn(){return window}function ho(){return typeof wn().WorkerGlobalScope<"u"&&"function"==typeof wn().importScripts}function $a(){return($a=(0,p.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const $u="firebaseLocalStorageDb",$s="firebaseLocalStorage",fo="fbase_key";class po{constructor(f){this.request=f}toPromise(){return new Promise((f,m)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function go(y,f){return y.transaction([$s],f?"readwrite":"readonly").objectStore($s)}function Rc(){const y=indexedDB.open($u,1);return new Promise((f,m)=>{y.addEventListener("error",()=>{m(y.error)}),y.addEventListener("upgradeneeded",()=>{const E=y.result;try{E.createObjectStore($s,{keyPath:fo})}catch(A){m(A)}}),y.addEventListener("success",(0,p.Z)(function*(){const E=y.result;E.objectStoreNames.contains($s)?f(E):(E.close(),yield function Xo(){const y=indexedDB.deleteDatabase($u);return new po(y).toPromise()}(),f(yield Rc()))}))})}function qr(y,f,m){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,p.Z)(function*(y,f,m){const E=go(y,!0).put({[fo]:f,value:m});return new po(E).toPromise()})).apply(this,arguments)}function mo(){return(mo=(0,p.Z)(function*(y,f){const m=go(y,!1).get(f),E=yield new po(m).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Wu(y,f){const m=go(y,!0).delete(f);return new po(m).toPromise()}const _o=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,p.Z)(function*(){return m.db||(m.db=yield Rc()),m.db})()}_withRetries(m){var E=this;return(0,p.Z)(function*(){let A=0;for(;;)try{const N=yield E._openDb();return yield m(N)}catch(N){if(A++>3)throw N;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,p.Z)(function*(){return ho()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,p.Z)(function*(){m.receiver=Bu._getInstance(function ju(){return ho()?self:null}()),m.receiver._subscribe("keyChanged",function(){var E=(0,p.Z)(function*(A,N){return{keyProcessed:(yield m._poll()).includes(N.key)}});return function(A,N){return E.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var E=(0,p.Z)(function*(A,N){return["keyChanged"]});return function(A,N){return E.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,p.Z)(function*(){var E,A;if(m.activeServiceWorker=yield function gs(){return $a.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new Ac(m.activeServiceWorker);const N=yield m.sender._send("ping",{},800);N&&null!==(E=N[0])&&void 0!==E&&E.fulfilled&&null!==(A=N[0])&&void 0!==A&&A.value.includes("keyChanged")&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var E=this;return(0,p.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function xc(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:m},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Rc();return yield qr(m,Ei,"1"),yield Wu(m,Ei),!0}catch{}return!1})()}_withPendingWrite(m){var E=this;return(0,p.Z)(function*(){E.pendingWrites++;try{yield m()}finally{E.pendingWrites--}})()}_set(m,E){var A=this;return(0,p.Z)(function*(){return A._withPendingWrite((0,p.Z)(function*(){return yield A._withRetries(N=>qr(N,m,E)),A.localCache[m]=E,A.notifyServiceWorker(m)}))})()}_get(m){var E=this;return(0,p.Z)(function*(){const A=yield E._withRetries(N=>function Jo(y,f){return mo.apply(this,arguments)}(N,m));return E.localCache[m]=A,A})()}_remove(m){var E=this;return(0,p.Z)(function*(){return E._withPendingWrite((0,p.Z)(function*(){return yield E._withRetries(A=>Wu(A,m)),delete E.localCache[m],E.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,p.Z)(function*(){const E=yield m._withRetries(q=>{const ce=go(q,!1).getAll();return new po(ce).toPromise()});if(!E)return[];if(0!==m.pendingWrites)return[];const A=[],N=new Set;for(const{fbase_key:q,value:ce}of E)N.add(q),JSON.stringify(m.localCache[q])!==JSON.stringify(ce)&&(m.notifyListeners(q,ce),A.push(q));for(const q of Object.keys(m.localCache))m.localCache[q]&&!N.has(q)&&(m.notifyListeners(q,null),A.push(q));return A})()}notifyListeners(m,E){this.localCache[m]=E;const A=this.listeners[m];if(A)for(const N of Array.from(A))N(E)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function ea(y,f){return Ot(y,"POST","/v2/accounts/mfaSignIn:start",et(y,f))}function Ga(){return(Ga=(0,p.Z)(function*(y){return(yield Ot(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Bi(y){return new Promise((f,m)=>{const E=document.createElement("script");E.setAttribute("src",y),E.onload=f,E.onerror=A=>{const N=Ie("internal-error");N.customData=A,m(N)},E.type="text/javascript",E.charset="UTF-8",function zu(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(E)})}function Nc(y){return`__${y}${Math.floor(1e6*Math.random())}`}const $i=1e12;class up{constructor(f){this.auth=f,this.counter=$i,this._widgets=new Map}render(f,m){const E=this.counter;return this._widgets.set(E,new Pc(f,this.auth.name,m||{})),this.counter++,E}reset(f){var m;const E=f||$i;null===(m=this._widgets.get(E))||void 0===m||m.delete(),this._widgets.delete(E)}getResponse(f){var m;return(null===(m=this._widgets.get(f||$i))||void 0===m?void 0:m.getResponse())||""}execute(f){var m=this;return(0,p.Z)(function*(){var E;return null===(E=m._widgets.get(f||$i))||void 0===E||E.execute(),""})()}}class Pc{constructor(f,m,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof f?document.getElementById(f):f;j(A,"argument-error",{appName:m}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function qu(y){const f=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<y;E++)f.push(m.charAt(Math.floor(Math.random()*m.length)));return f.join("")}(50);const{callback:f,"expired-callback":m}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const oh=Nc("rcb"),lp=new Ye(3e4,6e4);class yo{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=wn().grecaptcha)||void 0===f||!f.render)}load(f,m=""){return j(function Wa(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(m),f,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(wn().grecaptcha):new Promise((E,A)=>{const N=wn().setTimeout(()=>{A(Ie(f,"network-request-failed"))},lp.get());wn()[oh]=()=>{wn().clearTimeout(N),delete wn()[oh];const ce=wn().grecaptcha;if(!ce)return void A(Ie(f,"internal-error"));const He=ce.render;ce.render=(Xe,St)=>{const vt=He(Xe,St);return this.counter++,vt},this.hostLanguage=m,E(ce)},Bi(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:oh,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(N),A(Ie(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var m;return!(null===(m=wn().grecaptcha)||void 0===m||!m.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ta{load(f){return(0,p.Z)(function*(){return new up(f)})()}clearedOneInstance(){}}const ah="recaptcha",uh={theme:"light",type:"image"};class Ku{constructor(f,m=Object.assign({},uh),E){this.parameters=m,this.type=ah,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=kn(E),this.isInvisible="invisible"===this.parameters.size,j(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof f?document.getElementById(f):f;j(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ta:new yo,this.validateStartingState()}verify(){var f=this;return(0,p.Z)(function*(){f.assertNotDestroyed();const m=yield f.render(),E=f.getAssertedRecaptcha();return E.getResponse(m)||new Promise(N=>{const q=ce=>{ce&&(f.tokenChangeListeners.delete(q),N(ce))};f.tokenChangeListeners.add(q),f.isInvisible&&E.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){j(!this.parameters.sitekey,this.auth,"argument-error"),j(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),j(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return m=>{if(this.tokenChangeListeners.forEach(E=>E(m)),"function"==typeof f)f(m);else if("string"==typeof f){const E=wn()[f];"function"==typeof E&&E(m)}}}assertNotDestroyed(){j(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,p.Z)(function*(){if(yield f.init(),!f.widgetId){let m=f.container;if(!f.isInvisible){const E=document.createElement("div");m.appendChild(E),m=E}f.widgetId=f.getAssertedRecaptcha().render(m,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,p.Z)(function*(){j(we()&&!ho(),f.auth,"internal-error"),yield function Ky(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const m=yield function ms(y){return Ga.apply(this,arguments)}(f.auth);j(m,f.auth,"internal-error"),f.parameters.sitekey=m})()}getAssertedRecaptcha(){return j(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Fc{constructor(f,m){this.verificationId=f,this.onConfirmation=m}confirm(f){const m=Ui._fromVerification(this.verificationId,f);return this.onConfirmation(m)}}function Lc(){return(Lc=(0,p.Z)(function*(y,f,m){const E=kn(y),A=yield lh(E,f,(0,O.m9)(m));return new Fc(A,N=>Ln(E,N))})).apply(this,arguments)}function Zu(){return(Zu=(0,p.Z)(function*(y,f,m){const E=(0,O.m9)(y);yield oo(!1,E,"phone");const A=yield lh(E.auth,f,(0,O.m9)(m));return new Fc(A,N=>jn(E,N))})).apply(this,arguments)}function dp(){return(dp=(0,p.Z)(function*(y,f,m){const E=(0,O.m9)(y),A=yield lh(E.auth,f,(0,O.m9)(m));return new Fc(A,N=>ao(E,N))})).apply(this,arguments)}function lh(y,f,m){return hp.apply(this,arguments)}function hp(){return(hp=(0,p.Z)(function*(y,f,m){var E;const A=yield m.verify();try{let N;if(j("string"==typeof A,y,"argument-error"),j(m.type===ah,y,"argument-error"),N="string"==typeof f?{phoneNumber:f}:f,"session"in N){const q=N.session;if("phoneNumber"in N)return j("enroll"===q.type,y,"internal-error"),(yield op(y,{idToken:q.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{j("signin"===q.type,y,"internal-error");const ce=(null===(E=N.multiFactorHint)||void 0===E?void 0:E.uid)||N.multiFactorUid;return j(ce,y,"missing-multi-factor-info"),(yield ea(y,{mfaPendingCredential:q.credential,mfaEnrollmentId:ce,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:q}=yield zd(y,{phoneNumber:N.phoneNumber,recaptchaToken:A});return q}}finally{m._reset()}})).apply(this,arguments)}function fp(){return(fp=(0,p.Z)(function*(y,f){yield Su((0,O.m9)(y),f)})).apply(this,arguments)}let Vc=(()=>{class y{constructor(m){this.providerId=y.PROVIDER_ID,this.auth=kn(m)}verifyPhoneNumber(m,E){return lh(this.auth,m,(0,O.m9)(E))}static credential(m,E){return Ui._fromVerification(m,E)}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:E,temporaryProof:A}=m;return E&&A?Ui._fromTokenResponse(E,A):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function En(y,f){return f?gt(f):(j(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Qu extends Bn{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return ds(f,this._buildIdpRequest())}_linkToIdToken(f,m){return ds(f,this._buildIdpRequest(m))}_getReauthenticationResolver(f){return ds(f,this._buildIdpRequest())}_buildIdpRequest(f){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(m.idToken=f),m}}function Xu(y){return Go(y.auth,new Qu(y),y.bypassAuthState)}function Uc(y){const{auth:f,user:m}=y;return j(m,f,"internal-error"),Zd(m,new Qu(y),y.bypassAuthState)}function ui(y){return ts.apply(this,arguments)}function ts(){return(ts=(0,p.Z)(function*(y){const{auth:f,user:m}=y;return j(m,f,"internal-error"),Su(m,new Qu(y),y.bypassAuthState)})).apply(this,arguments)}class Ju{constructor(f,m,E,A,N=!1){this.auth=f,this.resolver=E,this.user=A,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var f=this;return new Promise(function(){var m=(0,p.Z)(function*(E,A){f.pendingPromise={resolve:E,reject:A};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(N){f.reject(N)}});return function(E,A){return m.apply(this,arguments)}}())}onAuthEvent(f){var m=this;return(0,p.Z)(function*(){const{urlResponse:E,sessionId:A,postBody:N,tenantId:q,error:ce,type:He}=f;if(ce)return void m.reject(ce);const Xe={auth:m.auth,requestUri:E,sessionId:A,tenantId:q||void 0,postBody:N||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(He)(Xe))}catch(St){m.reject(St)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Xu;case"linkViaPopup":case"linkViaRedirect":return ui;case"reauthViaPopup":case"reauthViaRedirect":return Uc;default:De(this.auth,"internal-error")}}resolve(f){Ue(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){Ue(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const za=new Ye(2e3,1e4);function el(){return(el=(0,p.Z)(function*(y,f,m){const E=kn(y);Fe(y,f,hs);const A=En(E,m);return new nn(E,"signInViaPopup",f,A).executeNotNull()})).apply(this,arguments)}function pp(){return(pp=(0,p.Z)(function*(y,f,m){const E=(0,O.m9)(y);Fe(E.auth,f,hs);const A=En(E.auth,m);return new nn(E.auth,"reauthViaPopup",f,A,E).executeNotNull()})).apply(this,arguments)}function Kr(){return(Kr=(0,p.Z)(function*(y,f,m){const E=(0,O.m9)(y);Fe(E.auth,f,hs);const A=En(E.auth,m);return new nn(E.auth,"linkViaPopup",f,A,E).executeNotNull()})).apply(this,arguments)}let nn=(()=>{class y extends Ju{constructor(m,E,A,N,q){super(m,E,N,q),this.provider=A,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var m=this;return(0,p.Z)(function*(){const E=yield m.execute();return j(E,m.auth,"internal-error"),E})()}onExecution(){var m=this;return(0,p.Z)(function*(){Ue(1===m.filter.length,"Popup operations only handle one event");const E=Ba();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],E),m.authWindow.associatedEvent=E,m.resolver._originValidation(m.auth).catch(A=>{m.reject(A)}),m.resolver._isIframeWebStorageSupported(m.auth,A=>{A||m.reject(Ie(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Ie(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const m=()=>{var E,A;this.pollId=null!==(A=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==A&&A.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ie(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,za.get())};m()}}return y.currentPopupAction=null,y})();const rt=new Map;class _s extends Ju{constructor(f,m,E=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,E),this.eventId=null}execute(){var f=()=>super.execute,m=this;return(0,p.Z)(function*(){let E=rt.get(m.auth._key());if(!E){try{const N=(yield function Hi(y,f){return ys.apply(this,arguments)}(m.resolver,m.auth))?yield f().call(m):null;E=()=>Promise.resolve(N)}catch(A){E=()=>Promise.reject(A)}rt.set(m.auth._key(),E)}return m.bypassAuthState||rt.set(m.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(f){var m=()=>super.onAuthEvent,E=this;return(0,p.Z)(function*(){if("signInViaRedirect"===f.type)return m().call(E,f);if("unknown"!==f.type){if(f.eventId){const A=yield E.auth._redirectUserForId(f.eventId);if(A)return E.user=A,m().call(E,f);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function ys(){return(ys=(0,p.Z)(function*(y,f){const m=Ka(f),E=qa(y);if(!(yield E._isAvailable()))return!1;const A="true"===(yield E._get(m));return yield E._remove(m),A})).apply(this,arguments)}function ra(y,f){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,p.Z)(function*(y,f){return qa(y)._set(Ka(f),"true")})).apply(this,arguments)}function ch(y,f){rt.set(y._key(),f)}function qa(y){return gt(y._redirectPersistence)}function Ka(y){return K("pendingRedirect",y.config.apiKey,y.name)}function D(){return(D=(0,p.Z)(function*(y,f,m){const E=kn(y);Fe(y,f,hs),yield E._initializationPromise;const A=En(E,m);return yield ra(A,E),A._openRedirect(E,f,"signInViaRedirect")})).apply(this,arguments)}function V(){return(V=(0,p.Z)(function*(y,f,m){const E=(0,O.m9)(y);Fe(E.auth,f,hs),yield E.auth._initializationPromise;const A=En(E.auth,m);yield ra(A,E.auth);const N=yield Dt(E);return A._openRedirect(E.auth,f,"reauthViaRedirect",N)})).apply(this,arguments)}function _e(){return(_e=(0,p.Z)(function*(y,f,m){const E=(0,O.m9)(y);Fe(E.auth,f,hs),yield E.auth._initializationPromise;const A=En(E.auth,m);yield oo(!1,E,f.providerId),yield ra(A,E.auth);const N=yield Dt(E);return A._openRedirect(E.auth,f,"linkViaRedirect",N)})).apply(this,arguments)}function ct(){return(ct=(0,p.Z)(function*(y,f){return yield kn(y)._initializationPromise,lt(y,f,!1)})).apply(this,arguments)}function lt(y,f){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,p.Z)(function*(y,f,m=!1){const E=kn(y),A=En(E,f),q=yield new _s(E,A,m).execute();return q&&!m&&(delete q.user._redirectEventId,yield E._persistUserIfCurrent(q.user),yield E._setRedirectUser(null,f)),q})).apply(this,arguments)}function Dt(y){return li.apply(this,arguments)}function li(){return(li=(0,p.Z)(function*(y){const f=Ba(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class vs{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let m=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(f,E)&&(m=!0,this.sendToConsumer(f,E),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function ci(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ia(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=f,m=!0)),m}sendToConsumer(f,m){var E;if(f.error&&!ia(f)){const A=(null===(E=f.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";m.onError(Ie(this.auth,A))}else m.onAuthEvent(f)}isEventForConsumer(f,m){const E=null===m.eventId||!!f.eventId&&f.eventId===m.eventId;return m.filter.includes(f.type)&&E}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(rl(f))}saveEventToCache(f){this.cachedEventUids.add(rl(f)),this.lastProcessedEventTime=Date.now()}}function rl(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function ia({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===f?.code}function di(y){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,p.Z)(function*(y,f={}){return Ot(y,"GET","/v1/projects",f)})).apply(this,arguments)}const mp=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Rr=/^https?/;function _p(){return(_p=(0,p.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield di(y);for(const m of f)try{if(Hn(m))return}catch{}De(y,"unauthorized-domain")})).apply(this,arguments)}function Hn(y){const f=de(),{protocol:m,hostname:E}=new URL(f);if(y.startsWith("chrome-extension://")){const q=new URL(y);return""===q.hostname&&""===E?"chrome-extension:"===m&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===m&&q.hostname===E}if(!Rr.test(m))return!1;if(mp.test(y))return E===y;const A=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(E)}const hh=new Ye(3e4,6e4);function Bc(){const y=wn().___jsl;if(y?.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let m=0;m<y.CP.length;m++)y.CP[m]=null}let lr=null;function yp(y){return lr=lr||function ws(y){return new Promise((f,m)=>{var E,A,N;function q(){Bc(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Bc(),m(Ie(y,"network-request-failed"))},timeout:hh.get()})}if(null!==(A=null===(E=wn().gapi)||void 0===E?void 0:E.iframes)&&void 0!==A&&A.Iframe)f(gapi.iframes.getContext());else{if(null===(N=wn().gapi)||void 0===N||!N.load){const ce=Nc("iframefcb");return wn()[ce]=()=>{gapi.load?q():m(Ie(y,"network-request-failed"))},Bi(`https://apis.google.com/js/api.js?onload=${ce}`).catch(He=>m(He))}q()}}).catch(f=>{throw lr=null,f})}(y),lr}const Yy=new Ye(5e3,15e3),il={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hi=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Za(y){const f=y.config;j(f.authDomain,y,"auth-domain-config-required");const m=f.emulator?ze(f,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,E={apiKey:f.apiKey,appName:y.name,v:re.SDK_VERSION},A=hi.get(y.config.apiHost);A&&(E.eid=A);const N=y._getFrameworks();return N.length&&(E.fw=N.join(",")),`${m}?${(0,O.xO)(E).slice(1)}`}function vo(){return vo=(0,p.Z)(function*(y){const f=yield yp(y),m=wn().gapi;return j(m,y,"internal-error"),f.open({where:document.body,url:Za(y),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:il,dontclear:!0},E=>new Promise(function(){var A=(0,p.Z)(function*(N,q){yield E.restyle({setHideOnLeave:!1});const ce=Ie(y,"network-request-failed"),He=wn().setTimeout(()=>{q(ce)},Yy.get());function Xe(){wn().clearTimeout(He),N(E)}E.ping(Xe).then(Xe,()=>{q(ce)})});return function(N,q){return A.apply(this,arguments)}}()))}),vo.apply(this,arguments)}const fh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class bt{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $c(y,f,m,E,A,N){j(y.config.authDomain,y,"auth-domain-config-required"),j(y.config.apiKey,y,"invalid-api-key");const q={apiKey:y.config.apiKey,appName:y.name,authType:m,redirectUrl:E,v:re.SDK_VERSION,eventId:A};if(f instanceof hs){f.setDefaultLanguage(y.languageCode),q.providerId=f.providerId||"",(0,O.xb)(f.getCustomParameters())||(q.customParameters=JSON.stringify(f.getCustomParameters()));for(const[He,Xe]of Object.entries(N||{}))q[He]=Xe}if(f instanceof Uo){const He=f.getScopes().filter(Xe=>""!==Xe);He.length>0&&(q.scopes=He.join(","))}y.tenantId&&(q.tid=y.tenantId);const ce=q;for(const He of Object.keys(ce))void 0===ce[He]&&delete ce[He];return`${function Hs({config:y}){return y.emulator?ze(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,O.xO)(ce).slice(1)}`}const mh="webStorageSupport",_h=class bm{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=co,this._completeRedirectFn=lt,this._overrideRedirectResult=ch}_openPopup(f,m,E,A){var N=this;return(0,p.Z)(function*(){var q;Ue(null===(q=N.eventManagers[f._key()])||void 0===q?void 0:q.manager,"_initialize() not called before _openPopup()");const ce=$c(f,m,E,de(),A);return function jc(y,f,m,E=500,A=600){const N=Math.max((window.screen.availHeight-A)/2,0).toString(),q=Math.max((window.screen.availWidth-E)/2,0).toString();let ce="";const He=Object.assign(Object.assign({},fh),{width:E.toString(),height:A.toString(),top:N,left:q}),Xe=(0,O.z$)().toLowerCase();m&&(ce=Qt(Xe)?"_blank":m),ot(Xe)&&(f=f||"http://localhost",He.scrollbars="yes");const St=Object.entries(He).reduce((Gn,[ns,yl])=>`${Gn}${ns}=${yl},`,"");if(function Pr(y=(0,O.z$)()){var f;return or(y)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(Xe)&&"_self"!==ce)return function Qy(y,f){const m=document.createElement("a");m.href=y,m.target=f;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(E)}(f||"",ce),new bt(null);const vt=window.open(f||"",ce,St);j(vt,y,"popup-blocked");try{vt.focus()}catch{}return new bt(vt)}(f,ce,Ba())})()}_openRedirect(f,m,E,A){var N=this;return(0,p.Z)(function*(){return yield N._originValidation(f),function ja(y){wn().location.href=y}($c(f,m,E,de(),A)),new Promise(()=>{})})()}_initialize(f){const m=f._key();if(this.eventManagers[m]){const{manager:A,promise:N}=this.eventManagers[m];return A?Promise.resolve(A):(Ue(N,"If manager is not set, promise should be"),N)}const E=this.initAndGetManager(f);return this.eventManagers[m]={promise:E},E.catch(()=>{delete this.eventManagers[m]}),E}initAndGetManager(f){var m=this;return(0,p.Z)(function*(){const E=yield function PE(y){return vo.apply(this,arguments)}(f),A=new vs(f);return E.register("authEvent",N=>(j(N?.authEvent,f,"invalid-auth-event"),{status:A.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[f._key()]={manager:A},m.iframes[f._key()]=E,A})()}_isIframeWebStorageSupported(f,m){this.iframes[f._key()].send(mh,{type:mh},A=>{var N;const q=null===(N=A?.[0])||void 0===N?void 0:N[mh];void 0!==q&&m(!!q),De(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function dh(y){return _p.apply(this,arguments)}(f)),this.originValidationPromises[m]}get _shouldInitProactively(){return Xf()||Bt()||or()}};class OE{constructor(f){this.factorId=f}_process(f,m,E){switch(m.type){case"enroll":return this._finalizeEnroll(f,m.credential,E);case"signin":return this._finalizeSignIn(f,m.credential);default:return Ee("unexpected MultiFactorSessionType")}}}class wr extends OE{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new wr(f)}_finalizeEnroll(f,m,E){return function ym(y,f){return Ot(y,"POST","/v2/accounts/mfaEnrollment:finalize",et(y,f))}(f,{idToken:m,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,m){return function ap(y,f){return Ot(y,"POST","/v2/accounts/mfaSignIn:finalize",et(y,f))}(f,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let er=(()=>{class y{constructor(){}static assertion(m){return wr._fromCredential(m)}}return y.FACTOR_ID="phone",y})();var Ya="@firebase/auth";class yh{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var m=this;return(0,p.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const m=this.auth.onIdTokenChanged(E=>{f(E?.stsTokenManager.accessToken||null)});this.internalListeners.set(f,m),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const m=this.internalListeners.get(f);m&&(this.internalListeners.delete(f),m(),this.updateProactiveRefresh())}assertAuthConfigured(){j(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ci(){return window}function Dp(){return(Dp=(0,p.Z)(function*(y,f,m){var E;const{BuildInfo:A}=Ci();Ue(f.sessionId,"AuthEvent did not contain a session ID");const N=yield Wc(f.sessionId),q={};return or()?q.ibi=A.packageName:Et()?q.apn=A.packageName:De(y,"operation-not-supported-in-this-environment"),A.displayName&&(q.appDisplayName=A.displayName),q.sessionId=N,$c(y,m,f.type,void 0,null!==(E=f.eventId)&&void 0!==E?E:void 0,q)})).apply(this,arguments)}function Gc(){return(Gc=(0,p.Z)(function*(y){const{BuildInfo:f}=Ci(),m={};or()?m.iosBundleId=f.packageName:Et()?m.androidPackageName=f.packageName:De(y,"operation-not-supported-in-this-environment"),yield di(y,m)})).apply(this,arguments)}function Ja(){return(Ja=(0,p.Z)(function*(y,f,m){const{cordova:E}=Ci();let A=()=>{};try{yield new Promise((N,q)=>{let ce=null;function He(){var vt;N();const Gn=null===(vt=E.plugins.browsertab)||void 0===vt?void 0:vt.close;"function"==typeof Gn&&Gn(),"function"==typeof m?.close&&m.close()}function Xe(){ce||(ce=window.setTimeout(()=>{q(Ie(y,"redirect-cancelled-by-user"))},2e3))}function St(){"visible"===document?.visibilityState&&Xe()}f.addPassiveListener(He),document.addEventListener("resume",Xe,!1),Et()&&document.addEventListener("visibilitychange",St,!1),A=()=>{f.removePassiveListener(He),document.removeEventListener("resume",Xe,!1),document.removeEventListener("visibilitychange",St,!1),ce&&window.clearTimeout(ce)}})}finally{A()}})).apply(this,arguments)}function Wc(y){return al.apply(this,arguments)}function al(){return(al=(0,p.Z)(function*(y){const f=ul(y),m=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(m)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function ul(y){if(Ue(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),m=new Uint8Array(f);for(let E=0;E<y.length;E++)m[E]=y.charCodeAt(E);return m}(0,O.Pz)("authIdTokenMaxAge"),function Hc(y){(0,re._registerComponent)(new fe.wA("auth",(f,{options:m})=>{const E=f.getProvider("app").getImmediate(),A=f.getProvider("heartbeat"),{apiKey:N,authDomain:q}=E.options;return((ce,He)=>{j(N&&!N.includes(":"),"invalid-api-key",{appName:ce.name}),j(!q?.includes(":"),"argument-error",{appName:ce.name});const Xe={apiKey:N,authDomain:q,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bu(y)},St=new Gd(ce,He,Xe);return function se(y,f){const m=f?.persistence||[],E=(Array.isArray(m)?m:[m]).map(gt);f?.errorMap&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(E,f?.popupRedirectResolver)}(St,m),St})(E,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,m,E)=>{f.getProvider("auth-internal").initialize()})),(0,re._registerComponent)(new fe.wA("auth-internal",f=>{const m=kn(f.getProvider("auth").getImmediate());return new yh(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,re.registerVersion)(Ya,"0.21.1",function Vr(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,re.registerVersion)(Ya,"0.21.1","esm2017")}("Browser");class oa extends vs{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(f)),super.onEvent(f)}initialized(){var f=this;return(0,p.Z)(function*(){yield f.initPromise})()}}function Ap(y){return zc.apply(this,arguments)}function zc(){return(zc=(0,p.Z)(function*(y){const f=yield cl()._get(xp(y));return f&&(yield cl()._remove(xp(y))),f})).apply(this,arguments)}function Jy(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const E=Math.floor(Math.random()*f.length);y.push(f.charAt(E))}return y.join("")}function cl(){return gt(Sc)}function xp(y){return K("authEvent",y.config.apiKey,y.name)}function qc(y){if(!y?.includes("?"))return{};const[f,...m]=y.split("?");return(0,O.zd)(m.join("?"))}const dl=class wh{constructor(){this._redirectPersistence=co,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=lt,this._overrideRedirectResult=ch}_initialize(f){var m=this;return(0,p.Z)(function*(){const E=f._key();let A=m.eventManagers.get(E);return A||(A=new oa(f),m.eventManagers.set(E,A),m.attachCallbackListeners(f,A)),A})()}_openPopup(f){De(f,"operation-not-supported-in-this-environment")}_openRedirect(f,m,E,A){var N=this;return(0,p.Z)(function*(){!function vh(y){var f,m,E,A,N,q,ce,He,Xe,St;const vt=Ci();j("function"==typeof(null===(f=vt?.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),j(typeof(null===(m=vt?.BuildInfo)||void 0===m?void 0:m.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),j("function"==typeof(null===(N=null===(A=null===(E=vt?.cordova)||void 0===E?void 0:E.plugins)||void 0===A?void 0:A.browsertab)||void 0===N?void 0:N.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),j("function"==typeof(null===(He=null===(ce=null===(q=vt?.cordova)||void 0===q?void 0:q.plugins)||void 0===ce?void 0:ce.browsertab)||void 0===He?void 0:He.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),j("function"==typeof(null===(St=null===(Xe=vt?.cordova)||void 0===Xe?void 0:Xe.InAppBrowser)||void 0===St?void 0:St.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const q=yield N._initialize(f);yield q.initialized(),q.resetRedirect(),function gp(){rt.clear()}(),yield N._originValidation(f);const ce=function ll(y,f,m=null){return{type:f,eventId:m,urlResponse:null,sessionId:Jy(),postBody:null,tenantId:y.tenantId,error:Ie(y,"no-auth-event")}}(f,E,A);yield function Sp(y,f){return cl()._set(xp(y),f)}(f,ce);const He=yield function ol(y,f,m){return Dp.apply(this,arguments)}(f,ce,m),Xe=yield function Xa(y){const{cordova:f}=Ci();return new Promise(m=>{f.plugins.browsertab.isAvailable(E=>{let A=null;E?f.plugins.browsertab.openUrl(y):A=f.InAppBrowser.open(y,function Po(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),m(A)})})}(He);return function Tp(y,f,m){return Ja.apply(this,arguments)}(f,q,Xe)})()}_isIframeWebStorageSupported(f,m){throw new Error("Method not implemented.")}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Qa(y){return Gc.apply(this,arguments)}(f)),this.originValidationPromises[m]}attachCallbackListeners(f,m){const{universalLinks:E,handleOpenURL:A,BuildInfo:N}=Ci(),q=setTimeout((0,p.Z)(function*(){yield Ap(f),m.onEvent(Sm())}),500),ce=function(){var St=(0,p.Z)(function*(vt){clearTimeout(q);const Gn=yield Ap(f);let ns=null;Gn&&vt?.url&&(ns=function Xy(y,f){var m,E;const A=function tv(y){const f=qc(y),m=f.link?decodeURIComponent(f.link):void 0,E=qc(m).link,A=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return qc(A).link||A||E||m||y}(f);if(A.includes("/__/auth/callback")){const N=qc(A),q=N.firebaseError?function ev(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(N.firebaseError)):null,ce=null===(E=null===(m=q?.code)||void 0===m?void 0:m.split("auth/"))||void 0===E?void 0:E[1],He=ce?Ie(ce):null;return He?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:He,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:A,postBody:null}}return null}(Gn,vt.url)),m.onEvent(ns||Sm())});return function(Gn){return St.apply(this,arguments)}}();typeof E<"u"&&"function"==typeof E.subscribe&&E.subscribe(null,ce);const He=A,Xe=`${N.packageName.toLowerCase()}://`;Ci().handleOpenURL=function(){var St=(0,p.Z)(function*(vt){if(vt.toLowerCase().startsWith(Xe)&&ce({url:vt}),"function"==typeof He)try{He(vt)}catch(Gn){console.error(Gn)}});return function(vt){return St.apply(this,arguments)}}()}};function Sm(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ie("no-auth-event")}}function hl(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function fl(y=(0,O.z$)()){return!("file:"!==hl()&&"ionic:"!==hl()&&"capacitor:"!==hl()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ch(){try{const y=self.localStorage,f=Ba();if(y)return y.setItem(f,"1"),y.removeItem(f),!function Mp(y=(0,O.z$)()){return function wo(){return(0,O.w1)()&&11===document?.documentMode}()||function xm(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch{return Eo()&&(0,O.hl)()}return!1}function Eo(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Kc(){return(function Am(){return"http:"===hl()||"https:"===hl()}()||(0,O.ru)()||fl())&&!function Ih(){return(0,O.b$)()||(0,O.UG)()}()&&Ch()&&!Eo()}function Np(){return fl()&&typeof document<"u"}function pl(){return(pl=(0,p.Z)(function*(){return!!Np()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const cr={LOCAL:"local",NONE:"none",SESSION:"session"},nu=j,gl="persistence";function Dh(y){return Qc.apply(this,arguments)}function Qc(){return(Qc=(0,p.Z)(function*(y){yield y._initializationPromise;const f=Es(),m=K(gl,y.config.apiKey,y.name);f&&f.setItem(m,y._getPersistence())})).apply(this,arguments)}function Es(){var y;try{return(null===(y=function bh(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const kp=j;class fi{constructor(){this.browserResolver=gt(_h),this.cordovaResolver=gt(dl),this.underlyingResolver=null,this._redirectPersistence=co,this._completeRedirectFn=lt,this._overrideRedirectResult=ch}_initialize(f){var m=this;return(0,p.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,m,E,A){var N=this;return(0,p.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(f,m,E,A)})()}_openRedirect(f,m,E,A){var N=this;return(0,p.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(f,m,E,A)})()}_isIframeWebStorageSupported(f,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,m)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Np()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return kp(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,p.Z)(function*(){if(f.underlyingResolver)return;const m=yield function Zc(){return pl.apply(this,arguments)}();f.underlyingResolver=m?f.cordovaResolver:f.browserResolver})()}}function ml(y){return y.unwrap()}function Th(y){return Rm(y)}function Rm(y){const{_tokenResponse:f}=y instanceof O.ZR?y.customData:y;if(!f)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return Vc.credentialFromResult(y);const m=f.providerId;if(!m||"password"===m)return null;let E;switch(m){case"google.com":E=ep;break;case"facebook.com":E=dc;break;case"github.com":E=tp;break;case"twitter.com":E=gm;break;default:const{oauthIdToken:A,oauthAccessToken:N,oauthTokenSecret:q,pendingToken:ce,nonce:He}=f;return N||q||A||ce?ce?m.startsWith("saml.")?Bo._create(m,ce):wi._fromParams({providerId:m,signInMethod:m,pendingToken:ce,idToken:A,accessToken:N}):new Ma(m).credential({idToken:A,accessToken:N,rawNonce:He}):null}return y instanceof O.ZR?E.credentialFromError(y):E.credentialFromResult(y)}function bi(y,f){return f.catch(m=>{throw m instanceof O.ZR&&function ru(y,f){var m;const E=null===(m=f.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===f?.code)f.resolver=new Op(y,function xr(y,f){var m;const E=(0,O.m9)(y),A=f;return j(f.customData.operationType,E,"argument-error"),j(null===(m=A.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,E,"argument-error"),Dc._fromError(E,A)}(y,f));else if(E){const A=Rm(f),N=f;A&&(N.credential=A,N.tenantId=E.tenantId||void 0,N.email=E.email||void 0,N.phoneNumber=E.phoneNumber||void 0)}}(y,m),m}).then(m=>{const A=m.user;return{operationType:m.operationType,credential:Th(m),additionalUserInfo:sp(m),user:Io.getOrCreate(A)}})}function Mm(y,f){return Pp.apply(this,arguments)}function Pp(){return(Pp=(0,p.Z)(function*(y,f){const m=yield f;return{verificationId:m.verificationId,confirm:E=>bi(y,m.confirm(E))}})).apply(this,arguments)}class Op{constructor(f,m){this.resolver=m,this.auth=function Jc(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return bi(ml(this.auth),this.resolver.resolveSignIn(f))}}class Io{constructor(f){this._delegate=f,this.multiFactor=function Zo(y){const f=(0,O.m9)(y);return js.has(f)||js.set(f,Va._fromUser(f)),js.get(f)}(f)}static getOrCreate(f){return Io.USER_MAP.has(f)||Io.USER_MAP.set(f,new Io(f)),Io.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var m=this;return(0,p.Z)(function*(){return bi(m.auth,jn(m._delegate,f))})()}linkWithPhoneNumber(f,m){var E=this;return(0,p.Z)(function*(){return Mm(E.auth,function wm(y,f,m){return Zu.apply(this,arguments)}(E._delegate,f,m))})()}linkWithPopup(f){var m=this;return(0,p.Z)(function*(){return bi(m.auth,function Zy(y,f,m){return Kr.apply(this,arguments)}(m._delegate,f,fi))})()}linkWithRedirect(f){var m=this;return(0,p.Z)(function*(){return yield Dh(kn(m.auth)),function Y(y,f,m){return function ee(y,f,m){return _e.apply(this,arguments)}(y,f,m)}(m._delegate,f,fi)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var m=this;return(0,p.Z)(function*(){return bi(m.auth,ao(m._delegate,f))})()}reauthenticateWithPhoneNumber(f,m){return Mm(this.auth,function cp(y,f,m){return dp.apply(this,arguments)}(this._delegate,f,m))}reauthenticateWithPopup(f){return bi(this.auth,function kE(y,f,m){return pp.apply(this,arguments)}(this._delegate,f,fi))}reauthenticateWithRedirect(f){var m=this;return(0,p.Z)(function*(){return yield Dh(kn(m.auth)),function T(y,f,m){return function R(y,f,m){return V.apply(this,arguments)}(y,f,m)}(m._delegate,f,fi)})()}sendEmailVerification(f){return function Xd(y,f){return wc.apply(this,arguments)}(this._delegate,f)}unlink(f){var m=this;return(0,p.Z)(function*(){return yield function Tu(y,f){return jo.apply(this,arguments)}(m._delegate,f),m})()}updateEmail(f){return function Jd(y,f){return eh((0,O.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function La(y,f){return eh((0,O.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function Yu(y,f){return fp.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function lo(y,f){return es.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,m){return function Lu(y,f,m){return ur.apply(this,arguments)}(this._delegate,f,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Io.USER_MAP=new WeakMap;const _l=j;let ed=(()=>{class y{constructor(m,E){if(this.app=m,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=m.options;_l(A,"invalid-api-key",{appName:m.name}),_l(A,"invalid-api-key",{appName:m.name});const N=typeof window<"u"?fi:void 0;this._delegate=E.initialize({options:{persistence:Nm(A,m.name),popupRedirectResolver:N}}),this._delegate._updateErrorMap(We),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Io.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,E){!function oc(y,f,m){const E=kn(y);j(E._canInitEmulator,E,"emulator-config-failed"),j(/^https?:\/\//.test(f),E,"invalid-emulator-scheme");const A=!!m?.disableWarnings,N=Sa(f),{host:q,port:ce}=function Aa(y){const f=Sa(y),m=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!m)return{host:"",port:null};const E=m[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(E);if(A){const N=A[1];return{host:N,port:en(E.substr(N.length+1))}}{const[N,q]=E.split(":");return{host:N,port:en(q)}}}(f);E.config.emulator={url:`${N}//${q}${null===ce?"":`:${ce}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:q,port:ce,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function ar(){function y(){const f=document.createElement("p"),m=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,m,E)}applyActionCode(m){return function Mu(y,f){return Yd.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return Nu(this._delegate,m)}confirmPasswordReset(m,E){return function Oa(y,f,m){return kt.apply(this,arguments)}(this._delegate,m,E)}createUserWithEmailAndPassword(m,E){var A=this;return(0,p.Z)(function*(){return bi(A._delegate,function rp(y,f,m){return yc.apply(this,arguments)}(A._delegate,m,E))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function Ou(y,f){return Fu.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function Qd(y,f){return"EMAIL_SIGNIN"===Ra.parseLink(f)?.operation}(0,m)}getRedirectResult(){var m=this;return(0,p.Z)(function*(){_l(Kc(),m._delegate,"operation-not-supported-in-this-environment");const E=yield function it(y,f){return ct.apply(this,arguments)}(m._delegate,fi);return E?bi(m._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function eu(y,f){kn(y)._logFramework(f)}(this._delegate,m)}onAuthStateChanged(m,E,A){const{next:N,error:q,complete:ce}=Sh(m,E,A);return this._delegate.onAuthStateChanged(N,q,ce)}onIdTokenChanged(m,E,A){const{next:N,error:q,complete:ce}=Sh(m,E,A);return this._delegate.onIdTokenChanged(N,q,ce)}sendSignInLinkToEmail(m,E){return function tn(y,f,m){return vc.apply(this,arguments)}(this._delegate,m,E)}sendPasswordResetEmail(m,E){return function fs(y,f,m){return Pa.apply(this,arguments)}(this._delegate,m,E||void 0)}setPersistence(m){var E=this;return(0,p.Z)(function*(){let A;switch(function Yc(y,f){nu(Object.values(cr).includes(f),y,"invalid-persistence-type"),(0,O.b$)()?nu(f!==cr.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?nu(f===cr.NONE,y,"unsupported-persistence-type"):Eo()?nu(f===cr.NONE||f===cr.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):nu(f===cr.NONE||Ch(),y,"unsupported-persistence-type")}(E._delegate,m),m){case cr.SESSION:A=co;break;case cr.LOCAL:A=(yield gt(_o)._isAvailable())?_o:Sc;break;case cr.NONE:A=B;break;default:return De("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return bi(this._delegate,function Kd(y){return np.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return bi(this._delegate,Ln(this._delegate,m))}signInWithCustomToken(m){return bi(this._delegate,function uo(y,f){return yr.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,E){return bi(this._delegate,function me(y,f,m){return Ln((0,O.m9)(y),cc.credential(f,m))}(this._delegate,m,E))}signInWithEmailLink(m,E){return bi(this._delegate,function Ar(y,f,m){return Fa.apply(this,arguments)}(this._delegate,m,E))}signInWithPhoneNumber(m,E){return Mm(this._delegate,function Xt(y,f,m){return Lc.apply(this,arguments)}(this._delegate,m,E))}signInWithPopup(m){var E=this;return(0,p.Z)(function*(){return _l(Kc(),E._delegate,"operation-not-supported-in-this-environment"),bi(E._delegate,function na(y,f,m){return el.apply(this,arguments)}(E._delegate,m,fi))})()}signInWithRedirect(m){var E=this;return(0,p.Z)(function*(){return _l(Kc(),E._delegate,"operation-not-supported-in-this-environment"),yield Dh(E._delegate),function tl(y,f,m){return function nl(y,f,m){return D.apply(this,arguments)}(y,f,m)}(E._delegate,m,fi)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function _c(y,f){return ku.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=cr,y})();function Sh(y,f,m){let E=y;"function"!=typeof y&&({next:E,error:f,complete:m}=y);const A=E;return{next:q=>A(q&&Io.getOrCreate(q)),error:f,complete:m}}function Nm(y,f){const m=function Xc(y,f){const m=Es();if(!m)return[];const E=K(gl,y,f);switch(m.getItem(E)){case cr.NONE:return[B];case cr.LOCAL:return[_o,co];case cr.SESSION:return[co];default:return[]}}(y,f);if(typeof self<"u"&&!m.includes(_o)&&m.push(_o),typeof window<"u")for(const E of[Sc,co])m.includes(E)||m.push(E);return m.includes(B)||m.push(B),m}class td{constructor(){this.providerId="phone",this._delegate=new Vc(ml(Q.Z.auth()))}static credential(f,m){return Vc.credential(f,m)}verifyPhoneNumber(f,m){return this._delegate.verifyPhoneNumber(f,m)}unwrap(){return this._delegate}}td.PHONE_SIGN_IN_METHOD=Vc.PHONE_SIGN_IN_METHOD,td.PROVIDER_ID=Vc.PROVIDER_ID;const km=j;class rv{constructor(f,m,E=Q.Z.app()){var A;km(null===(A=E.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new Ku(f,m,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function FE(y){y.INTERNAL.registerComponent(new fe.wA("auth-compat",f=>{const m=f.getProvider("app-compat").getImmediate(),E=f.getProvider("auth");return new ed(m,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:cc,FacebookAuthProvider:dc,GithubAuthProvider:tp,GoogleAuthProvider:ep,OAuthProvider:Ma,SAMLAuthProvider:Ji,PhoneAuthProvider:td,PhoneMultiFactorGenerator:er,RecaptchaVerifier:rv,TwitterAuthProvider:gm,Auth:ed,AuthCredential:Bn,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.3.1")}(Q.Z)},8766:(ft,be,F)=>{F.d(be,{Lj:()=>De,X3:()=>Le});var p=F(5861);let O,re;const fe=new WeakMap,le=new WeakMap,ue=new WeakMap,H=new WeakMap,G=new WeakMap;let Te={get(j,Ee,Ue){if(j instanceof IDBTransaction){if("done"===Ee)return le.get(j);if("objectStoreNames"===Ee)return j.objectStoreNames||ue.get(j);if("store"===Ee)return Ue.objectStoreNames[1]?void 0:Ue.objectStore(Ue.objectStoreNames[0])}return Ae(j[Ee])},set:(j,Ee,Ue)=>(j[Ee]=Ue,!0),has:(j,Ee)=>j instanceof IDBTransaction&&("done"===Ee||"store"===Ee)||Ee in j};function he(j){return"function"==typeof j?function ut(j){return j!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ie(){return re||(re=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(j)?function(...Ee){return j.apply(Se(this),Ee),Ae(fe.get(this))}:function(...Ee){return Ae(j.apply(Se(this),Ee))}:function(Ee,...Ue){const Ke=j.call(Se(this),Ee,...Ue);return ue.set(Ke,Ee.sort?Ee.sort():[Ee]),Ae(Ke)}}(j):(j instanceof IDBTransaction&&function Be(j){if(le.has(j))return;const Ee=new Promise((Ue,Ke)=>{const gt=()=>{j.removeEventListener("complete",Je),j.removeEventListener("error",se),j.removeEventListener("abort",se)},Je=()=>{Ue(),gt()},se=()=>{Ke(j.error||new DOMException("AbortError","AbortError")),gt()};j.addEventListener("complete",Je),j.addEventListener("error",se),j.addEventListener("abort",se)});le.set(j,Ee)}(j),((j,Ee)=>Ee.some(Ue=>j instanceof Ue))(j,function ne(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(j,Te):j)}function Ae(j){if(j instanceof IDBRequest)return function Z(j){const Ee=new Promise((Ue,Ke)=>{const gt=()=>{j.removeEventListener("success",Je),j.removeEventListener("error",se)},Je=()=>{Ue(Ae(j.result)),gt()},se=()=>{Ke(j.error),gt()};j.addEventListener("success",Je),j.addEventListener("error",se)});return Ee.then(Ue=>{Ue instanceof IDBCursor&&fe.set(Ue,j)}).catch(()=>{}),G.set(Ee,j),Ee}(j);if(H.has(j))return H.get(j);const Ee=he(j);return Ee!==j&&(H.set(j,Ee),G.set(Ee,j)),Ee}const Se=j=>G.get(j);function Le(j,Ee,{blocked:Ue,upgrade:Ke,blocking:gt,terminated:Je}={}){const se=indexedDB.open(j,Ee),de=Ae(se);return Ke&&se.addEventListener("upgradeneeded",we=>{Ke(Ae(se.result),we.oldVersion,we.newVersion,Ae(se.transaction))}),Ue&&se.addEventListener("blocked",()=>Ue()),de.then(we=>{Je&&we.addEventListener("close",()=>Je()),gt&&we.addEventListener("versionchange",()=>gt())}).catch(()=>{}),de}function De(j,{blocked:Ee}={}){const Ue=indexedDB.deleteDatabase(j);return Ee&&Ue.addEventListener("blocked",()=>Ee()),Ae(Ue).then(()=>{})}const Ie=["get","getKey","getAll","getAllKeys","count"],xe=["put","add","delete","clear"],Fe=new Map;function Pe(j,Ee){if(!(j instanceof IDBDatabase)||Ee in j||"string"!=typeof Ee)return;if(Fe.get(Ee))return Fe.get(Ee);const Ue=Ee.replace(/FromIndex$/,""),Ke=Ee!==Ue,gt=xe.includes(Ue);if(!(Ue in(Ke?IDBIndex:IDBObjectStore).prototype)||!gt&&!Ie.includes(Ue))return;const Je=function(){var se=(0,p.Z)(function*(de,...we){const Re=this.transaction(de,gt?"readwrite":"readonly");let Ve=Re.store;return Ke&&(Ve=Ve.index(we.shift())),(yield Promise.all([Ve[Ue](...we),gt&&Re.done]))[0]});return function(we){return se.apply(this,arguments)}}();return Fe.set(Ee,Je),Je}!function We(j){Te=j(Te)}(j=>({...j,get:(Ee,Ue,Ke)=>Pe(Ee,Ue)||j.get(Ee,Ue,Ke),has:(Ee,Ue)=>!!Pe(Ee,Ue)||j.has(Ee,Ue)}))},5861:(ft,be,F)=>{function p(O,re,ne,ie,fe,le,ue){try{var H=O[le](ue),G=H.value}catch(Z){return void ne(Z)}H.done?re(G):Promise.resolve(G).then(ie,fe)}function Q(O){return function(){var re=this,ne=arguments;return new Promise(function(ie,fe){var le=O.apply(re,ne);function ue(G){p(le,ie,fe,ue,H,"next",G)}function H(G){p(le,ie,fe,ue,H,"throw",G)}ue(void 0)})}}F.d(be,{Z:()=>Q})}},ft=>{ft(ft.s=455)}]);